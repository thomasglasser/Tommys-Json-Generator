{"version":3,"mappings":"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AAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAC/I,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAC9I,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAC9I,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAC5I,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAC5I,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAC/I,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAC5I,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,EAAG,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,EAAG,GAAI,GAAI,IAAK,GAAI,GAAI,GAC/I,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,GAAG,EACjCC,GAA4B7B,GAAa,CAAC,CAAC,IAAK,CAAC,EAAG,CAAC,IAAK,CAAC,EAAG,CAAC,GAAI,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,CAAC,EACpFwB,GAAW,aAAetB,GAAU0B,GAAyB,IAAI,CAAC3Q,EAAOrD,IAAU,CAACqD,EAAO4Q,GAA0BjU,EAAM,CAAC,CAAC,EAE7H,MAAMkU,GAA0B,CAAC,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAE,EACvIC,GAA2B/B,GAAa,CAAC,CAAC,GAAI,CAAC,CAAC,CAAC,EACvDwB,GAAW,aAAetB,GAAU4B,GAAwB,IAAI,CAAC7Q,EAAOrD,IAAU,CAACqD,EAAO8Q,GAAyBnU,EAAM,CAAC,CAAC,EAE3H4T,GAAW,cAAgB,IAAIA,GAAWA,GAAW,aAAcpB,GAAK,YAAa3B,GAAW,EAAGC,GAASL,EAAQ,EAEpHmD,GAAW,cAAgB,IAAIA,GAAWA,GAAW,aAAcpB,GAAK,YAAa,EAAG9B,GAASD,EAAQ,EAEzGmD,GAAW,eAAiB,IAAIA,GAAW,KAAMpB,GAAK,aAAc,EAAG7B,GAAUM,EAAW,EAI5F,MAAMmD,GAAgB,EAChBC,GAAgB,EAEtB,SAASC,GAAOC,EAAaC,EAAUC,EAAaC,EAAWC,EAAM,CACpE,MAAMlC,EAAO,KACbA,EAAK,YAAc8B,EACnB9B,EAAK,SAAW+B,EAChB/B,EAAK,YAAcgC,EACnBhC,EAAK,UAAYiC,EACjBjC,EAAK,KAAOkC,CACb,CAEA,MAAMC,GAAS,EACTC,GAAO,EACPC,GAAO,EACPC,GAAe,CACpB,IAAIT,GAAO,EAAG,EAAG,EAAG,EAAGM,EAAM,EAC7B,IAAIN,GAAO,EAAG,EAAG,EAAG,EAAGO,EAAI,EAC3B,IAAIP,GAAO,EAAG,EAAG,GAAI,EAAGO,EAAI,EAC5B,IAAIP,GAAO,EAAG,EAAG,GAAI,GAAIO,EAAI,EAC7B,IAAIP,GAAO,EAAG,EAAG,GAAI,GAAIQ,EAAI,EAC7B,IAAIR,GAAO,EAAG,GAAI,GAAI,GAAIQ,EAAI,EAC9B,IAAIR,GAAO,EAAG,GAAI,IAAK,IAAKQ,EAAI,EAChC,IAAIR,GAAO,EAAG,GAAI,IAAK,IAAKQ,EAAI,EAChC,IAAIR,GAAO,GAAI,IAAK,IAAK,KAAMQ,EAAI,EACnC,IAAIR,GAAO,GAAI,IAAK,IAAK,KAAMQ,EAAI,CACpC,EAEME,GAAW,CAAC,kBAEjB,aACA,GACA,GACA,eACA,aACA,GACA,eACA,GACA,EAAE,EAGGC,GAAW,EAGXC,GAAY,EAGZC,GAAgB,EAGhBC,GAAa,EAGbC,GAAc,GAEdC,GAAa,GACbC,GAAa,IACbC,GAAe,IAGfC,GAAa,EAEbC,GAAe,EACfC,GAAe,EACfC,GAAY,EAEZC,GAAY,EACZC,GAAY,IACZC,GAAiBD,GAAYD,GAAY,EAE/C,SAASG,GAAQrD,EAAMzW,EAAGmB,EAAG4Y,EAAO,CACnC,MAAMC,EAAMvD,EAAKzW,EAAI,GACfia,EAAMxD,EAAKtV,EAAI,GACrB,OAAQ6Y,EAAMC,GAAQD,GAAOC,GAAOF,EAAM/Z,IAAM+Z,EAAM5Y,EACvD,CAEA,SAAS+Y,IAAU,CAElB,MAAM3D,EAAO,KACb,IAAI4D,EACAC,EAEAC,EASAC,EAEAC,EACAC,EACAC,EAEAC,EASAC,EAIAC,EAKAC,EAEAC,EACAC,EACAC,EACAC,EAMAC,EAKAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAIAC,EAIAC,EAKAC,EAMAC,EACAC,EAGAC,EAGAC,EAEAC,EACAC,EACAC,EAEJ,MAAMC,EAAS,IAAI9F,GACb+F,GAAS,IAAI/F,GACbgG,EAAU,IAAIhG,GAQpBC,EAAK,MAAQ,GAmBb,IAAIgG,EAEAC,EAIAvZ,EACAwZ,EAIAC,GAIAC,GAGJpG,EAAK,SAAW,GAGhBA,EAAK,KAAO,GAEZ0F,EAAY,GACZC,EAAY,GACZC,EAAU,GAEV,SAASS,GAAU,CAClBjC,EAAc,EAAIJ,EAElBM,EAAKE,EAAY,GAAK,EACtB,QAASla,EAAI,EAAGA,EAAIka,EAAY,EAAGla,IAClCga,EAAKha,GAAK,EAIX+a,EAAiB/C,GAAagD,GAAO,SACrCE,EAAalD,GAAagD,GAAO,YACjCG,EAAanD,GAAagD,GAAO,YACjCF,EAAmB9C,GAAagD,GAAO,UAEvCN,EAAW,EACXJ,EAAc,EACdM,EAAY,EACZL,EAAeM,EAAc/B,GAAY,EACzC2B,EAAkB,EAClBR,EAAQ,CACR,CAED,SAAS+B,GAAa,CACrB,IAAIhc,EAEJ,IAAKA,EAAI,EAAGA,EAAI+T,GAAS/T,IACxBob,EAAUpb,EAAI,GAAK,EACpB,IAAKA,EAAI,EAAGA,EAAI2T,GAAS3T,IACxBqb,EAAUrb,EAAI,GAAK,EACpB,IAAKA,EAAI,EAAGA,EAAI4T,GAAU5T,IACzBsb,EAAQtb,EAAI,GAAK,EAElBob,EAAUnH,GAAY,GAAK,EAC3ByB,EAAK,QAAUA,EAAK,WAAa,EACjCiG,EAAWvZ,EAAU,CACrB,CAGD,SAAS6Z,GAAU,CAElBV,EAAO,SAAWH,EAClBG,EAAO,UAAY1E,GAAW,cAE9B2E,GAAO,SAAWH,EAClBG,GAAO,UAAY3E,GAAW,cAE9B4E,EAAQ,SAAWH,EACnBG,EAAQ,UAAY5E,GAAW,eAE/BgF,GAAS,EACTC,GAAW,EACXF,EAAe,EAGfI,GACA,CAODtG,EAAK,WAAa,SAAUE,EAC3BxV,EACC,CACD,MAAM8b,EAAOxG,EAAK,KACZ3V,EAAImc,EAAK9b,GACf,IAAII,GAAIJ,GAAK,EACb,KAAOI,IAAKkV,EAAK,WAEZlV,GAAIkV,EAAK,UAAYuD,GAAQrD,EAAMsG,EAAK1b,GAAI,GAAI0b,EAAK1b,IAAIkV,EAAK,KAAK,GACtElV,KAGGyY,IAAQrD,EAAM7V,EAAGmc,EAAK1b,IAAIkV,EAAK,KAAK,IAIxCwG,EAAK9b,GAAK8b,EAAK1b,IACfJ,EAAII,GAEJA,KAAM,EAEP0b,EAAK9b,GAAKL,CACZ,EAIC,SAASoc,GAAUvG,EAClBY,EACC,CACD,IAAI4F,EAAU,GACVC,EACAC,GAAU1G,EAAK,EAAI,EAAI,GACvB2G,GAAQ,EACRC,GAAY,EACZC,GAAY,EAEZH,KAAY,IACfE,GAAY,IACZC,GAAY,GAEb7G,GAAMY,EAAW,GAAK,EAAI,GAAK,MAE/B,QAASrX,GAAI,EAAGA,IAAKqX,EAAUrX,KAC9Bkd,EAASC,GACTA,GAAU1G,GAAMzW,GAAI,GAAK,EAAI,GACzB,IAAEod,GAAQC,IAAaH,GAAUC,MAE1BC,GAAQE,GAClBnB,EAAQe,EAAS,IAAME,GACbF,IAAW,GACjBA,GAAUD,GACbd,EAAQe,EAAS,KAClBf,EAAQnH,GAAU,MACRoI,IAAS,GACnBjB,EAAQlH,GAAY,KAEpBkH,EAAQjH,GAAc,KAEvBkI,GAAQ,EACRH,EAAUC,EACNC,KAAY,GACfE,GAAY,IACZC,GAAY,GACFJ,GAAUC,IACpBE,GAAY,EACZC,GAAY,IAEZD,GAAY,EACZC,GAAY,GAGd,CAID,SAASC,IAAgB,CACxB,IAAIC,EAeJ,IAZAR,GAAUf,EAAWG,EAAO,QAAQ,EACpCY,GAAUd,EAAWG,GAAO,QAAQ,EAGpCC,EAAQ,WAAW/F,CAAI,EAQlBiH,EAAc/I,GAAW,EAAG+I,GAAe,GAC3CrB,EAAQ7F,GAAK,SAASkH,GAAe,EAAI,KAAO,EADFA,IAClD,CAID,SAAK,SAAW,GAAKA,EAAc,GAAK,EAAI,EAAI,EAEzCA,CACP,CAID,SAASC,GAASjc,EAAG,CACpB+U,EAAK,YAAYA,EAAK,WAAa/U,CACnC,CAED,SAASkc,GAAUnc,EAAG,CACrBkc,GAASlc,EAAI,GAAI,EACjBkc,GAAUlc,IAAM,EAAK,GAAI,CACzB,CAED,SAASoc,GAAYzc,EAAG,CACvBuc,GAAUvc,GAAK,EAAK,GAAI,EACxBuc,GAAUvc,EAAI,IAAQ,GAAI,CAC1B,CAED,SAAS0c,GAAUzW,EAAOyF,EAAQ,CACjC,IAAIlJ,EACJ,MAAMyT,EAAMvK,EACR+P,GAAWxH,GAAWgC,GACzBzT,EAAMyD,EAENuV,IAAYhZ,GAAOiZ,GAAY,MAC/Be,GAAUhB,EAAM,EAChBA,GAAShZ,IAASyR,GAAWwH,GAC7BA,IAAYxF,EAAMhC,KAGlBuH,IAAavV,GAAUwV,GAAY,MACnCA,IAAYxF,EAEb,CAED,SAAS0G,GAAUrd,EAAGiW,EAAM,CAC3B,MAAMqH,EAAKtd,EAAI,EACfod,GAAUnH,EAAKqH,GAAM,MAAQrH,EAAKqH,EAAK,GAAK,KAAM,CAClD,CAID,SAASC,GAAUtH,EAClBY,EACC,CACD,IAAIrX,EACAid,EAAU,GACVC,GACAC,GAAU1G,EAAK,EAAI,EAAI,GACvB2G,GAAQ,EACRC,GAAY,EACZC,GAAY,EAOhB,IALIH,KAAY,IACfE,GAAY,IACZC,GAAY,GAGRtd,EAAI,EAAGA,GAAKqX,EAAUrX,IAG1B,GAFAkd,GAASC,GACTA,GAAU1G,GAAMzW,EAAI,GAAK,EAAI,GACzB,IAAEod,GAAQC,IAAaH,IAAUC,IAE9B,IAAIC,GAAQE,GAClB,GACCO,GAAUX,GAAQf,CAAO,QACjB,EAAEiB,KAAU,QACXF,KAAW,GACjBA,IAAUD,IACbY,GAAUX,GAAQf,CAAO,EACzBiB,MAEDS,GAAU7I,GAASmH,CAAO,EAC1ByB,GAAUR,GAAQ,EAAG,CAAC,GACZA,IAAS,IACnBS,GAAU5I,GAAWkH,CAAO,EAC5ByB,GAAUR,GAAQ,EAAG,CAAC,IAEtBS,GAAU3I,GAAaiH,CAAO,EAC9ByB,GAAUR,GAAQ,GAAI,CAAC,GAExBA,GAAQ,EACRH,EAAUC,GACNC,KAAY,GACfE,GAAY,IACZC,GAAY,GACFJ,IAAUC,IACpBE,GAAY,EACZC,GAAY,IAEZD,GAAY,EACZC,GAAY,GAGd,CAKD,SAASU,GAAeC,EAAQC,EAAQC,EAAS,CAChD,IAAIja,EAKJ,IAHA0Z,GAAUK,EAAS,IAAK,CAAC,EACzBL,GAAUM,EAAS,EAAG,CAAC,EACvBN,GAAUO,EAAU,EAAG,CAAC,EACnBja,EAAO,EAAGA,EAAOia,EAASja,IAC9B0Z,GAAUzB,EAAQ7F,GAAK,SAASpS,GAAQ,EAAI,GAAI,CAAC,EAElD6Z,GAAU9B,EAAWgC,EAAS,CAAC,EAC/BF,GAAU7B,EAAWgC,EAAS,CAAC,CAC/B,CAGD,SAASE,IAAW,CACfzB,IAAY,IACfe,GAAUhB,EAAM,EAChBA,GAAS,EACTC,GAAW,GACDA,IAAY,IACtBc,GAASf,GAAS,GAAI,EACtBA,MAAY,EACZC,IAAY,EAEb,CAWD,SAAS0B,IAAY,CACpBT,GAAUnE,IAAgB,EAAG,CAAC,EAC9BoE,GAAU/I,GAAW4C,GAAW,YAAY,EAE5C0G,KAMI,EAAI3B,EAAe,GAAKE,GAAW,IACtCiB,GAAUnE,IAAgB,EAAG,CAAC,EAC9BoE,GAAU/I,GAAW4C,GAAW,YAAY,EAC5C0G,MAED3B,EAAe,CACf,CAID,SAAS6B,GAAU7G,EAClB8G,EACC,CACD,IAAIC,EAAYC,EAAWC,GAgB3B,GAfAnI,EAAK,SAASiG,GAAY/E,EAC1BlB,EAAK,OAAOiG,GAAY+B,EAAK,IAC7B/B,IAEI/E,IAAS,EAEZwE,EAAUsC,EAAK,MAEftb,IAEAwU,IACAwE,GAAW3F,GAAK,aAAaiI,GAAM5J,GAAW,GAAK,KACnDuH,EAAU5F,GAAK,OAAOmB,CAAI,EAAI,OAG1B+E,EAAW,QAAY,GAAKX,EAAQ,EAAG,CAI3C,IAFA2C,EAAahC,EAAW,EACxBiC,EAAYlD,EAAWJ,EAClBuD,GAAQ,EAAGA,GAAQlK,GAASkK,KAChCF,GAActC,EAAUwC,GAAQ,IAAM,EAAIpI,GAAK,YAAYoI,KAG5D,GADAF,KAAgB,EACXvb,EAAU,KAAK,MAAMuZ,EAAW,CAAC,GAAMgC,EAAa,KAAK,MAAMC,EAAY,CAAC,EAChF,MAAO,EACR,CAED,OAAQjC,GAAYD,EAAc,CAIlC,CAGD,SAASoC,GAAeC,EAAOC,EAAO,CACrC,IAAIpH,EACA8G,EACAO,GAAK,EACL5H,GACAP,GAEJ,GAAI6F,IAAa,EAChB,GACC/E,EAAOlB,EAAK,SAASuI,IACrBP,EAAKhI,EAAK,OAAOuI,IACjBA,KAEIrH,IAAS,EACZoG,GAAUU,EAAIK,CAAK,GAGnB1H,GAAOZ,GAAK,aAAaiI,GAEzBV,GAAU3G,GAAOvC,GAAW,EAAGiK,CAAK,EAEpCjI,GAAQL,GAAK,YAAYY,IACrBP,KAAU,IACb4H,GAAMjI,GAAK,YAAYY,IACvB0G,GAAUW,EAAI5H,EAAK,GAEpBc,IACAP,GAAOZ,GAAK,OAAOmB,CAAI,EAEvBoG,GAAU3G,GAAM2H,CAAK,EACrBlI,GAAQL,GAAK,YAAYY,IACrBP,KAAU,IACbc,GAAQnB,GAAK,UAAUY,IACvB0G,GAAUnG,EAAMd,EAAK,UAGfmI,GAAKtC,GAGfqB,GAAU/I,GAAW8J,CAAK,EAC1BnC,EAAemC,EAAM9J,GAAY,EAAI,EACrC,CAGD,SAASiK,IAAY,CAChBpC,GAAW,EACde,GAAUhB,EAAM,EACNC,GAAW,GACrBc,GAASf,GAAS,GAAI,EAEvBA,GAAS,EACTC,GAAW,CACX,CAID,SAASqC,GAAWC,EACnB9H,EACA+H,EACC,CACDH,KACAtC,EAAe,EAEXyC,IACHxB,GAAUvG,CAAG,EACbuG,GAAU,CAACvG,CAAG,GAGfZ,EAAK,YAAY,IAAImE,EAAI,SAASuE,EAAKA,EAAM9H,CAAG,EAAGZ,EAAK,OAAO,EAC/DA,EAAK,SAAWY,CAChB,CAGD,SAASgI,GAAiBF,EACzBG,EACAC,EACC,CACDzB,IAAWpE,IAAgB,IAAM6F,EAAM,EAAI,GAAI,CAAC,EAChDL,GAAWC,EAAKG,EAAY,EAAI,CAChC,CAID,SAASE,GAAgBL,EACxBG,EACAC,EACC,CACD,IAAIE,EAAUC,GACVhC,GAAc,EAGd3B,EAAQ,GAEXO,EAAO,WAAW7F,CAAI,EAEtB8F,GAAO,WAAW9F,CAAI,EAStBiH,GAAcD,GAAa,EAI3BgC,EAAYhJ,EAAK,QAAU,EAAI,IAAO,EACtCiJ,GAAejJ,EAAK,WAAa,EAAI,IAAO,EAExCiJ,IAAeD,IAClBA,EAAWC,KAEZD,EAAWC,GAAcJ,EAAa,EAGlCA,EAAa,GAAKG,GAAaN,GAAO,GAQ1CE,GAAiBF,EAAKG,EAAYC,CAAG,EAC3BG,IAAeD,GACzB3B,IAAWnE,IAAgB,IAAM4F,EAAM,EAAI,GAAI,CAAC,EAChDV,GAAejH,GAAW,aAAcA,GAAW,YAAY,IAE/DkG,IAAWlE,IAAa,IAAM2F,EAAM,EAAI,GAAI,CAAC,EAC7CrB,GAAe5B,EAAO,SAAW,EAAGC,GAAO,SAAW,EAAGmB,GAAc,CAAC,EACxEmB,GAAe1C,EAAWC,CAAS,GAMpCW,IAEIwC,GACHN,IAED,CAED,SAASU,GAAiBJ,EAAK,CAC9BC,GAAgBnE,GAAe,EAAIA,EAAc,GAAII,EAAWJ,EAAakE,CAAG,EAChFlE,EAAcI,EACdpB,EAAK,cAAa,CAClB,CAUD,SAASuF,IAAc,CACtB,IAAI1f,EAAGmB,EACHK,EACAme,EAEJ,EAAG,CAIF,GAHAA,EAAQhF,EAAcc,EAAYF,EAG9BoE,IAAS,GAAKpE,IAAa,GAAKE,IAAc,EACjDkE,EAAOpF,UACGoF,GAAQ,GAIlBA,YAMUpE,GAAYhB,EAASA,EAASV,GAAe,CACvDa,EAAI,IAAIA,EAAI,SAASH,EAAQA,EAASA,CAAM,EAAG,CAAC,EAEhDiB,GAAejB,EACfgB,GAAYhB,EACZY,GAAeZ,EAUfva,EAAI+a,EACJvZ,EAAIxB,EACJ,GACCmB,EAAK0Z,EAAK,EAAErZ,GAAK,MACjBqZ,EAAKrZ,GAAML,GAAKoZ,EAASpZ,EAAIoZ,EAAS,QAC9B,EAAEva,IAAM,GAEjBA,EAAIua,EACJ/Y,EAAIxB,EACJ,GACCmB,EAAKyZ,EAAK,EAAEpZ,GAAK,MACjBoZ,EAAKpZ,GAAML,GAAKoZ,EAASpZ,EAAIoZ,EAAS,QAG9B,EAAEva,IAAM,GACjB2f,GAAQpF,CACR,CAED,GAAIJ,EAAK,WAAa,EACrB,OAaDna,EAAIma,EAAK,SAASO,EAAKa,EAAWE,EAAWkE,CAAI,EACjDlE,GAAazb,EAGTyb,GAAa9B,KAChBmB,EAAQJ,EAAIa,GAAY,IACxBT,GAAWA,GAAUI,EAAeR,EAAIa,EAAW,GAAK,KAASN,EAMlE,OAAQQ,EAAY5B,IAAiBM,EAAK,WAAa,EACxD,CAUD,SAASyF,GAAeC,EAAO,CAI9B,IAAIC,EAAiB,MACjBC,EAQJ,IANID,EAAiBzF,EAAmB,IACvCyF,EAAiBzF,EAAmB,KAKxB,CAEZ,GAAIoB,GAAa,EAAG,CAEnB,GADAiE,KACIjE,IAAc,GAAKoE,GAASrK,GAC/B,OAAOuD,GACR,GAAI0C,IAAc,EACjB,KACD,CAoBD,GAlBAF,GAAYE,EACZA,EAAY,EAGZsE,EAAY5E,EAAc2E,GACtBvE,IAAa,GAAKA,GAAYwE,KAEjCtE,EAAaF,EAAWwE,EACxBxE,EAAWwE,EAEXN,GAAiB,EAAK,EAClBtF,EAAK,YAAc,IAOpBoB,EAAWJ,GAAeZ,EAASV,KACtC4F,GAAiB,EAAK,EAClBtF,EAAK,YAAc,GACtB,OAAOpB,EAET,CAGD,OADA0G,GAAiBI,GAASlK,EAAQ,EAC9BwE,EAAK,YAAc,EACd0F,GAASlK,GAAYsD,GAAgBF,GAEvC8G,GAASlK,GAAWuD,GAAaF,EACxC,CAED,SAASgH,GAAcC,EAAW,CACjC,IAAIC,EAAevE,EACfwE,EAAO5E,EACP6E,EACAjJ,GACAkJ,GAAW3E,EACf,MAAM4E,GAAQ/E,EAAYhB,EAASV,GAAiB0B,GAAYhB,EAASV,IAAiB,EAC1F,IAAI0G,GAAcvE,EAKlB,MAAMwE,GAAQ/F,EAERgG,GAASlF,EAAW3B,GAC1B,IAAI8G,GAAYhG,EAAIyF,EAAOE,GAAW,GAClCM,GAAWjG,EAAIyF,EAAOE,IAOtB3E,GAAeK,IAClBmE,IAAiB,GAMdK,GAAc9E,IACjB8E,GAAc9E,GAEf,EAKC,IAJA2E,EAAQH,EAIJ,IAAIG,EAAQC,KAAaM,IAAYjG,EAAI0F,EAAQC,GAAW,IAAMK,IAAahG,EAAI0F,IAAU1F,EAAIyF,IACjGzF,EAAI,EAAE0F,IAAU1F,EAAIyF,EAAO,IAQ/B,IAAQ,EACRC,IAKA,EAAG,OACM1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAU1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAU1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IACzF1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAU1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAU1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IACnF1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAU1F,EAAI,EAAEyF,IAASzF,EAAI,EAAE0F,IAAUD,EAAOM,IAKxE,GAHAtJ,GAAMyC,IAAa6G,GAASN,GAC5BA,EAAOM,GAAS7G,GAEZzC,GAAMkJ,GAAU,CAGnB,GAFA7E,EAAcyE,EACdI,GAAWlJ,GACPA,IAAOoJ,GACV,MACDG,GAAYhG,EAAIyF,EAAOE,GAAW,GAClCM,GAAWjG,EAAIyF,EAAOE,GACtB,SAEQJ,EAAarF,EAAKqF,EAAYO,IAAS,OAAWF,IAAS,EAAEJ,IAAiB,GAExF,OAAIG,IAAY5E,EACR4E,GACD5E,CACP,CAOD,SAASmF,GAAaf,EAAO,CAE5B,IAAIgB,EAAY,EACZC,EAGJ,OAAa,CAKZ,GAAIrF,EAAY5B,GAAe,CAE9B,GADA6F,KACIjE,EAAY5B,IAAiBgG,GAASrK,GACzC,OAAOuD,GAER,GAAI0C,IAAc,EACjB,KACD,CAyBD,GArBIA,GAAa9B,KAChBmB,GAAWA,GAAUI,EAAeR,EAAKa,GAAa5B,GAAY,IAAM,KAASsB,EAGjF4F,EAAahG,EAAKC,GAAS,MAC3BF,EAAKW,EAAWd,GAAUI,EAAKC,GAC/BD,EAAKC,GAASS,GAMXsF,IAAc,IAAOtF,EAAWsF,EAAa,QAAWtG,EAASV,IAIhEiC,GAAYxG,KACf8F,EAAe4E,GAAca,CAAS,GAIpCzF,GAAgBzB,GASnB,GANAmH,EAASxC,GAAU/C,EAAWC,EAAaJ,EAAezB,EAAS,EAEnE8B,GAAaL,EAITA,GAAgBQ,GAAkBH,GAAa9B,GAAW,CAC7DyB,IACA,GACCG,IAEAT,GAAUA,GAASI,EAAeR,EAAKa,GAAa5B,GAAY,IAAM,KAASsB,EAE/E4F,EAAahG,EAAKC,GAAS,MAC3BF,EAAKW,EAAWd,GAAUI,EAAKC,GAC/BD,EAAKC,GAASS,QAIN,EAAEH,IAAiB,GAC5BG,GACL,MACKA,GAAYH,EACZA,EAAe,EACfN,EAAQJ,EAAIa,GAAY,IAExBT,GAAWA,GAAUI,EAAeR,EAAIa,EAAW,GAAK,KAASN,OAQlE6F,EAASxC,GAAU,EAAG5D,EAAIa,GAAY,GAAI,EAC1CE,IACAF,IAED,GAAIuF,IAEHrB,GAAiB,EAAK,EAClBtF,EAAK,YAAc,GACtB,OAAOpB,EAET,CAGD,OADA0G,GAAiBI,GAASlK,EAAQ,EAC9BwE,EAAK,YAAc,EAClB0F,GAASlK,GACLsD,GAEAF,GAEF8G,GAASlK,GAAWuD,GAAaF,EACxC,CAKD,SAAS+H,GAAalB,EAAO,CAE5B,IAAIgB,EAAY,EACZC,EACAE,EAIJ,OAAa,CAMZ,GAAIvF,EAAY5B,GAAe,CAE9B,GADA6F,KACIjE,EAAY5B,IAAiBgG,GAASrK,GACzC,OAAOuD,GAER,GAAI0C,IAAc,EACjB,KACD,CAsCD,GAjCIA,GAAa9B,KAChBmB,GAAWA,GAAUI,EAAeR,EAAKa,GAAa5B,GAAY,IAAM,KAASsB,EAEjF4F,EAAahG,EAAKC,GAAS,MAC3BF,EAAKW,EAAWd,GAAUI,EAAKC,GAC/BD,EAAKC,GAASS,GAIfG,EAAcN,EACdC,EAAaG,EACbJ,EAAezB,GAAY,EAEvBkH,IAAc,GAAKnF,EAAcE,IAAoBL,EAAWsF,EAAa,QAAWtG,EAASV,KAKhGiC,GAAYxG,KACf8F,EAAe4E,GAAca,CAAS,GAInCzF,GAAgB,IAAMU,GAAYzG,IAAe+F,GAAgBzB,IAAa4B,EAAWC,EAAc,QAI1GJ,EAAezB,GAAY,IAMzB+B,GAAe/B,IAAayB,GAAgBM,EAAa,CAC5DsF,EAAazF,EAAWE,EAAY9B,GAKpCmH,EAASxC,GAAU/C,EAAW,EAAIF,EAAYK,EAAc/B,EAAS,EAMrE8B,GAAaC,EAAc,EAC3BA,GAAe,EACf,EACK,EAAEH,GAAYyF,IACjBlG,GAAWA,GAAUI,EAAeR,EAAKa,GAAa5B,GAAY,IAAM,KAASsB,EAEjF4F,EAAahG,EAAKC,GAAS,MAC3BF,EAAKW,EAAWd,GAAUI,EAAKC,GAC/BD,EAAKC,GAASS,SAEP,EAAEG,IAAgB,GAK3B,GAJAJ,EAAkB,EAClBF,EAAezB,GAAY,EAC3B4B,IAEIuF,IACHrB,GAAiB,EAAK,EAClBtF,EAAK,YAAc,GACtB,OAAOpB,EAEb,SAAcuC,IAAoB,GAa9B,GAPAwF,EAASxC,GAAU,EAAG5D,EAAIa,EAAW,GAAK,GAAI,EAE1CuF,GACHrB,GAAiB,EAAK,EAEvBlE,IACAE,IACItB,EAAK,YAAc,EACtB,OAAOpB,QAKRuC,EAAkB,EAClBC,IACAE,GAED,CAQD,OANIH,IAAoB,IACvBwF,EAASxC,GAAU,EAAG5D,EAAIa,EAAW,GAAK,GAAI,EAC9CD,EAAkB,GAEnBmE,GAAiBI,GAASlK,EAAQ,EAE9BwE,EAAK,YAAc,EAClB0F,GAASlK,GACLsD,GAEAF,GAGF8G,GAASlK,GAAWuD,GAAaF,EACxC,CAED,SAASiI,GAAa9G,EAAM,CAC3B,SAAK,SAAWA,EAAK,UAAY,EACjCA,EAAK,IAAM,KAEX5D,EAAK,QAAU,EACfA,EAAK,YAAc,EAEnB6D,EAASf,GAETiB,EAAa9E,GAEbsH,IACAF,IACOhH,EACP,CAEDW,EAAK,YAAc,SAAU4D,EAAM+G,EAAQpK,EAAMqK,EAASC,GAAUC,GAAW,CAqB9E,OApBKF,IACJA,EAAU5H,IACN6H,KACJA,GAAWjJ,IACPkJ,KACJA,GAAY9L,IAUb4E,EAAK,IAAM,KAEP+G,GAAU9L,KACb8L,EAAS,GAENE,GAAW,GAAKA,GAAWlJ,IAAiBiJ,GAAW5H,IAAczC,EAAO,GAAKA,EAAO,IAAMoK,EAAS,GAAKA,EAAS,GAAKG,GAAY,GACtIA,GAAY/L,GACRS,IAGRoE,EAAK,OAAS5D,EAEdiE,EAAS1D,EACTyD,EAAS,GAAKC,EACdC,EAASF,EAAS,EAElBS,EAAYoG,GAAW,EACvBrG,EAAY,GAAKC,EACjBC,EAAYF,EAAY,EACxBG,EAAa,KAAK,OAAOF,EAAYrB,GAAY,GAAKA,EAAS,EAE/De,EAAM,IAAI,WAAWH,EAAS,CAAC,EAC/BK,EAAO,GACPC,EAAO,GAEP0B,EAAc,GAAM6E,GAAW,EAE/B7K,EAAK,YAAc,IAAI,WAAWgG,EAAc,CAAC,EACjDlC,EAAmBkC,EAAc,EAEjChG,EAAK,SAAW,IAAI,YAAYgG,CAAW,EAC3ChG,EAAK,OAAS,IAAI,WAAWgG,CAAW,EAExCV,EAAQqF,EAERpF,EAAWuF,GAEJJ,GAAa9G,CAAI,EAC1B,EAEC5D,EAAK,WAAa,UAAY,CAC7B,OAAI6D,GAAUhB,IAAcgB,GAAUf,IAAce,GAAUd,GACtDvD,IAGRQ,EAAK,OAAS,KACdA,EAAK,SAAW,KAChBA,EAAK,YAAc,KACnBsE,EAAO,KACPD,EAAO,KACPF,EAAM,KAENnE,EAAK,OAAS,KACP6D,GAAUf,GAAarD,GAAeJ,GAC/C,EAECW,EAAK,cAAgB,SAAU4D,EAAM+G,EAAQG,EAAW,CACvD,IAAIC,EAAM1L,GAKV,OAHIsL,GAAU9L,KACb8L,EAAS,GAENA,EAAS,GAAKA,EAAS,GAAKG,EAAY,GAAKA,EAAY/L,GACrDS,IAGJ8C,GAAagD,GAAO,MAAQhD,GAAaqI,GAAQ,MAAQ/G,EAAK,WAAa,IAE9EmH,EAAMnH,EAAK,QAAQ1E,EAAe,GAG/BoG,GAASqF,IACZrF,EAAQqF,EACRtF,EAAiB/C,GAAagD,GAAO,SACrCE,EAAalD,GAAagD,GAAO,YACjCG,EAAanD,GAAagD,GAAO,YACjCF,EAAmB9C,GAAagD,GAAO,WAExCC,EAAWuF,EACJC,EACT,EAEC/K,EAAK,qBAAuB,SAAU4D,EAAMoH,EAAYC,EAAY,CACnE,IAAI5U,EAAS4U,EACTxhB,GAAG8D,GAAQ,EAEf,GAAI,CAACyd,GAAcnH,GAAUhB,GAC5B,OAAOrD,GAER,GAAInJ,EAAS+M,GACZ,OAAO/D,GAiBR,IAhBIhJ,EAAS2N,EAASV,KACrBjN,EAAS2N,EAASV,GAClB/V,GAAQ0d,EAAa5U,GAEtB8N,EAAI,IAAI6G,EAAW,SAASzd,GAAOA,GAAQ8I,CAAM,EAAG,CAAC,EAErD2O,EAAW3O,EACXuO,EAAcvO,EAMdkO,EAAQJ,EAAI,GAAK,IACjBI,GAAWA,GAAUI,EAAeR,EAAI,GAAK,KAASO,EAEjDjb,GAAI,EAAGA,IAAK4M,EAAS+M,GAAW3Z,KACpC8a,GAAWA,GAAUI,EAAeR,EAAK1a,IAAM2Z,GAAY,IAAM,KAASsB,EAC1EL,EAAK5a,GAAIya,GAAUI,EAAKC,GACxBD,EAAKC,GAAS9a,GAEf,OAAO4V,EACT,EAECW,EAAK,QAAU,SAAUkL,EAAO5B,EAAO,CACtC,IAAIhf,EAAGqe,EAAQwC,GAAaC,GAAWC,GAEvC,GAAI/B,EAAQlK,IAAYkK,EAAQ,EAC/B,OAAO9J,GAGR,GAAI,CAAC0L,EAAM,UAAa,CAACA,EAAM,SAAWA,EAAM,WAAa,GAAOrH,GAAUd,IAAgBuG,GAASlK,GACtG,SAAM,IAAMmD,GAAShD,GAAeC,IAC7BA,GAER,GAAI0L,EAAM,YAAc,EACvB,SAAM,IAAM3I,GAAShD,GAAeG,IAC7BA,GAwBR,GArBAkE,EAAOsH,EACPE,GAAYrH,EACZA,EAAauF,EAGTzF,GAAUhB,KACb8F,EAAU3F,IAAeiB,EAAS,GAAM,IAAO,EAC/CkH,IAAgB7F,EAAQ,EAAK,MAAS,EAElC6F,GAAc,IACjBA,GAAc,GACfxC,GAAWwC,IAAe,EACtBnG,IAAa,IAChB2D,GAAU/F,IACX+F,GAAU,GAAMA,EAAS,GAEzB9E,EAASf,GACTsE,GAAYuB,CAAM,GAIf3I,EAAK,UAAY,GAEpB,GADA4D,EAAK,cAAa,EACdA,EAAK,YAAc,EAOtB,SAAa,GACNvE,WAOEuE,EAAK,WAAa,GAAK0F,GAAS8B,IAAa9B,GAASlK,GAChE,SAAK,IAAMmD,GAAShD,GAAeG,IAC5BA,GAIR,GAAImE,GAAUd,IAAgBa,EAAK,WAAa,EAC/C,SAAM,IAAMrB,GAAShD,GAAeG,IAC7BA,GAIR,GAAIkE,EAAK,WAAa,GAAKsB,IAAc,GAAMoE,GAASrK,IAAc4E,GAAUd,GAAe,CAE9F,OADAsI,GAAS,GACD/I,GAAagD,GAAO,KAAI,CAC/B,KAAKnD,GACJkJ,GAAShC,GAAeC,CAAK,EAC7B,MACD,KAAKlH,GACJiJ,GAAShB,GAAaf,CAAK,EAC3B,MACD,KAAKjH,GACJgJ,GAASb,GAAalB,CAAK,EAC3B,KAED,CAKD,IAHI+B,IAAU3I,IAAiB2I,IAAU1I,MACxCkB,EAASd,IAENsI,IAAU7I,IAAY6I,IAAU3I,GACnC,OAAIkB,EAAK,YAAc,IACtBG,EAAa,IAEP1E,GASR,GAAIgM,IAAU5I,GAAW,CACxB,GAAI6G,GAASpK,GACZ4I,aAEAc,GAAiB,EAAG,EAAG,EAAK,EAGxBU,GAASnK,GAEZ,IAAK7U,EAAI,EAAGA,EAAIka,EAAiBla,IAEhCga,EAAKha,GAAK,EAIb,GADAsZ,EAAK,cAAa,EACdA,EAAK,YAAc,EACtB,SAAa,GACNvE,EAER,CACD,CAED,OAAIiK,GAASlK,GACLC,GACDC,EACT,CACA,CAIA,SAASgM,IAAU,CAClB,MAAMtL,EAAO,KACbA,EAAK,cAAgB,EACrBA,EAAK,eAAiB,EAEtBA,EAAK,SAAW,EAChBA,EAAK,SAAW,EAEhBA,EAAK,UAAY,EACjBA,EAAK,UAAY,CAGlB,CAEAsL,GAAQ,UAAY,CACnB,YAAa,SAAUhG,EAAO/E,EAAM,CACnC,MAAMP,EAAO,KACb,SAAK,OAAS,IAAI2D,GACbpD,IACJA,EAAOvC,IACDgC,EAAK,OAAO,YAAYA,EAAMsF,EAAO/E,CAAI,CAChD,EAED,QAAS,SAAU+I,EAAO,CACzB,MAAMtJ,EAAO,KACb,OAAKA,EAAK,OAGHA,EAAK,OAAO,QAAQA,EAAMsJ,CAAK,EAF9B9J,EAGR,EAED,WAAY,UAAY,CACvB,MAAMQ,EAAO,KACb,GAAI,CAACA,EAAK,OACT,OAAOR,GACR,MAAM7S,EAAMqT,EAAK,OAAO,WAAU,EAClC,SAAK,OAAS,KACPrT,CACP,EAED,cAAe,SAAU2Y,EAAOC,EAAU,CACzC,MAAMvF,EAAO,KACb,OAAKA,EAAK,OAEHA,EAAK,OAAO,cAAcA,EAAMsF,EAAOC,CAAQ,EAD9C/F,EAER,EAED,qBAAsB,SAAUwL,EAAYC,EAAY,CACvD,MAAMjL,EAAO,KACb,OAAKA,EAAK,OAEHA,EAAK,OAAO,qBAAqBA,EAAMgL,EAAYC,CAAU,EAD5DzL,EAER,EAOD,SAAU,SAAUkJ,EAAK/T,EAAO4W,EAAM,CACrC,MAAMvL,EAAO,KACb,IAAIY,EAAMZ,EAAK,SAGf,OAFIY,EAAM2K,IACT3K,EAAM2K,GACH3K,IAAQ,EACJ,GACRZ,EAAK,UAAYY,EACjB8H,EAAI,IAAI1I,EAAK,QAAQ,SAASA,EAAK,cAAeA,EAAK,cAAgBY,CAAG,EAAGjM,CAAK,EAClFqL,EAAK,eAAiBY,EACtBZ,EAAK,UAAYY,EACVA,EACP,EAMD,cAAe,UAAY,CAC1B,MAAMZ,EAAO,KACb,IAAIY,EAAMZ,EAAK,OAAO,QAElBY,EAAMZ,EAAK,YACdY,EAAMZ,EAAK,WACRY,IAAQ,IAWZZ,EAAK,SAAS,IAAIA,EAAK,OAAO,YAAY,SAASA,EAAK,OAAO,YAAaA,EAAK,OAAO,YAAcY,CAAG,EAAGZ,EAAK,cAAc,EAE/HA,EAAK,gBAAkBY,EACvBZ,EAAK,OAAO,aAAeY,EAC3BZ,EAAK,WAAaY,EAClBZ,EAAK,WAAaY,EAClBZ,EAAK,OAAO,SAAWY,EACnBZ,EAAK,OAAO,UAAY,IAC3BA,EAAK,OAAO,YAAc,GAE3B,CACF,EAIA,SAASwL,GAAW1U,EAAS,CAC5B,MAAMkJ,EAAO,KACPjV,EAAI,IAAIugB,GACRG,EAAUC,GAAyB5U,GAAWA,EAAQ,UAAYA,EAAQ,UAAY,GAAK,IAAI,EAC/FwS,EAAQrK,GACRyJ,EAAM,IAAI,WAAW+C,CAAO,EAClC,IAAInG,EAAQxO,EAAUA,EAAQ,MAAQ+H,GAClC,OAAOyG,EAAS,MACnBA,EAAQzG,IACT9T,EAAE,YAAYua,CAAK,EACnBva,EAAE,SAAW2d,EAEb1I,EAAK,OAAS,SAAU9I,EAAMyU,EAAY,CACzC,IAAIZ,EAAKnL,EAAOgM,EAAY,EAAGC,EAAc,EAAGC,EAAa,EAC7D,MAAMC,EAAU,GAChB,GAAI,EAAC7U,EAAK,OAEV,GAAE,cAAgB,EAClBnM,EAAE,QAAUmM,EACZnM,EAAE,SAAWmM,EAAK,OAClB,EAAG,CAIF,GAHAnM,EAAE,eAAiB,EACnBA,EAAE,UAAY0gB,EACdV,EAAMhgB,EAAE,QAAQue,CAAK,EACjByB,GAAO1L,GACV,MAAM,IAAI,MAAM,cAAgBtU,EAAE,GAAG,EAClCA,EAAE,iBACDA,EAAE,gBAAkB0gB,EACvBM,EAAQ,KAAK,IAAI,WAAWrD,CAAG,CAAC,EAEhCqD,EAAQ,KAAKrD,EAAI,MAAM,EAAG3d,EAAE,cAAc,CAAC,GAC7C+gB,GAAc/gB,EAAE,eACZ4gB,GAAc5gB,EAAE,cAAgB,GAAKA,EAAE,eAAiB6gB,IAC3DD,EAAW5gB,EAAE,aAAa,EAC1B6gB,EAAY7gB,EAAE,cAElB,OAAWA,EAAE,SAAW,GAAKA,EAAE,YAAc,GAC3C,OAAIghB,EAAQ,OAAS,GACpBnM,EAAQ,IAAI,WAAWkM,CAAU,EACjCC,EAAQ,QAAQ,SAAUC,EAAO,CAChCpM,EAAM,IAAIoM,EAAOH,CAAW,EAC5BA,GAAeG,EAAM,MACzB,CAAI,GAEDpM,EAAQmM,EAAQ,IAAM,IAAI,WAAW,CAAC,EAEhCnM,EACT,EACCI,EAAK,MAAQ,UAAY,CACxB,IAAI+K,EAAKnL,EAAOiM,EAAc,EAAGC,EAAa,EAC9C,MAAMC,EAAU,GAChB,EAAG,CAIF,GAHAhhB,EAAE,eAAiB,EACnBA,EAAE,UAAY0gB,EACdV,EAAMhgB,EAAE,QAAQqU,EAAQ,EACpB2L,GAAOzL,IAAgByL,GAAO1L,GACjC,MAAM,IAAI,MAAM,cAAgBtU,EAAE,GAAG,EAClC0gB,EAAU1gB,EAAE,UAAY,GAC3BghB,EAAQ,KAAKrD,EAAI,MAAM,EAAG3d,EAAE,cAAc,CAAC,EAC5C+gB,GAAc/gB,EAAE,cACnB,OAAWA,EAAE,SAAW,GAAKA,EAAE,YAAc,GAC3C,SAAE,WAAU,EACZ6U,EAAQ,IAAI,WAAWkM,CAAU,EACjCC,EAAQ,QAAQ,SAAUC,EAAO,CAChCpM,EAAM,IAAIoM,EAAOH,CAAW,EAC5BA,GAAeG,EAAM,MACxB,CAAG,EACMpM,CACT,CACA,CAEA,SAAS8L,GAAyBO,EAAkB,CACnD,OAAOA,EAAoB,GAAK,KAAK,MAAMA,EAAmB,KAAK,EAAI,EACxE,CCn+DA,MAAMjO,GAAW,GAEXqB,GAAO,EACPC,GAAe,EACfC,GAAc,EACdC,GAAiB,GACjBC,GAAe,GACfyM,GAAc,GACdxM,GAAc,GAEdyM,GAAe,CAAC,EAAY,EAAY,EAAY,EAAY,GAAY,GAAY,GAAY,IAAY,IAAY,IAAY,KAC7I,KAAY,KAAY,KAAY,MAAY,MAAY,KAAU,EAEjEC,GAAO,KAGPnN,GAAa,EACbG,GAAW,EAGXiN,GAAW,EACXC,GAAW,EAEXC,GAAW,CAAC,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EACxJ,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAChJ,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAChJ,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAC9I,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAC9I,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAC9I,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAC/I,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAC/I,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EACjJ,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAC/I,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAC7I,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAC/I,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAC7I,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAChJ,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAC/I,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAC/I,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAC/I,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAC9I,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAC9I,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAC/I,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAChJ,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EACjJ,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAChJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EACjJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAC/I,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EACjJ,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EACjJ,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EACjJ,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAChJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAChJ,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAChJ,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,EAA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","names":["relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","n","l","u","t","o","r","f","e","c","s","a","h","v","i","y","d","_","k","b","m","g","j","z","w","p","A","x","P","N","M","C","H","$","T","I","O","L","S","B","D","EMPTY$1","assign","obj","props","exec","url","route","opts","reg","matches","ret","segmentize","max","i$1","param","flags","plus","star","val","pathRankSort","prepareVNodeForRanking","vnode","index","rankChild","rankSegment","segment","rank","path","customHistory","ROUTERS","subscribers","EMPTY","setUrl","type","getCurrentUrl","replace","canRoute","routeTo","didRoute","routeFromLink","href","target","handleLinkClick","prevent","delegateLinkHandler","eventListenersInitialized","initEventListeners","Router","Component$$1","children","toChildArray","this$1","location","invoke","newProps","cloneElement","ref","ref$1","onChange","active","current","previous","Component","Link","createElement","Route","Analytics","ID_SITE","ID_GENERATOR","event","category","action","label","ga","dimension","value","pageview","page","generatorEvent","legacyMethod","method","setLocale","locale","DIM_LANGUAGE","gtag","changeLocale","prev_locale","setTheme","theme","DIM_THEME","changeTheme","prev_theme","setVersion","version","DIM_VERSION","setSelectedVersion","selected_version","changeVersion","prev_version","setGenerator","file_type","DIM_GENERATOR","setPrefersColorScheme","prefers_color_scheme","DIM_PREFERS_COLOR_SCHEME","setTreeViewMode","tree_view_mode","setColormap","colormap","resetGenerator","history","undoGenerator","redoGenerator","loadPreset","file_name","openPreset","createSnippet","snippet_id","data_size","compressed_size","compression_rate","openSnippet","copyOutput","downloadOutput","showOutput","hideOutput","showPreview","hidePreview","showProject","projects_count","project_size","hideProject","saveProjectFile","deleteProjectFile","renameProjectFile","deleteProject","Path_1","relativePath","start","Path","modelArr","contextArr","end","element","newElement","model","ModelPath","other","offset","fn","thisArg","_a","Errors_1","Errors","error","params","exact","utils","escapeString","str","quoteString","dec2hex","dec","hexId","length","arr","DataModel_1","require$$0","require$$1","utils_1","require$$2","DataModel","schema","options","_b","_c","_d","data","listener","newHistory","loose","silent","tempErrors","res","exports","hook","args","Mod","mods","Has","key","Opt","Keep","BooleanNode_1","Node_1","BooleanNode","errors","ListNode_1","ListNode","config","min","between","nextIndex","newObj","SwitchNode_1","SwitchNode","cases","fallback","sorter","matchedCases","ChoiceNode","choices","isValid","choice","switchNode","XOrList","ObjectOrPreset","presetNode","objectNode","presets","MapNode_1","MapNode","keys","__1","NumberNode","integer","NumberEnum","values","require$$3","require$$4","ObjectNode","fields","filter","defaultFields","getActiveFields","switchValue","activeCase","getChildModelPath","childKey","caseFields","caseKeys","pathWithContext","pathElements","activeFields","existingKeys","filterPath","filterField","activeKeys","forcedKeys","newValue","Reference_1","Reference_2","Reference","schemas","StringNode_1","StringNode_2","isEnum","isValidator","StringNode","collections","getValues","registry","id","Hook","JsonUpdate","Registries","SchemaRegistry","CollectionRegistry","list","ValidationOption","__createBinding","this","k2","desc","__exportStar","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","MAX_BITS","D_CODES","BL_CODES","LENGTH_CODES","LITERALS","L_CODES","HEAP_SIZE","END_BLOCK","MAX_BL_BITS","REP_3_6","REPZ_3_10","REPZ_11_138","Buf_size","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_DEFAULT_STRATEGY","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","extractArray","array","flatArray","_dist_code","Tree","that","gen_bitlen","tree","stree","extra","base","max_length","bits","xbits","overflow","bi_reverse","code","len","gen_codes","max_code","bl_count","next_code","elems","dist","StaticTree","static_tree","extra_bits","extra_base","static_ltree2_first_part","static_ltree2_second_part","static_dtree_first_part","static_dtree_second_part","MAX_MEM_LEVEL","DEF_MEM_LEVEL","Config","good_length","max_lazy","nice_length","max_chain","func","STORED","FAST","SLOW","config_table","z_errmsg","NeedMore","BlockDone","FinishStarted","FinishDone","PRESET_DICT","INIT_STATE","BUSY_STATE","FINISH_STATE","Z_DEFLATED","STORED_BLOCK","STATIC_TREES","DYN_TREES","MIN_MATCH","MAX_MATCH","MIN_LOOKAHEAD","smaller","depth","tn2","tm2","Deflate","strm","status","pending_buf_size","last_flush","w_size","w_bits","w_mask","win","window_size","prev","head","ins_h","hash_size","hash_bits","hash_mask","hash_shift","block_start","match_length","prev_match","match_available","strstart","match_start","lookahead","prev_length","max_chain_length","max_lazy_match","level","strategy","good_match","nice_match","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","lit_bufsize","last_lit","last_eob_len","bi_buf","bi_valid","lm_init","init_block","tr_init","heap","scan_tree","prevlen","curlen","nextlen","count","max_count","min_count","build_bl_tree","max_blindex","put_byte","put_short","putShortMSB","send_bits","send_code","c2","send_tree","send_all_trees","lcodes","dcodes","blcodes","bi_flush","_tr_align","_tr_tally","lc","out_length","in_length","dcode","compress_block","ltree","dtree","lx","bi_windup","copy_block","buf","header","_tr_stored_block","stored_len","eof","_tr_flush_block","opt_lenb","static_lenb","flush_block_only","fill_window","more","deflate_stored","flush","max_block_size","max_start","longest_match","cur_match","chain_length","scan","match","best_len","limit","_nice_match","wmask","strend","scan_end1","scan_end","deflate_fast","hash_head","bflush","deflate_slow","max_insert","deflateReset","_level","_method","memLevel","_strategy","err","dictionary","dictLength","_strm","level_flags","old_flush","bstate","ZStream","size","ZipDeflate","bufsize","getMaximumCompressedSize","onprogress","lastIndex","bufferIndex","bufferSize","buffers","chunk","uncompressedSize","Z_MEM_ERROR","inflate_mask","MANY","fixed_bl","fixed_bd","fixed_tl","fixed_td","cplens","cplext","cpdist","cpdext","BMAX","InfTree","hn","huft_build","bindex","hp","mask","q","xp","initWorkArea","vsize","bb","tb","result","nl","nd","bl","bd","tl","td","START","LEN","LENEXT","DIST","DISTEXT","COPY","LIT","WASH","END","BADCODE","InfCodes","mode","tree_index","need","lit","get","lbits","dbits","ltree_index","dtree_index","inflate_fast","tl_index","td_index","tp","tp_index","ml","md","tp_index_t_3","tindex","border","TYPE","LENS","TABLE","BTREE","DTREE","CODES","DRY","DONELOCKS","BADBLOCKS","InfBlocks","left","table","blens","codes","last","hufts","check","inftree","bl_","bd_","tl_","td_","METHOD","FLAG","DICT4","DICT3","DICT2","DICT1","DICT0","BLOCKS","DONE","BAD","mark","Inflate","inflateReset","istate","ZipInflate","nomoreinput","DEFAULT_CONFIGURATION","getConfiguration","configure","configuration","mimeTypes","subtype","indexMimeType","Crc32","crc","encodeText","bitArray","a1","a2","shift","_end","carry","out","last2","shift2","codec","byteLength","tmp","bytes","hash","sha1","ol","words","cipher","aes","sbox","decTable","keyLen","encKey","decKey","rcon","encTable","sboxInv","th","xInv","x2","x4","x8","tDec","tEnc","input","dir","nInnerRounds","t0","t1","t2","t3","kIndex","b2","prf","iv","word","b1","b3","counter","misc","hmac","Hash","exKey","bs","ERR_INVALID_PASSWORD","BLOCK_LENGTH","RAW_FORMAT","PBKDF2_ALGORITHM","HASH_ALGORITHM","HASH_FUNCTION","BASE_KEY_ALGORITHM","DERIVED_BITS_ALGORITHM","DERIVED_BITS_USAGE","SALT_LENGTH","KEY_LENGTH","SIGNATURE_LENGTH","COUNTER_DEFAULT_VALUE","codecBytes","Aes","CtrGladman","HmacSha1","AESDecrypt","password","signed","strength","aesCrypto","preamble","subarray","createDecryptionKeys","output","append","pendingInput","chunkToDecrypt","originalSignature","decryptedChunkArray","encryptedChunk","decryptedChunk","valid","signature","indexSignature","AESEncrypt","createEncryptionKeys","encryptedChunkArray","concat","paddingStart","paddingEnd","verifySignature","inputLength","expand","inputChunk","outputChunk","decrypt","preambleArray","createKeys","passwordVerification","passwordVerificationKey","encrypt","salt","encodedPassword","basekey","derivedBits","compositeKey","leftArray","rightArray","inputArray","begin","HEADER_LENGTH","ZipCryptoDecrypt","zipCrypto","decryptedHeader","ZipCryptoEncrypt","getByte","updateKeys","byte","getInt32","getInt8","temp","number","CODEC_DEFLATE","CODEC_INFLATE","ERR_INVALID_SIGNATURE","codecConstructor","encrypted","compressed","encryptionStrength","dataViewSignature","inputData","newData","createCodec","MESSAGE_INIT","MESSAGE_APPEND","MESSAGE_FLUSH","MESSAGE_EVENT_TYPE","classicWorkersSupported","workerData","onTaskFinished","webWorker","scripts","createWebWorkerInterface","createWorkerInterface","interfaceCodec","messageTask","workerOptions","getWorker","onMessage","initAndSendMessage","baseURL","scriptUrl","message","sendMessage","worker","resolve","reject","reponseError","pool","pendingRequests","clearTerminateTimeout","CONTENT_TYPE_TEXT_PLAIN","Stream","Reader","Writer","TextReader","text","BlobReader","TextWriter","encoding","reader","Data64URIWriter","contentType","indexArray","dataString","delta","blob","BlobWriter","MAX_32_BITS","MAX_16_BITS","COMPRESSION_METHOD_DEFLATE","COMPRESSION_METHOD_STORE","COMPRESSION_METHOD_AES","LOCAL_FILE_HEADER_SIGNATURE","DATA_DESCRIPTOR_RECORD_SIGNATURE","CENTRAL_FILE_HEADER_SIGNATURE","END_OF_CENTRAL_DIR_SIGNATURE","ZIP64_END_OF_CENTRAL_DIR_SIGNATURE","ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE","END_OF_CENTRAL_DIR_LENGTH","ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH","ZIP64_END_OF_CENTRAL_DIR_LENGTH","ZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH","ZIP64_TOTAL_NUMBER_OF_DISKS","EXTRAFIELD_TYPE_ZIP64","EXTRAFIELD_TYPE_AES","EXTRAFIELD_TYPE_NTFS","EXTRAFIELD_TYPE_NTFS_TAG1","EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP","EXTRAFIELD_TYPE_UNICODE_PATH","EXTRAFIELD_TYPE_UNICODE_COMMENT","BITFLAG_ENCRYPTED","BITFLAG_LEVEL","BITFLAG_DATA_DESCRIPTOR","BITFLAG_LANG_ENCODING_FLAG","FILE_ATTR_MSDOS_DIR_MASK","VERSION_DEFLATE","VERSION_ZIP64","VERSION_AES","DIRECTORY_SIGNATURE","MAX_DATE","MIN_DATE","CP437","decodeCP437","stringValue","indexCharacter","decodeText","fileReader","MINIMUM_CHUNK_SIZE","ERR_ABORT","processData","writer","chunkSize","processChunk","chunkOffset","outputLength","signal","testAborted","chunkLength","writeData","PROPERTY_NAMES","Entry","name","ERR_BAD_FORMAT","ERR_EOCDR_NOT_FOUND","ERR_EOCDR_ZIP64_NOT_FOUND","ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND","ERR_CENTRAL_DIRECTORY_NOT_FOUND","ERR_LOCAL_FILE_HEADER_NOT_FOUND","ERR_EXTRAFIELD_ZIP64_NOT_FOUND","ERR_ENCRYPTED","ERR_UNSUPPORTED_ENCRYPTION","ERR_UNSUPPORTED_COMPRESSION","CHARSET_UTF8","CHARSET_CP437","ZIP64_PROPERTIES","ZipReader","zipReader","endOfDirectoryInfo","seekSignature","endOfDirectoryView","getDataView","directoryDataLength","getUint32","directoryDataOffset","filesLength","getUint16","prependedDataLength","endOfDirectoryLocatorArray","readUint8Array","endOfDirectoryLocatorView","getBigUint64","endOfDirectoryArray","expectedDirectoryDataOffset","originalDirectoryDataOffset","directoryArray","directoryView","entries","indexFile","fileEntry","ZipEntry","readCommonHeader","languageEncodingFlag","filenameOffset","extraFieldOffset","commentOffset","versionMadeBy","msDosCompatible","getUint8","endOffset","filenameEncoding","getOptionValue","commentEncoding","filename","comment","readCommonFooter","entry","zipEntry","localDirectory","dataArray","dataView","extraFieldAES","compressionMethod","bitFlag","rawLastModDate","dataOffset","compressedSize","directory","rawBitFlag","getDate","rawExtraField","extraField","rawExtraFieldView","offsetExtraField","extraFieldZip64","readExtraFieldZip64","extraFieldUnicodePath","readExtraFieldUnicode","extraFieldUnicodeComment","readExtraFieldAES","extraFieldNTFS","readExtraFieldNTFS","extraFieldExtendedTimestamp","readExtraFieldExtendedTimestamp","extraFieldView","indexValue","missingProperties","propertyName","indexMissingProperty","extraFieldUnicode","rawPropertyName","crc32","tag1Data","tagValue","attributeSize","tag1View","rawLastAccessDate","rawCreationDate","lastModDate","getDateNTFS","lastAccessDate","creationDate","extraFieldData","timeProperties","timeRawProperties","indexProperty","time","startOffset","minimumBytes","maximumLength","signatureArray","signatureView","setUint32","maximumBytes","seek","indexByte","timeRaw","date","view","ERR_DUPLICATED_NAME","ERR_INVALID_COMMENT","ERR_INVALID_ENTRY_COMMENT","ERR_INVALID_ENTRY_NAME","ERR_INVALID_VERSION","ERR_INVALID_ENCRYPTION_STRENGTH","ERR_INVALID_EXTRAFIELD_TYPE","ERR_INVALID_EXTRAFIELD_DATA","ERR_UNSUPPORTED_FORMAT","EXTRAFIELD_DATA_AES","EXTRAFIELD_LENGTH_ZIP64","workers","ZipWriter","zipWriter","addFile","pendingEntry","closeFile","rawFilename","rawComment","extraFieldSize","arraySet","extendedTimestamp","maximumCompressedSize","keepOrder","internalFileAttribute","externalFileAttribute","zip64","useWebWorkers","bufferedWrite","dataDescriptor","dataDescriptorSignature","getFileEntry","files","previousFileEntry","resolveLockUnbufferedWrite","resolveLockCurrentFileEntry","lockPreviousFileEntry","fileWriter","lockCurrentFileEntry","createFileEntry","indexWrittenData","pendingFileEntry","arrayBuffer","sliceAsArrayBuffer","arrayBufferView","writeBlob","rawExtraFieldZip64View","setBigUint64","rawExtraFieldAES","extraFieldAESView","setUint16","setUint8","rawExtraFieldNTFS","rawExtraFieldExtendedTimestamp","extraFieldExtendedTimestampView","extraFieldExtendedTimestampFlag","extraFieldNTFSView","lastModTimeNTFS","getTimeNTFS","headerArray","headerView","dateArray","dateView","extraFieldLength","localHeaderArray","localHeaderView","dataDescriptorArray","dataDescriptorView","dataDescriptorOffset","directoryOffset","indexFileEntry","rawExtraFieldZip64","writeSlice","typedArray","configureWebWorker","hasGzipHeader","hasZlibHeader","getBedrockHeader","encodeUTF8","decodeUTF8","codepoints","RawDataInput","__publicField","RawDataOutput","requiredLength","newLength","newBuffer","newArray","Json","readNumber","readInt","readString","readBoolean","readObject","readArray","parser","el","readPair","readMap","root","compose","mapper","readEnum","StringReader","source","skipWhitespace","terminator","escaped","cursor","context","lazy","getter","computeIfAbsent","map","existing","mutateWithDefault","initialValue","mutator","intToRgb","Z_FIXED$1","Z_BINARY","Z_TEXT","Z_UNKNOWN$1","zero$1","MIN_MATCH$1","MAX_MATCH$1","LENGTH_CODES$1","LITERALS$1","L_CODES$1","D_CODES$1","BL_CODES$1","HEAP_SIZE$1","MAX_BITS$1","extra_lbits","extra_dbits","extra_blbits","bl_order","DIST_CODE_LEN","static_ltree","static_dtree","_length_code","base_length","base_dist","StaticTreeDesc","static_l_desc","static_d_desc","static_bl_desc","TreeDesc","dyn_tree","stat_desc","d_code","has_stree","tr_static_init","_n2","_m2","pqdownheap","build_tree","detect_data_type","black_mask","static_init_done","_tr_init$1","_tr_stored_block$1","_tr_align$1","_tr_flush_block$1","_tr_tally$1","_tr_init_1","_tr_stored_block_1","_tr_flush_block_1","_tr_tally_1","_tr_align_1","trees","adler32","adler","pos","s1","s2","adler32_1","makeTable","crcTable","crc32_1","messages","constants$2","Z_NO_FLUSH$2","Z_FULL_FLUSH$1","Z_FINISH$3","Z_BLOCK$1","Z_OK$3","Z_STREAM_END$3","Z_STREAM_ERROR$2","Z_DATA_ERROR$2","Z_BUF_ERROR$1","Z_DEFAULT_COMPRESSION$1","Z_DEFAULT_STRATEGY$1","Z_DEFLATED$2","MAX_WBITS$1","EXTRA_STATE","NAME_STATE","COMMENT_STATE","HCRC_STATE","BS_NEED_MORE","BS_BLOCK_DONE","BS_FINISH_STARTED","BS_FINISH_DONE","OS_CODE","errorCode","zero","HASH_ZLIB","HASH","flush_pending","read_buf","_win","_w_size","deflate_rle","deflate_huff","configuration_table","DeflateState","deflateResetKeep","Z_UNKNOWN","_tr_init","deflateSetHeader","deflateInit2","windowBits","wrap","Z_FIXED","deflateInit","deflate$2","beg","Z_RLE","deflateEnd","deflateSetDictionary","tmpDict","avail","next","deflateInit_1","deflateInit2_1","deflateReset_1","deflateResetKeep_1","deflateSetHeader_1","deflate_2$1","deflateEnd_1","deflateSetDictionary_1","deflateInfo","deflate_1$2","_has","sources","flattenChunks","chunks","common","STR_APPLY_UIA_OK","_utf8len","string2buf","m_pos","str_len","buf_len","buf2binstring","buf2string","utf16buf","c_len","utf8border","strings","zstream","toString$1","Z_NO_FLUSH$1","Z_FINISH$2","Z_OK$2","Z_STREAM_END$2","Z_DEFLATED$1","Deflate$1","opt","dict","flush_mode","_flush_mode","Z_SYNC_FLUSH","deflate$1","deflator","deflateRaw$1","gzip$1","Deflate_1$1","deflate_2","deflateRaw_1$1","gzip_1$1","constants$1","deflate_1$1","BAD$1","TYPE$1","inffast","_in","_out","dmax","wsize","whave","wnext","s_window","hold","lcode","lmask","dmask","here","op","from","from_source","state","top","dolen","dodist","MAXBITS","ENOUGH_LENS$1","ENOUGH_DISTS$1","CODES$1","LENS$1","DISTS$1","lbase","lext","dbase","dext","inflate_table","lens","lens_index","table_index","work","sym","curr","drop","used","huff","incr","fill","low","base_index","offs","extra_index","here_bits","here_op","here_val","inftrees","DISTS","Z_FINISH$1","Z_OK$1","Z_STREAM_END$1","Z_NEED_DICT$1","Z_STREAM_ERROR$1","Z_DATA_ERROR$1","Z_MEM_ERROR$1","HEAD","FLAGS","TIME","OS","EXLEN","EXTRA","NAME","COMMENT","HCRC","DICTID","DICT","TYPEDO","COPY_","LENLENS","CODELENS","LEN_","MATCH","CHECK","LENGTH","MEM","SYNC","ENOUGH_LENS","ENOUGH_DISTS","MAX_WBITS","DEF_WBITS","zswap32","InflateState","inflateResetKeep","inflateReset2","inflateInit2","inflateInit","virgin","lenfix","distfix","fixedtables","updatewindow","src","copy","inflate$2","put","have","last_bits","last_op","last_val","hbuf","order","inf_leave","Z_BLOCK","Z_TREES","inflateEnd","inflateGetHeader","inflateSetDictionary","dictid","inflateReset_1","inflateReset2_1","inflateResetKeep_1","inflateInit_1","inflateInit2_1","inflate_2$1","inflateEnd_1","inflateGetHeader_1","inflateSetDictionary_1","inflateInfo","inflate_1$2","GZheader","gzheader","toString","Inflate$1","last_avail_out","next_out_utf8","tail","utf8str","inflate$1","inflator","inflateRaw$1","Inflate_1$1","inflate_2","inflateRaw_1$1","ungzip$1","constants","inflate_1$1","Deflate_1","deflate_1","deflate","deflateRaw_1","deflateRaw","gzip_1","gzip","Inflate_1","inflate_1","inflate","inflateRaw_1","inflateRaw","ungzip_1","ungzip","constants_1","pako","NbtType","_NbtTag","factory","factoryType","NbtTag","_NbtByte","NbtByte","NbtAbstractList","items","tag","NbtByteArray","NbtFloat","NbtInt","NbtIntArray","NbtList","NbtCompound","indent","ii","_NbtLong","lo","hi","NbtLong","NbtLongArray","NbtShort","_NbtString","NbtString","NbtParser","DOUBLE_PATTERN_NOSUFFIX","DOUBLE_PATTERN","FLOAT_PATTERN","BYTE_PATTERN","LONG_PATTERN","SHORT_PATTERN","INT_PATTERN","readTag","readCompound","readList","NbtDouble","properties","hasElementSeparator","valueId","arrayId","childId","pairs","needsQuotes","_NbtFile","compression","littleEndian","bedrockHeader","Pako","isGzipCompressed","isZlibCompressed","uncompressedData","_e","NbtFile","NbtChunk","timestamp","raw","resolver","file","_f","Ref","NbtAbstractRegion","NbtRegion","predicate","totalSectors","chunkData","sectors","chunkResolver","chunks2","_NbtEnd","NbtEnd","Direction","directionNormals","normal","BlockPos","create","dx","dy","dz","subtract","add","towards","equals","magnitude","toNbt","fromNbt","nbt","fromJson","_Identifier","namespace","prefix","sep","Identifier","_BlockState","BlockState","PalettedContainer","defaultValue","_ChunkSection","minY","ChunkSection","Chunk","height","section","sectionIndex","ChunkPos","fromBlockPos","blockPos","fromLong","long","toLong","chunkPos","asLong","minBlockX","minBlockZ","maxBlockX","maxBlockZ","Holder","directParser","reference","direct","required","HolderSet","valueParser","defaultedValueParser","_Registry","builtin","deleted","Registry","Attribute","register","minValue","maxValue","attribute","Attributes","AttributeModifierOperation","idMap","MobEffect","fromId","color","modifiers","mobEffect","MobEffects","MobEffectInstance","effect","duration","amplifier","ambient","visible","showIcon","getColor","effects","total","formatDuration","ticks","seconds","minutes","hours","slotIndices","Item","arg","item","spawnEgg","entityType","background","highlight","food","nutrition","saturationModifier","armorMaterials","armor","slot","material","durabilityMul","slotDefense","enchantmentValue","toughness","knockbackResistance","slotIndex","itemTiers","tiered","tier","uses","speed","damage","Items","ItemStack","Rotation","getRandom","random","_Structure","palette","blocks","block","blockState","rotation","pivot","Structure","Enchantment","isCompatible","canEnchant","ench","rarity","enchantment","lvl","Enchantments","PROTECTION_ENCHANTS","DAMAGE_ENCHANTS","ENCHANTMENT_CATEGORIES","Potion","potion","Potions","getAllEffects","getAllAttributeModifiers","square","clamp","lerp","lerp2","lerp3","lazyLerp","lazyLerp2","lazyLerp3","clampedLerp","inverseLerp","smoothstep","clampedMap","binarySearch","n2","n3","n4","n5","getSeed","seed","longfromBytes","isPowerOfTwo","upperPowerOfTwo","randomBetweenInclusive","nextInt","shuffle","switchIndex","MinMaxNumberFunction","is","CubicSpline","extractor","Constant","spline","MultiPoint","points","point","derivative","coordinate","locations","derivatives","loc0","loc1","der0","der1","val0","val1","f8","f9","visitor","lastIdx","splineMin","splineMax","coordinateMin","coordinateMax","innerSpline","minExtend","maxExtend","locationLeft","locationDelta","splineLeft","splineRight","minLeft","maxLeft","minRight","maxRight","derivativeLeft","derivativeRight","maxValueDeltaLeft","maxValueDeltaRight","minDeltaLeft","maxDeltaLeft","minDeltaRight","maxDeltaRight","minDelta","maxDelta","useIndex","EPSILON","ARRAY_TYPE","degree","toRadian","glMatrix.ARRAY_TYPE","fromMat4","clone","transpose","a01","a02","a12","invert","a00","a10","a11","a20","a21","a22","b01","b11","b21","det","multiply","b00","b02","b10","b12","b20","b22","translate","scale","fromQuat","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","multiplyScalar","mul","sub","identity","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","b0","rotate","rad","axis","glMatrix.EPSILON","rotateX","rotateY","rotateZ","getTranslation","mat","perspectiveNO","fovy","aspect","near","far","nf","perspective","orthoNO","right","bottom","lr","bt","ortho","fromValues","negate","normalize","dot","cross","ax","ay","az","bx","by","bz","transformMat4","a0","vec","stride","setAxisAngle","getAxisAngle","out_axis","aw","bw","slerp","omega","cosom","sinom","scale0","scale1","conjugate","fromMat3","fTrace","fRoot","vec4.clone","vec4.fromValues","vec4.scale","vec4.normalize","tmpvec3","vec3.create","xUnitVec3","vec3.fromValues","yUnitVec3","vec3.dot","vec3.cross","vec3.len","vec3.normalize","temp1","temp2","matr","mat3.create","up","transformMat3","Matrix3","mat3.fromMat4","mat3.fromQuat","mat3.clone","mat3.copy","mat3.translate","mat3.multiplyScalar","mat3.scale","mat3.add","mat3.sub","mat3.mul","mat3.transpose","mat3.invert","mat3.str","Vector","Matrix4","mat4.create","mat4.fromQuat","mat4.clone","mat4.translate","mat4.multiplyScalar","mat4.scale","mat4.add","mat4.sub","mat4.mul","mat4.transpose","mat4.invert","mat4.getTranslation","mat4.str","base64map","crypt","hex","base64","triplet","imod4","cryptModule","charenc","charenc_1","isBuffer_1","isBuffer","isSlowBuffer","utf8","bin","md5","FF","GG","HH","II","aa","cc","dd","md5Module","digestbytes","_LegacyRandom","worldSeed","LegacyPositionalRandom","LegacyRandom","_XoroshiroRandom","seedLo","seedHi","XoroshiroPositionalRandom","maxBigint","product","productLo","newMax","productHi","XoroshiroRandom","_SimplexNoise","d2","d3","d4","d6","d7","d8","d9","d10","d11","d12","n6","n7","n8","n9","d13","d14","d15","d5","x3","y3","z3","y4","z4","x5","y5","z5","x6","y6","z6","x7","y7","z7","grad","SimplexNoise","ImprovedNoise","yScale","yLimit","PerlinNoise","firstOctave","amplitudes","forkedRandom","octave","fixY","inputF","valueF","noise","BlendedNoise","xzScale","xzFactor","yFactor","smearScaleMultiplier","scaledX","scaledY","scaledZ","factoredX","factoredY","factoredZ","smear","factoredSmear","factor","smearsmear","_NormalNoise","expectedDeviation","NormalNoise","NoiseParameters","PerlinSimplexNoise","octaves","lastOctave","range","octavesSet","useOffsets","grass","spruce","birch","foliage","water","attached_stem","lily_pad","redstone","power","stem","age","BlockColors","Cull","cull","north","east","south","west","down","none","_Vertex","texture","transformation","vec3.transformMat4","Vertex","Line","v1","v2","p1","p2","Mesh","quads","lines","x1","y1","z1","line","quad","gl","rebuildBuffer","buffer","rebuildBufferV","BlockDefinition","variants","multipart","variant","textureUVProvider","blockModelProvider","mesh","newCull","blockModel","tint","variantMesh","mat4.identity","mat4.rotateY","glMatrix.toRadian","mat4.rotateX","condition","states","Quad","v3","v4","e1","e2","p3","p4","faceRotations","rotationAxis","SQRT2","rescaleAxis","_BlockModel","parent","textures","elements","display","guiLight","uvProvider","transform","mat4.rotateZ","getTint","x0","y0","z0","addFace","face","uv","u0","v0","u1","du","dv","duu","dvv","_h","_i","_j","_l","origin","mat4.rotate","vec3.negate","textureRef","accessor","layer","BlockModel","dummy","definition","modelProvider","liquidRenderer","tintindex","chestRenderer","facing","SpecialRenderer","SpecialRenderers","ChunkBuilder","structure","resources","chunkPositions","blockName","blockProps","defaultProps","vec3.equals","blockDefinition","neighbor","ItemColors","getItemColor","colors","SpawnEggs","egg","ShaderProgram","vsSource","fsSource","vertexShader","fragmentShader","shaderProgram","shader","Renderer","width","fieldOfView","projMatrix","mat4.perspective","image","viewMatrix","ItemRenderer","mat4.ortho","vsColor","fsColor","vsGrid","fsGrid","StructureRenderer","X","Y","Z","translatedMatrix","mat4.copy","TextureAtlas","img","initialWidth","pixelWidth","part","canvas","ctx","vsVoxel","fsVoxel","VoxelRenderer","voxels","lookup","meshes","light","NoiseRouter","fieldParser","DensityFunction","WorldgenRegistries","router","mapAll","noiseCache","instantiate","randomKey","cached","NoiseSettings","settings","cellHeight","cellWidth","cellCountY","minCellY","NoiseSlideSettings","apply","slide","density","VerticalAnchor","absolute","aboveBottom","belowTop","SurfaceSystem","rule","defaultBlock","noiseChunk","worldgenContext","getBiome","minX","minZ","surfaceContext","SurfaceContext","ruleWithContext","worldX","worldZ","stoneDepthAbove","waterHeight","stoneDepthOffset","worldPos","oldState","stoneDepthBelow","newState","system","cellX","cellZ","level00","level10","level01","level11","SurfaceRule","sequence","SurfaceCondition","rules","rulesWithContext","ifTrue","thenRun","abovePreliminarySurface","biome","not","stoneDepth","verticalGradient","_g","yAbove","_k","biomes","biomeSet","addSurfaceDepth","secondaryDepthRange","ceiling","surfaceDepth","secondaryDepth","randomName","trueAtAndBelow","falseAtAndAbove","trueAtAndBelowY","falseAtAndAboveY","chance","surfaceDepthMultiplier","addStoneDepth","anchor","NoiseGeneratorSettings","createNoise","Transformer","NoiseParser","inputParser","HolderHolder","ConstantMinMax","OldBlendedNoise","FlatCache","Interpolated","Cache2D","CacheOnce","CacheAllInCell","Noise","EndIslands","WeirdScaledSampler","RarityValueMapper","ShiftedNoise","RangeChoice","_m","ShiftA","ShiftB","Shift","BlendDensity","Clamp","_n","_o","Mapped","Ap2","Ap2Type","Spline","_p","YClampedGradient","_q","_r","_s","_t","_Constant","holder","blendedNoise","Wrapper","wrapped","quartX","quartZ","blockX","blockZ","blockY","firstX","firstY","firstZ","noiseData","f1","f2","f3","_WeirdScaledSampler","rarityValueMapper","shiftX","shiftY","shiftZ","minInclusive","maxExclusive","whenInRange","whenOutOfRange","ShiftNoise","offsetNoise","newNoise","_Mapped","minInput","argument1","argument2","min1","min2","max1","max2","newCubicSpline","fromY","toY","fromValue","toValue","FluidStatus","Aquifer","createDisabled","fluidPicker","_NoiseAquifer","globalFluidPicker","gridSizeY","gridX","gridY","gridZ","mag1","mag2","mag3","loc2","loc3","xOffset","yOffset","zOffset","status1","status2","status3","similarity12","similarity13","similarity23","pressure","barrier","pressure12","pressure13","pressure23","fluid1","fluid2","levelDiff","levelAvg","levelAvgDiff","cachedStatus","globalStatus","minPreliminarySurface","isAquifer","preliminarySurface","noOffset","newStatus","allowedFloodedness","floodedness","spread","statusLevel","fluid","global","lava","cachedLocation","NoiseAquifer","CheckerboardBiomeSource","FixedBiomeSource","Climate","temperature","humidity","continentalness","erosion","weirdness","TargetPoint","parameters","ParamPoint","Param","diffMax","diffMin","Parameters","things","RTree","Sampler","_RTree","thing","RLeaf","nodes","sortedNodes","RSubTree","subTree2","subTree","abs","arrayList","arrayList2","distance","leaf","RNode","space","closest_leaf","d1","leaf2","MultiNoiseBiomeSource","climateSampler","_TheEndBiomeSource","sectionX","sectionZ","TheEndBiomeSource","BiomeSource","findBiomeHorizontal","biomeSource","centerX","centerZ","sampler","step","searchFromCenter","centerQuardX","centerQuardZ","quardRange","quardY","found_count","currentRangeStart","currentRange","quardZOffset","isZEdge","quardXOffset","quardX","quardZ","Heightmap","HeightProvider","constant","uniform","biased_to_bottom","very_biased_to_bottom","trapezoid","weighted_list","maxInclusive","maxY","inner","r1","r2","plateau","slope","distribution","totalWeight","sum","NoiseChunk","cellCountXZ","cellNoiseMinY","randomState","aquifersEnabled","finalDensity","MaterialRule","fromList","NoiseChunkGenerator","lavaFluid","defaultFluid","heightmap","fillArray","cellY","offY","onlyFirstZ","sectionY","offX","offZ","quartY","RandomState","noiseSettings","legacyRandom","mapped","getNoise","noises","StructurePoolElement","template","EmptyPoolElement","FeaturePoolElement","compoundMap","_SinlgePoolElement","pos1","pos2","minPos","maxPos","SinlgePoolElement","ListPoolElement","elementBoundingBox","_StructureTemplatePool","rawTemplates","weight","StructureTemplatePool","WorldgenStructure","chunkX","chunkZ","posX","posZ","StructureSettings","validBiomes","GenerationContext","structurePoolParser","BiomeTagParser","BuriedTreasureStructure","DesertPyramidStructure","EndCityStructure","NetherFortressStructure","IglooStructure","startHeight","startPool","startJigsawNameString","startJigsawName","JigsawStructure","JungleTempleStructure","MineshaftStructure","OceanMonumentStructure","OceanRuinStructure","RuinedPortalStructure","isBeached","ShipwreckStructure","StrongholdStructure","SwampHutStructure","WoodlandMansionStructure","startingPoolHolder","projectStartToHeightmap","startingElement","startJigsawOffset","templateStartPos","boundingBox","jigsaws","jigsaw","SinglePieceStructure","NetherFossilStructure","_StructureSet","structures","placement","StructurePlacement","weightIndex","StructureSet","StructureSelectionEntry","locateOffset","frequencyReductionMethod","frequency","exclusionZone","spacing","separation","spreadType","preferredBiomes","_biomeSource","_sampler","_concentricRingsSeed","FrequencyReducer","fromType","LegacyPillagerOutpostReducer","LegacyArbitrarySaltProbabilityReducer","LegacyProbabilityReducerWithDouble","ProbabilityReducer","ExclusionZone","otherSet","chunkCount","SpreadType","RandomSpreadStructurePlacement","maxOffset","offsetX","offsetZ","placementX","palcementZ","minChunkX","minChunkZ","maxChunkX","maxChunkZ","positions","SEARCH_RANGE","ConcentricRingsStructurePlacement","concentricRingsSeed","angle","current_spread","ringNr","posInRingNr","current_distance","provider","searchResult","results","position","isNothing","subject","isObject","toArray","extend","sourceKeys","repeat","string","cycle","isNegativeZero","YAMLException","reason","compact","Mark","column","maxLength","snippet","where","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","compileStyleAliases","style","alias","Type","compileList","exclude","includedSchema","currentType","previousType","previousIndex","compileMap","collectType","Schema","types","seq","failsafe","resolveYamlNull","constructYamlNull","isNull","object","resolveYamlBoolean","constructYamlBoolean","isBoolean","isHexCode","isOctCode","isDecCode","resolveYamlInteger","hasDigits","ch","constructYamlInteger","sign","digits","isInteger","YAML_FLOAT_PATTERN","resolveYamlFloat","constructYamlFloat","SCIENTIFIC_WITHOUT_DOT","representYamlFloat","isFloat","json","core","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","resolveYamlTimestamp","constructYamlTimestamp","year","month","day","hour","minute","second","fraction","tz_hour","tz_minute","representYamlTimestamp","resolveYamlMerge","NodeBuffer","_require","require","BASE64_MAP","resolveYamlBinary","idx","bitlen","constructYamlBinary","tailbits","representYamlBinary","isBinary","_hasOwnProperty","_toString","resolveYamlOmap","objectKeys","pair","pairKey","pairHasKey","constructYamlOmap","resolveYamlPairs","constructYamlPairs","resolveYamlSet","constructYamlSet","default_safe","resolveJavascriptUndefined","constructJavascriptUndefined","representJavascriptUndefined","isUndefined","resolveJavascriptRegExp","regexp","constructJavascriptRegExp","representJavascriptRegExp","isRegExp","esprima","resolveJavascriptFunction","ast","constructJavascriptFunction","body","representJavascriptFunction","isFunction","default_full","DEFAULT_SAFE_SCHEMA","DEFAULT_FULL_SCHEMA","CONTEXT_FLOW_IN","CONTEXT_FLOW_OUT","CONTEXT_BLOCK_IN","CONTEXT_BLOCK_OUT","CHOMPING_CLIP","CHOMPING_STRIP","CHOMPING_KEEP","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","escapedHexLen","fromDecimalCode","simpleEscapeSequence","charFromCodepoint","simpleEscapeCheck","simpleEscapeMap","State","generateError","throwError","throwWarning","directiveHandlers","major","minor","handle","captureSegment","checkJson","_position","_length","_character","_result","mergeMappings","destination","overridableKeys","quantity","storeMappingPair","keyTag","keyNode","valueNode","startLine","startPos","readLineBreak","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","readPlainScalar","nodeIndent","withinFlowCollection","preceding","following","captureStart","captureEnd","hasPendingContent","_line","_lineStart","_lineIndent","_kind","readSingleQuotedScalar","readDoubleQuotedScalar","hexLength","hexResult","readFlowCollection","readNext","_tag","_anchor","isPair","isExplicitPair","isMapping","composeNode","readBlockScalar","folding","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockSequence","detected","readBlockMapping","flowIndent","allowCompact","_pos","atExplicitKey","readTagProperty","isVerbatim","isNamed","tagHandle","tagName","readAnchorProperty","readAlias","parentIndent","nodeContext","allowToSeek","allowBlockStyles","allowBlockScalars","allowBlockCollections","indentStatus","atNewLine","hasContent","typeIndex","typeQuantity","blockIndent","readDocument","documentStart","directiveName","directiveArgs","hasDirectives","loadDocuments","nullpos","loadAll","iterator","documents","load","safeLoadAll","safeLoad","loader","CHAR_TAB","CHAR_LINE_FEED","CHAR_CARRIAGE_RETURN","CHAR_SPACE","CHAR_EXCLAMATION","CHAR_DOUBLE_QUOTE","CHAR_SHARP","CHAR_PERCENT","CHAR_AMPERSAND","CHAR_SINGLE_QUOTE","CHAR_ASTERISK","CHAR_COMMA","CHAR_MINUS","CHAR_COLON","CHAR_EQUALS","CHAR_GREATER_THAN","CHAR_QUESTION","CHAR_COMMERCIAL_AT","CHAR_LEFT_SQUARE_BRACKET","CHAR_RIGHT_SQUARE_BRACKET","CHAR_GRAVE_ACCENT","CHAR_LEFT_CURLY_BRACKET","CHAR_VERTICAL_LINE","CHAR_RIGHT_CURLY_BRACKET","ESCAPE_SEQUENCES","DEPRECATED_BOOLEANS_SYNTAX","compileStyleMap","encodeHex","character","indentString","spaces","ind","generateNextLine","testImplicitResolving","isWhitespace","isPrintable","isNsChar","isPlainSafe","isPlainSafeFirst","needIndentIndicator","leadingSpaceRe","STYLE_PLAIN","STYLE_SINGLE","STYLE_LITERAL","STYLE_FOLDED","STYLE_DOUBLE","chooseScalarStyle","singleLineOnly","indentPerLevel","lineWidth","testAmbiguousType","char","prev_char","hasLineBreak","hasFoldableLine","shouldTrackWidth","previousLineBreak","plain","writeScalar","iskey","testAmbiguity","blockHeader","dropEndingNewline","foldString","indentIndicator","clip","keep","chomp","lineRe","nextLF","foldLine","prevMoreIndented","moreIndented","breakRe","nextChar","escapeSeq","writeFlowSequence","writeNode","writeBlockSequence","writeFlowMapping","objectKeyList","objectKey","objectValue","pairBuffer","writeBlockMapping","explicitPair","detectType","explicit","typeList","objectOrArray","duplicateIndex","duplicate","arrayLevel","getDuplicateReferences","objects","duplicatesIndexes","inspectNode","dump","safeDump","dumper","deprecated","jsYaml","yaml","rfdc_1","rfdc","copyBuffer","cur","rfdcCircles","cloneProto","cloneArray","o2","refs","refsNew","ARTICLE_PREFIX","ARTICLE_OVERRIDES","Map","Object","getArticleLink","override","replaceAll","ColormapTypes","createColormap","colormaps","intervals","ar","ag","ab","br","bg","Math","floor","Colormaps","getColormap","__variableDynamicImportRuntimeHelper","glob","F","Locale","createContext","lang","Locales","English","localize","en","resolveLocaleParams","parseInt","slice","undefined","loadLocale","language","langConfig","languages","find","partners","default","useLocale","useContext","LocaleProvider","setLanguage","useState","useCallback","newLang","Store","useEffect","getLanguage","Promise","all","_jsx","Provider","useActiveTimeout","cooldown","initial","setActive","timeout","useRef","trigger","clearTimeout","setTimeout","useAsync","inputs","initialState","loading","callback","useAsyncFn","refresh","AsyncCancel","Symbol","setState","isMounted","lastCallId","callId","then","LOSE_FOCUS","useFocus","hider","addEventListener","removeEventListener","useLocalStorage","parse","stringify","localStorage","getItem","setter","removeItem","setItem","useMediaQuery","query","prefers","setPrefers","matchMedia","mediaQuery","useModel","invalidated","addListener","removeListener","getValue","search","URLSearchParams","useSearchParam","window","setValue","changeValue","delete","set","changeUrl","TAG_KEY","TAG_SEP","useTags","tags","setTags","activeTags","useMemo","split","toggleTag","force","includes","join","sort","VERSION_PARAM","Version","changeTargetVersion","useVersion","VersionProvider","getVersionOrDefault","targetVersion","VersionIds","newVersion","store","updateSearch","getVersion","DRAFT_PROJECT","FilePatterns","RegExp","Project","projects","project","createProject","changeProject","updateProject","updateFile","openFile","useProject","ProjectProvider","setProjects","getProjects","projectName","setProjectName","getOpenProject","fileId","setFileId","changeProjects","setOpenProject","edits","newId","exists","some","gen","generators","genPath","Error","cleanUrl","getFilePath","disectFilePath","getProjectData","fromEntries","biomeColors","setBiomeColor","useStore","StoreProvider","setBiomeColors","JSON","Theme","actualTheme","useTheme","ThemeProvider","getTheme","prefersLight","prefersDark","newTheme","document","documentElement","classList","toggle","VERSIONS_IN_TITLE","Title","title","changeTitle","useTitle","versions","suffix","TitleProvider","setTitle","versionIds","titleSuffix","ID_LANGUAGE","ID_THEME","ID_VERSION","ID_INDENT","ID_FORMAT","ID_HIGHLIGHTING","ID_SOUNDS_VERSION","ID_PROJECTS","ID_BACKUPS","ID_PREVIEW_PANEL_OPEN","ID_PROJECT_PANEL_OPEN","ID_OPEN_PROJECT","ID_TREE_VIEW_MODE","ID_COLORMAP","ID_GENERATOR_HISTORY","ID_WHATS_NEW_SEEN","DEFAULT_VERSION","getIndent","getFormat","getHighlighting","getSoundsVersion","getBackup","getPreviewPanelOpen","open","getProjectPanelOpen","getTreeViewMode","getGeneratorHistory","setIndent","setFormat","format","setHighlighting","highlighting","setSoundsVersion","setBackup","backups","setPreviewPanelOpen","setProjectPanelOpen","visitGenerator","push","getWhatsNewSeen","seeWhatsNew","ids","now","Date","toISOString","old","CACHE_NAME","CACHE_LATEST_VERSION","CACHE_PATCH","latestVersion","mcmetaUrl","mcmetaTarballUrl","changesUrl","fixesUrl","versionDiffUrl","whatsNewUrl","mcmeta","tarball","dynamic","validateCache","applyPatches","deleteMatching","startsWith","fetchData","versionId","collectionTarget","blockStateTarget","console","_fetchRegistries","_fetchBlockStateMap","debug","cachedFetch","warn","fetchRegistries","fetchBlockStates","fetchPreset","fetch","fetchAllPresets","fetchSounds","getSoundUrl","fetchVersions","fetchResources","blockDefinitions","models","uvMapping","atlas","loadImage","Image","onload","crossOrigin","fetchLanguage","fetchChangelogs","changes","versionMap","fetchBugfixes","fixes","fetchVersionDiff","diff","fetchWhatsNew","whatsNew","seenState","seenAt","REFRESHED","Set","decode","cache","caches","cacheResponse","has","fetchAndCache","ok","fetchResponse","RAWGITHUB_REGEX","noCache","backupUrl","fetchClone","promises","request","PATCHES","forEach","patch","toFixed","Resources","getResources","ResourceManager","RENDER_SIZE","ItemRenderCache","renderItem","cache_key","promise","getContext","preserveDrawingBuffer","renderer","log","drawItem","toDataURL","constructor","textureAtlas","blockModels","empty","loadBlockDefinitions","loadBlockModels","loadBlockAtlas","getBlockDefinition","getBlockModel","getTextureUV","getTextureAtlas","getBlockFlags","opaque","getBlockProperties","getDefaultBlockProperties","flatten","definitions","atlasCanvas","drawImage","imageData","getImageData","dv2","ResourceWrapper","overrides","Languages","mcLang","mc","cacheKey","replaceTranslation","c0","c1","num","isNaN","TextComponent","component","shadow","parts","inherit","_jsxs","class","TextPart","visitComponent","consumer","Array","isArray","keybind","bold","italic","underlined","strikethrough","TextColors","black","dark_blue","dark_green","dark_aqua","dark_red","dark_purple","gold","gray","dark_gray","blue","green","aqua","red","light_purple","yellow","white","TextColorKeys","resolveTranslate","with","createStyle","with_","fontWeight","fontStyle","textDecoration","initMinejago","RawReference","bind","RawStringNode","modRecipeTypes","validator","Switch","Case","group","ingredient","experience","brewing_time","disableSwitchContext","lore","description","power_color","enum","additional","tagline","border_particle","has_sets","is_special","modifier","operation","entity_type","stack","day_time","weather","ID","initSherdsApi","pattern","initPartners","Versions","Models","versionGetter","1.18.2","1.19.3","1.19.4","1.20","__vitePreload","1.20.2","1.20.3","1.20.5","1.21.2","CachedDecorator","CachedFeature","CachedCollections","mcschema","getCollections","blockStates","getSchemas","getModel","versionData","choiceContext","schemaName","wrapLists","reset","validate","getBlockStates","checkVersion","minVersionId","maxVersionId","findIndex","minVersion","maxVersion","LZString","keyStrBase64","keyStrUriSafe","baseReverseDic","getBaseValue","alphabet","uncompressed","TotalLen","current_value","bitsPerChar","getCharFromInt","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","resetValue","getNextValue","enlargeIn","dictSize","numBits","resb","maxpower","module","API_PREFIX","ShareCache","shareSnippet","jsonData","show_preview","lz","compressToBase64","fetchApi","rate","getSnippet","decompressFromBase64","headers","INDENTS","tabs","minified","commentJson","FORMATS","snbt","fromString","toSimplifiedJson","jsonToNbt","toPrettyString","flowLevel","Number","stringifySource","parseSource","getSourceIndent","getSourceIndents","getSourceFormats","decToHex","padStart","Uint8Array","crypto","getRandomValues","randomSeed","BigInt","MAX_SAFE_INTEGER","generateUUID","generateColor","newSeed","dimensions","hashString","imul","charCodeAt","getPath","searchIndex","indexOf","getGenerator","trimmedUrl","pathname","stringToColor","rgbToHex","hexToRgb","deepClone","deepEqual","valueOf","prototype","hasOwnProperty","call","readZip","File","zip","Blob","getEntries","getData","writeZip","close","computeIfAbsentAsync","getWeightedRandom","getWeight","iterateWorld2D","vec2","makeFloat","Infinity","G","sqrt","CS","cos","PI","SS","sin","approxGivensQuat","qrGivensQuat","hypot","stepJacobi","quat","m01","m10","m00","m11","m02","m20","m22","m12","m21","svdDecompose","p0","a3","c3","s3","composeMatrix","translation","leftRotation","rightRotation","parseGitPatch","before","after","charAt","legacyFolders","Ad","getElementById","remove","ethicalads","Btn","icon","clazz","tooltip","tooltipLoc","onClick","disabled","Octicon","BtnInput","large","larger","doSelect","placeholder","dataList","onInput","select","dataListId","stopPropagation","BtnLink","swapped","BtnMenu","relative","Card","overlay","content","ErrorPanel","reportable","onDismiss","body_","stackVisible","setStackVisible","setStack","mapStackTrace","mappedStack","fullName","encodeURIComponent","info","FileUpload","accept","fileUpload","onUpload","onDrop","preventDefault","dataTransfer","onDragOver","Footer","donate","rel","heart","mark_github","Giscus","term","Themes","dark","Header","changeLanguage","Icons","home","TAG","viewBox","xmlns","STRUCTURE","rx","report","sounds","cx","cy","customized","stroke","advancement","block_definition","chat_type","dimension_type","font","item_modifier","loot_table","pack_mcmeta","recipe","text_component","world","worldgen","MODALS_KEY","Modal","addCurrentModals","dispatchEvent","Event","bubbles","newModals","getAttribute","removeAttribute","setAttribute","alert","archive","arrow_left","arrow_right","arrow_switch","chevron_down","chevron_left","chevron_right","chevron_up","circle_slash","clippy","codescan_checkmark","diff_added","diff_modified","diff_removed","diff_renamed","dash","device_desktop","dot_fill","download","eye","eye_closed","file_directory","file_zip","flame","gear","git_commit","globe","issue_opened","kebab_horizontal","link_external","lock","megaphone","moon","mortar_board","package","pencil","play","plus_circle","question","repo","rocket","rows","sort_asc","sort_desc","square_fill","sun","sync","terminal","three_bars","trashcan","undo","unfold","unlock","upload","x_circle","ToolCard","titleIcon","ToolHead","ToolGroup","TreeView","Group","Leaf","roots","groups","leaves","hidden","setHidden","childs","VersionSwitcher","allowed","hasAny","onAny","showMore","setShowMore","reverse","hasMoreVersions","show","shownVersions","Checkbox","checked","BaseInput","evt","onKeyDown","onEnter","onCancel","autofocus","displayName","TextInput","NumberInput","RangeInput","SearchList","onSelect","searchPlaceholder","noResults","setSearch","terms","trim","every","FileCreation","onClose","doSave","unwrapLists","spellcheck","readOnly","FileRenaming","VERSION_SEP","GeneratorCard","minimal","versionText","substring","noPath","Badge","GeneratorList","versionFilter","setVersionFiler","versionedGenerators","filteredGenerators","toLowerCase","ColormapSelector","doChange","DYNAMIC_REGISTRIES","Deepslate","deepslate19","loadedVersion","loadingVersion","loadingPromise","deepslateCache","cacheState","settingsCache","routerCache","generatorCache","biomeSourceCache","randomStateCache","structureContextCache","chunksCache","biomeCache","presetCache","loadVersion","applyProjectData","doLoadVersion","cachedDeepslate","REGISTRY","NOISE","DENSITY_FUNCTION","clear","loadChunkGenerator","biomeState","newCacheState","createNoiseSettings","xzSize","ySize","createBiomeSource","chunkGenerator","isVersion","preset","generator","biome_source","FixedBiome","numBiomes","_y","multiNoise","MultiNoise","Noises","TEMPERATURE","vegetation","VEGETATION","continents","CONTINENTALNESS","EROSION","ridges","RIDGE","fromRouter","withSettings","noiseSampler","NoiseSampler","sample","minDist","minBiome","altitude","NOISE_SETTINGS","getOrThrow","generateChunks","ceil","buildSurface","computeBiome","loadDensityFunction","noiseRouter","forkPositional","min_y","size_horizontal","size_vertical","sampling","xz_scale","y_scale","xz_factor","y_factor","bottom_slide","top_slide","terrain_shaper","jaggedness","Visitor","loadStructureSet","unknownBiome","SimpleStructure","findGenerationPoint","_random","_context","structureSet","BIOME","biomeTag","getTagRegistry","getWorldgenStructureContext","getNoiseSettings","getNoiseRouter","getBlockState","DEEPSLATE","InteractiveCanvas2D","onSetup","onDraw","onHover","onResize","pixelSize","startPosition","startScale","minScale","maxScale","dragStart","dragButton","centerPos","viewScale","frameRequest","mat3","halfWidth","clientWidth","halfHeight","clientHeight","pow","offsetY","redraw","cancelAnimationFrame","requestAnimationFrame","onMouseDown","button","onMouseMove","dragEnd","onMouseUp","onMouseLeave","onWheel","newScale","deltaY","onContextMenu","resizeHandler","LAYERS","DETAIL_DELAY","DETAIL_SCALE","BiomeSourcePreview","shown","setSeed","setLayer","setYOffset","focused","setFocused","focused2","setFocused2","hasRandomness","loaded","actualLayer","detailCanvas","detailCtx","detailImageData","detailTimeout","actualDraw","getBiomeColor","df","colorPicker","compute","putImageData","detailTransform","flatMap","toPrecision","VanillaColors","InteractiveCanvas3D","startDistance","startYRotation","startXRotation","viewDist","yRotation","xRotation","mat4","vec3","PREVIEW_ID","BlockStatePreview","serializedData","wrapper","addBlock","setViewport","drawStructure","terrain","featureColors","decorateChunk","getPlacements","modifyPlacement","placements","feature","features","decorateY","sampleInt","min_inclusive","max_inclusive","mean","nextGaussian","deviation","reduce","resolveAnchor","_ctx","above_bottom","below_top","sampleHeight","n1","useFeature","featureFn","Features","getPositions","decorator","decoratorFn","Decorators","decorated","random_boolean_selector","nextFloat","feature_true","feature_false","random_selector","simple_random_selector","count_extra","extra_chance","extra_count","count_multilayer","count_noise","biomeInfoNoise","noise_level","below_noise","above_noise","count_noise_biased","noise_factor","noise_offset","noise_to_count_ratio","dark_oak_tree","_config","seaLevel","outer","depth_average","baseline","emerald_ore","fire","glowstone","heightmap_spread_double","heightmap_world_surface","iceberg","lava_lake","nope","maximum","top_offset","bottom_offset","range_biased","range_very_biased","spread_32_above","top_solid_heightmap","magma","surface_relative_threshold","water_lake","PlacementModifiers","count_on_every_layer","environment_scan","height_range","in_square","noise_based_count","noise_threshold_count","random_offset","xz_spread","y_spread","rarity_filter","DecoratorPreview","chunkFeatures","fork","ctx2D","MODES","DensityFunctionPreview","setMode","voxelMode","topDown","setOffset","onSetup2D","onResize2D","onDraw2D","colormapFn","onHover2D","cutoff","setCutoff","onSetup3D","onResize3D","onDraw3D","draw","setVoxels","ItemTooltip","advanced","isPotion","getCompound","getString","descriptionId","toUpperCase","getList","String","durability","enchantments","Compound","attributeModifiers","shouldShow","hasNumber","getNumber","attr","amount","addition","isCurse","maxLevel","hasCompound","getBoolean","TooltipMasks","unbreakable","can_destroy","can_place","dye","upgrades","StackMixers","container","fillContainer","assignSlots","generateLootTable","lootTable","createLootContext","generateTable","mixer","stackMixer","SLOT_COUNT","slots","queue","itemA","splice","splitCount","itemB","splitItem","pop","tableConsumer","decorateFunctions","functions","pools","luck","dayTime","daytime","getItemTag","getLootTable","getPredicate","generatePool","composeConditions","conditions","poolConsumer","rolls","computeInt","computeFloat","bonus_rolls","computeWeight","remainingWeight","expandEntry","canEntryRun","child","tagEntry","createItem","entryConsumer","quality","compositeFunction","composeFunctions","function","LootFunctions","enchant_randomly","isBook","isDiscoverable","minLevel","enchantItem","enchant_with_levels","levels","treasure","enchants","selectEnchantments","enchant","exploration_map","decoration","limit_count","prepareIntRange","set_count","oldCount","set_damage","maxDamage","oldDamage","newDamage","finalDamage","set_enchantments","set_lore","newLore","getAsString","getOrCreateTag","set_name","newName","set_nbt","newTag","isCompound","set_potion","cond","testCondition","LootConditions","alternative","all_of","any_of","block_state_property","damage_source_properties","testDamageSourcePredicate","entity_properties","testEntityPredicate","entity_scores","inverted","killed_by_player","location_check","testLocationPredicate","match_tool","testItemPredicate","random_chance","random_chance_with_looting","looting_multiplier","probability","survives_explosion","table_bonus","chances","time_check","period","value_check","weather_check","raining","thundering","isRaining","isThundering","round","_predicate","additive","listKey","hasList","getItems","oldEnch","available","getAvailableEnchantments","first","getEnchantWeight","lastAdded","EnchantmentsRarityWeights","uncommon","rare","very_rare","isTreasure","minCost","maxCost","AlwaysHasGlint","itemHasGlint","ItemDisplay","slotDecoration","advancedTooltip","tooltipOffset","setTooltipOffset","tooltipSwap","setTooltipSwap","onMove","getBoundingClientRect","swap","ItemItself","preserveAspectRatio","textAnchor","fontFamily","hasGlint","DEFAULT_NAMESPACE","modelPath","RenderedItem","alt","draggable","LootTablePreview","setLuck","setDaytime","setWeather","mixItems","setMixItems","advancedTooltips","setAdvancedTooltips","slotStyle","GUI_WIDTH","GUI_HEIGHT","SLOT_SIZE","PREVIEW_DEFINITION","ModelPreview","NoisePreview","NoiseSettingsPreview","setBiome","unwrapped","noise_router","final_density","maxX","getName","inVoid","allBiomes","ANIMATION_TIME","RecipePreview","animation","setAnimation","itemTags","interval","setInterval","clearInterval","placeItems","gui","SLOTS","ingredients","allIngredientChoices","row","col","resultSlot","StructureSetPreview","chunkStructures","structureColors","getStructureInChunk","HasPreview","PreviewPanel","setCount","endsWith","ProjectCreation","setName","setNamespace","setFile","creating","setCreating","projectUpdater","onCreate","catch","invalidName","invalidNamespace","ProjectDeletion","ProjectPanel","onRename","onDeleteProject","treeViewMode","changeTreeViewMode","disectEntry","selected","selectFile","onDownload","hasPack","pack_format","pack","click","actions","onAction","FolderEntry","FileEntry","setFocus","at","getOutput","transformOutput","getOwnPropertySymbols","validation","enabled","SourcePanel","doCopy","doDownload","doImport","copySuccess","onError","braceLoaded","setBraceLoaded","retransform","onImport","textarea","editor","getSerializedOutput","brace","braceEditor","edit","setOptions","fontSize","showFoldWidgets","highlightSelectedWord","scrollPastEnd","$blockScrolling","on","getSession","setOption","selectAll","clipboard","writeText","fileName","changeIndent","changeFormat","changeHighlighting","autocorrect","onBlur","E","U","V","J","K","Q","ModelWrapper","selectRegistries","datalistEnums","hiddenFields","flattenedFields","inlineFields","nbtFields","fixedLists","collapsedFields","collapsableFields","itemPreviewFields","forceEnumContexts","findGenerator","keysModel","historyMax","FullNode","renderHtml","boolean","BooleanSuffix","contextPath","getArray","choiceContextPath","def","change","inject","pathLocale","contextPush","collapse","isToggled","useToggles","maxShown","setMaxShown","ErrorPopup","modelPush","onAdd","onAddBottom","cValue","cId","cPath","canToggle","itemStack","nested","Collapsed","onRemove","onMoveUp","onMoveDown","MemoedTreeNode","keyPath","keysSchema","cSchema","NumberSuffix","isDecorated","createDecoratorsWrapper","optional","onExpand","onCollapse","toggled","expanded","newCtx","loot","cPrefix","cSuffix","cBody","isFlattened","isInlined","HelpPopup","onReset","StringSuffix","toggleState","setToggleState","toggleAll","setToggleAll","ctrlKey","parsed","parseFloat","onColor","biomeSourceType","biomePath","newBiomes","childPath","hasOwn","fullId","datalistId","currentTarget","TreeNode","navigator","memo","chr","withModel","getAll","popupIcon","popup","originalFields","decorators","iterateNestedDecorators","featurePath","decoratorsPath","newDecorators","newPath","produceNestedDecorators","useErrorBoundary","SoundConfig","howler","sound","delay","pitch","volume","onEdit","onDelete","delayedPlay","setLoading","playing","setPlaying","invalid","setInvalid","howls","command","soundEvent","stop","soundPath","howl","completed","copyActive","setCopyActive","copyTimeout","breaking","obsolete","getDefaults","defaults","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape","html","encode","unescapeTest","unescape","caret","regex","nonWordAndColonTest","originIndependentUrl","sanitize","prot","resolveUrl","baseUrls","justDomain","protocol","domain","rtrim","relativeBase","noopTest","merge","splitCells","tableRow","cells","suffLen","currChar","findClosingBracket","checkSanitizeDeprecation","repeatString","outputLink","cap","lexer","token","indentCodeCompensation","matchIndentToCode","indentToCode","matchIndentInNode","indentInNode","Tokenizer","trimmed","istask","ischecked","blankLine","endsWithBlankLine","nextLine","rawLine","itemContents","endEarly","bull","isordered","itemRegex","nextBulletRegex","spacers","hasMultipleLineBreaks","chars","rtrimSlash","lastParenIndex","linkLen","links","maskedSrc","prevChar","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","hasNonSpaceChars","hasSpaceCharsOnBothEnds","mangle","prevCapZero","smartypants","inline","Lexer","tokens","lastToken","cutSrc","lastParagraphClipped","extTokenizer","startIndex","tempSrc","tempStart","getStartIndex","errMsg","keepPrevChar","infostring","quote","slugger","ordered","startatt","TextRenderer","Slugger","originalSlug","isDryRun","slug","occurenceAccumulator","Parser","l2","l3","cell","itemBody","task","checkbox","marked","done","pending","extensions","hasExtensions","ext","prevRenderer","prop","tokenizer","prevTokenizer","walkTokens","childTokens","ChangelogEntry","short","dangerouslySetInnerHTML","__html","SEARCH_KEY","ChangelogList","defaultOrder","navigation","filteredChangelogs","setSort","sortedChangelogs","limitActive","setLimitActive","limitedChangelogs","hiddenChanges","Issue","fix","summary","categories","IssueList","issues","issue","Tabs","WIKI_PAGE_PREFIX","VersionDetail","tab","setTab","articleLink","wikiPageLink","VersionMetaData","releaseDate","release_target","data_version","protocol_version","data_pack_version","resource_pack_version","VersionDiff","release_time","toLocaleDateString","mcmetaRawUrl","mcmetaBlobUrl","commit","diffView","setFilename","scrollY","scrollTo","behavior","parents","sha","DiffFolder","DiffEntry","newFileIndex","setWrap","stats","additions","deletions","previous_filename","controls","VersionEntry","INCLUDE_SNAPSHOTS","VersionList","snapshots","setSnapshots","filteredVersions","Changelog","CustomizedInput","help","trailing","isModified","CustomizedSlider","CustomizedToggle","BasicSettings","initialModel","changeModel","minHeight","maxHeight","oceans","caves","noiseCaves","carverCaves","ravines","BiomesSettings","registries","hiddenBiomes","biomeSize","biomeReplacements","findReplacement","replacements","replacement","DefaultReplacements","badlands","bamboo_jungle","beach","birch_forest","cherry_grove","cold_ocean","dark_forest","deep_cold_ocean","deep_dark","deep_frozen_ocean","deep_lukewarm_ocean","deep_ocean","desert","dripstone_caves","eroded_badlands","flower_forest","forest","frozen_ocean","frozen_peaks","frozen_river","grove","ice_spikes","jagged_peaks","jungle","lukewarm_ocean","lush_caves","mangrove_swamp","meadow","mushroom_fields","ocean","old_growth_birch_forest","old_growth_pine_taiga","old_growth_spruce_taiga","plains","river","savanna","savanna_plateau","snowy_beach","snowy_plains","snowy_slopes","snowy_taiga","sparse_jungle","stony_peaks","stony_shore","sunflower_plains","swamp","taiga","warm_ocean","windswept_forest","windswept_gravelly_hills","windswept_hills","windswept_savanna","wooded_badlands","CustomizedModel","getDefault","_version","ancientCities","buriedTreasures","desertPyramids","igloos","jungleTemples","mineshafts","oceanMonuments","oceanRuins","pillagerOutposts","ruinedPortals","shipwrecks","strongholds","swampHuts","trailRuins","villages","woodlandMansions","dungeons","dungeonTries","lavaLakes","lavaLakeRarity","lavaLakeRarityUnderground","dirt","tries","gravel","minAboveBottom","maxBelowTop","graniteLower","graniteUpper","dioriteLower","dioriteUpper","andesiteLower","andesiteUpper","coalLower","coalUpper","ironSmall","ironMiddle","ironUpper","copper","copperLarge","goldLower","redstoneLower","maxAboveBottom","lapis","lapisBuried","emerald","diamond","diamondBuried","diamondLarge","FeatureCollisionPrefix","PackTypes","generateCustomized","vanillaFiles","vanilla","acc","featureCollisionIndex","generateBiomeReplacements","generateDimensionType","generateNoiseSettings","generateCarvers","generateClimateNoises","generateStructures","generateDungeonFeatures","generateLakeFeatures","generateOreFeatures","isUnchanged","logical_height","formatIdentifier","argument","sea_level","default_fluid","Name","Properties","extraVanilla","Structures","getDisabledFeature","deepTries","deepVanilla","normalVanilla","undergroundVanilla","surfaceVanilla","Ores","placed","minBelowTop","configured","CustomizedOre","changeOre","calcHeight","CustomizedOreGroup","ores","isEnabled","OresSettings","StructuresSettings","CustomizedPanel","setModel","setError","hasDownloaded","setHasDownloaded","generate","getDiffModel","MIN_VERSION","Customized","errorBoundary","errorRetry","allowedVersions","SHARE_KEY","SchemaGenerator","currentPreset","setCurrentPreset","sharedSnippetId","setSharedSnippetId","ignoreChange","backup","loadBackup","cancel","snippetGen","previewShown","setPreviewShown","setSourceShown","historyIndex","redo","onKeyUp","setFileSaving","setPresets","selectPreset","selectVersion","shareUrl","setShareUrl","shareLoading","setShareLoading","shareShown","setShareShown","shareCopyActive","shareCopySuccess","share","copySharedId","finally","sourceShown","innerWidth","setCopy","setDownload","setImport","copySource","downloadSource","toggleSource","hasPreview","actionsShown","togglePreview","projectShown","setProjectShown","toggleProjectShown","projectCreating","setProjectCreating","projectDeleting","setprojectDeleting","fileSaving","fileRenaming","setFileRenaming","newFileQueued","setNewFileQueued","onNewFile","wiki","readonly","Generator","lower","proposedVersion","Generators","Guide","guide","legacyGuides","Guides","guides","WhatsNewTime","dateTime","createdAt","Intl","DateTimeFormat","dateStyle","timeStyle","MIN_FAVORITES","MAX_FAVORITES","Home","smallScreen","PopularGenerators","FavoriteGenerators","Spyglass","WhatsNew","Tools","Contributors","favorites","release","hugeScreen","latestChanges","supporters","contributors","otherContributors","ContributorsList","avatar","LegacyPartners","Partners","Sounds","setHowler","Howl","soundKeys","configs","setConfigs","addConfig","editConfig","deleteConfig","setDelayedPlay","playAll","downloadFunction","hasDelay","XYZ","XYZW","Transformation","cubeTexture","matrix","setMatrix","setTranslation","setLeftRotation","setScale","setRightRotation","normalizeLeft","setNormalizeLeft","normalizeRight","setNormalizeRight","usedMatrix","updateMatrix","affine","newTranslation","newLeftRotation","newRightRotation","fromMatrix4","changeMatrix","updateTranslation","changeTranslation","updateLeftRotation","changeLeftRotation","updateScale","changeScale","updateRightRotation","changeRightRotation","rotationMode","setRotationMode","leftRotationAxisAngle","changeLeftRotationAxisAngle","axisCopy","rightRotationAxisAngle","changeRightRotationAxisAngle","MeshRenderer","copiedDecomposed","setCopiedDecomposed","onCopyDecomposed","components","formatFloat","copiedComposed","setCopiedComposed","onCopyComposed","matrixData","Slider","vsMesh","fsMesh","meshShaderProgram","gridShaderProgram","grid","getProgram","createAtlasTexture","rebuild","addLine","setShader","prepareDraw","drawMesh","setTexture","selectedId","nextVersion","getOffsetVersion","previousVersion","offsetIndex","WhatsNewEntry","storeTime","startStoreTime","Worldgen","App","changeRoute","CustomEvent","Main","render"],"sources":["../../vite/modulepreload-polyfill","../../node_modules/preact/dist/preact.module.js","../../node_modules/preact-router/dist/preact-router.es.js","../../src/app/Analytics.ts","../../node_modules/@mcschema/core/lib/model/Path.js","../../node_modules/@mcschema/core/lib/model/Errors.js","../../node_modules/@mcschema/core/lib/utils.js","../../node_modules/@mcschema/core/lib/model/DataModel.js","../../node_modules/@mcschema/core/lib/nodes/Node.js","../../node_modules/@mcschema/core/lib/nodes/BooleanNode.js","../../node_modules/@mcschema/core/lib/nodes/ListNode.js","../../node_modules/@mcschema/core/lib/nodes/SwitchNode.js","../../node_modules/@mcschema/core/lib/nodes/ChoiceNode.js","../../node_modules/@mcschema/core/lib/nodes/MapNode.js","../../node_modules/@mcschema/core/lib/nodes/NumberNode.js","../../node_modules/@mcschema/core/lib/nodes/ObjectNode.js","../../node_modules/@mcschema/core/lib/nodes/Reference.js","../../node_modules/@mcschema/core/lib/nodes/StringNode.js","../../node_modules/@mcschema/core/lib/Hook.js","../../node_modules/@mcschema/core/lib/JsonUpdate.js","../../node_modules/@mcschema/core/lib/Registries.js","../../node_modules/@mcschema/core/lib/ValidationOption.js","../../node_modules/@mcschema/core/lib/index.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/deflate.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/inflate.js","../../node_modules/@zip.js/zip.js/lib/core/configuration.js","../../node_modules/@zip.js/zip.js/lib/core/util/mime-type.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/crc32.js","../../node_modules/@zip.js/zip.js/lib/core/util/encode-text.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/sjcl.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/aes-crypto.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/zip-crypto.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/codec.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/codec-pool-worker.js","../../node_modules/@zip.js/zip.js/lib/core/codecs/codec-pool.js","../../node_modules/@zip.js/zip.js/lib/z-worker-inline.js","../../node_modules/@zip.js/zip.js/lib/core/io.js","../../node_modules/@zip.js/zip.js/lib/core/constants.js","../../node_modules/@zip.js/zip.js/lib/core/util/cp437-decode.js","../../node_modules/@zip.js/zip.js/lib/core/util/decode-text.js","../../node_modules/@zip.js/zip.js/lib/core/engine.js","../../node_modules/@zip.js/zip.js/lib/core/zip-entry.js","../../node_modules/@zip.js/zip.js/lib/core/zip-reader.js","../../node_modules/@zip.js/zip.js/lib/core/zip-writer.js","../../node_modules/@zip.js/zip.js/lib/zip-fs.js","../../node_modules/@zip.js/zip.js/index.js","../../node_modules/deepslate/lib/nbt/Util.js","../../node_modules/deepslate/lib/nbt/io/DataInput.js","../../node_modules/deepslate/lib/nbt/io/DataOutput.js","../../node_modules/deepslate/lib/util/Json.js","../../node_modules/deepslate/lib/util/StringReader.js","../../node_modules/deepslate/lib/util/Util.js","../../node_modules/pako/dist/pako.esm.mjs","../../node_modules/deepslate/lib/nbt/tags/NbtType.js","../../node_modules/deepslate/lib/nbt/tags/NbtTag.js","../../node_modules/deepslate/lib/nbt/tags/NbtByte.js","../../node_modules/deepslate/lib/nbt/tags/NbtAbstractList.js","../../node_modules/deepslate/lib/nbt/tags/NbtByteArray.js","../../node_modules/deepslate/lib/nbt/tags/NbtFloat.js","../../node_modules/deepslate/lib/nbt/tags/NbtInt.js","../../node_modules/deepslate/lib/nbt/tags/NbtIntArray.js","../../node_modules/deepslate/lib/nbt/tags/NbtList.js","../../node_modules/deepslate/lib/nbt/tags/NbtLong.js","../../node_modules/deepslate/lib/nbt/tags/NbtLongArray.js","../../node_modules/deepslate/lib/nbt/tags/NbtShort.js","../../node_modules/deepslate/lib/nbt/tags/NbtString.js","../../node_modules/deepslate/lib/nbt/NbtParser.js","../../node_modules/deepslate/lib/nbt/tags/NbtCompound.js","../../node_modules/deepslate/lib/nbt/NbtFile.js","../../node_modules/deepslate/lib/nbt/NbtChunk.js","../../node_modules/deepslate/lib/nbt/NbtRegion.js","../../node_modules/deepslate/lib/nbt/tags/NbtDouble.js","../../node_modules/deepslate/lib/nbt/tags/NbtEnd.js","../../node_modules/deepslate/lib/core/Direction.js","../../node_modules/deepslate/lib/core/BlockPos.js","../../node_modules/deepslate/lib/core/Identifier.js","../../node_modules/deepslate/lib/core/BlockState.js","../../node_modules/deepslate/lib/core/PalettedContainer.js","../../node_modules/deepslate/lib/core/ChunkSection.js","../../node_modules/deepslate/lib/core/Chunk.js","../../node_modules/deepslate/lib/core/ChunkPos.js","../../node_modules/deepslate/lib/core/Holder.js","../../node_modules/deepslate/lib/core/HolderSet.js","../../node_modules/deepslate/lib/core/Registry.js","../../node_modules/deepslate/lib/core/world/Attribute.js","../../node_modules/deepslate/lib/core/world/AttributeModifier.js","../../node_modules/deepslate/lib/core/world/MobEffect.js","../../node_modules/deepslate/lib/core/world/MobEffectInstance.js","../../node_modules/deepslate/lib/core/world/Item.js","../../node_modules/deepslate/lib/core/ItemStack.js","../../node_modules/deepslate/lib/core/Rotation.js","../../node_modules/deepslate/lib/core/Structure.js","../../node_modules/deepslate/lib/core/world/Enchantment.js","../../node_modules/deepslate/lib/core/world/Potion.js","../../node_modules/deepslate/lib/math/Util.js","../../node_modules/deepslate/lib/math/CubicSpline.js","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/mat3.js","../../node_modules/gl-matrix/esm/mat4.js","../../node_modules/gl-matrix/esm/vec3.js","../../node_modules/gl-matrix/esm/vec4.js","../../node_modules/gl-matrix/esm/quat.js","../../node_modules/gl-matrix/esm/vec2.js","../../node_modules/deepslate/lib/math/Matrix3.js","../../node_modules/deepslate/lib/math/Vector.js","../../node_modules/deepslate/lib/math/Matrix4.js","../../node_modules/crypt/crypt.js","../../node_modules/charenc/charenc.js","../../node_modules/is-buffer/index.js","../../node_modules/md5/md5.js","../../node_modules/deepslate/lib/math/random/LegacyRandom.js","../../node_modules/deepslate/lib/math/random/XoroshiroRandom.js","../../node_modules/deepslate/lib/math/noise/SimplexNoise.js","../../node_modules/deepslate/lib/math/noise/ImprovedNoise.js","../../node_modules/deepslate/lib/math/noise/PerlinNoise.js","../../node_modules/deepslate/lib/math/noise/BlendedNoise.js","../../node_modules/deepslate/lib/math/noise/NormalNoise.js","../../node_modules/deepslate/lib/math/noise/PerlinSimplexNoise.js","../../node_modules/deepslate/lib/render/BlockColors.js","../../node_modules/deepslate/lib/render/Cull.js","../../node_modules/deepslate/lib/render/Vertex.js","../../node_modules/deepslate/lib/render/Line.js","../../node_modules/deepslate/lib/render/Mesh.js","../../node_modules/deepslate/lib/render/BlockDefinition.js","../../node_modules/deepslate/lib/render/Quad.js","../../node_modules/deepslate/lib/render/BlockModel.js","../../node_modules/deepslate/lib/render/SpecialRenderer.js","../../node_modules/deepslate/lib/render/ChunkBuilder.js","../../node_modules/deepslate/lib/render/ItemColors.js","../../node_modules/deepslate/lib/render/ShaderProgram.js","../../node_modules/deepslate/lib/render/Renderer.js","../../node_modules/deepslate/lib/render/ItemRenderer.js","../../node_modules/deepslate/lib/render/StructureRenderer.js","../../node_modules/deepslate/lib/render/TextureAtlas.js","../../node_modules/deepslate/lib/render/VoxelRenderer.js","../../node_modules/deepslate/lib/worldgen/NoiseRouter.js","../../node_modules/deepslate/lib/worldgen/NoiseSettings.js","../../node_modules/deepslate/lib/worldgen/VerticalAnchor.js","../../node_modules/deepslate/lib/worldgen/SurfaceSystem.js","../../node_modules/deepslate/lib/worldgen/NoiseGeneratorSettings.js","../../node_modules/deepslate/lib/worldgen/WorldgenRegistries.js","../../node_modules/deepslate/lib/worldgen/DensityFunction.js","../../node_modules/deepslate/lib/worldgen/Aquifer.js","../../node_modules/deepslate/lib/worldgen/biome/CheckerboardBiomeSource.js","../../node_modules/deepslate/lib/worldgen/biome/FixedBiomeSource.js","../../node_modules/deepslate/lib/worldgen/biome/Climate.js","../../node_modules/deepslate/lib/worldgen/biome/MultiNoiseBiomeSource.js","../../node_modules/deepslate/lib/worldgen/biome/TheEndBiomeSource.js","../../node_modules/deepslate/lib/worldgen/biome/BiomeSource.js","../../node_modules/deepslate/lib/worldgen/Heightmap.js","../../node_modules/deepslate/lib/worldgen/HeightProvider.js","../../node_modules/deepslate/lib/worldgen/NoiseChunk.js","../../node_modules/deepslate/lib/worldgen/NoiseChunkGenerator.js","../../node_modules/deepslate/lib/worldgen/RandomState.js","../../node_modules/deepslate/lib/worldgen/structure/StructurePoolElement.js","../../node_modules/deepslate/lib/worldgen/structure/StructureTemplatePool.js","../../node_modules/deepslate/lib/worldgen/structure/WorldgenStructure.js","../../node_modules/deepslate/lib/worldgen/structure/StructureSet.js","../../node_modules/deepslate/lib/worldgen/structure/StructurePlacement.js","../../node_modules/js-yaml/lib/js-yaml/common.js","../../node_modules/js-yaml/lib/js-yaml/exception.js","../../node_modules/js-yaml/lib/js-yaml/mark.js","../../node_modules/js-yaml/lib/js-yaml/type.js","../../node_modules/js-yaml/lib/js-yaml/schema.js","../../node_modules/js-yaml/lib/js-yaml/type/str.js","../../node_modules/js-yaml/lib/js-yaml/type/seq.js","../../node_modules/js-yaml/lib/js-yaml/type/map.js","../../node_modules/js-yaml/lib/js-yaml/schema/failsafe.js","../../node_modules/js-yaml/lib/js-yaml/type/null.js","../../node_modules/js-yaml/lib/js-yaml/type/bool.js","../../node_modules/js-yaml/lib/js-yaml/type/int.js","../../node_modules/js-yaml/lib/js-yaml/type/float.js","../../node_modules/js-yaml/lib/js-yaml/schema/json.js","../../node_modules/js-yaml/lib/js-yaml/schema/core.js","../../node_modules/js-yaml/lib/js-yaml/type/timestamp.js","../../node_modules/js-yaml/lib/js-yaml/type/merge.js","../../node_modules/js-yaml/lib/js-yaml/type/binary.js","../../node_modules/js-yaml/lib/js-yaml/type/omap.js","../../node_modules/js-yaml/lib/js-yaml/type/pairs.js","../../node_modules/js-yaml/lib/js-yaml/type/set.js","../../node_modules/js-yaml/lib/js-yaml/schema/default_safe.js","../../node_modules/js-yaml/lib/js-yaml/type/js/undefined.js","../../node_modules/js-yaml/lib/js-yaml/type/js/regexp.js","../../node_modules/js-yaml/lib/js-yaml/type/js/function.js","../../node_modules/js-yaml/lib/js-yaml/schema/default_full.js","../../node_modules/js-yaml/lib/js-yaml/loader.js","../../node_modules/js-yaml/lib/js-yaml/dumper.js","../../node_modules/js-yaml/lib/js-yaml.js","../../node_modules/js-yaml/index.js","../../node_modules/rfdc/index.js","../../src/app/services/Article.ts","../../src/app/components/previews/Colormap.ts","../../../../../../@vite/dynamic-import-helper","../../node_modules/preact/hooks/dist/hooks.module.js","../../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../src/app/contexts/Locale.tsx","../../src/app/hooks/useActiveTimout.ts","../../src/app/hooks/useAsync.ts","../../src/app/hooks/useAsyncFn.ts","../../src/app/hooks/useFocus.ts","../../src/app/hooks/useLocalStorage.ts","../../src/app/hooks/useMediaQuery.ts","../../src/app/hooks/useModel.ts","../../src/app/hooks/useSearchParam.ts","../../src/app/hooks/useTags.ts","../../src/app/contexts/Version.tsx","../../src/app/contexts/Project.tsx","../../src/app/contexts/Store.tsx","../../src/app/contexts/Theme.tsx","../../src/app/contexts/Title.tsx","../../src/app/Store.ts","../../src/app/services/DataFetcher.ts","../../src/app/services/Resources.ts","../../src/app/components/TextComponent.tsx","../../src/app/partners/Minejago.ts","../../src/app/partners/SherdsApi.ts","../../src/app/partners/index.ts","../../src/app/services/Schemas.ts","../../node_modules/lz-string/libs/lz-string.js","../../src/app/services/Sharing.ts","../../src/app/services/Source.ts","../../src/app/Utils.ts","../../src/app/components/Ad.tsx","../../src/app/components/Btn.tsx","../../src/app/components/BtnInput.tsx","../../src/app/components/BtnLink.tsx","../../src/app/components/BtnMenu.tsx","../../src/app/components/Card.tsx","../../src/app/components/ErrorPanel.tsx","../../src/app/components/FileUpload.tsx","../../src/app/components/Footer.tsx","../../src/app/components/Giscus.tsx","../../src/app/components/Header.tsx","../../src/app/components/Icons.tsx","../../src/app/components/Modal.tsx","../../src/app/components/Octicon.tsx","../../src/app/components/ToolCard.tsx","../../src/app/components/ToolGroup.tsx","../../src/app/components/TreeView.tsx","../../src/app/components/VersionSwitcher.tsx","../../src/app/components/forms/Checkbox.tsx","../../src/app/components/forms/Input.tsx","../../src/app/components/forms/SearchList.tsx","../../src/app/components/generator/FileCreation.tsx","../../src/app/components/generator/FileRenaming.tsx","../../src/app/components/generator/GeneratorCard.tsx","../../src/app/components/generator/GeneratorList.tsx","../../src/app/components/previews/ColormapSelector.tsx","../../src/app/components/previews/Deepslate.ts","../../src/app/components/previews/InteractiveCanvas2D.tsx","../../src/app/components/previews/BiomeSourcePreview.tsx","../../src/app/components/previews/InteractiveCanvas3D.tsx","../../src/app/components/previews/BlockStatePreview.tsx","../../src/app/components/previews/Decorator.ts","../../src/app/components/previews/DecoratorPreview.tsx","../../src/app/components/previews/DensityFunctionPreview.tsx","../../src/app/components/ItemTooltip.tsx","../../src/app/components/previews/LootTable.ts","../../src/app/components/ItemDisplay.tsx","../../src/app/components/previews/LootTablePreview.tsx","../../src/app/components/previews/ModelPreview.tsx","../../src/app/components/previews/NoisePreview.tsx","../../src/app/components/previews/NoiseSettingsPreview.tsx","../../src/app/components/previews/RecipePreview.tsx","../../src/app/components/previews/StructureSetPreview.tsx","../../src/app/components/generator/PreviewPanel.tsx","../../src/app/components/generator/ProjectCreation.tsx","../../src/app/components/generator/ProjectDeletion.tsx","../../src/app/components/generator/ProjectPanel.tsx","../../src/app/schema/transformOutput.ts","../../src/app/components/generator/SourcePanel.tsx","../../node_modules/preact/compat/dist/compat.module.js","../../src/app/schema/ModelWrapper.ts","../../src/app/schema/renderHtml.tsx","../../src/app/components/generator/Tree.tsx","../../src/app/components/sounds/SoundConfig.tsx","../../src/app/components/Badge.tsx","../../node_modules/marked/lib/marked.esm.js","../../src/app/components/versions/ChangelogEntry.tsx","../../src/app/components/versions/ChangelogList.tsx","../../src/app/components/versions/Issue.tsx","../../src/app/components/versions/IssueList.tsx","../../src/app/components/versions/VersionDetail.tsx","../../src/app/components/versions/VersionDiff.tsx","../../src/app/components/versions/VersionEntry.tsx","../../src/app/components/versions/VersionList.tsx","../../src/app/components/versions/VersionMetaData.tsx","../../src/app/pages/Changelog.tsx","../../src/app/components/customized/CustomizedInput.tsx","../../src/app/components/customized/CustomizedSlider.tsx","../../src/app/components/customized/CustomizedToggle.tsx","../../src/app/components/customized/BasicSettings.tsx","../../src/app/components/customized/BiomesSettings.tsx","../../src/app/components/customized/CustomizedModel.ts","../../src/app/components/customized/CustomizedGenerator.ts","../../src/app/components/customized/CustomizedOre.tsx","../../src/app/components/customized/CustomizedOreGroup.tsx","../../src/app/components/customized/OresSettings.tsx","../../src/app/components/customized/StructuresSettings.tsx","../../src/app/components/customized/CustomizedPanel.tsx","../../src/app/pages/Customized.tsx","../../src/app/components/generator/SchemaGenerator.tsx","../../src/app/pages/Generator.tsx","../../src/app/pages/Generators.tsx","../../src/app/pages/Guide.tsx","../../src/app/pages/Guides.tsx","../../src/app/components/whatsnew/WhatsNewTime.tsx","../../src/app/pages/Home.tsx","../../src/app/pages/LegacyPartners.tsx","../../src/app/pages/Partners.tsx","../../src/app/pages/Sounds.tsx","../../src/app/pages/Transformation.tsx","../../src/app/pages/Versions.tsx","../../src/app/components/whatsnew/WhatsNewEntry.tsx","../../src/app/pages/WhatsNew.tsx","../../src/app/pages/Worldgen.tsx","../../src/app/App.tsx","../../src/app/Main.tsx"],"sourcesContent":["__VITE_IS_MODERN__&&(function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n}());","var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P,C,$=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof $){if(m=u.props,g=(s=$.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in $&&$.prototype.render?u.__c=h=new $(m,x):(u.__c=h=new _(m,x),h.constructor=$,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=$.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,$.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==$.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==$.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}if(h.context=x,h.props=m,h.__v=u,h.__P=n,A=l.__r,P=0,\"prototype\"in $&&$.prototype.render)h.state=h.__s,h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context);else do{h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),C=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(C)?C:[C],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import { Component, cloneElement, createElement, toChildArray } from 'preact';\n\nvar EMPTY$1 = {};\n\nfunction assign(obj, props) {\n\t// eslint-disable-next-line guard-for-in\n\tfor (var i in props) {\n\t\tobj[i] = props[i];\n\t}\n\treturn obj;\n}\n\nfunction exec(url, route, opts) {\n\tvar reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tvar p = c[1].split('&');\n\t\tfor (var i=0; i<p.length; i++) {\n\t\t\tvar r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tvar max = Math.max(url.length, route.length);\n\tfor (var i$1=0; i$1<max; i$1++) {\n\t\tif (route[i$1] && route[i$1].charAt(0)===':') {\n\t\t\tvar param = route[i$1].replace(/(^:|[+*?]+$)/g, ''),\n\t\t\t\tflags = (route[i$1].match(/[+*?]+$/) || EMPTY$1)[0] || '',\n\t\t\t\tplus = ~flags.indexOf('+'),\n\t\t\t\tstar = ~flags.indexOf('*'),\n\t\t\t\tval = url[i$1] || '';\n\t\t\tif (!val && !star && (flags.indexOf('?')<0 || plus)) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatches[param] = decodeURIComponent(val);\n\t\t\tif (plus || star) {\n\t\t\t\tmatches[param] = url.slice(i$1).map(decodeURIComponent).join('/');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse if (route[i$1]!==url[i$1]) {\n\t\t\tret = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) { return false; }\n\treturn matches;\n}\n\nfunction pathRankSort(a, b) {\n\treturn (\n\t\t(a.rank < b.rank) ? 1 :\n\t\t\t(a.rank > b.rank) ? -1 :\n\t\t\t\t(a.index - b.index)\n\t);\n}\n\n// filter out VNodes without attributes (which are unrankeable), and add `index`/`rank` properties to be used in sorting.\nfunction prepareVNodeForRanking(vnode, index) {\n\tvnode.index = index;\n\tvnode.rank = rankChild(vnode);\n\treturn vnode.props;\n}\n\nfunction segmentize(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '').split('/');\n}\n\nfunction rankSegment(segment) {\n\treturn segment.charAt(0)==':' ? (1 + '*+?'.indexOf(segment.charAt(segment.length-1))) || 4 : 5;\n}\n\nfunction rank(path) {\n\treturn segmentize(path).map(rankSegment).join('');\n}\n\nfunction rankChild(vnode) {\n\treturn vnode.props.default ? 0 : rank(vnode.props.path);\n}\n\nvar customHistory = null;\n\nvar ROUTERS = [];\n\nvar subscribers = [];\n\nvar EMPTY = {};\n\nfunction setUrl(url, type) {\n\tif ( type === void 0 ) type='push';\n\n\tif (customHistory && customHistory[type]) {\n\t\tcustomHistory[type](url);\n\t}\n\telse if (typeof history!=='undefined' && history[type+'State']) {\n\t\thistory[type+'State'](null, null, url);\n\t}\n}\n\n\nfunction getCurrentUrl() {\n\tvar url;\n\tif (customHistory && customHistory.location) {\n\t\turl = customHistory.location;\n\t}\n\telse if (customHistory && customHistory.getCurrentLocation) {\n\t\turl = customHistory.getCurrentLocation();\n\t}\n\telse {\n\t\turl = typeof location!=='undefined' ? location : EMPTY;\n\t}\n\treturn (\"\" + (url.pathname || '') + (url.search || ''));\n}\n\n\n\nfunction route(url, replace) {\n\tif ( replace === void 0 ) replace=false;\n\n\tif (typeof url!=='string' && url.url) {\n\t\treplace = url.replace;\n\t\turl = url.url;\n\t}\n\n\t// only push URL into history if we can handle it\n\tif (canRoute(url)) {\n\t\tsetUrl(url, replace ? 'replace' : 'push');\n\t}\n\n\treturn routeTo(url);\n}\n\n\n/** Check if the given URL can be handled by any router instances. */\nfunction canRoute(url) {\n\tfor (var i=ROUTERS.length; i--; ) {\n\t\tif (ROUTERS[i].canRoute(url)) { return true; }\n\t}\n\treturn false;\n}\n\n\n/** Tell all router instances to handle the given URL.  */\nfunction routeTo(url) {\n\tvar didRoute = false;\n\tfor (var i=0; i<ROUTERS.length; i++) {\n\t\tif (ROUTERS[i].routeTo(url)===true) {\n\t\t\tdidRoute = true;\n\t\t}\n\t}\n\tfor (var i$1=subscribers.length; i$1--; ) {\n\t\tsubscribers[i$1](url);\n\t}\n\treturn didRoute;\n}\n\n\nfunction routeFromLink(node) {\n\t// only valid elements\n\tif (!node || !node.getAttribute) { return; }\n\n\tvar href = node.getAttribute('href'),\n\t\ttarget = node.getAttribute('target');\n\n\t// ignore links with targets and non-path URLs\n\tif (!href || !href.match(/^\\//g) || (target && !target.match(/^_?self$/i))) { return; }\n\n\t// attempt to route, if no match simply cede control to browser\n\treturn route(href);\n}\n\n\nfunction handleLinkClick(e) {\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) { return; }\n\trouteFromLink(e.currentTarget || e.target || this);\n\treturn prevent(e);\n}\n\n\nfunction prevent(e) {\n\tif (e) {\n\t\tif (e.stopImmediatePropagation) { e.stopImmediatePropagation(); }\n\t\tif (e.stopPropagation) { e.stopPropagation(); }\n\t\te.preventDefault();\n\t}\n\treturn false;\n}\n\n\nfunction delegateLinkHandler(e) {\n\t// ignore events the browser takes care of already:\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) { return; }\n\n\tvar t = e.target;\n\tdo {\n\t\tif (String(t.nodeName).toUpperCase()==='A' && t.getAttribute('href')) {\n\t\t\tif (t.hasAttribute('native')) { return; }\n\t\t\t// if link is handled by the router, prevent browser defaults\n\t\t\tif (routeFromLink(t)) {\n\t\t\t\treturn prevent(e);\n\t\t\t}\n\t\t}\n\t} while ((t=t.parentNode));\n}\n\n\nvar eventListenersInitialized = false;\n\nfunction initEventListeners() {\n\tif (eventListenersInitialized) { return; }\n\n\tif (typeof addEventListener==='function') {\n\t\tif (!customHistory) {\n\t\t\taddEventListener('popstate', function () {\n\t\t\t\trouteTo(getCurrentUrl());\n\t\t\t});\n\t\t}\n\t\taddEventListener('click', delegateLinkHandler);\n\t}\n\teventListenersInitialized = true;\n}\n\n\nvar Router = (function (Component$$1) {\n\tfunction Router(props) {\n\t\tComponent$$1.call(this, props);\n\t\tif (props.history) {\n\t\t\tcustomHistory = props.history;\n\t\t}\n\n\t\tthis.state = {\n\t\t\turl: props.url || getCurrentUrl()\n\t\t};\n\n\t\tinitEventListeners();\n\t}\n\n\tif ( Component$$1 ) Router.__proto__ = Component$$1;\n\tRouter.prototype = Object.create( Component$$1 && Component$$1.prototype );\n\tRouter.prototype.constructor = Router;\n\n\tRouter.prototype.shouldComponentUpdate = function shouldComponentUpdate (props) {\n\t\tif (props.static!==true) { return true; }\n\t\treturn props.url!==this.props.url || props.onChange!==this.props.onChange;\n\t};\n\n\t/** Check if the given URL can be matched against any children */\n\tRouter.prototype.canRoute = function canRoute (url) {\n\t\tvar children = toChildArray(this.props.children);\n\t\treturn this.getMatchingChildren(children, url, false).length > 0;\n\t};\n\n\t/** Re-render children with a new URL to match against. */\n\tRouter.prototype.routeTo = function routeTo (url) {\n\t\tthis.setState({ url: url });\n\n\t\tvar didRoute = this.canRoute(url);\n\n\t\t// trigger a manual re-route if we're not in the middle of an update:\n\t\tif (!this.updating) { this.forceUpdate(); }\n\n\t\treturn didRoute;\n\t};\n\n\tRouter.prototype.componentWillMount = function componentWillMount () {\n\t\tROUTERS.push(this);\n\t\tthis.updating = true;\n\t};\n\n\tRouter.prototype.componentDidMount = function componentDidMount () {\n\t\tvar this$1 = this;\n\n\t\tif (customHistory) {\n\t\t\tthis.unlisten = customHistory.listen(function (location) {\n\t\t\t\tthis$1.routeTo((\"\" + (location.pathname || '') + (location.search || '')));\n\t\t\t});\n\t\t}\n\t\tthis.updating = false;\n\t};\n\n\tRouter.prototype.componentWillUnmount = function componentWillUnmount () {\n\t\tif (typeof this.unlisten==='function') { this.unlisten(); }\n\t\tROUTERS.splice(ROUTERS.indexOf(this), 1);\n\t};\n\n\tRouter.prototype.componentWillUpdate = function componentWillUpdate () {\n\t\tthis.updating = true;\n\t};\n\n\tRouter.prototype.componentDidUpdate = function componentDidUpdate () {\n\t\tthis.updating = false;\n\t};\n\n\tRouter.prototype.getMatchingChildren = function getMatchingChildren (children, url, invoke) {\n\t\treturn children\n\t\t\t.filter(prepareVNodeForRanking)\n\t\t\t.sort(pathRankSort)\n\t\t\t.map( function (vnode) {\n\t\t\t\tvar matches = exec(url, vnode.props.path, vnode.props);\n\t\t\t\tif (matches) {\n\t\t\t\t\tif (invoke !== false) {\n\t\t\t\t\t\tvar newProps = { url: url, matches: matches };\n\t\t\t\t\t\tassign(newProps, matches);\n\t\t\t\t\t\tdelete newProps.ref;\n\t\t\t\t\t\tdelete newProps.key;\n\t\t\t\t\t\treturn cloneElement(vnode, newProps);\n\t\t\t\t\t}\n\t\t\t\t\treturn vnode;\n\t\t\t\t}\n\t\t\t}).filter(Boolean);\n\t};\n\n\tRouter.prototype.render = function render (ref, ref$1) {\n\t\tvar children = ref.children;\n\t\tvar onChange = ref.onChange;\n\t\tvar url = ref$1.url;\n\n\t\tvar active = this.getMatchingChildren(toChildArray(children), url, true);\n\n\t\tvar current = active[0] || null;\n\n\t\tvar previous = this.previousUrl;\n\t\tif (url!==previous) {\n\t\t\tthis.previousUrl = url;\n\t\t\tif (typeof onChange==='function') {\n\t\t\t\tonChange({\n\t\t\t\t\trouter: this,\n\t\t\t\t\turl: url,\n\t\t\t\t\tprevious: previous,\n\t\t\t\t\tactive: active,\n\t\t\t\t\tcurrent: current\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current;\n\t};\n\n\treturn Router;\n}(Component));\n\nvar Link = function (props) { return (\n\tcreateElement('a', assign({ onClick: handleLinkClick }, props))\n); };\n\nvar Route = function (props) { return createElement(props.component, props); };\n\nRouter.subscribers = subscribers;\nRouter.getCurrentUrl = getCurrentUrl;\nRouter.route = route;\nRouter.Router = Router;\nRouter.Route = Route;\nRouter.Link = Link;\nRouter.exec = exec;\n\nexport { subscribers, getCurrentUrl, route, Router, Route, Link, exec };export default Router;\n//# sourceMappingURL=preact-router.es.js.map\n","import type { ColormapType } from './components/previews/Colormap.js'\r\nimport type { VersionId } from './services/index.js'\r\n\r\ntype Method = 'menu' | 'hotkey'\r\n\r\nexport namespace Analytics {\r\n\r\n\t/** Universal Analytics */\r\n\tconst ID_SITE = 'Site'\r\n\tconst ID_GENERATOR = 'Generator'\r\n\r\n\tconst DIM_THEME = 1\r\n\tconst DIM_VERSION = 3\r\n\tconst DIM_LANGUAGE = 4\r\n\tconst DIM_GENERATOR = 6\r\n\tconst DIM_PREFERS_COLOR_SCHEME = 7\r\n\r\n\tfunction event(category: string, action: string, label?: string) {\r\n\t\tga('send', 'event', category, action, label)\r\n\t}\r\n\r\n\tfunction dimension(index: number, value: string) {\r\n\t\tga('set', `dimension${index}`, value)\r\n\t}\r\n\r\n\texport function pageview(page: string) {\r\n\t\tga('set', 'page', page)\r\n\t\tga('send', 'pageview')\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated\r\n\t */\r\n\texport function generatorEvent(action: string, label?: string) {\r\n\t\tevent(ID_GENERATOR, action, label)\r\n\t}\r\n\r\n\tfunction legacyMethod(method: Method) {\r\n\t\treturn method === 'menu' ? 'Menu' : 'Hotkey'\r\n\t}\r\n\t/** END Universal Analytics 4 */\r\n\r\n\texport function setLocale(locale: string) {\r\n\t\tdimension(DIM_LANGUAGE, locale)\r\n\t\tgtag('set', {\r\n\t\t\tlocale,\r\n\t\t})\r\n\t}\r\n\r\n\texport function changeLocale(prev_locale: string, locale: string) {\r\n\t\tsetLocale(locale)\r\n\t\tevent(ID_SITE, 'set-language', locale)\r\n\t\tgtag('event', 'change_locale', {\r\n\t\t\tprev_locale,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setTheme(theme: string) {\r\n\t\tdimension(DIM_THEME, theme)\r\n\t\tgtag('set', {\r\n\t\t\ttheme,\r\n\t\t})\r\n\t}\r\n\r\n\texport function changeTheme(prev_theme: string, theme: string) {\r\n\t\tsetTheme(theme)\r\n\t\tevent(ID_SITE, 'set-theme', theme)\r\n\t\tgtag('event', 'change_theme', {\r\n\t\t\tprev_theme,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setVersion(version: string) {\r\n\t\tdimension(DIM_VERSION, version)\r\n\t\tgtag('set', {\r\n\t\t\tversion,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setSelectedVersion(selected_version: string) {\r\n\t\tgtag('set', {\r\n\t\t\tselected_version,\r\n\t\t})\r\n\t}\r\n\r\n\texport function changeVersion(prev_version: string, version: string) {\r\n\t\tsetVersion(version)\r\n\t\tevent(ID_GENERATOR, 'set-version', version)\r\n\t\tgtag('event', 'change_version', {\r\n\t\t\tprev_version,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setGenerator(file_type: string) {\r\n\t\tdimension(DIM_GENERATOR, file_type)\r\n\t\tgtag('event', 'use_generator', {\r\n\t\t\tfile_type,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setPrefersColorScheme(prefers_color_scheme: string) {\r\n\t\tdimension(DIM_PREFERS_COLOR_SCHEME, prefers_color_scheme)\r\n\t\tgtag('set', {\r\n\t\t\tprefers_color_scheme,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setTreeViewMode(tree_view_mode: string) {\r\n\t\tgtag('set', {\r\n\t\t\ttree_view_mode,\r\n\t\t})\r\n\t}\r\n\r\n\texport function setColormap(colormap: ColormapType) {\r\n\t\tgtag('set', {\r\n\t\t\tcolormap,\r\n\t\t})\r\n\t}\r\n\r\n\texport function resetGenerator(file_type: string, history: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'reset')\r\n\t\tgtag('event', 'reset_generator', {\r\n\t\t\tfile_type,\r\n\t\t\thistory,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function undoGenerator(file_type: string, history: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'undo', legacyMethod(method))\r\n\t\tgtag('event', 'undo_generator', {\r\n\t\t\tfile_type,\r\n\t\t\thistory,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function redoGenerator(file_type: string, history: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'redo', legacyMethod(method))\r\n\t\tgtag('event', 'redo_generator', {\r\n\t\t\tfile_type,\r\n\t\t\thistory,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function loadPreset(file_type: string, file_name: string) {\r\n\t\tevent(ID_GENERATOR, 'load-preset', file_name)\r\n\t\tgtag('event', 'load_generator_preset', {\r\n\t\t\tfile_type,\r\n\t\t\tfile_name,\r\n\t\t})\r\n\t}\r\n\r\n\texport function openPreset(file_type: string, file_name: string) {\r\n\t\tgtag('event', 'open_generator_preset', {\r\n\t\t\tfile_type,\r\n\t\t\tfile_name,\r\n\t\t})\r\n\t}\r\n\r\n\texport function createSnippet(file_type: string, snippet_id: string, version: VersionId, data_size: number, compressed_size: number, compression_rate: number) {\r\n\t\tgtag('event', 'create_generator_snippet', {\r\n\t\t\tfile_type,\r\n\t\t\tsnippet_id,\r\n\t\t\tversion,\r\n\t\t\tdata_size,\r\n\t\t\tcompressed_size,\r\n\t\t\tcompression_rate,\r\n\t\t})\r\n\t}\r\n\r\n\texport function openSnippet(file_type: string, snippet_id: string, version: VersionId) {\r\n\t\tgtag('event', 'open_generator_snippet', {\r\n\t\t\tfile_type,\r\n\t\t\tsnippet_id,\r\n\t\t\tversion,\r\n\t\t})\r\n\t}\r\n\r\n\texport function copyOutput(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'copy')\r\n\t\tgtag('event', 'copy_generator_output', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function downloadOutput(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'download')\r\n\t\tgtag('event', 'download_generator_output', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function showOutput(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'toggle-output', 'visible')\r\n\t\tgtag('event', 'show_generator_output', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function hideOutput(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'toggle-output', 'hidden')\r\n\t\tgtag('event', 'hide_generator_output', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function showPreview(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'toggle-preview', 'visible')\r\n\t\tgtag('event', 'show_generator_preview', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function hidePreview(file_type: string, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'toggle-preview', 'hidden')\r\n\t\tgtag('event', 'hide_generator_preview', {\r\n\t\t\tfile_type,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function showProject(file_type: string, projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'show-project', legacyMethod(method))\r\n\t\tgtag('event', 'show_project', {\r\n\t\t\tfile_type,\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function hideProject(file_type: string, projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'hide-project', legacyMethod(method))\r\n\t\tgtag('event', 'hide_project', {\r\n\t\t\tfile_type,\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function saveProjectFile(file_type: string, projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'save-project-file', legacyMethod(method))\r\n\t\tgtag('event', 'save_project_file', {\r\n\t\t\tfile_type,\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function deleteProjectFile(file_type: string, projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'delete-project-file', legacyMethod(method))\r\n\t\tgtag('event', 'delete_project_file', {\r\n\t\t\tfile_type,\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function renameProjectFile(file_type: string, projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'rename-project-file', legacyMethod(method))\r\n\t\tgtag('event', 'rename_project_file', {\r\n\t\t\tfile_type,\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n\r\n\texport function deleteProject(projects_count: number, project_size: number, method: Method) {\r\n\t\tevent(ID_GENERATOR, 'delete-project', legacyMethod(method))\r\n\t\tgtag('event', 'delete_project', {\r\n\t\t\tprojects_count,\r\n\t\t\tproject_size,\r\n\t\t\tmethod,\r\n\t\t})\r\n\t}\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelPath = exports.Path = exports.relativePath = void 0;\r\nfunction relativePath(start, relativePath) {\r\n    return relativePath.reduce((path, e) => {\r\n        if (e === 'pop') {\r\n            return path.pop();\r\n        }\r\n        else {\r\n            return path.push(e.push);\r\n        }\r\n    }, start);\r\n}\r\nexports.relativePath = relativePath;\r\n/**\r\n * Immutable helper class to represent a path in data\r\n */\r\nclass Path {\r\n    /**\r\n     * @param modelArr Initial array of path model elements. Empty if not given\r\n     * @param contextArr Initial array of path context elements. Empty if not given\r\n     */\r\n    constructor(modelArr, contextArr) {\r\n        this.modelArr = modelArr !== null && modelArr !== void 0 ? modelArr : [];\r\n        this.contextArr = contextArr !== null && contextArr !== void 0 ? contextArr : [];\r\n    }\r\n    /**\r\n     * The last model element of this path\r\n     */\r\n    last() {\r\n        return this.modelArr[this.modelArr.length - 1];\r\n    }\r\n    /**\r\n     * A new path with the specific sliced module elements\r\n     */\r\n    slice(start, end) {\r\n        return new Path(this.modelArr.slice(start, end), this.contextArr);\r\n    }\r\n    /**\r\n     * A new path with the first model element removed\r\n     */\r\n    shift() {\r\n        return new Path(this.modelArr.slice(1), this.contextArr);\r\n    }\r\n    /**\r\n     * A new path with the last model element removed\r\n     */\r\n    pop() {\r\n        return new Path(this.modelArr.slice(0, -1), this.contextArr);\r\n    }\r\n    /**\r\n     * A new path with an element added at the end\r\n     * @param element element to push at the end of the array\r\n     */\r\n    push(element) {\r\n        return this.modelPush(element).contextPush(element);\r\n    }\r\n    /**\r\n     * Push an element exclusivly to the model array\r\n     * @param element\r\n     */\r\n    modelPush(element) {\r\n        return new Path([...this.modelArr, element], [...this.contextArr]);\r\n    }\r\n    /**\r\n     * Push an element exclusivly to the context array\r\n     * @param element\r\n     */\r\n    contextPush(element) {\r\n        if (typeof element === 'number')\r\n            return this.copy();\r\n        const newElement = element.startsWith('minecraft:') ? element.slice(10) : element;\r\n        return new Path([...this.modelArr], [...this.contextArr, newElement]);\r\n    }\r\n    copy() {\r\n        return new Path([...this.modelArr], [...this.contextArr]);\r\n    }\r\n    getArray() {\r\n        return this.modelArr;\r\n    }\r\n    /**\r\n     * Attaches a model to this path and all paths created from this\r\n     * @param model\r\n     */\r\n    withModel(model) {\r\n        return new ModelPath(model, this);\r\n    }\r\n    getContext() {\r\n        return this.contextArr;\r\n    }\r\n    /**\r\n     * Checks path equality\r\n     * @param other path to compare\r\n     */\r\n    equals(other) {\r\n        return other.modelArr.length === this.modelArr.length\r\n            && other.modelArr.every((v, i) => v === this.modelArr[i]);\r\n    }\r\n    /**\r\n     * Checks if this path starts with another path\r\n     * @param other path that this path should start with\r\n     */\r\n    startsWith(other) {\r\n        if (this.modelArr.length < other.modelArr.length)\r\n            return false;\r\n        return other.modelArr.every((v, i) => v === this.modelArr[i]);\r\n    }\r\n    /**\r\n     * Checks if this path ends with another path\r\n     * @param other parent path where this path should end with\r\n     */\r\n    endsWith(other) {\r\n        const offset = this.modelArr.length - other.modelArr.length;\r\n        if (offset < 0)\r\n            return false;\r\n        return other.modelArr.every((v, i) => v === this.modelArr[offset + i]);\r\n    }\r\n    toString() {\r\n        return this.modelArr\r\n            .map(e => (typeof e === 'string') ? `.${e}` : `[${e}]`)\r\n            .join('')\r\n            .replace(/^\\./, '');\r\n    }\r\n    forEach(fn, thisArg) {\r\n        return this.modelArr.forEach(fn, thisArg);\r\n    }\r\n}\r\nexports.Path = Path;\r\nclass ModelPath extends Path {\r\n    constructor(model, path) {\r\n        super(path === null || path === void 0 ? void 0 : path.modelArr, path === null || path === void 0 ? void 0 : path.contextArr);\r\n        this.model = model;\r\n    }\r\n    getModel() {\r\n        return this.model;\r\n    }\r\n    /**\r\n     * Gets the data from the model if it was attached\r\n     * @returns undefined, if no model was attached\r\n     */\r\n    get() {\r\n        var _a;\r\n        return (_a = this.model) === null || _a === void 0 ? void 0 : _a.get(this);\r\n    }\r\n    /**\r\n     * Sets the value to the model if it was attached\r\n     */\r\n    set(value) {\r\n        var _a;\r\n        (_a = this.model) === null || _a === void 0 ? void 0 : _a.set(this, value);\r\n    }\r\n    /**\r\n     * A new path with the specific sliced module elements\r\n     */\r\n    slice(start, end) {\r\n        return new ModelPath(this.model, super.slice(start, end));\r\n    }\r\n    /**\r\n     * A new path with the first model element removed\r\n     */\r\n    shift() {\r\n        return new ModelPath(this.model, super.shift());\r\n    }\r\n    /**\r\n     * A new path with the last model element removed\r\n     */\r\n    pop() {\r\n        return new ModelPath(this.model, super.pop());\r\n    }\r\n    /**\r\n     * A new path with an element added at the end\r\n     * @param element element to push at the end of the array\r\n     */\r\n    push(element) {\r\n        return this.modelPush(element).contextPush(element);\r\n    }\r\n    /**\r\n     * Push an element exclusivly to the model array\r\n     * @param element\r\n     */\r\n    modelPush(element) {\r\n        return new ModelPath(this.model, super.modelPush(element));\r\n    }\r\n    /**\r\n     * Push an element exclusivly to the context array\r\n     * @param element\r\n     */\r\n    contextPush(element) {\r\n        return new ModelPath(this.model, super.contextPush(element));\r\n    }\r\n    copy() {\r\n        return new ModelPath(this.model, super.copy());\r\n    }\r\n}\r\nexports.ModelPath = ModelPath;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Errors = void 0;\r\n/**\r\n * Collects errors from data paths\r\n */\r\nclass Errors {\r\n    constructor() {\r\n        this.errors = [];\r\n    }\r\n    add(path, error, ...params) {\r\n        this.errors.push({ path, error, params });\r\n        return false;\r\n    }\r\n    get(path, exact = false) {\r\n        return exact ? this.errors.filter(e => e.path.equals(path))\r\n            : this.errors.filter(e => e.path.startsWith(path));\r\n    }\r\n    getAll() {\r\n        return this.errors;\r\n    }\r\n    clear() {\r\n        this.errors = [];\r\n    }\r\n    count() {\r\n        return this.errors.length;\r\n    }\r\n    *[Symbol.iterator]() {\r\n        for (const e of this.errors) {\r\n            yield e;\r\n        }\r\n    }\r\n}\r\nexports.Errors = Errors;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hexId = exports.quoteString = exports.escapeString = void 0;\r\nfunction escapeString(str) {\r\n    return str.replace(/(\\\\|\")/g, '\\\\$1');\r\n}\r\nexports.escapeString = escapeString;\r\nfunction quoteString(str) {\r\n    return `\"${escapeString(str)}\"`;\r\n}\r\nexports.quoteString = quoteString;\r\nconst dec2hex = (dec) => ('0' + dec.toString(16)).substr(-2);\r\nfunction hexId(length = 12) {\r\n    var arr = new Uint8Array(length / 2);\r\n    window.crypto.getRandomValues(arr);\r\n    return Array.from(arr, dec2hex).join('');\r\n}\r\nexports.hexId = hexId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataModel = void 0;\r\nconst Path_1 = require(\"./Path\");\r\nconst Errors_1 = require(\"./Errors\");\r\nconst utils_1 = require(\"../utils\");\r\n/**\r\n * Holding the data linked to a given schema\r\n */\r\nclass DataModel {\r\n    /**\r\n     * @param schema node to use as schema for this model\r\n     */\r\n    constructor(schema, options) {\r\n        var _a, _b, _c, _d;\r\n        this.historyMax = (_a = options === null || options === void 0 ? void 0 : options.historyMax) !== null && _a !== void 0 ? _a : 50;\r\n        this.verbose = (_b = options === null || options === void 0 ? void 0 : options.verbose) !== null && _b !== void 0 ? _b : false;\r\n        this.wrapLists = (_c = options === null || options === void 0 ? void 0 : options.wrapLists) !== null && _c !== void 0 ? _c : false;\r\n        this.schema = schema;\r\n        const data = (_d = options === null || options === void 0 ? void 0 : options.initialData) !== null && _d !== void 0 ? _d : schema.default();\r\n        this.data = this.wrapLists ? DataModel.wrapLists(data) : data;\r\n        this.listeners = [];\r\n        this.errors = new Errors_1.Errors();\r\n        this.history = [JSON.stringify(this.data)];\r\n        this.historyIndex = 0;\r\n    }\r\n    /**\r\n     * Adds a listener to notify when the model is invalidated\r\n     * @param listener the listener to be notified\r\n     */\r\n    addListener(listener) {\r\n        this.listeners.push(listener);\r\n    }\r\n    /**\r\n     * Removes a listener from this model\r\n     * @param listener the listener to be removed\r\n     */\r\n    removeListener(listener) {\r\n        const index = this.listeners.indexOf(listener);\r\n        if (index > -1) {\r\n            this.listeners.splice(index, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Updates the history and notifies all\r\n     * listeners that the model is invalidated\r\n     */\r\n    invalidate() {\r\n        const newHistory = JSON.stringify(this.data);\r\n        if (this.history[this.historyIndex] !== newHistory) {\r\n            this.historyIndex += 1;\r\n            this.history.splice(this.historyIndex, this.historyMax, newHistory);\r\n            if (this.history.length > this.historyMax) {\r\n                this.history.splice(0, 1);\r\n                this.historyIndex -= 1;\r\n            }\r\n        }\r\n        this.silentInvalidate();\r\n    }\r\n    /**\r\n     * Notifies all listeners that the model is invalidated\r\n     */\r\n    silentInvalidate() {\r\n        this.listeners.forEach(l => {\r\n            if (l.invalidated)\r\n                l.invalidated(this);\r\n            if (l.errors)\r\n                l.errors(this.errors);\r\n        });\r\n    }\r\n    /**\r\n     * Resets the full data and notifies listeners\r\n     * @param value new model data\r\n     */\r\n    reset(value, loose) {\r\n        this.data = value;\r\n        this.validate(loose);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Gets the data at a specified path\r\n     * @param path path at which to find the data\r\n     * @returns undefined, if the the path does not exist in the data\r\n     */\r\n    get(path) {\r\n        let node = this.data;\r\n        path.forEach(e => {\r\n            if (node === undefined)\r\n                return node;\r\n            if (this.wrapLists && typeof e === 'number') {\r\n                node = node[e].node;\r\n            }\r\n            else {\r\n                node = node[e];\r\n            }\r\n        });\r\n        return node;\r\n    }\r\n    /**\r\n     * Updates the data on a path. Node will be removed when value is undefined\r\n     * @param path path to update\r\n     * @param value new data at the specified path\r\n     */\r\n    set(path, value, silent) {\r\n        if (path.getArray().length === 0) {\r\n            this.reset(value, true);\r\n            return;\r\n        }\r\n        let node = this.data;\r\n        path.pop().forEach(e => {\r\n            if (node[e] === undefined || typeof node[e] === 'string' || typeof node[e] === 'number') {\r\n                if (this.wrapLists && typeof e === 'number') {\r\n                    node[e] = { node: {}, id: (0, utils_1.hexId)() };\r\n                }\r\n                else {\r\n                    node[e] = {};\r\n                }\r\n            }\r\n            if (this.wrapLists && typeof e === 'number') {\r\n                node = node[e].node;\r\n            }\r\n            else {\r\n                node = node[e];\r\n            }\r\n        });\r\n        if (node === null)\r\n            return;\r\n        if (value === undefined || (typeof value === 'number' && isNaN(value))) {\r\n            if (typeof path.last() === 'number') {\r\n                node.splice(path.last(), 1);\r\n            }\r\n            else {\r\n                delete node[path.last()];\r\n            }\r\n        }\r\n        else if (this.wrapLists && typeof path.last() === 'number') {\r\n            node[path.last()] = { node: value, id: (0, utils_1.hexId)() };\r\n        }\r\n        else {\r\n            node[path.last()] = value;\r\n        }\r\n        if (silent)\r\n            return;\r\n        if (this.verbose) {\r\n            console.log('Set', path.toString(), JSON.stringify(value));\r\n        }\r\n        this.validate(true);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Go one step back in history\r\n     */\r\n    undo() {\r\n        if (this.historyIndex > 0) {\r\n            this.historyIndex -= 1;\r\n            this.data = JSON.parse(this.history[this.historyIndex]);\r\n            this.validate(false);\r\n            this.silentInvalidate();\r\n        }\r\n    }\r\n    /**\r\n     * Go one step forward in history.\r\n     */\r\n    redo() {\r\n        if (this.historyIndex < this.history.length - 1) {\r\n            this.historyIndex += 1;\r\n            this.data = JSON.parse(this.history[this.historyIndex]);\r\n            this.validate(false);\r\n            this.silentInvalidate();\r\n        }\r\n    }\r\n    /**\r\n     * Uses the schema to check whether the data is valid\r\n     */\r\n    validate(loose) {\r\n        var _a;\r\n        const path = new Path_1.Path().withModel(this);\r\n        this.errors.clear();\r\n        this.data = (_a = this.schema.validate(path, this.data, this.errors, { loose, wrapLists: this.wrapLists })) !== null && _a !== void 0 ? _a : {};\r\n    }\r\n    error(path, error, ...params) {\r\n        const tempErrors = new Errors_1.Errors();\r\n        tempErrors.add(path, error, params);\r\n        this.listeners.forEach(l => {\r\n            if (l.errors)\r\n                l.errors(tempErrors);\r\n        });\r\n    }\r\n    static wrapLists(value) {\r\n        if (Array.isArray(value)) {\r\n            const res = value.map(v => ({\r\n                node: this.wrapLists(v),\r\n                id: (0, utils_1.hexId)(),\r\n            }));\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        }\r\n        else if (typeof value === 'object' && value !== null) {\r\n            const res = {};\r\n            Object.entries(value).map(([k, v]) => {\r\n                res[k] = this.wrapLists(v);\r\n            });\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    static unwrapLists(value) {\r\n        if (Array.isArray(value)) {\r\n            const res = value.map(v => this.unwrapLists(v.node));\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        }\r\n        else if (typeof value === 'object' && value !== null) {\r\n            const res = {};\r\n            Object.entries(value).map(([k, v]) => {\r\n                res[k] = this.unwrapLists(v);\r\n            });\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n}\r\nexports.DataModel = DataModel;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Keep = exports.Opt = exports.Has = exports.Mod = exports.Base = void 0;\r\nexports.Base = ({\r\n    type: () => 'base',\r\n    category: () => undefined,\r\n    default: () => undefined,\r\n    enabled: () => true,\r\n    keep: () => false,\r\n    optional: () => false,\r\n    navigate() { return this; },\r\n    pathPush: (p) => p,\r\n    suggest: () => [],\r\n    validate: (_, v) => v,\r\n    validationOption: () => undefined,\r\n    hook(hook, path, ...args) { return hook.base({ node: this }, path, ...args); },\r\n    canUpdate: () => false,\r\n    update: () => []\r\n});\r\nconst Mod = (node, mods) => ({\r\n    ...node, ...(typeof mods === 'function' ? mods(node) : mods)\r\n});\r\nexports.Mod = Mod;\r\nconst Has = (key, node) => (0, exports.Mod)(node, {\r\n    enabled: (p) => p.push(key).get() !== undefined\r\n});\r\nexports.Has = Has;\r\nfunction Opt(node) {\r\n    return {\r\n        ...node,\r\n        optional: () => true\r\n    };\r\n}\r\nexports.Opt = Opt;\r\nfunction Keep(node) {\r\n    return {\r\n        ...node,\r\n        keep: () => true\r\n    };\r\n}\r\nexports.Keep = Keep;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BooleanNode = void 0;\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nconst Node_1 = require(\"./Node\");\r\n/**\r\n * Boolean node with two buttons for true/false\r\n */\r\nconst BooleanNode = () => {\r\n    return {\r\n        ...Node_1.Base,\r\n        type: () => 'boolean',\r\n        default: () => false,\r\n        suggest: () => ['false', 'true'],\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && typeof value !== 'boolean') {\r\n                value = options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default();\r\n            }\r\n            if (typeof value !== 'boolean' || value === undefined) {\r\n                errors.add(path, 'error.expected_boolean');\r\n            }\r\n            return value;\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.boolean) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this }, path, ...args);\r\n        }\r\n    };\r\n};\r\nexports.BooleanNode = BooleanNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListNode = void 0;\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nconst Path_1 = require(\"../model/Path\");\r\nconst Node_1 = require(\"./Node\");\r\nconst ListNode = (children, config) => {\r\n    var _a, _b;\r\n    const min = (_a = config === null || config === void 0 ? void 0 : config.minLength) !== null && _a !== void 0 ? _a : 0;\r\n    const max = (_b = config === null || config === void 0 ? void 0 : config.maxLength) !== null && _b !== void 0 ? _b : Infinity;\r\n    const between = (config === null || config === void 0 ? void 0 : config.minLength) && (config === null || config === void 0 ? void 0 : config.maxLength);\r\n    return ({\r\n        ...Node_1.Base,\r\n        type: () => 'list',\r\n        default: () => (config === null || config === void 0 ? void 0 : config.minLength) ? [...Array(min)].map(_ => children.default()) : [],\r\n        navigate(path, index) {\r\n            const nextIndex = index + 1;\r\n            const pathElements = path.getArray();\r\n            if (pathElements.length <= nextIndex) {\r\n                return this;\r\n            }\r\n            return children.navigate(path, nextIndex);\r\n        },\r\n        pathPush(path, index) {\r\n            const pathWithContext = (config === null || config === void 0 ? void 0 : config.context) ?\r\n                new Path_1.ModelPath(path.getModel(), new Path_1.Path(path.getArray(), [config.context])) : path;\r\n            return pathWithContext.push(parseInt(index.toString())).contextPush('entry');\r\n        },\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && !Array.isArray(value)) {\r\n                value = options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default();\r\n            }\r\n            if (!Array.isArray(value)) {\r\n                errors.add(path, 'error.expected_list');\r\n                return value;\r\n            }\r\n            else if (between && (value.length < min || value.length > max)) {\r\n                if (min === max) {\r\n                    errors.add(path, 'error.invalid_list_range.exact', value.length, min);\r\n                }\r\n                else {\r\n                    errors.add(path, 'error.invalid_list_range.between', value.length, min, max);\r\n                }\r\n            }\r\n            else if (value.length < min) {\r\n                errors.add(path, 'error.invalid_list_range.smaller', value.length, min);\r\n            }\r\n            else if (value.length > max) {\r\n                errors.add(path, 'error.invalid_list_range.larger', value.length, max);\r\n            }\r\n            const res = value.map((obj, index) => {\r\n                const newObj = children.validate(path.push(index), options.wrapLists ? obj.node : obj, errors, options);\r\n                return options.wrapLists ? { node: newObj, id: obj.id } : newObj;\r\n            });\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.list) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, children, config: config !== null && config !== void 0 ? config : {} }, path, ...args);\r\n        }\r\n    });\r\n};\r\nexports.ListNode = ListNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwitchNode = void 0;\r\nconst Node_1 = require(\"./Node\");\r\n/**\r\n * Node that allows multiple types\r\n */\r\nconst SwitchNode = (cases) => {\r\n    return {\r\n        ...Node_1.Base,\r\n        type(path) {\r\n            return this.activeCase(path, true)\r\n                .node.type(path);\r\n        },\r\n        category(path) {\r\n            return this.activeCase(path, true)\r\n                .node.category(path);\r\n        },\r\n        default: () => cases[0].node.default(),\r\n        navigate(path, index) {\r\n            var _a;\r\n            const nextIndex = index + 1;\r\n            return (_a = this.activeCase(path.slice(0, nextIndex))) === null || _a === void 0 ? void 0 : _a.node.navigate(path, index);\r\n        },\r\n        pathPush(path, key) {\r\n            var _a, _b;\r\n            return (_b = (_a = this.activeCase(path)) === null || _a === void 0 ? void 0 : _a.node.pathPush(path, key)) !== null && _b !== void 0 ? _b : path;\r\n        },\r\n        suggest(path, value) {\r\n            var _a, _b;\r\n            return (_b = (_a = this.activeCase(path)) === null || _a === void 0 ? void 0 : _a.node.suggest(path, value)) !== null && _b !== void 0 ? _b : cases\r\n                .filter(c => c.match(path))\r\n                .map(c => c.node.suggest(path, value))\r\n                .reduce((p, c) => p.concat(c));\r\n        },\r\n        validate(path, value, errors, options) {\r\n            let c = this.activeCase(path);\r\n            if (c === undefined) {\r\n                return value;\r\n            }\r\n            return c.node.validate(path, value, errors, options);\r\n        },\r\n        validationOption(path) {\r\n            var _a;\r\n            return (_a = this.activeCase(path)) === null || _a === void 0 ? void 0 : _a.node.validationOption(path);\r\n        },\r\n        activeCase(path, fallback) {\r\n            const sorter = (a, b) => { var _a, _b; return ((_a = b.priority) !== null && _a !== void 0 ? _a : 0) - ((_b = a.priority) !== null && _b !== void 0 ? _b : 0); };\r\n            const matchedCases = cases.filter(c => c.match(path)).sort(sorter);\r\n            if (fallback && matchedCases.length === 0) {\r\n                return cases.sort(sorter)[0];\r\n            }\r\n            return (matchedCases.length > 0 ? matchedCases[0] : undefined);\r\n        },\r\n        hook(hook, path, ...args) {\r\n            return this.activeCase(path, true)\r\n                .node.hook(hook, path, ...args);\r\n        },\r\n    };\r\n};\r\nexports.SwitchNode = SwitchNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ObjectOrPreset = exports.StringOrList = exports.ObjectOrList = exports.ChoiceNode = void 0;\r\nconst ListNode_1 = require(\"./ListNode\");\r\nconst SwitchNode_1 = require(\"./SwitchNode\");\r\n/**\r\n * Node that allows multiple types\r\n */\r\nconst ChoiceNode = (choices, config) => {\r\n    const isValid = (choice, value) => {\r\n        if (choice.match) {\r\n            return choice.match(value);\r\n        }\r\n        switch (choice.type) {\r\n            case 'list': return Array.isArray(value);\r\n            case 'object': return typeof value === 'object' && !Array.isArray(value);\r\n            default: return typeof value === choice.type;\r\n        }\r\n    };\r\n    const switchNode = (0, SwitchNode_1.SwitchNode)(choices.map(c => ({\r\n        type: c.type,\r\n        priority: c.priority,\r\n        match: (path) => isValid(c, path.get()),\r\n        node: c.node\r\n    })));\r\n    return {\r\n        ...switchNode,\r\n        validate(path, value, errors, options) {\r\n            let choice = switchNode.activeCase(path, true);\r\n            if (choice.node.optional()) {\r\n                return value;\r\n            }\r\n            return choice.node.validate(path, value, errors, options);\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.choice) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, choices, config: config !== null && config !== void 0 ? config : {}, switchNode }, path, ...args);\r\n        }\r\n    };\r\n};\r\nexports.ChoiceNode = ChoiceNode;\r\nconst XOrList = (x) => ((node, config) => {\r\n    return (0, exports.ChoiceNode)([\r\n        {\r\n            type: x,\r\n            node,\r\n            change: v => { var _a; return (_a = v[0]) !== null && _a !== void 0 ? _a : node.default(); }\r\n        },\r\n        {\r\n            type: 'list',\r\n            node: (0, ListNode_1.ListNode)(node),\r\n            change: v => v ? [v] : []\r\n        }\r\n    ], config);\r\n});\r\nexports.ObjectOrList = XOrList('object');\r\nexports.StringOrList = XOrList('string');\r\nconst ObjectOrPreset = (presetNode, objectNode, presets) => {\r\n    return (0, exports.ChoiceNode)([\r\n        {\r\n            type: 'string',\r\n            priority: 1,\r\n            node: presetNode,\r\n            change: v => Object.keys(presets)[0]\r\n        },\r\n        {\r\n            type: 'object',\r\n            node: objectNode,\r\n            change: v => { var _a; return (_a = presets[v]) !== null && _a !== void 0 ? _a : presets[Object.keys(presets)[0]]; }\r\n        }\r\n    ]);\r\n};\r\nexports.ObjectOrPreset = ObjectOrPreset;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapNode = void 0;\r\nconst Node_1 = require(\"./Node\");\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nconst Path_1 = require(\"../model/Path\");\r\n/**\r\n * Map nodes similar to list nodes, but a string key is required to add children\r\n */\r\nconst MapNode = (keys, children, config) => {\r\n    return {\r\n        ...Node_1.Base,\r\n        type: () => 'map',\r\n        default: () => ({}),\r\n        navigate(path, index) {\r\n            const nextIndex = index + 1;\r\n            const pathElements = path.getArray();\r\n            if (pathElements.length <= nextIndex) {\r\n                return this;\r\n            }\r\n            return children.navigate(path, nextIndex);\r\n        },\r\n        pathPush(path, key) {\r\n            const pathWithContext = (config === null || config === void 0 ? void 0 : config.context) ?\r\n                new Path_1.ModelPath(path.getModel(), new Path_1.Path(path.getArray(), [config.context])) : path;\r\n            return pathWithContext.modelPush(key);\r\n        },\r\n        suggest: (path) => keys.suggest(path, ''),\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && typeof value !== 'object') {\r\n                value = options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default();\r\n            }\r\n            if (value === null || typeof value !== 'object') {\r\n                errors.add(path, 'error.expected_object');\r\n                return value;\r\n            }\r\n            const res = {};\r\n            Object.keys(value).forEach(k => {\r\n                keys.validate(path, k, errors, options);\r\n                res[k] = children.validate(path.push(k), value[k], errors, options);\r\n            });\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        },\r\n        validationOption(path) {\r\n            var _a;\r\n            return (_a = config === null || config === void 0 ? void 0 : config.validation) !== null && _a !== void 0 ? _a : keys.validationOption(path.push(''));\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.map) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, keys, children, config: config !== null && config !== void 0 ? config : {} }, path, ...args);\r\n        }\r\n    };\r\n};\r\nexports.MapNode = MapNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberEnum = exports.NumberNode = void 0;\r\nconst __1 = require(\"..\");\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nconst Node_1 = require(\"./Node\");\r\nconst NumberNode = (config) => {\r\n    var _a, _b, _c;\r\n    const integer = (config === null || config === void 0 ? void 0 : config.color) ? true : (_a = config === null || config === void 0 ? void 0 : config.integer) !== null && _a !== void 0 ? _a : false;\r\n    const min = (config === null || config === void 0 ? void 0 : config.color) ? 0 : (_b = config === null || config === void 0 ? void 0 : config.min) !== null && _b !== void 0 ? _b : -Infinity;\r\n    const max = (config === null || config === void 0 ? void 0 : config.color) ? 16777215 : (_c = config === null || config === void 0 ? void 0 : config.max) !== null && _c !== void 0 ? _c : Infinity;\r\n    const between = (config === null || config === void 0 ? void 0 : config.min) !== undefined && (config === null || config === void 0 ? void 0 : config.max) !== undefined;\r\n    return {\r\n        ...Node_1.Base,\r\n        type: () => 'number',\r\n        default: () => min > 0 ? min : 0,\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && typeof value !== 'number') {\r\n                value = options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default();\r\n            }\r\n            if (typeof value !== 'number') {\r\n                errors.add(path, 'error.expected_number');\r\n            }\r\n            else if (integer && !Number.isInteger(value)) {\r\n                errors.add(path, 'error.expected_integer');\r\n            }\r\n            else if (between && (value < min || value > max)) {\r\n                errors.add(path, 'error.invalid_number_range.between', value, min, max);\r\n            }\r\n            else if (value < min) {\r\n                errors.add(path, 'error.invalid_number_range.smaller', value, min);\r\n            }\r\n            else if (value > max) {\r\n                errors.add(path, 'error.invalid_number_range.larger', value, max);\r\n            }\r\n            return value;\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.number) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, integer, min, max, between, config: config !== null && config !== void 0 ? config : {} }, path, ...args);\r\n        }\r\n    };\r\n};\r\nexports.NumberNode = NumberNode;\r\nconst NumberEnum = ({ integer, values }) => (0, __1.Mod)((0, exports.NumberNode)({ integer }), node => ({\r\n    validate: (path, value, errors, options) => {\r\n        value = node.validate(path, value, errors, options);\r\n        if (!values.includes(value)) {\r\n            errors.add(path, 'error.invalid_number_enum', values.join(', '));\r\n        }\r\n        return value;\r\n    }\r\n}));\r\nexports.NumberEnum = NumberEnum;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ObjectNode = exports.Case = exports.Switch = void 0;\r\nconst Node_1 = require(\"./Node\");\r\nconst Path_1 = require(\"../model/Path\");\r\nconst Errors_1 = require(\"../model/Errors\");\r\nconst utils_1 = require(\"../utils\");\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nexports.Switch = Symbol('switch');\r\nexports.Case = Symbol('case');\r\nconst ObjectNode = (fields, config) => {\r\n    const { [exports.Switch]: filter, [exports.Case]: cases, ...defaultFields } = fields;\r\n    const getActiveFields = (path) => {\r\n        if (filter === undefined)\r\n            return defaultFields;\r\n        const switchValue = (0, Path_1.relativePath)(path, filter).get();\r\n        const activeCase = cases[switchValue];\r\n        return { ...defaultFields, ...activeCase };\r\n    };\r\n    const getChildModelPath = (path, childKey) => {\r\n        var _a;\r\n        const switchValue = filter ? (0, Path_1.relativePath)(path, filter).get() : undefined;\r\n        const caseFields = filter ? ((_a = cases[switchValue]) !== null && _a !== void 0 ? _a : {}) : {};\r\n        const caseKeys = Object.keys(caseFields);\r\n        const pathWithContext = (config === null || config === void 0 ? void 0 : config.context) ?\r\n            new Path_1.ModelPath(path.getModel(), new Path_1.Path(path.getArray(), [config.context])) : path;\r\n        const pathWithFilter = !(config === null || config === void 0 ? void 0 : config.disableSwitchContext) && switchValue && caseKeys.includes(childKey) ?\r\n            pathWithContext.contextPush(switchValue) : pathWithContext;\r\n        return pathWithFilter.push(childKey);\r\n    };\r\n    return ({\r\n        ...Node_1.Base,\r\n        type: () => 'object',\r\n        category: () => config === null || config === void 0 ? void 0 : config.category,\r\n        default: () => ({}),\r\n        keep() {\r\n            return this.optional();\r\n        },\r\n        navigate(path, index) {\r\n            const nextIndex = index + 1;\r\n            const pathElements = path.getArray();\r\n            if (pathElements.length <= nextIndex) {\r\n                return this;\r\n            }\r\n            const activeFields = getActiveFields(path.slice(0, nextIndex));\r\n            const node = activeFields[pathElements[nextIndex]];\r\n            return node === null || node === void 0 ? void 0 : node.navigate(path, nextIndex);\r\n        },\r\n        pathPush(path, key) {\r\n            return getChildModelPath(path, key.toString());\r\n        },\r\n        suggest(path, value) {\r\n            const activeFields = getActiveFields(path);\r\n            const existingKeys = Object.keys(typeof value === 'object' ? value : {});\r\n            return Object.keys(activeFields)\r\n                .filter(k => activeFields[k].enabled(path))\r\n                .filter(k => !existingKeys.includes(k))\r\n                .map(utils_1.quoteString);\r\n        },\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && typeof value !== 'object') {\r\n                value = options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default();\r\n            }\r\n            if (typeof value !== 'object' || value === null) {\r\n                errors.add(path, 'error.expected_object');\r\n                return value;\r\n            }\r\n            let activeFields = defaultFields;\r\n            if (filter) {\r\n                const filterPath = (0, Path_1.relativePath)(path, filter);\r\n                let switchValue = filterPath.get();\r\n                if (path.equals(filterPath.pop())) {\r\n                    const filterField = filterPath.last();\r\n                    switchValue = defaultFields[filterField].validate(path.push(filterField), value[filterField], new Errors_1.Errors(), options);\r\n                }\r\n                activeFields = { ...activeFields, ...cases[switchValue] };\r\n            }\r\n            const activeKeys = Object.keys(activeFields);\r\n            const forcedKeys = activeKeys.filter(k => !activeFields[k].optional());\r\n            const keys = new Set([...forcedKeys, ...Object.keys(value)]);\r\n            const res = {};\r\n            keys.forEach(k => {\r\n                if (activeKeys.includes(k)) {\r\n                    if (!activeFields[k].enabled(path))\r\n                        return;\r\n                    const newValue = activeFields[k].validate(path.push(k), value[k], errors, options);\r\n                    if (!activeFields[k].keep() && activeFields[k].optional()\r\n                        && (newValue === undefined\r\n                            || (Array.isArray(newValue) && newValue.length === 0)\r\n                            || (newValue.constructor === Object && Object.keys(newValue).length === 0))) {\r\n                        delete res[k];\r\n                    }\r\n                    else {\r\n                        res[k] = newValue;\r\n                        path.getModel().set(path.push(k), newValue, true);\r\n                    }\r\n                }\r\n                else {\r\n                    res[k] = value[k];\r\n                }\r\n            });\r\n            for (const a of Object.getOwnPropertySymbols(value)) {\r\n                res[a] = value[a];\r\n            }\r\n            return res;\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.object) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, fields: defaultFields, config: config !== null && config !== void 0 ? config : {}, filter, cases, getActiveFields, getChildModelPath }, path, ...args);\r\n        }\r\n    });\r\n};\r\nexports.ObjectNode = ObjectNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Reference = void 0;\r\nconst Reference = (schemas, schema) => ({\r\n    type(path) {\r\n        return schemas.get(schema).type.bind(this)(path);\r\n    },\r\n    category(path) {\r\n        return schemas.get(schema).category.bind(this)(path);\r\n    },\r\n    default() {\r\n        return schemas.get(schema).default.bind(this)();\r\n    },\r\n    transform(path, value) {\r\n        return schemas.get(schema).transform(path, value);\r\n    },\r\n    enabled(path) {\r\n        return schemas.get(schema).enabled.bind(this)(path);\r\n    },\r\n    keep() {\r\n        return schemas.get(schema).keep.bind(this)();\r\n    },\r\n    optional() {\r\n        return schemas.get(schema).optional.bind(this)();\r\n    },\r\n    navigate(path, index) {\r\n        return schemas.get(schema).navigate.bind(this)(path, index);\r\n    },\r\n    pathPush(path, key) {\r\n        return schemas.get(schema).pathPush.bind(this)(path, key);\r\n    },\r\n    suggest(path, value) {\r\n        return schemas.get(schema).suggest.bind(this)(path, value);\r\n    },\r\n    validate(path, value, errors, options) {\r\n        return schemas.get(schema).validate.bind(this)(path, value, errors, options);\r\n    },\r\n    validationOption(path) {\r\n        return schemas.get(schema).validationOption.bind(this)(path);\r\n    },\r\n    hook(hook, path, ...args) {\r\n        return schemas.get(schema).hook.bind(this)(hook, path, ...args);\r\n    },\r\n    activeCase(path, fallback) {\r\n        return schemas.get(schema).activeCase.bind(this)(path, fallback);\r\n    },\r\n    canUpdate(path, value) {\r\n        return schemas.get(schema).canUpdate.bind(this)(path, value);\r\n    },\r\n    update(path, value) {\r\n        return schemas.get(schema).update.bind(this)(path, value);\r\n    }\r\n});\r\nexports.Reference = Reference;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StringNode = void 0;\r\nconst Node_1 = require(\"./Node\");\r\nconst utils_1 = require(\"../utils\");\r\nconst DataModel_1 = require(\"../model/DataModel\");\r\nconst isEnum = (value) => {\r\n    return !!(value === null || value === void 0 ? void 0 : value.enum);\r\n};\r\nconst isValidator = (value) => {\r\n    return !!(value === null || value === void 0 ? void 0 : value.validator);\r\n};\r\n/**\r\n * Simple string node with one text field\r\n */\r\nconst StringNode = (collections, config) => {\r\n    const getValues = () => {\r\n        var _a, _b, _c, _d;\r\n        if (isEnum(config)) {\r\n            if (typeof config.enum === 'string') {\r\n                return (_a = collections === null || collections === void 0 ? void 0 : collections.get(config.enum)) !== null && _a !== void 0 ? _a : [];\r\n            }\r\n            return config.enum;\r\n        }\r\n        if ((config === null || config === void 0 ? void 0 : config.validator) === 'resource') {\r\n            if (typeof config.params.pool === 'string') {\r\n                if (config.params.requireTag) {\r\n                    return (_b = collections === null || collections === void 0 ? void 0 : collections.get(`tag/${config.params.pool}`).map(e => `#${e}`)) !== null && _b !== void 0 ? _b : [];\r\n                }\r\n                const registry = config.params.pool.replace(/^\\$/, '');\r\n                const values = (_c = collections === null || collections === void 0 ? void 0 : collections.get(registry)) !== null && _c !== void 0 ? _c : [];\r\n                return [\r\n                    ...config.params.allowTag ? (_d = collections === null || collections === void 0 ? void 0 : collections.get(`tag/${registry}`).map(e => `#${e}`)) !== null && _d !== void 0 ? _d : [] : [],\r\n                    ...config.params.suffix ? values.map(v => v + config.params.suffix) : values,\r\n                ];\r\n            }\r\n            return config.params.pool;\r\n        }\r\n        return [];\r\n    };\r\n    return {\r\n        ...Node_1.Base,\r\n        type: () => 'string',\r\n        default: () => '',\r\n        validate(path, value, errors, options) {\r\n            if (options.loose && typeof value !== 'string') {\r\n                value = (options.wrapLists ? DataModel_1.DataModel.wrapLists(this.default()) : this.default()) || undefined;\r\n            }\r\n            if (typeof value !== 'string') {\r\n                errors.add(path, 'error.expected_string');\r\n                return value;\r\n            }\r\n            if (isValidator(config)) {\r\n                if (config.validator === 'resource' && value.length > 0 && !value.includes(':')) {\r\n                    value = value.startsWith('#')\r\n                        ? '#minecraft:' + value.slice(1)\r\n                        : 'minecraft:' + value;\r\n                }\r\n                if (config.validator === 'resource' && typeof value == 'string') {\r\n                    let id = value;\r\n                    if (value.startsWith('#')) {\r\n                        if (typeof config.params.pool === 'string' && config.params.pool.startsWith('$tag/')) {\r\n                            errors.add(path, 'error.disallowed_tag_prefix');\r\n                            return value;\r\n                        }\r\n                        else if (!config.params.allowTag && !config.params.requireTag) {\r\n                            errors.add(path, 'error.disallowed_tag');\r\n                            return value;\r\n                        }\r\n                        id = id.slice(1);\r\n                    }\r\n                    else if (config.params.requireTag) {\r\n                        errors.add(path, 'error.expected_tag');\r\n                        return value;\r\n                    }\r\n                    if (!id.match(/^(?:[_\\-a-z0-9.]*:)?[_\\-a-z0-9/.]*$/g)) {\r\n                        errors.add(path, 'error.invalid_resource_location');\r\n                        return value;\r\n                    }\r\n                    if (config.params.suffix && !id.endsWith(config.params.suffix)) {\r\n                        errors.add(path, 'error.expected_suffix', config.params.suffix);\r\n                        return value;\r\n                    }\r\n                }\r\n                if (config.validator === 'resource' && ((typeof config.params.pool === 'string' && config.params.pool.startsWith('$')) ||\r\n                    ((config.params.allowTag || config.params.requireTag) && value.startsWith('#')) ||\r\n                    (typeof value === 'string' && value.includes(':') && !value.startsWith('minecraft:')) ||\r\n                    config.params.isDefinition ||\r\n                    config.params.allowUnknown)) {\r\n                    return value;\r\n                }\r\n            }\r\n            if ((isEnum(config) && config.additional)) {\r\n                return value;\r\n            }\r\n            const values = getValues();\r\n            if (values.length > 0 && !values.includes(value)) {\r\n                errors.add(path, 'error.invalid_enum_option', value);\r\n            }\r\n            return value;\r\n        },\r\n        suggest: () => getValues().map(utils_1.quoteString),\r\n        validationOption() {\r\n            return isValidator(config) ? config : undefined;\r\n        },\r\n        hook(hook, path, ...args) {\r\n            var _a;\r\n            return ((_a = hook.string) !== null && _a !== void 0 ? _a : hook.base).call(hook, { node: this, getValues, config }, path, ...args);\r\n        }\r\n    };\r\n};\r\nexports.StringNode = StringNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CollectionRegistry = exports.SchemaRegistry = void 0;\r\n/**\r\n * Registry for schemas\r\n */\r\nclass SchemaRegistry {\r\n    constructor() {\r\n        this.registry = {};\r\n    }\r\n    register(id, node) {\r\n        this.registry[id] = node;\r\n    }\r\n    get(id) {\r\n        const node = this.registry[id];\r\n        if (node === undefined) {\r\n            console.error(`Tried to access schema \"${id}\", but that doesn't exist.`);\r\n        }\r\n        return node;\r\n    }\r\n}\r\nexports.SchemaRegistry = SchemaRegistry;\r\n/**\r\n * Registry for collections\r\n */\r\nclass CollectionRegistry {\r\n    constructor() {\r\n        this.registry = {};\r\n    }\r\n    register(id, list) {\r\n        this.registry[id] = list;\r\n    }\r\n    get(id) {\r\n        const list = this.registry[id];\r\n        if (list === undefined) {\r\n            console.warn(`Tried to access collection \"${id}\", but that doesn't exist.`);\r\n        }\r\n        return list !== null && list !== void 0 ? list : [];\r\n    }\r\n}\r\nexports.CollectionRegistry = CollectionRegistry;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./model/DataModel\"), exports);\r\n__exportStar(require(\"./model/Path\"), exports);\r\n__exportStar(require(\"./model/Errors\"), exports);\r\n__exportStar(require(\"./nodes/Node\"), exports);\r\n__exportStar(require(\"./nodes/BooleanNode\"), exports);\r\n__exportStar(require(\"./nodes/ChoiceNode\"), exports);\r\n__exportStar(require(\"./nodes/ListNode\"), exports);\r\n__exportStar(require(\"./nodes/MapNode\"), exports);\r\n__exportStar(require(\"./nodes/NumberNode\"), exports);\r\n__exportStar(require(\"./nodes/ObjectNode\"), exports);\r\n__exportStar(require(\"./nodes/Reference\"), exports);\r\n__exportStar(require(\"./nodes/StringNode\"), exports);\r\n__exportStar(require(\"./nodes/SwitchNode\"), exports);\r\n__exportStar(require(\"./Hook\"), exports);\r\n__exportStar(require(\"./JsonUpdate\"), exports);\r\n__exportStar(require(\"./Registries\"), exports);\r\n__exportStar(require(\"./ValidationOption\"), exports);\r\n","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*\n * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.\n * JZlib is based on zlib-1.1.3, so all credit should go authors\n * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)\n * and contributors of zlib.\n */\n\n// Global\n\nconst MAX_BITS = 15;\nconst D_CODES = 30;\nconst BL_CODES = 19;\n\nconst LENGTH_CODES = 29;\nconst LITERALS = 256;\nconst L_CODES = (LITERALS + 1 + LENGTH_CODES);\nconst HEAP_SIZE = (2 * L_CODES + 1);\n\nconst END_BLOCK = 256;\n\n// Bit length codes must not exceed MAX_BL_BITS bits\nconst MAX_BL_BITS = 7;\n\n// repeat previous bit length 3-6 times (2 bits of repeat count)\nconst REP_3_6 = 16;\n\n// repeat a zero length 3-10 times (3 bits of repeat count)\nconst REPZ_3_10 = 17;\n\n// repeat a zero length 11-138 times (7 bits of repeat count)\nconst REPZ_11_138 = 18;\n\n// The lengths of the bit length codes are sent in order of decreasing\n// probability, to avoid transmitting the lengths for unused bit\n// length codes.\n\nconst Buf_size = 8 * 2;\n\n// JZlib version : \"1.0.2\"\nconst Z_DEFAULT_COMPRESSION = -1;\n\n// compression strategy\nconst Z_FILTERED = 1;\nconst Z_HUFFMAN_ONLY = 2;\nconst Z_DEFAULT_STRATEGY = 0;\n\nconst Z_NO_FLUSH = 0;\nconst Z_PARTIAL_FLUSH = 1;\nconst Z_FULL_FLUSH = 3;\nconst Z_FINISH = 4;\n\nconst Z_OK = 0;\nconst Z_STREAM_END = 1;\nconst Z_NEED_DICT = 2;\nconst Z_STREAM_ERROR = -2;\nconst Z_DATA_ERROR = -3;\nconst Z_BUF_ERROR = -5;\n\n// Tree\n\nfunction extractArray(array) {\n\treturn flatArray(array.map(([length, value]) => (new Array(length)).fill(value, 0, length)));\n}\n\nfunction flatArray(array) {\n\treturn array.reduce((a, b) => a.concat(Array.isArray(b) ? flatArray(b) : b), []);\n}\n\n// see definition of array dist_code below\nconst _dist_code = [0, 1, 2, 3].concat(...extractArray([\n\t[2, 4], [2, 5], [4, 6], [4, 7], [8, 8], [8, 9], [16, 10], [16, 11], [32, 12], [32, 13], [64, 14], [64, 15], [2, 0], [1, 16],\n\t[1, 17], [2, 18], [2, 19], [4, 20], [4, 21], [8, 22], [8, 23], [16, 24], [16, 25], [32, 26], [32, 27], [64, 28], [64, 29]\n]));\n\nfunction Tree() {\n\tconst that = this;\n\n\t// dyn_tree; // the dynamic tree\n\t// max_code; // largest code with non zero frequency\n\t// stat_desc; // the corresponding static tree\n\n\t// Compute the optimal bit lengths for a tree and update the total bit\n\t// length\n\t// for the current block.\n\t// IN assertion: the fields freq and dad are set, heap[heap_max] and\n\t// above are the tree nodes sorted by increasing frequency.\n\t// OUT assertions: the field len is set to the optimal bit length, the\n\t// array bl_count contains the frequencies for each bit length.\n\t// The length opt_len is updated; static_len is also updated if stree is\n\t// not null.\n\tfunction gen_bitlen(s) {\n\t\tconst tree = that.dyn_tree;\n\t\tconst stree = that.stat_desc.static_tree;\n\t\tconst extra = that.stat_desc.extra_bits;\n\t\tconst base = that.stat_desc.extra_base;\n\t\tconst max_length = that.stat_desc.max_length;\n\t\tlet h; // heap index\n\t\tlet n, m; // iterate over the tree elements\n\t\tlet bits; // bit length\n\t\tlet xbits; // extra bits\n\t\tlet f; // frequency\n\t\tlet overflow = 0; // number of elements with bit length too large\n\n\t\tfor (bits = 0; bits <= MAX_BITS; bits++)\n\t\t\ts.bl_count[bits] = 0;\n\n\t\t// In a first pass, compute the optimal bit lengths (which may\n\t\t// overflow in the case of the bit length tree).\n\t\ttree[s.heap[s.heap_max] * 2 + 1] = 0; // root of the heap\n\n\t\tfor (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n\t\t\tn = s.heap[h];\n\t\t\tbits = tree[tree[n * 2 + 1] * 2 + 1] + 1;\n\t\t\tif (bits > max_length) {\n\t\t\t\tbits = max_length;\n\t\t\t\toverflow++;\n\t\t\t}\n\t\t\ttree[n * 2 + 1] = bits;\n\t\t\t// We overwrite tree[n*2+1] which is no longer needed\n\n\t\t\tif (n > that.max_code)\n\t\t\t\tcontinue; // not a leaf node\n\n\t\t\ts.bl_count[bits]++;\n\t\t\txbits = 0;\n\t\t\tif (n >= base)\n\t\t\t\txbits = extra[n - base];\n\t\t\tf = tree[n * 2];\n\t\t\ts.opt_len += f * (bits + xbits);\n\t\t\tif (stree)\n\t\t\t\ts.static_len += f * (stree[n * 2 + 1] + xbits);\n\t\t}\n\t\tif (overflow === 0)\n\t\t\treturn;\n\n\t\t// This happens for example on obj2 and pic of the Calgary corpus\n\t\t// Find the first bit length which could increase:\n\t\tdo {\n\t\t\tbits = max_length - 1;\n\t\t\twhile (s.bl_count[bits] === 0)\n\t\t\t\tbits--;\n\t\t\ts.bl_count[bits]--; // move one leaf down the tree\n\t\t\ts.bl_count[bits + 1] += 2; // move one overflow item as its brother\n\t\t\ts.bl_count[max_length]--;\n\t\t\t// The brother of the overflow item also moves one step up,\n\t\t\t// but this does not affect bl_count[max_length]\n\t\t\toverflow -= 2;\n\t\t} while (overflow > 0);\n\n\t\tfor (bits = max_length; bits !== 0; bits--) {\n\t\t\tn = s.bl_count[bits];\n\t\t\twhile (n !== 0) {\n\t\t\t\tm = s.heap[--h];\n\t\t\t\tif (m > that.max_code)\n\t\t\t\t\tcontinue;\n\t\t\t\tif (tree[m * 2 + 1] != bits) {\n\t\t\t\t\ts.opt_len += (bits - tree[m * 2 + 1]) * tree[m * 2];\n\t\t\t\t\ttree[m * 2 + 1] = bits;\n\t\t\t\t}\n\t\t\t\tn--;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Reverse the first len bits of a code, using straightforward code (a\n\t// faster\n\t// method would use a table)\n\t// IN assertion: 1 <= len <= 15\n\tfunction bi_reverse(code, // the value to invert\n\t\tlen // its bit length\n\t) {\n\t\tlet res = 0;\n\t\tdo {\n\t\t\tres |= code & 1;\n\t\t\tcode >>>= 1;\n\t\t\tres <<= 1;\n\t\t} while (--len > 0);\n\t\treturn res >>> 1;\n\t}\n\n\t// Generate the codes for a given tree and bit counts (which need not be\n\t// optimal).\n\t// IN assertion: the array bl_count contains the bit length statistics for\n\t// the given tree and the field len is set for all tree elements.\n\t// OUT assertion: the field code is set for all tree elements of non\n\t// zero code length.\n\tfunction gen_codes(tree, // the tree to decorate\n\t\tmax_code, // largest code with non zero frequency\n\t\tbl_count // number of codes at each bit length\n\t) {\n\t\tconst next_code = []; // next code value for each\n\t\t// bit length\n\t\tlet code = 0; // running code value\n\t\tlet bits; // bit index\n\t\tlet n; // code index\n\t\tlet len;\n\n\t\t// The distribution counts are first used to generate the code values\n\t\t// without bit reversal.\n\t\tfor (bits = 1; bits <= MAX_BITS; bits++) {\n\t\t\tnext_code[bits] = code = ((code + bl_count[bits - 1]) << 1);\n\t\t}\n\n\t\t// Check that the bit counts in bl_count are consistent. The last code\n\t\t// must be all ones.\n\t\t// Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n\t\t// \"inconsistent bit counts\");\n\t\t// Tracev((stderr,\"gen_codes: max_code %d \", max_code));\n\n\t\tfor (n = 0; n <= max_code; n++) {\n\t\t\tlen = tree[n * 2 + 1];\n\t\t\tif (len === 0)\n\t\t\t\tcontinue;\n\t\t\t// Now reverse the bits\n\t\t\ttree[n * 2] = bi_reverse(next_code[len]++, len);\n\t\t}\n\t}\n\n\t// Construct one Huffman tree and assigns the code bit strings and lengths.\n\t// Update the total bit length for the current block.\n\t// IN assertion: the field freq is set for all tree elements.\n\t// OUT assertions: the fields len and code are set to the optimal bit length\n\t// and corresponding code. The length opt_len is updated; static_len is\n\t// also updated if stree is not null. The field max_code is set.\n\tthat.build_tree = function (s) {\n\t\tconst tree = that.dyn_tree;\n\t\tconst stree = that.stat_desc.static_tree;\n\t\tconst elems = that.stat_desc.elems;\n\t\tlet n, m; // iterate over heap elements\n\t\tlet max_code = -1; // largest code with non zero frequency\n\t\tlet node; // new node being created\n\n\t\t// Construct the initial heap, with least frequent element in\n\t\t// heap[1]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n\t\t// heap[0] is not used.\n\t\ts.heap_len = 0;\n\t\ts.heap_max = HEAP_SIZE;\n\n\t\tfor (n = 0; n < elems; n++) {\n\t\t\tif (tree[n * 2] !== 0) {\n\t\t\t\ts.heap[++s.heap_len] = max_code = n;\n\t\t\t\ts.depth[n] = 0;\n\t\t\t} else {\n\t\t\t\ttree[n * 2 + 1] = 0;\n\t\t\t}\n\t\t}\n\n\t\t// The pkzip format requires that at least one distance code exists,\n\t\t// and that at least one bit should be sent even if there is only one\n\t\t// possible code. So to avoid special checks later on we force at least\n\t\t// two codes of non zero frequency.\n\t\twhile (s.heap_len < 2) {\n\t\t\tnode = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;\n\t\t\ttree[node * 2] = 1;\n\t\t\ts.depth[node] = 0;\n\t\t\ts.opt_len--;\n\t\t\tif (stree)\n\t\t\t\ts.static_len -= stree[node * 2 + 1];\n\t\t\t// node is 0 or 1 so it does not have extra bits\n\t\t}\n\t\tthat.max_code = max_code;\n\n\t\t// The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n\t\t// establish sub-heaps of increasing lengths:\n\n\t\tfor (n = Math.floor(s.heap_len / 2); n >= 1; n--)\n\t\t\ts.pqdownheap(tree, n);\n\n\t\t// Construct the Huffman tree by repeatedly combining the least two\n\t\t// frequent nodes.\n\n\t\tnode = elems; // next internal node of the tree\n\t\tdo {\n\t\t\t// n = node of least frequency\n\t\t\tn = s.heap[1];\n\t\t\ts.heap[1] = s.heap[s.heap_len--];\n\t\t\ts.pqdownheap(tree, 1);\n\t\t\tm = s.heap[1]; // m = node of next least frequency\n\n\t\t\ts.heap[--s.heap_max] = n; // keep the nodes sorted by frequency\n\t\t\ts.heap[--s.heap_max] = m;\n\n\t\t\t// Create a new node father of n and m\n\t\t\ttree[node * 2] = (tree[n * 2] + tree[m * 2]);\n\t\t\ts.depth[node] = Math.max(s.depth[n], s.depth[m]) + 1;\n\t\t\ttree[n * 2 + 1] = tree[m * 2 + 1] = node;\n\n\t\t\t// and insert the new node in the heap\n\t\t\ts.heap[1] = node++;\n\t\t\ts.pqdownheap(tree, 1);\n\t\t} while (s.heap_len >= 2);\n\n\t\ts.heap[--s.heap_max] = s.heap[1];\n\n\t\t// At this point, the fields freq and dad are set. We can now\n\t\t// generate the bit lengths.\n\n\t\tgen_bitlen(s);\n\n\t\t// The field len is now set, we can generate the bit codes\n\t\tgen_codes(tree, that.max_code, s.bl_count);\n\t};\n\n}\n\nTree._length_code = [0, 1, 2, 3, 4, 5, 6, 7].concat(...extractArray([\n\t[2, 8], [2, 9], [2, 10], [2, 11], [4, 12], [4, 13], [4, 14], [4, 15], [8, 16], [8, 17], [8, 18], [8, 19],\n\t[16, 20], [16, 21], [16, 22], [16, 23], [32, 24], [32, 25], [32, 26], [31, 27], [1, 28]]));\n\nTree.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];\n\nTree.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384,\n\t24576];\n\n// Mapping from a distance to a distance code. dist is the distance - 1 and\n// must not have side effects. _dist_code[256] and _dist_code[257] are never\n// used.\nTree.d_code = function (dist) {\n\treturn ((dist) < 256 ? _dist_code[dist] : _dist_code[256 + ((dist) >>> 7)]);\n};\n\n// extra bits for each length code\nTree.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];\n\n// extra bits for each distance code\nTree.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];\n\n// extra bits for each bit length code\nTree.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];\n\nTree.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];\n\n// StaticTree\n\nfunction StaticTree(static_tree, extra_bits, extra_base, elems, max_length) {\n\tconst that = this;\n\tthat.static_tree = static_tree;\n\tthat.extra_bits = extra_bits;\n\tthat.extra_base = extra_base;\n\tthat.elems = elems;\n\tthat.max_length = max_length;\n}\n\nconst static_ltree2_first_part = [12, 140, 76, 204, 44, 172, 108, 236, 28, 156, 92, 220, 60, 188, 124, 252, 2, 130, 66, 194, 34, 162, 98, 226, 18, 146, 82,\n\t210, 50, 178, 114, 242, 10, 138, 74, 202, 42, 170, 106, 234, 26, 154, 90, 218, 58, 186, 122, 250, 6, 134, 70, 198, 38, 166, 102, 230, 22, 150, 86,\n\t214, 54, 182, 118, 246, 14, 142, 78, 206, 46, 174, 110, 238, 30, 158, 94, 222, 62, 190, 126, 254, 1, 129, 65, 193, 33, 161, 97, 225, 17, 145, 81,\n\t209, 49, 177, 113, 241, 9, 137, 73, 201, 41, 169, 105, 233, 25, 153, 89, 217, 57, 185, 121, 249, 5, 133, 69, 197, 37, 165, 101, 229, 21, 149, 85,\n\t213, 53, 181, 117, 245, 13, 141, 77, 205, 45, 173, 109, 237, 29, 157, 93, 221, 61, 189, 125, 253, 19, 275, 147, 403, 83, 339, 211, 467, 51, 307,\n\t179, 435, 115, 371, 243, 499, 11, 267, 139, 395, 75, 331, 203, 459, 43, 299, 171, 427, 107, 363, 235, 491, 27, 283, 155, 411, 91, 347, 219, 475,\n\t59, 315, 187, 443, 123, 379, 251, 507, 7, 263, 135, 391, 71, 327, 199, 455, 39, 295, 167, 423, 103, 359, 231, 487, 23, 279, 151, 407, 87, 343, 215,\n\t471, 55, 311, 183, 439, 119, 375, 247, 503, 15, 271, 143, 399, 79, 335, 207, 463, 47, 303, 175, 431, 111, 367, 239, 495, 31, 287, 159, 415, 95,\n\t351, 223, 479, 63, 319, 191, 447, 127, 383, 255, 511, 0, 64, 32, 96, 16, 80, 48, 112, 8, 72, 40, 104, 24, 88, 56, 120, 4, 68, 36, 100, 20, 84, 52,\n\t116, 3, 131, 67, 195, 35, 163, 99, 227];\nconst static_ltree2_second_part = extractArray([[144, 8], [112, 9], [24, 7], [8, 8]]);\nStaticTree.static_ltree = flatArray(static_ltree2_first_part.map((value, index) => [value, static_ltree2_second_part[index]]));\n\nconst static_dtree_first_part = [0, 16, 8, 24, 4, 20, 12, 28, 2, 18, 10, 26, 6, 22, 14, 30, 1, 17, 9, 25, 5, 21, 13, 29, 3, 19, 11, 27, 7, 23];\nconst static_dtree_second_part = extractArray([[30, 5]]);\nStaticTree.static_dtree = flatArray(static_dtree_first_part.map((value, index) => [value, static_dtree_second_part[index]]));\n\nStaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n\nStaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS);\n\nStaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);\n\n// Deflate\n\nconst MAX_MEM_LEVEL = 9;\nconst DEF_MEM_LEVEL = 8;\n\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\tconst that = this;\n\tthat.good_length = good_length;\n\tthat.max_lazy = max_lazy;\n\tthat.nice_length = nice_length;\n\tthat.max_chain = max_chain;\n\tthat.func = func;\n}\n\nconst STORED = 0;\nconst FAST = 1;\nconst SLOW = 2;\nconst config_table = [\n\tnew Config(0, 0, 0, 0, STORED),\n\tnew Config(4, 4, 8, 4, FAST),\n\tnew Config(4, 5, 16, 8, FAST),\n\tnew Config(4, 6, 32, 32, FAST),\n\tnew Config(4, 4, 16, 16, SLOW),\n\tnew Config(8, 16, 32, 32, SLOW),\n\tnew Config(8, 16, 128, 128, SLOW),\n\tnew Config(8, 32, 128, 256, SLOW),\n\tnew Config(32, 128, 258, 1024, SLOW),\n\tnew Config(32, 258, 258, 4096, SLOW)\n];\n\nconst z_errmsg = [\"need dictionary\", // Z_NEED_DICT\n\t// 2\n\t\"stream end\", // Z_STREAM_END 1\n\t\"\", // Z_OK 0\n\t\"\", // Z_ERRNO (-1)\n\t\"stream error\", // Z_STREAM_ERROR (-2)\n\t\"data error\", // Z_DATA_ERROR (-3)\n\t\"\", // Z_MEM_ERROR (-4)\n\t\"buffer error\", // Z_BUF_ERROR (-5)\n\t\"\",// Z_VERSION_ERROR (-6)\n\t\"\"];\n\n// block not completed, need more input or more output\nconst NeedMore = 0;\n\n// block flush performed\nconst BlockDone = 1;\n\n// finish started, need only more output at next deflate\nconst FinishStarted = 2;\n\n// finish done, accept no more input or output\nconst FinishDone = 3;\n\n// preset dictionary flag in zlib header\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE = 42;\nconst BUSY_STATE = 113;\nconst FINISH_STATE = 666;\n\n// The deflate compression method\nconst Z_DEFLATED = 8;\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES = 2;\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nfunction smaller(tree, n, m, depth) {\n\tconst tn2 = tree[n * 2];\n\tconst tm2 = tree[m * 2];\n\treturn (tn2 < tm2 || (tn2 == tm2 && depth[n] <= depth[m]));\n}\n\nfunction Deflate() {\n\n\tconst that = this;\n\tlet strm; // pointer back to this zlib stream\n\tlet status; // as the name implies\n\t// pending_buf; // output still pending\n\tlet pending_buf_size; // size of pending_buf\n\t// pending_out; // next pending byte to output to the stream\n\t// pending; // nb of bytes in the pending buffer\n\n\t// dist_buf; // buffer for distances\n\t// lc_buf; // buffer for literals or lengths\n\t// To simplify the code, dist_buf and lc_buf have the same number of elements.\n\t// To use different lengths, an extra flag array would be necessary.\n\n\tlet last_flush; // value of flush param for previous deflate call\n\n\tlet w_size; // LZ77 win size (32K by default)\n\tlet w_bits; // log2(w_size) (8..16)\n\tlet w_mask; // w_size - 1\n\n\tlet win;\n\t// Sliding win. Input bytes are read into the second half of the win,\n\t// and move to the first half later to keep a dictionary of at least wSize\n\t// bytes. With this organization, matches are limited to a distance of\n\t// wSize-MAX_MATCH bytes, but this ensures that IO is always\n\t// performed with a length multiple of the block size. Also, it limits\n\t// the win size to 64K, which is quite useful on MSDOS.\n\t// To do: use the user input buffer as sliding win.\n\n\tlet window_size;\n\t// Actual size of win: 2*wSize, except when the user input buffer\n\t// is directly used as sliding win.\n\n\tlet prev;\n\t// Link to older string with same hash index. To limit the size of this\n\t// array to 64K, this link is maintained only for the last 32K strings.\n\t// An index in this array is thus a win index modulo 32K.\n\n\tlet head; // Heads of the hash chains or NIL.\n\n\tlet ins_h; // hash index of string to be inserted\n\tlet hash_size; // number of elements in hash table\n\tlet hash_bits; // log2(hash_size)\n\tlet hash_mask; // hash_size-1\n\n\t// Number of bits by which ins_h must be shifted at each input\n\t// step. It must be such that after MIN_MATCH steps, the oldest\n\t// byte no longer takes part in the hash key, that is:\n\t// hash_shift * MIN_MATCH >= hash_bits\n\tlet hash_shift;\n\n\t// Window position at the beginning of the current output block. Gets\n\t// negative when the win is moved backwards.\n\n\tlet block_start;\n\n\tlet match_length; // length of best match\n\tlet prev_match; // previous match\n\tlet match_available; // set if previous match exists\n\tlet strstart; // start of string to insert\n\tlet match_start; // start of matching string\n\tlet lookahead; // number of valid bytes ahead in win\n\n\t// Length of the best match at previous step. Matches not greater than this\n\t// are discarded. This is used in the lazy match evaluation.\n\tlet prev_length;\n\n\t// To speed up deflation, hash chains are never searched beyond this\n\t// length. A higher limit improves compression ratio but degrades the speed.\n\tlet max_chain_length;\n\n\t// Attempt to find a better match only when the current match is strictly\n\t// smaller than this value. This mechanism is used only for compression\n\t// levels >= 4.\n\tlet max_lazy_match;\n\n\t// Insert new strings in the hash table only if the match length is not\n\t// greater than this length. This saves time but degrades compression.\n\t// max_insert_length is used only for compression levels <= 3.\n\n\tlet level; // compression level (1..9)\n\tlet strategy; // favor or force Huffman coding\n\n\t// Use a faster search when the previous match is longer than this\n\tlet good_match;\n\n\t// Stop searching when current match exceeds this\n\tlet nice_match;\n\n\tlet dyn_ltree; // literal and length tree\n\tlet dyn_dtree; // distance tree\n\tlet bl_tree; // Huffman tree for bit lengths\n\n\tconst l_desc = new Tree(); // desc for literal tree\n\tconst d_desc = new Tree(); // desc for distance tree\n\tconst bl_desc = new Tree(); // desc for bit length tree\n\n\t// that.heap_len; // number of elements in the heap\n\t// that.heap_max; // element of largest frequency\n\t// The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n\t// The same heap array is used to build all trees.\n\n\t// Depth of each subtree used as tie breaker for trees of equal frequency\n\tthat.depth = [];\n\n\t// Size of match buffer for literals/lengths. There are 4 reasons for\n\t// limiting lit_bufsize to 64K:\n\t// - frequencies can be kept in 16 bit counters\n\t// - if compression is not successful for the first block, all input\n\t// data is still in the win so we can still emit a stored block even\n\t// when input comes from standard input. (This can also be done for\n\t// all blocks if lit_bufsize is not greater than 32K.)\n\t// - if compression is not successful for a file smaller than 64K, we can\n\t// even emit a stored file instead of a stored block (saving 5 bytes).\n\t// This is applicable only for zip (not gzip or zlib).\n\t// - creating new Huffman trees less frequently may not provide fast\n\t// adaptation to changes in the input data statistics. (Take for\n\t// example a binary file with poorly compressible code followed by\n\t// a highly compressible string table.) Smaller buffer sizes give\n\t// fast adaptation but have of course the overhead of transmitting\n\t// trees more frequently.\n\t// - I can't count above 4\n\tlet lit_bufsize;\n\n\tlet last_lit; // running index in dist_buf and lc_buf\n\n\t// that.opt_len; // bit length of current block with optimal trees\n\t// that.static_len; // bit length of current block with static trees\n\tlet matches; // number of string matches in current block\n\tlet last_eob_len; // bit length of EOB code for last block\n\n\t// Output buffer. bits are inserted starting at the bottom (least\n\t// significant bits).\n\tlet bi_buf;\n\n\t// Number of valid bits in bi_buf. All bits above the last valid bit\n\t// are always zero.\n\tlet bi_valid;\n\n\t// number of codes at each bit length for an optimal tree\n\tthat.bl_count = [];\n\n\t// heap used to build the Huffman trees\n\tthat.heap = [];\n\n\tdyn_ltree = [];\n\tdyn_dtree = [];\n\tbl_tree = [];\n\n\tfunction lm_init() {\n\t\twindow_size = 2 * w_size;\n\n\t\thead[hash_size - 1] = 0;\n\t\tfor (let i = 0; i < hash_size - 1; i++) {\n\t\t\thead[i] = 0;\n\t\t}\n\n\t\t// Set the default configuration parameters:\n\t\tmax_lazy_match = config_table[level].max_lazy;\n\t\tgood_match = config_table[level].good_length;\n\t\tnice_match = config_table[level].nice_length;\n\t\tmax_chain_length = config_table[level].max_chain;\n\n\t\tstrstart = 0;\n\t\tblock_start = 0;\n\t\tlookahead = 0;\n\t\tmatch_length = prev_length = MIN_MATCH - 1;\n\t\tmatch_available = 0;\n\t\tins_h = 0;\n\t}\n\n\tfunction init_block() {\n\t\tlet i;\n\t\t// Initialize the trees.\n\t\tfor (i = 0; i < L_CODES; i++)\n\t\t\tdyn_ltree[i * 2] = 0;\n\t\tfor (i = 0; i < D_CODES; i++)\n\t\t\tdyn_dtree[i * 2] = 0;\n\t\tfor (i = 0; i < BL_CODES; i++)\n\t\t\tbl_tree[i * 2] = 0;\n\n\t\tdyn_ltree[END_BLOCK * 2] = 1;\n\t\tthat.opt_len = that.static_len = 0;\n\t\tlast_lit = matches = 0;\n\t}\n\n\t// Initialize the tree data structures for a new zlib stream.\n\tfunction tr_init() {\n\n\t\tl_desc.dyn_tree = dyn_ltree;\n\t\tl_desc.stat_desc = StaticTree.static_l_desc;\n\n\t\td_desc.dyn_tree = dyn_dtree;\n\t\td_desc.stat_desc = StaticTree.static_d_desc;\n\n\t\tbl_desc.dyn_tree = bl_tree;\n\t\tbl_desc.stat_desc = StaticTree.static_bl_desc;\n\n\t\tbi_buf = 0;\n\t\tbi_valid = 0;\n\t\tlast_eob_len = 8; // enough lookahead for inflate\n\n\t\t// Initialize the first block of the first file:\n\t\tinit_block();\n\t}\n\n\t// Restore the heap property by moving down the tree starting at node k,\n\t// exchanging a node with the smallest of its two sons if necessary,\n\t// stopping\n\t// when the heap property is re-established (each father smaller than its\n\t// two sons).\n\tthat.pqdownheap = function (tree, // the tree to restore\n\t\tk // node to move down\n\t) {\n\t\tconst heap = that.heap;\n\t\tconst v = heap[k];\n\t\tlet j = k << 1; // left son of k\n\t\twhile (j <= that.heap_len) {\n\t\t\t// Set j to the smallest of the two sons:\n\t\t\tif (j < that.heap_len && smaller(tree, heap[j + 1], heap[j], that.depth)) {\n\t\t\t\tj++;\n\t\t\t}\n\t\t\t// Exit if v is smaller than both sons\n\t\t\tif (smaller(tree, v, heap[j], that.depth))\n\t\t\t\tbreak;\n\n\t\t\t// Exchange v with the smallest son\n\t\t\theap[k] = heap[j];\n\t\t\tk = j;\n\t\t\t// And continue down the tree, setting j to the left son of k\n\t\t\tj <<= 1;\n\t\t}\n\t\theap[k] = v;\n\t};\n\n\t// Scan a literal or distance tree to determine the frequencies of the codes\n\t// in the bit length tree.\n\tfunction scan_tree(tree,// the tree to be scanned\n\t\tmax_code // and its largest code of non zero frequency\n\t) {\n\t\tlet prevlen = -1; // last emitted length\n\t\tlet curlen; // length of current code\n\t\tlet nextlen = tree[0 * 2 + 1]; // length of next code\n\t\tlet count = 0; // repeat count of the current code\n\t\tlet max_count = 7; // max repeat count\n\t\tlet min_count = 4; // min repeat count\n\n\t\tif (nextlen === 0) {\n\t\t\tmax_count = 138;\n\t\t\tmin_count = 3;\n\t\t}\n\t\ttree[(max_code + 1) * 2 + 1] = 0xffff; // guard\n\n\t\tfor (let n = 0; n <= max_code; n++) {\n\t\t\tcurlen = nextlen;\n\t\t\tnextlen = tree[(n + 1) * 2 + 1];\n\t\t\tif (++count < max_count && curlen == nextlen) {\n\t\t\t\tcontinue;\n\t\t\t} else if (count < min_count) {\n\t\t\t\tbl_tree[curlen * 2] += count;\n\t\t\t} else if (curlen !== 0) {\n\t\t\t\tif (curlen != prevlen)\n\t\t\t\t\tbl_tree[curlen * 2]++;\n\t\t\t\tbl_tree[REP_3_6 * 2]++;\n\t\t\t} else if (count <= 10) {\n\t\t\t\tbl_tree[REPZ_3_10 * 2]++;\n\t\t\t} else {\n\t\t\t\tbl_tree[REPZ_11_138 * 2]++;\n\t\t\t}\n\t\t\tcount = 0;\n\t\t\tprevlen = curlen;\n\t\t\tif (nextlen === 0) {\n\t\t\t\tmax_count = 138;\n\t\t\t\tmin_count = 3;\n\t\t\t} else if (curlen == nextlen) {\n\t\t\t\tmax_count = 6;\n\t\t\t\tmin_count = 3;\n\t\t\t} else {\n\t\t\t\tmax_count = 7;\n\t\t\t\tmin_count = 4;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Construct the Huffman tree for the bit lengths and return the index in\n\t// bl_order of the last bit length code to send.\n\tfunction build_bl_tree() {\n\t\tlet max_blindex; // index of last bit length code of non zero freq\n\n\t\t// Determine the bit length frequencies for literal and distance trees\n\t\tscan_tree(dyn_ltree, l_desc.max_code);\n\t\tscan_tree(dyn_dtree, d_desc.max_code);\n\n\t\t// Build the bit length tree:\n\t\tbl_desc.build_tree(that);\n\t\t// opt_len now includes the length of the tree representations, except\n\t\t// the lengths of the bit lengths codes and the 5+5+4 bits for the\n\t\t// counts.\n\n\t\t// Determine the number of bit length codes to send. The pkzip format\n\t\t// requires that at least 4 bit length codes be sent. (appnote.txt says\n\t\t// 3 but the actual value used is 4.)\n\t\tfor (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n\t\t\tif (bl_tree[Tree.bl_order[max_blindex] * 2 + 1] !== 0)\n\t\t\t\tbreak;\n\t\t}\n\t\t// Update opt_len to include the bit length tree and counts\n\t\tthat.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n\n\t\treturn max_blindex;\n\t}\n\n\t// Output a byte on the stream.\n\t// IN assertion: there is enough room in pending_buf.\n\tfunction put_byte(p) {\n\t\tthat.pending_buf[that.pending++] = p;\n\t}\n\n\tfunction put_short(w) {\n\t\tput_byte(w & 0xff);\n\t\tput_byte((w >>> 8) & 0xff);\n\t}\n\n\tfunction putShortMSB(b) {\n\t\tput_byte((b >> 8) & 0xff);\n\t\tput_byte((b & 0xff) & 0xff);\n\t}\n\n\tfunction send_bits(value, length) {\n\t\tlet val;\n\t\tconst len = length;\n\t\tif (bi_valid > Buf_size - len) {\n\t\t\tval = value;\n\t\t\t// bi_buf |= (val << bi_valid);\n\t\t\tbi_buf |= ((val << bi_valid) & 0xffff);\n\t\t\tput_short(bi_buf);\n\t\t\tbi_buf = val >>> (Buf_size - bi_valid);\n\t\t\tbi_valid += len - Buf_size;\n\t\t} else {\n\t\t\t// bi_buf |= (value) << bi_valid;\n\t\t\tbi_buf |= (((value) << bi_valid) & 0xffff);\n\t\t\tbi_valid += len;\n\t\t}\n\t}\n\n\tfunction send_code(c, tree) {\n\t\tconst c2 = c * 2;\n\t\tsend_bits(tree[c2] & 0xffff, tree[c2 + 1] & 0xffff);\n\t}\n\n\t// Send a literal or distance tree in compressed form, using the codes in\n\t// bl_tree.\n\tfunction send_tree(tree,// the tree to be sent\n\t\tmax_code // and its largest code of non zero frequency\n\t) {\n\t\tlet n; // iterates over all tree elements\n\t\tlet prevlen = -1; // last emitted length\n\t\tlet curlen; // length of current code\n\t\tlet nextlen = tree[0 * 2 + 1]; // length of next code\n\t\tlet count = 0; // repeat count of the current code\n\t\tlet max_count = 7; // max repeat count\n\t\tlet min_count = 4; // min repeat count\n\n\t\tif (nextlen === 0) {\n\t\t\tmax_count = 138;\n\t\t\tmin_count = 3;\n\t\t}\n\n\t\tfor (n = 0; n <= max_code; n++) {\n\t\t\tcurlen = nextlen;\n\t\t\tnextlen = tree[(n + 1) * 2 + 1];\n\t\t\tif (++count < max_count && curlen == nextlen) {\n\t\t\t\tcontinue;\n\t\t\t} else if (count < min_count) {\n\t\t\t\tdo {\n\t\t\t\t\tsend_code(curlen, bl_tree);\n\t\t\t\t} while (--count !== 0);\n\t\t\t} else if (curlen !== 0) {\n\t\t\t\tif (curlen != prevlen) {\n\t\t\t\t\tsend_code(curlen, bl_tree);\n\t\t\t\t\tcount--;\n\t\t\t\t}\n\t\t\t\tsend_code(REP_3_6, bl_tree);\n\t\t\t\tsend_bits(count - 3, 2);\n\t\t\t} else if (count <= 10) {\n\t\t\t\tsend_code(REPZ_3_10, bl_tree);\n\t\t\t\tsend_bits(count - 3, 3);\n\t\t\t} else {\n\t\t\t\tsend_code(REPZ_11_138, bl_tree);\n\t\t\t\tsend_bits(count - 11, 7);\n\t\t\t}\n\t\t\tcount = 0;\n\t\t\tprevlen = curlen;\n\t\t\tif (nextlen === 0) {\n\t\t\t\tmax_count = 138;\n\t\t\t\tmin_count = 3;\n\t\t\t} else if (curlen == nextlen) {\n\t\t\t\tmax_count = 6;\n\t\t\t\tmin_count = 3;\n\t\t\t} else {\n\t\t\t\tmax_count = 7;\n\t\t\t\tmin_count = 4;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Send the header for a block using dynamic Huffman trees: the counts, the\n\t// lengths of the bit length codes, the literal tree and the distance tree.\n\t// IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n\tfunction send_all_trees(lcodes, dcodes, blcodes) {\n\t\tlet rank; // index in bl_order\n\n\t\tsend_bits(lcodes - 257, 5); // not +255 as stated in appnote.txt\n\t\tsend_bits(dcodes - 1, 5);\n\t\tsend_bits(blcodes - 4, 4); // not -3 as stated in appnote.txt\n\t\tfor (rank = 0; rank < blcodes; rank++) {\n\t\t\tsend_bits(bl_tree[Tree.bl_order[rank] * 2 + 1], 3);\n\t\t}\n\t\tsend_tree(dyn_ltree, lcodes - 1); // literal tree\n\t\tsend_tree(dyn_dtree, dcodes - 1); // distance tree\n\t}\n\n\t// Flush the bit buffer, keeping at most 7 bits in it.\n\tfunction bi_flush() {\n\t\tif (bi_valid == 16) {\n\t\t\tput_short(bi_buf);\n\t\t\tbi_buf = 0;\n\t\t\tbi_valid = 0;\n\t\t} else if (bi_valid >= 8) {\n\t\t\tput_byte(bi_buf & 0xff);\n\t\t\tbi_buf >>>= 8;\n\t\t\tbi_valid -= 8;\n\t\t}\n\t}\n\n\t// Send one empty static block to give enough lookahead for inflate.\n\t// This takes 10 bits, of which 7 may remain in the bit buffer.\n\t// The current inflate code requires 9 bits of lookahead. If the\n\t// last two codes for the previous block (real code plus EOB) were coded\n\t// on 5 bits or less, inflate may have only 5+3 bits of lookahead to decode\n\t// the last real code. In this case we send two empty static blocks instead\n\t// of one. (There are no problems if the previous block is stored or fixed.)\n\t// To simplify the code, we assume the worst case of last real code encoded\n\t// on one bit only.\n\tfunction _tr_align() {\n\t\tsend_bits(STATIC_TREES << 1, 3);\n\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\n\n\t\tbi_flush();\n\n\t\t// Of the 10 bits for the empty block, we have already sent\n\t\t// (10 - bi_valid) bits. The lookahead for the last real code (before\n\t\t// the EOB of the previous block) was thus at least one plus the length\n\t\t// of the EOB plus what we have just sent of the empty static block.\n\t\tif (1 + last_eob_len + 10 - bi_valid < 9) {\n\t\t\tsend_bits(STATIC_TREES << 1, 3);\n\t\t\tsend_code(END_BLOCK, StaticTree.static_ltree);\n\t\t\tbi_flush();\n\t\t}\n\t\tlast_eob_len = 7;\n\t}\n\n\t// Save the match info and tally the frequency counts. Return true if\n\t// the current block must be flushed.\n\tfunction _tr_tally(dist, // distance of matched string\n\t\tlc // match length-MIN_MATCH or unmatched char (if dist==0)\n\t) {\n\t\tlet out_length, in_length, dcode;\n\t\tthat.dist_buf[last_lit] = dist;\n\t\tthat.lc_buf[last_lit] = lc & 0xff;\n\t\tlast_lit++;\n\n\t\tif (dist === 0) {\n\t\t\t// lc is the unmatched char\n\t\t\tdyn_ltree[lc * 2]++;\n\t\t} else {\n\t\t\tmatches++;\n\t\t\t// Here, lc is the match length - MIN_MATCH\n\t\t\tdist--; // dist = match distance - 1\n\t\t\tdyn_ltree[(Tree._length_code[lc] + LITERALS + 1) * 2]++;\n\t\t\tdyn_dtree[Tree.d_code(dist) * 2]++;\n\t\t}\n\n\t\tif ((last_lit & 0x1fff) === 0 && level > 2) {\n\t\t\t// Compute an upper bound for the compressed length\n\t\t\tout_length = last_lit * 8;\n\t\t\tin_length = strstart - block_start;\n\t\t\tfor (dcode = 0; dcode < D_CODES; dcode++) {\n\t\t\t\tout_length += dyn_dtree[dcode * 2] * (5 + Tree.extra_dbits[dcode]);\n\t\t\t}\n\t\t\tout_length >>>= 3;\n\t\t\tif ((matches < Math.floor(last_lit / 2)) && out_length < Math.floor(in_length / 2))\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn (last_lit == lit_bufsize - 1);\n\t\t// We avoid equality with lit_bufsize because of wraparound at 64K\n\t\t// on 16 bit machines and because stored blocks are restricted to\n\t\t// 64K-1 bytes.\n\t}\n\n\t// Send the block data compressed using the given Huffman trees\n\tfunction compress_block(ltree, dtree) {\n\t\tlet dist; // distance of matched string\n\t\tlet lc; // match length or unmatched char (if dist === 0)\n\t\tlet lx = 0; // running index in dist_buf and lc_buf\n\t\tlet code; // the code to send\n\t\tlet extra; // number of extra bits to send\n\n\t\tif (last_lit !== 0) {\n\t\t\tdo {\n\t\t\t\tdist = that.dist_buf[lx];\n\t\t\t\tlc = that.lc_buf[lx];\n\t\t\t\tlx++;\n\n\t\t\t\tif (dist === 0) {\n\t\t\t\t\tsend_code(lc, ltree); // send a literal byte\n\t\t\t\t} else {\n\t\t\t\t\t// Here, lc is the match length - MIN_MATCH\n\t\t\t\t\tcode = Tree._length_code[lc];\n\n\t\t\t\t\tsend_code(code + LITERALS + 1, ltree); // send the length\n\t\t\t\t\t// code\n\t\t\t\t\textra = Tree.extra_lbits[code];\n\t\t\t\t\tif (extra !== 0) {\n\t\t\t\t\t\tlc -= Tree.base_length[code];\n\t\t\t\t\t\tsend_bits(lc, extra); // send the extra length bits\n\t\t\t\t\t}\n\t\t\t\t\tdist--; // dist is now the match distance - 1\n\t\t\t\t\tcode = Tree.d_code(dist);\n\n\t\t\t\t\tsend_code(code, dtree); // send the distance code\n\t\t\t\t\textra = Tree.extra_dbits[code];\n\t\t\t\t\tif (extra !== 0) {\n\t\t\t\t\t\tdist -= Tree.base_dist[code];\n\t\t\t\t\t\tsend_bits(dist, extra); // send the extra distance bits\n\t\t\t\t\t}\n\t\t\t\t} // literal or match pair ?\n\t\t\t} while (lx < last_lit);\n\t\t}\n\n\t\tsend_code(END_BLOCK, ltree);\n\t\tlast_eob_len = ltree[END_BLOCK * 2 + 1];\n\t}\n\n\t// Flush the bit buffer and align the output on a byte boundary\n\tfunction bi_windup() {\n\t\tif (bi_valid > 8) {\n\t\t\tput_short(bi_buf);\n\t\t} else if (bi_valid > 0) {\n\t\t\tput_byte(bi_buf & 0xff);\n\t\t}\n\t\tbi_buf = 0;\n\t\tbi_valid = 0;\n\t}\n\n\t// Copy a stored block, storing first the length and its\n\t// one's complement if requested.\n\tfunction copy_block(buf, // the input data\n\t\tlen, // its length\n\t\theader // true if block header must be written\n\t) {\n\t\tbi_windup(); // align on byte boundary\n\t\tlast_eob_len = 8; // enough lookahead for inflate\n\n\t\tif (header) {\n\t\t\tput_short(len);\n\t\t\tput_short(~len);\n\t\t}\n\n\t\tthat.pending_buf.set(win.subarray(buf, buf + len), that.pending);\n\t\tthat.pending += len;\n\t}\n\n\t// Send a stored block\n\tfunction _tr_stored_block(buf, // input block\n\t\tstored_len, // length of input block\n\t\teof // true if this is the last block for a file\n\t) {\n\t\tsend_bits((STORED_BLOCK << 1) + (eof ? 1 : 0), 3); // send block type\n\t\tcopy_block(buf, stored_len, true); // with header\n\t}\n\n\t// Determine the best encoding for the current block: dynamic trees, static\n\t// trees or store, and output the encoded block to the zip file.\n\tfunction _tr_flush_block(buf, // input block, or NULL if too old\n\t\tstored_len, // length of input block\n\t\teof // true if this is the last block for a file\n\t) {\n\t\tlet opt_lenb, static_lenb;// opt_len and static_len in bytes\n\t\tlet max_blindex = 0; // index of last bit length code of non zero freq\n\n\t\t// Build the Huffman trees unless a stored block is forced\n\t\tif (level > 0) {\n\t\t\t// Construct the literal and distance trees\n\t\t\tl_desc.build_tree(that);\n\n\t\t\td_desc.build_tree(that);\n\n\t\t\t// At this point, opt_len and static_len are the total bit lengths\n\t\t\t// of\n\t\t\t// the compressed block data, excluding the tree representations.\n\n\t\t\t// Build the bit length tree for the above two trees, and get the\n\t\t\t// index\n\t\t\t// in bl_order of the last bit length code to send.\n\t\t\tmax_blindex = build_bl_tree();\n\n\t\t\t// Determine the best encoding. Compute first the block length in\n\t\t\t// bytes\n\t\t\topt_lenb = (that.opt_len + 3 + 7) >>> 3;\n\t\t\tstatic_lenb = (that.static_len + 3 + 7) >>> 3;\n\n\t\t\tif (static_lenb <= opt_lenb)\n\t\t\t\topt_lenb = static_lenb;\n\t\t} else {\n\t\t\topt_lenb = static_lenb = stored_len + 5; // force a stored block\n\t\t}\n\n\t\tif ((stored_len + 4 <= opt_lenb) && buf != -1) {\n\t\t\t// 4: two words for the lengths\n\t\t\t// The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n\t\t\t// Otherwise we can't have processed more than WSIZE input bytes\n\t\t\t// since\n\t\t\t// the last block flush, because compression would have been\n\t\t\t// successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n\t\t\t// transform a block into a stored block.\n\t\t\t_tr_stored_block(buf, stored_len, eof);\n\t\t} else if (static_lenb == opt_lenb) {\n\t\t\tsend_bits((STATIC_TREES << 1) + (eof ? 1 : 0), 3);\n\t\t\tcompress_block(StaticTree.static_ltree, StaticTree.static_dtree);\n\t\t} else {\n\t\t\tsend_bits((DYN_TREES << 1) + (eof ? 1 : 0), 3);\n\t\t\tsend_all_trees(l_desc.max_code + 1, d_desc.max_code + 1, max_blindex + 1);\n\t\t\tcompress_block(dyn_ltree, dyn_dtree);\n\t\t}\n\n\t\t// The above check is made mod 2^32, for files larger than 512 MB\n\t\t// and uLong implemented on 32 bits.\n\n\t\tinit_block();\n\n\t\tif (eof) {\n\t\t\tbi_windup();\n\t\t}\n\t}\n\n\tfunction flush_block_only(eof) {\n\t\t_tr_flush_block(block_start >= 0 ? block_start : -1, strstart - block_start, eof);\n\t\tblock_start = strstart;\n\t\tstrm.flush_pending();\n\t}\n\n\t// Fill the win when the lookahead becomes insufficient.\n\t// Updates strstart and lookahead.\n\t//\n\t// IN assertion: lookahead < MIN_LOOKAHEAD\n\t// OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n\t// At least one byte has been read, or avail_in === 0; reads are\n\t// performed for at least two bytes (required for the zip translate_eol\n\t// option -- not supported here).\n\tfunction fill_window() {\n\t\tlet n, m;\n\t\tlet p;\n\t\tlet more; // Amount of free space at the end of the win.\n\n\t\tdo {\n\t\t\tmore = (window_size - lookahead - strstart);\n\n\t\t\t// Deal with !@#$% 64K limit:\n\t\t\tif (more === 0 && strstart === 0 && lookahead === 0) {\n\t\t\t\tmore = w_size;\n\t\t\t} else if (more == -1) {\n\t\t\t\t// Very unlikely, but possible on 16 bit machine if strstart ==\n\t\t\t\t// 0\n\t\t\t\t// and lookahead == 1 (input done one byte at time)\n\t\t\t\tmore--;\n\n\t\t\t\t// If the win is almost full and there is insufficient\n\t\t\t\t// lookahead,\n\t\t\t\t// move the upper half to the lower one to make room in the\n\t\t\t\t// upper half.\n\t\t\t} else if (strstart >= w_size + w_size - MIN_LOOKAHEAD) {\n\t\t\t\twin.set(win.subarray(w_size, w_size + w_size), 0);\n\n\t\t\t\tmatch_start -= w_size;\n\t\t\t\tstrstart -= w_size; // we now have strstart >= MAX_DIST\n\t\t\t\tblock_start -= w_size;\n\n\t\t\t\t// Slide the hash table (could be avoided with 32 bit values\n\t\t\t\t// at the expense of memory usage). We slide even when level ==\n\t\t\t\t// 0\n\t\t\t\t// to keep the hash table consistent if we switch back to level\n\t\t\t\t// > 0\n\t\t\t\t// later. (Using level 0 permanently is not an optimal usage of\n\t\t\t\t// zlib, so we don't care about this pathological case.)\n\n\t\t\t\tn = hash_size;\n\t\t\t\tp = n;\n\t\t\t\tdo {\n\t\t\t\t\tm = (head[--p] & 0xffff);\n\t\t\t\t\thead[p] = (m >= w_size ? m - w_size : 0);\n\t\t\t\t} while (--n !== 0);\n\n\t\t\t\tn = w_size;\n\t\t\t\tp = n;\n\t\t\t\tdo {\n\t\t\t\t\tm = (prev[--p] & 0xffff);\n\t\t\t\t\tprev[p] = (m >= w_size ? m - w_size : 0);\n\t\t\t\t\t// If n is not on any hash chain, prev[n] is garbage but\n\t\t\t\t\t// its value will never be used.\n\t\t\t\t} while (--n !== 0);\n\t\t\t\tmore += w_size;\n\t\t\t}\n\n\t\t\tif (strm.avail_in === 0)\n\t\t\t\treturn;\n\n\t\t\t// If there was no sliding:\n\t\t\t// strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n\t\t\t// more == window_size - lookahead - strstart\n\t\t\t// => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n\t\t\t// => more >= window_size - 2*WSIZE + 2\n\t\t\t// In the BIG_MEM or MMAP case (not yet supported),\n\t\t\t// window_size == input_size + MIN_LOOKAHEAD &&\n\t\t\t// strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n\t\t\t// Otherwise, window_size == 2*WSIZE so more >= 2.\n\t\t\t// If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n\n\t\t\tn = strm.read_buf(win, strstart + lookahead, more);\n\t\t\tlookahead += n;\n\n\t\t\t// Initialize the hash value now that we have some input:\n\t\t\tif (lookahead >= MIN_MATCH) {\n\t\t\t\tins_h = win[strstart] & 0xff;\n\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[strstart + 1] & 0xff)) & hash_mask;\n\t\t\t}\n\t\t\t// If the whole input has less than MIN_MATCH bytes, ins_h is\n\t\t\t// garbage,\n\t\t\t// but this is not important since only literal bytes will be\n\t\t\t// emitted.\n\t\t} while (lookahead < MIN_LOOKAHEAD && strm.avail_in !== 0);\n\t}\n\n\t// Copy without compression as much as possible from the input stream,\n\t// return\n\t// the current block state.\n\t// This function does not insert new strings in the dictionary since\n\t// uncompressible data is probably not useful. This function is used\n\t// only for the level=0 compression option.\n\t// NOTE: this function should be optimized to avoid extra copying from\n\t// win to pending_buf.\n\tfunction deflate_stored(flush) {\n\t\t// Stored blocks are limited to 0xffff bytes, pending_buf is limited\n\t\t// to pending_buf_size, and each stored block has a 5 byte header:\n\n\t\tlet max_block_size = 0xffff;\n\t\tlet max_start;\n\n\t\tif (max_block_size > pending_buf_size - 5) {\n\t\t\tmax_block_size = pending_buf_size - 5;\n\t\t}\n\n\t\t// Copy as much as possible from input to output:\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\t// Fill the win as much as possible:\n\t\t\tif (lookahead <= 1) {\n\t\t\t\tfill_window();\n\t\t\t\tif (lookahead === 0 && flush == Z_NO_FLUSH)\n\t\t\t\t\treturn NeedMore;\n\t\t\t\tif (lookahead === 0)\n\t\t\t\t\tbreak; // flush the current block\n\t\t\t}\n\n\t\t\tstrstart += lookahead;\n\t\t\tlookahead = 0;\n\n\t\t\t// Emit a stored block if pending_buf will be full:\n\t\t\tmax_start = block_start + max_block_size;\n\t\t\tif (strstart === 0 || strstart >= max_start) {\n\t\t\t\t// strstart === 0 is possible when wraparound on 16-bit machine\n\t\t\t\tlookahead = (strstart - max_start);\n\t\t\t\tstrstart = max_start;\n\n\t\t\t\tflush_block_only(false);\n\t\t\t\tif (strm.avail_out === 0)\n\t\t\t\t\treturn NeedMore;\n\n\t\t\t}\n\n\t\t\t// Flush if we may have to slide, otherwise block_start may become\n\t\t\t// negative and the data will be gone:\n\t\t\tif (strstart - block_start >= w_size - MIN_LOOKAHEAD) {\n\t\t\t\tflush_block_only(false);\n\t\t\t\tif (strm.avail_out === 0)\n\t\t\t\t\treturn NeedMore;\n\t\t\t}\n\t\t}\n\n\t\tflush_block_only(flush == Z_FINISH);\n\t\tif (strm.avail_out === 0)\n\t\t\treturn (flush == Z_FINISH) ? FinishStarted : NeedMore;\n\n\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\n\t}\n\n\tfunction longest_match(cur_match) {\n\t\tlet chain_length = max_chain_length; // max hash chain length\n\t\tlet scan = strstart; // current string\n\t\tlet match; // matched string\n\t\tlet len; // length of current match\n\t\tlet best_len = prev_length; // best match length so far\n\t\tconst limit = strstart > (w_size - MIN_LOOKAHEAD) ? strstart - (w_size - MIN_LOOKAHEAD) : 0;\n\t\tlet _nice_match = nice_match;\n\n\t\t// Stop when cur_match becomes <= limit. To simplify the code,\n\t\t// we prevent matches with the string of win index 0.\n\n\t\tconst wmask = w_mask;\n\n\t\tconst strend = strstart + MAX_MATCH;\n\t\tlet scan_end1 = win[scan + best_len - 1];\n\t\tlet scan_end = win[scan + best_len];\n\n\t\t// The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of\n\t\t// 16.\n\t\t// It is easy to get rid of this optimization if necessary.\n\n\t\t// Do not waste too much time if we already have a good match:\n\t\tif (prev_length >= good_match) {\n\t\t\tchain_length >>= 2;\n\t\t}\n\n\t\t// Do not look for matches beyond the end of the input. This is\n\t\t// necessary\n\t\t// to make deflate deterministic.\n\t\tif (_nice_match > lookahead)\n\t\t\t_nice_match = lookahead;\n\n\t\tdo {\n\t\t\tmatch = cur_match;\n\n\t\t\t// Skip to next match if the match length cannot increase\n\t\t\t// or if the match length is less than 2:\n\t\t\tif (win[match + best_len] != scan_end || win[match + best_len - 1] != scan_end1 || win[match] != win[scan]\n\t\t\t\t|| win[++match] != win[scan + 1])\n\t\t\t\tcontinue;\n\n\t\t\t// The check at best_len-1 can be removed because it will be made\n\t\t\t// again later. (This heuristic is not always a win.)\n\t\t\t// It is not necessary to compare scan[2] and match[2] since they\n\t\t\t// are always equal when the other bytes match, given that\n\t\t\t// the hash keys are equal and that HASH_BITS >= 8.\n\t\t\tscan += 2;\n\t\t\tmatch++;\n\n\t\t\t// We check for insufficient lookahead only every 8th comparison;\n\t\t\t// the 256th check will be made at strstart+258.\n\t\t\t// eslint-disable-next-line no-empty\n\t\t\tdo {\n\t\t\t} while (win[++scan] == win[++match] && win[++scan] == win[++match] && win[++scan] == win[++match]\n\t\t\t&& win[++scan] == win[++match] && win[++scan] == win[++match] && win[++scan] == win[++match]\n\t\t\t&& win[++scan] == win[++match] && win[++scan] == win[++match] && scan < strend);\n\n\t\t\tlen = MAX_MATCH - (strend - scan);\n\t\t\tscan = strend - MAX_MATCH;\n\n\t\t\tif (len > best_len) {\n\t\t\t\tmatch_start = cur_match;\n\t\t\t\tbest_len = len;\n\t\t\t\tif (len >= _nice_match)\n\t\t\t\t\tbreak;\n\t\t\t\tscan_end1 = win[scan + best_len - 1];\n\t\t\t\tscan_end = win[scan + best_len];\n\t\t\t}\n\n\t\t} while ((cur_match = (prev[cur_match & wmask] & 0xffff)) > limit && --chain_length !== 0);\n\n\t\tif (best_len <= lookahead)\n\t\t\treturn best_len;\n\t\treturn lookahead;\n\t}\n\n\t// Compress as much as possible from the input stream, return the current\n\t// block state.\n\t// This function does not perform lazy evaluation of matches and inserts\n\t// new strings in the dictionary only for unmatched strings or for short\n\t// matches. It is used only for the fast compression options.\n\tfunction deflate_fast(flush) {\n\t\t// short hash_head = 0; // head of the hash chain\n\t\tlet hash_head = 0; // head of the hash chain\n\t\tlet bflush; // set if current block must be flushed\n\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\t// Make sure that we always have enough lookahead, except\n\t\t\t// at the end of the input file. We need MAX_MATCH bytes\n\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\n\t\t\t// string following the next match.\n\t\t\tif (lookahead < MIN_LOOKAHEAD) {\n\t\t\t\tfill_window();\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\n\t\t\t\t\treturn NeedMore;\n\t\t\t\t}\n\t\t\t\tif (lookahead === 0)\n\t\t\t\t\tbreak; // flush the current block\n\t\t\t}\n\n\t\t\t// Insert the string win[strstart .. strstart+2] in the\n\t\t\t// dictionary, and set hash_head to the head of the hash chain:\n\t\t\tif (lookahead >= MIN_MATCH) {\n\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\n\n\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\n\t\t\t\thash_head = (head[ins_h] & 0xffff);\n\t\t\t\tprev[strstart & w_mask] = head[ins_h];\n\t\t\t\thead[ins_h] = strstart;\n\t\t\t}\n\n\t\t\t// Find the longest match, discarding those <= prev_length.\n\t\t\t// At this point we have always match_length < MIN_MATCH\n\n\t\t\tif (hash_head !== 0 && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\n\t\t\t\t// To simplify the code, we prevent matches with the string\n\t\t\t\t// of win index 0 (in particular we have to avoid a match\n\t\t\t\t// of the string with itself at the start of the input file).\n\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\n\t\t\t\t\tmatch_length = longest_match(hash_head);\n\t\t\t\t}\n\t\t\t\t// longest_match() sets match_start\n\t\t\t}\n\t\t\tif (match_length >= MIN_MATCH) {\n\t\t\t\t// check_match(strstart, match_start, match_length);\n\n\t\t\t\tbflush = _tr_tally(strstart - match_start, match_length - MIN_MATCH);\n\n\t\t\t\tlookahead -= match_length;\n\n\t\t\t\t// Insert new strings in the hash table only if the match length\n\t\t\t\t// is not too large. This saves time but degrades compression.\n\t\t\t\tif (match_length <= max_lazy_match && lookahead >= MIN_MATCH) {\n\t\t\t\t\tmatch_length--; // string at strstart already in hash table\n\t\t\t\t\tdo {\n\t\t\t\t\t\tstrstart++;\n\n\t\t\t\t\t\tins_h = ((ins_h << hash_shift) ^ (win[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\n\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\n\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\n\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\n\t\t\t\t\t\thead[ins_h] = strstart;\n\n\t\t\t\t\t\t// strstart never exceeds WSIZE-MAX_MATCH, so there are\n\t\t\t\t\t\t// always MIN_MATCH bytes ahead.\n\t\t\t\t\t} while (--match_length !== 0);\n\t\t\t\t\tstrstart++;\n\t\t\t\t} else {\n\t\t\t\t\tstrstart += match_length;\n\t\t\t\t\tmatch_length = 0;\n\t\t\t\t\tins_h = win[strstart] & 0xff;\n\n\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[strstart + 1] & 0xff)) & hash_mask;\n\t\t\t\t\t// If lookahead < MIN_MATCH, ins_h is garbage, but it does\n\t\t\t\t\t// not\n\t\t\t\t\t// matter since it will be recomputed at next deflate call.\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// No match, output a literal byte\n\n\t\t\t\tbflush = _tr_tally(0, win[strstart] & 0xff);\n\t\t\t\tlookahead--;\n\t\t\t\tstrstart++;\n\t\t\t}\n\t\t\tif (bflush) {\n\n\t\t\t\tflush_block_only(false);\n\t\t\t\tif (strm.avail_out === 0)\n\t\t\t\t\treturn NeedMore;\n\t\t\t}\n\t\t}\n\n\t\tflush_block_only(flush == Z_FINISH);\n\t\tif (strm.avail_out === 0) {\n\t\t\tif (flush == Z_FINISH)\n\t\t\t\treturn FinishStarted;\n\t\t\telse\n\t\t\t\treturn NeedMore;\n\t\t}\n\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\n\t}\n\n\t// Same as above, but achieves better compression. We use a lazy\n\t// evaluation for matches: a match is finally adopted only if there is\n\t// no better match at the next win position.\n\tfunction deflate_slow(flush) {\n\t\t// short hash_head = 0; // head of hash chain\n\t\tlet hash_head = 0; // head of hash chain\n\t\tlet bflush; // set if current block must be flushed\n\t\tlet max_insert;\n\n\t\t// Process the input block.\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\t// Make sure that we always have enough lookahead, except\n\t\t\t// at the end of the input file. We need MAX_MATCH bytes\n\t\t\t// for the next match, plus MIN_MATCH bytes to insert the\n\t\t\t// string following the next match.\n\n\t\t\tif (lookahead < MIN_LOOKAHEAD) {\n\t\t\t\tfill_window();\n\t\t\t\tif (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {\n\t\t\t\t\treturn NeedMore;\n\t\t\t\t}\n\t\t\t\tif (lookahead === 0)\n\t\t\t\t\tbreak; // flush the current block\n\t\t\t}\n\n\t\t\t// Insert the string win[strstart .. strstart+2] in the\n\t\t\t// dictionary, and set hash_head to the head of the hash chain:\n\n\t\t\tif (lookahead >= MIN_MATCH) {\n\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\n\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\n\t\t\t\thash_head = (head[ins_h] & 0xffff);\n\t\t\t\tprev[strstart & w_mask] = head[ins_h];\n\t\t\t\thead[ins_h] = strstart;\n\t\t\t}\n\n\t\t\t// Find the longest match, discarding those <= prev_length.\n\t\t\tprev_length = match_length;\n\t\t\tprev_match = match_start;\n\t\t\tmatch_length = MIN_MATCH - 1;\n\n\t\t\tif (hash_head !== 0 && prev_length < max_lazy_match && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {\n\t\t\t\t// To simplify the code, we prevent matches with the string\n\t\t\t\t// of win index 0 (in particular we have to avoid a match\n\t\t\t\t// of the string with itself at the start of the input file).\n\n\t\t\t\tif (strategy != Z_HUFFMAN_ONLY) {\n\t\t\t\t\tmatch_length = longest_match(hash_head);\n\t\t\t\t}\n\t\t\t\t// longest_match() sets match_start\n\n\t\t\t\tif (match_length <= 5 && (strategy == Z_FILTERED || (match_length == MIN_MATCH && strstart - match_start > 4096))) {\n\n\t\t\t\t\t// If prev_match is also MIN_MATCH, match_start is garbage\n\t\t\t\t\t// but we will ignore the current match anyway.\n\t\t\t\t\tmatch_length = MIN_MATCH - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If there was a match at the previous step and the current\n\t\t\t// match is not better, output the previous match:\n\t\t\tif (prev_length >= MIN_MATCH && match_length <= prev_length) {\n\t\t\t\tmax_insert = strstart + lookahead - MIN_MATCH;\n\t\t\t\t// Do not insert strings in hash table beyond this.\n\n\t\t\t\t// check_match(strstart-1, prev_match, prev_length);\n\n\t\t\t\tbflush = _tr_tally(strstart - 1 - prev_match, prev_length - MIN_MATCH);\n\n\t\t\t\t// Insert in hash table all strings up to the end of the match.\n\t\t\t\t// strstart-1 and strstart are already inserted. If there is not\n\t\t\t\t// enough lookahead, the last two strings are not inserted in\n\t\t\t\t// the hash table.\n\t\t\t\tlookahead -= prev_length - 1;\n\t\t\t\tprev_length -= 2;\n\t\t\t\tdo {\n\t\t\t\t\tif (++strstart <= max_insert) {\n\t\t\t\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\n\t\t\t\t\t\t// prev[strstart&w_mask]=hash_head=head[ins_h];\n\t\t\t\t\t\thash_head = (head[ins_h] & 0xffff);\n\t\t\t\t\t\tprev[strstart & w_mask] = head[ins_h];\n\t\t\t\t\t\thead[ins_h] = strstart;\n\t\t\t\t\t}\n\t\t\t\t} while (--prev_length !== 0);\n\t\t\t\tmatch_available = 0;\n\t\t\t\tmatch_length = MIN_MATCH - 1;\n\t\t\t\tstrstart++;\n\n\t\t\t\tif (bflush) {\n\t\t\t\t\tflush_block_only(false);\n\t\t\t\t\tif (strm.avail_out === 0)\n\t\t\t\t\t\treturn NeedMore;\n\t\t\t\t}\n\t\t\t} else if (match_available !== 0) {\n\n\t\t\t\t// If there was no match at the previous position, output a\n\t\t\t\t// single literal. If there was a match but the current match\n\t\t\t\t// is longer, truncate the previous match to a single literal.\n\n\t\t\t\tbflush = _tr_tally(0, win[strstart - 1] & 0xff);\n\n\t\t\t\tif (bflush) {\n\t\t\t\t\tflush_block_only(false);\n\t\t\t\t}\n\t\t\t\tstrstart++;\n\t\t\t\tlookahead--;\n\t\t\t\tif (strm.avail_out === 0)\n\t\t\t\t\treturn NeedMore;\n\t\t\t} else {\n\t\t\t\t// There is no previous match to compare with, wait for\n\t\t\t\t// the next step to decide.\n\n\t\t\t\tmatch_available = 1;\n\t\t\t\tstrstart++;\n\t\t\t\tlookahead--;\n\t\t\t}\n\t\t}\n\n\t\tif (match_available !== 0) {\n\t\t\tbflush = _tr_tally(0, win[strstart - 1] & 0xff);\n\t\t\tmatch_available = 0;\n\t\t}\n\t\tflush_block_only(flush == Z_FINISH);\n\n\t\tif (strm.avail_out === 0) {\n\t\t\tif (flush == Z_FINISH)\n\t\t\t\treturn FinishStarted;\n\t\t\telse\n\t\t\t\treturn NeedMore;\n\t\t}\n\n\t\treturn flush == Z_FINISH ? FinishDone : BlockDone;\n\t}\n\n\tfunction deflateReset(strm) {\n\t\tstrm.total_in = strm.total_out = 0;\n\t\tstrm.msg = null; //\n\n\t\tthat.pending = 0;\n\t\tthat.pending_out = 0;\n\n\t\tstatus = BUSY_STATE;\n\n\t\tlast_flush = Z_NO_FLUSH;\n\n\t\ttr_init();\n\t\tlm_init();\n\t\treturn Z_OK;\n\t}\n\n\tthat.deflateInit = function (strm, _level, bits, _method, memLevel, _strategy) {\n\t\tif (!_method)\n\t\t\t_method = Z_DEFLATED;\n\t\tif (!memLevel)\n\t\t\tmemLevel = DEF_MEM_LEVEL;\n\t\tif (!_strategy)\n\t\t\t_strategy = Z_DEFAULT_STRATEGY;\n\n\t\t// byte[] my_version=ZLIB_VERSION;\n\n\t\t//\n\t\t// if (!version || version[0] != my_version[0]\n\t\t// || stream_size != sizeof(z_stream)) {\n\t\t// return Z_VERSION_ERROR;\n\t\t// }\n\n\t\tstrm.msg = null;\n\n\t\tif (_level == Z_DEFAULT_COMPRESSION)\n\t\t\t_level = 6;\n\n\t\tif (memLevel < 1 || memLevel > MAX_MEM_LEVEL || _method != Z_DEFLATED || bits < 9 || bits > 15 || _level < 0 || _level > 9 || _strategy < 0\n\t\t\t|| _strategy > Z_HUFFMAN_ONLY) {\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\n\t\tstrm.dstate = that;\n\n\t\tw_bits = bits;\n\t\tw_size = 1 << w_bits;\n\t\tw_mask = w_size - 1;\n\n\t\thash_bits = memLevel + 7;\n\t\thash_size = 1 << hash_bits;\n\t\thash_mask = hash_size - 1;\n\t\thash_shift = Math.floor((hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n\t\twin = new Uint8Array(w_size * 2);\n\t\tprev = [];\n\t\thead = [];\n\n\t\tlit_bufsize = 1 << (memLevel + 6); // 16K elements by default\n\n\t\tthat.pending_buf = new Uint8Array(lit_bufsize * 4);\n\t\tpending_buf_size = lit_bufsize * 4;\n\n\t\tthat.dist_buf = new Uint16Array(lit_bufsize);\n\t\tthat.lc_buf = new Uint8Array(lit_bufsize);\n\n\t\tlevel = _level;\n\n\t\tstrategy = _strategy;\n\n\t\treturn deflateReset(strm);\n\t};\n\n\tthat.deflateEnd = function () {\n\t\tif (status != INIT_STATE && status != BUSY_STATE && status != FINISH_STATE) {\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\t\t// Deallocate in reverse order of allocations:\n\t\tthat.lc_buf = null;\n\t\tthat.dist_buf = null;\n\t\tthat.pending_buf = null;\n\t\thead = null;\n\t\tprev = null;\n\t\twin = null;\n\t\t// free\n\t\tthat.dstate = null;\n\t\treturn status == BUSY_STATE ? Z_DATA_ERROR : Z_OK;\n\t};\n\n\tthat.deflateParams = function (strm, _level, _strategy) {\n\t\tlet err = Z_OK;\n\n\t\tif (_level == Z_DEFAULT_COMPRESSION) {\n\t\t\t_level = 6;\n\t\t}\n\t\tif (_level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY) {\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\n\t\tif (config_table[level].func != config_table[_level].func && strm.total_in !== 0) {\n\t\t\t// Flush the last buffer:\n\t\t\terr = strm.deflate(Z_PARTIAL_FLUSH);\n\t\t}\n\n\t\tif (level != _level) {\n\t\t\tlevel = _level;\n\t\t\tmax_lazy_match = config_table[level].max_lazy;\n\t\t\tgood_match = config_table[level].good_length;\n\t\t\tnice_match = config_table[level].nice_length;\n\t\t\tmax_chain_length = config_table[level].max_chain;\n\t\t}\n\t\tstrategy = _strategy;\n\t\treturn err;\n\t};\n\n\tthat.deflateSetDictionary = function (strm, dictionary, dictLength) {\n\t\tlet length = dictLength;\n\t\tlet n, index = 0;\n\n\t\tif (!dictionary || status != INIT_STATE)\n\t\t\treturn Z_STREAM_ERROR;\n\n\t\tif (length < MIN_MATCH)\n\t\t\treturn Z_OK;\n\t\tif (length > w_size - MIN_LOOKAHEAD) {\n\t\t\tlength = w_size - MIN_LOOKAHEAD;\n\t\t\tindex = dictLength - length; // use the tail of the dictionary\n\t\t}\n\t\twin.set(dictionary.subarray(index, index + length), 0);\n\n\t\tstrstart = length;\n\t\tblock_start = length;\n\n\t\t// Insert all strings in the hash table (except for the last two bytes).\n\t\t// s->lookahead stays null, so s->ins_h will be recomputed at the next\n\t\t// call of fill_window.\n\n\t\tins_h = win[0] & 0xff;\n\t\tins_h = (((ins_h) << hash_shift) ^ (win[1] & 0xff)) & hash_mask;\n\n\t\tfor (n = 0; n <= length - MIN_MATCH; n++) {\n\t\t\tins_h = (((ins_h) << hash_shift) ^ (win[(n) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;\n\t\t\tprev[n & w_mask] = head[ins_h];\n\t\t\thead[ins_h] = n;\n\t\t}\n\t\treturn Z_OK;\n\t};\n\n\tthat.deflate = function (_strm, flush) {\n\t\tlet i, header, level_flags, old_flush, bstate;\n\n\t\tif (flush > Z_FINISH || flush < 0) {\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\n\t\tif (!_strm.next_out || (!_strm.next_in && _strm.avail_in !== 0) || (status == FINISH_STATE && flush != Z_FINISH)) {\n\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_STREAM_ERROR)];\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\t\tif (_strm.avail_out === 0) {\n\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\n\t\t\treturn Z_BUF_ERROR;\n\t\t}\n\n\t\tstrm = _strm; // just in case\n\t\told_flush = last_flush;\n\t\tlast_flush = flush;\n\n\t\t// Write the zlib header\n\t\tif (status == INIT_STATE) {\n\t\t\theader = (Z_DEFLATED + ((w_bits - 8) << 4)) << 8;\n\t\t\tlevel_flags = ((level - 1) & 0xff) >> 1;\n\n\t\t\tif (level_flags > 3)\n\t\t\t\tlevel_flags = 3;\n\t\t\theader |= (level_flags << 6);\n\t\t\tif (strstart !== 0)\n\t\t\t\theader |= PRESET_DICT;\n\t\t\theader += 31 - (header % 31);\n\n\t\t\tstatus = BUSY_STATE;\n\t\t\tputShortMSB(header);\n\t\t}\n\n\t\t// Flush as much pending output as possible\n\t\tif (that.pending !== 0) {\n\t\t\tstrm.flush_pending();\n\t\t\tif (strm.avail_out === 0) {\n\t\t\t\t// console.log(\" avail_out==0\");\n\t\t\t\t// Since avail_out is 0, deflate will be called again with\n\t\t\t\t// more output space, but possibly with both pending and\n\t\t\t\t// avail_in equal to zero. There won't be anything to do,\n\t\t\t\t// but this is not an error situation so make sure we\n\t\t\t\t// return OK instead of BUF_ERROR at next call of deflate:\n\t\t\t\tlast_flush = -1;\n\t\t\t\treturn Z_OK;\n\t\t\t}\n\n\t\t\t// Make sure there is something to do and avoid duplicate\n\t\t\t// consecutive\n\t\t\t// flushes. For repeated and useless calls with Z_FINISH, we keep\n\t\t\t// returning Z_STREAM_END instead of Z_BUFF_ERROR.\n\t\t} else if (strm.avail_in === 0 && flush <= old_flush && flush != Z_FINISH) {\n\t\t\tstrm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\n\t\t\treturn Z_BUF_ERROR;\n\t\t}\n\n\t\t// User must not provide more input after the first FINISH:\n\t\tif (status == FINISH_STATE && strm.avail_in !== 0) {\n\t\t\t_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];\n\t\t\treturn Z_BUF_ERROR;\n\t\t}\n\n\t\t// Start a new block or continue the current one.\n\t\tif (strm.avail_in !== 0 || lookahead !== 0 || (flush != Z_NO_FLUSH && status != FINISH_STATE)) {\n\t\t\tbstate = -1;\n\t\t\tswitch (config_table[level].func) {\n\t\t\t\tcase STORED:\n\t\t\t\t\tbstate = deflate_stored(flush);\n\t\t\t\t\tbreak;\n\t\t\t\tcase FAST:\n\t\t\t\t\tbstate = deflate_fast(flush);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SLOW:\n\t\t\t\t\tbstate = deflate_slow(flush);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\n\t\t\tif (bstate == FinishStarted || bstate == FinishDone) {\n\t\t\t\tstatus = FINISH_STATE;\n\t\t\t}\n\t\t\tif (bstate == NeedMore || bstate == FinishStarted) {\n\t\t\t\tif (strm.avail_out === 0) {\n\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR next call, see above\n\t\t\t\t}\n\t\t\t\treturn Z_OK;\n\t\t\t\t// If flush != Z_NO_FLUSH && avail_out === 0, the next call\n\t\t\t\t// of deflate should use the same flush parameter to make sure\n\t\t\t\t// that the flush is complete. So we don't have to output an\n\t\t\t\t// empty block here, this will be done at next call. This also\n\t\t\t\t// ensures that for a very small output buffer, we emit at most\n\t\t\t\t// one empty block.\n\t\t\t}\n\n\t\t\tif (bstate == BlockDone) {\n\t\t\t\tif (flush == Z_PARTIAL_FLUSH) {\n\t\t\t\t\t_tr_align();\n\t\t\t\t} else { // FULL_FLUSH or SYNC_FLUSH\n\t\t\t\t\t_tr_stored_block(0, 0, false);\n\t\t\t\t\t// For a full flush, this empty block will be recognized\n\t\t\t\t\t// as a special marker by inflate_sync().\n\t\t\t\t\tif (flush == Z_FULL_FLUSH) {\n\t\t\t\t\t\t// state.head[s.hash_size-1]=0;\n\t\t\t\t\t\tfor (i = 0; i < hash_size/*-1*/; i++)\n\t\t\t\t\t\t\t// forget history\n\t\t\t\t\t\t\thead[i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstrm.flush_pending();\n\t\t\t\tif (strm.avail_out === 0) {\n\t\t\t\t\tlast_flush = -1; // avoid BUF_ERROR at next call, see above\n\t\t\t\t\treturn Z_OK;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (flush != Z_FINISH)\n\t\t\treturn Z_OK;\n\t\treturn Z_STREAM_END;\n\t};\n}\n\n// ZStream\n\nfunction ZStream() {\n\tconst that = this;\n\tthat.next_in_index = 0;\n\tthat.next_out_index = 0;\n\t// that.next_in; // next input byte\n\tthat.avail_in = 0; // number of bytes available at next_in\n\tthat.total_in = 0; // total nb of input bytes read so far\n\t// that.next_out; // next output byte should be put there\n\tthat.avail_out = 0; // remaining free space at next_out\n\tthat.total_out = 0; // total nb of bytes output so far\n\t// that.msg;\n\t// that.dstate;\n}\n\nZStream.prototype = {\n\tdeflateInit: function (level, bits) {\n\t\tconst that = this;\n\t\tthat.dstate = new Deflate();\n\t\tif (!bits)\n\t\t\tbits = MAX_BITS;\n\t\treturn that.dstate.deflateInit(that, level, bits);\n\t},\n\n\tdeflate: function (flush) {\n\t\tconst that = this;\n\t\tif (!that.dstate) {\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\t\treturn that.dstate.deflate(that, flush);\n\t},\n\n\tdeflateEnd: function () {\n\t\tconst that = this;\n\t\tif (!that.dstate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\tconst ret = that.dstate.deflateEnd();\n\t\tthat.dstate = null;\n\t\treturn ret;\n\t},\n\n\tdeflateParams: function (level, strategy) {\n\t\tconst that = this;\n\t\tif (!that.dstate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn that.dstate.deflateParams(that, level, strategy);\n\t},\n\n\tdeflateSetDictionary: function (dictionary, dictLength) {\n\t\tconst that = this;\n\t\tif (!that.dstate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn that.dstate.deflateSetDictionary(that, dictionary, dictLength);\n\t},\n\n\t// Read a new buffer from the current input stream, update the\n\t// total number of bytes read. All deflate() input goes through\n\t// this function so some applications may wish to modify it to avoid\n\t// allocating a large strm->next_in buffer and copying from it.\n\t// (See also flush_pending()).\n\tread_buf: function (buf, start, size) {\n\t\tconst that = this;\n\t\tlet len = that.avail_in;\n\t\tif (len > size)\n\t\t\tlen = size;\n\t\tif (len === 0)\n\t\t\treturn 0;\n\t\tthat.avail_in -= len;\n\t\tbuf.set(that.next_in.subarray(that.next_in_index, that.next_in_index + len), start);\n\t\tthat.next_in_index += len;\n\t\tthat.total_in += len;\n\t\treturn len;\n\t},\n\n\t// Flush as much pending output as possible. All deflate() output goes\n\t// through this function so some applications may wish to modify it\n\t// to avoid allocating a large strm->next_out buffer and copying into it.\n\t// (See also read_buf()).\n\tflush_pending: function () {\n\t\tconst that = this;\n\t\tlet len = that.dstate.pending;\n\n\t\tif (len > that.avail_out)\n\t\t\tlen = that.avail_out;\n\t\tif (len === 0)\n\t\t\treturn;\n\n\t\t// if (that.dstate.pending_buf.length <= that.dstate.pending_out || that.next_out.length <= that.next_out_index\n\t\t// || that.dstate.pending_buf.length < (that.dstate.pending_out + len) || that.next_out.length < (that.next_out_index +\n\t\t// len)) {\n\t\t// console.log(that.dstate.pending_buf.length + \", \" + that.dstate.pending_out + \", \" + that.next_out.length + \", \" +\n\t\t// that.next_out_index + \", \" + len);\n\t\t// console.log(\"avail_out=\" + that.avail_out);\n\t\t// }\n\n\t\tthat.next_out.set(that.dstate.pending_buf.subarray(that.dstate.pending_out, that.dstate.pending_out + len), that.next_out_index);\n\n\t\tthat.next_out_index += len;\n\t\tthat.dstate.pending_out += len;\n\t\tthat.total_out += len;\n\t\tthat.avail_out -= len;\n\t\tthat.dstate.pending -= len;\n\t\tif (that.dstate.pending === 0) {\n\t\t\tthat.dstate.pending_out = 0;\n\t\t}\n\t}\n};\n\n// Deflate\n\nfunction ZipDeflate(options) {\n\tconst that = this;\n\tconst z = new ZStream();\n\tconst bufsize = getMaximumCompressedSize(options && options.chunkSize ? options.chunkSize : 64 * 1024);\n\tconst flush = Z_NO_FLUSH;\n\tconst buf = new Uint8Array(bufsize);\n\tlet level = options ? options.level : Z_DEFAULT_COMPRESSION;\n\tif (typeof level == \"undefined\")\n\t\tlevel = Z_DEFAULT_COMPRESSION;\n\tz.deflateInit(level);\n\tz.next_out = buf;\n\n\tthat.append = function (data, onprogress) {\n\t\tlet err, array, lastIndex = 0, bufferIndex = 0, bufferSize = 0;\n\t\tconst buffers = [];\n\t\tif (!data.length)\n\t\t\treturn;\n\t\tz.next_in_index = 0;\n\t\tz.next_in = data;\n\t\tz.avail_in = data.length;\n\t\tdo {\n\t\t\tz.next_out_index = 0;\n\t\t\tz.avail_out = bufsize;\n\t\t\terr = z.deflate(flush);\n\t\t\tif (err != Z_OK)\n\t\t\t\tthrow new Error(\"deflating: \" + z.msg);\n\t\t\tif (z.next_out_index)\n\t\t\t\tif (z.next_out_index == bufsize)\n\t\t\t\t\tbuffers.push(new Uint8Array(buf));\n\t\t\t\telse\n\t\t\t\t\tbuffers.push(buf.slice(0, z.next_out_index));\n\t\t\tbufferSize += z.next_out_index;\n\t\t\tif (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {\n\t\t\t\tonprogress(z.next_in_index);\n\t\t\t\tlastIndex = z.next_in_index;\n\t\t\t}\n\t\t} while (z.avail_in > 0 || z.avail_out === 0);\n\t\tif (buffers.length > 1) {\n\t\t\tarray = new Uint8Array(bufferSize);\n\t\t\tbuffers.forEach(function (chunk) {\n\t\t\t\tarray.set(chunk, bufferIndex);\n\t\t\t\tbufferIndex += chunk.length;\n\t\t\t});\n\t\t} else {\n\t\t\tarray = buffers[0] || new Uint8Array(0);\n\t\t}\n\t\treturn array;\n\t};\n\tthat.flush = function () {\n\t\tlet err, array, bufferIndex = 0, bufferSize = 0;\n\t\tconst buffers = [];\n\t\tdo {\n\t\t\tz.next_out_index = 0;\n\t\t\tz.avail_out = bufsize;\n\t\t\terr = z.deflate(Z_FINISH);\n\t\t\tif (err != Z_STREAM_END && err != Z_OK)\n\t\t\t\tthrow new Error(\"deflating: \" + z.msg);\n\t\t\tif (bufsize - z.avail_out > 0)\n\t\t\t\tbuffers.push(buf.slice(0, z.next_out_index));\n\t\t\tbufferSize += z.next_out_index;\n\t\t} while (z.avail_in > 0 || z.avail_out === 0);\n\t\tz.deflateEnd();\n\t\tarray = new Uint8Array(bufferSize);\n\t\tbuffers.forEach(function (chunk) {\n\t\t\tarray.set(chunk, bufferIndex);\n\t\t\tbufferIndex += chunk.length;\n\t\t});\n\t\treturn array;\n\t};\n}\n\nfunction getMaximumCompressedSize(uncompressedSize) {\n\treturn uncompressedSize + (5 * (Math.floor(uncompressedSize / 16383) + 1));\n}\n\nexport default ZipDeflate;","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*\n * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.\n * JZlib is based on zlib-1.1.3, so all credit should go authors\n * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)\n * and contributors of zlib.\n */\n\n// Global\nconst MAX_BITS = 15;\n\nconst Z_OK = 0;\nconst Z_STREAM_END = 1;\nconst Z_NEED_DICT = 2;\nconst Z_STREAM_ERROR = -2;\nconst Z_DATA_ERROR = -3;\nconst Z_MEM_ERROR = -4;\nconst Z_BUF_ERROR = -5;\n\nconst inflate_mask = [0x00000000, 0x00000001, 0x00000003, 0x00000007, 0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f, 0x000000ff, 0x000001ff, 0x000003ff,\n\t0x000007ff, 0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff, 0x0000ffff];\n\nconst MANY = 1440;\n\n// JZlib version : \"1.0.2\"\nconst Z_NO_FLUSH = 0;\nconst Z_FINISH = 4;\n\n// InfTree\nconst fixed_bl = 9;\nconst fixed_bd = 5;\n\nconst fixed_tl = [96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 160, 0, 8, 0,\n\t0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208, 81, 7, 17, 0, 8, 104, 0, 8, 40,\n\t0, 9, 176, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13,\n\t0, 8, 100, 0, 8, 36, 0, 9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60,\n\t0, 9, 216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 248, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7,\n\t35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228, 80, 7, 7, 0, 8, 90, 0, 8,\n\t26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80,\n\t7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134, 0,\n\t8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 188, 0,\n\t8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 194, 80, 7, 10, 0, 8, 97,\n\t0, 8, 33, 0, 9, 162, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210,\n\t81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117,\n\t0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154,\n\t84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83,\n\t0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 230,\n\t80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 182, 0, 8, 11, 0, 8, 139,\n\t0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174,\n\t0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0, 8, 111,\n\t0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9,\n\t193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8,\n\t120, 0, 8, 56, 0, 9, 209, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8,\n\t227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8, 0, 8,\n\t92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9,\n\t249, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8,\n\t130, 0, 8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9,\n\t181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 205, 81, 7, 15, 0, 8,\n\t102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9,\n\t221, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0,\n\t8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 163, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9,\n\t147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8,\n\t85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9,\n\t235, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 187, 0, 8, 13, 0, 8,\n\t141, 0, 8, 77, 0, 9, 251, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9,\n\t167, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8,\n\t107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9,\n\t207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8,\n\t127, 0, 8, 63, 0, 9, 223, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 255];\nconst fixed_td = [80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5, 1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33, 92, 5,\n\t8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129, 192, 5, 24577, 80, 5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537, 85, 5, 97, 93, 5,\n\t24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5, 12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577];\n\n// Tables for deflate from PKZIP's appnote.txt.\nconst cplens = [ // Copy lengths for literal codes 257..285\n\t3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0];\n\n// see note #13 above about 258\nconst cplext = [ // Extra bits for literal codes 257..285\n\t0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112 // 112==invalid\n];\n\nconst cpdist = [ // Copy offsets for distance codes 0..29\n\t1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];\n\nconst cpdext = [ // Extra bits for distance codes\n\t0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];\n\n// If BMAX needs to be larger than 16, then h and x[] should be uLong.\nconst BMAX = 15; // maximum bit length of any code\n\nfunction InfTree() {\n\tconst that = this;\n\n\tlet hn; // hufts used in space\n\tlet v; // work area for huft_build\n\tlet c; // bit length count table\n\tlet r; // table entry for structure assignment\n\tlet u; // table stack\n\tlet x; // bit offsets, then code stack\n\n\tfunction huft_build(b, // code lengths in bits (all assumed <=\n\t\t// BMAX)\n\t\tbindex, n, // number of codes (assumed <= 288)\n\t\ts, // number of simple-valued codes (0..s-1)\n\t\td, // list of base values for non-simple codes\n\t\te, // list of extra bits for non-simple codes\n\t\tt, // result: starting table\n\t\tm, // maximum lookup bits, returns actual\n\t\thp,// space for trees\n\t\thn,// hufts used in space\n\t\tv // working area: values in order of bit length\n\t) {\n\t\t// Given a list of code lengths and a maximum table size, make a set of\n\t\t// tables to decode that set of codes. Return Z_OK on success,\n\t\t// Z_BUF_ERROR\n\t\t// if the given code set is incomplete (the tables are still built in\n\t\t// this\n\t\t// case), Z_DATA_ERROR if the input is invalid (an over-subscribed set\n\t\t// of\n\t\t// lengths), or Z_MEM_ERROR if not enough memory.\n\n\t\tlet a; // counter for codes of length k\n\t\tlet f; // i repeats in table every f entries\n\t\tlet g; // maximum code length\n\t\tlet h; // table level\n\t\tlet i; // counter, current code\n\t\tlet j; // counter\n\t\tlet k; // number of bits in current code\n\t\tlet l; // bits per table (returned in m)\n\t\tlet mask; // (1 << w) - 1, to avoid cc -O bug on HP\n\t\tlet p; // pointer into c[], b[], or v[]\n\t\tlet q; // points to current table\n\t\tlet w; // bits before this table == (l * h)\n\t\tlet xp; // pointer into x\n\t\tlet y; // number of dummy codes added\n\t\tlet z; // number of entries in current table\n\n\t\t// Generate counts for each bit length\n\n\t\tp = 0;\n\t\ti = n;\n\t\tdo {\n\t\t\tc[b[bindex + p]]++;\n\t\t\tp++;\n\t\t\ti--; // assume all entries <= BMAX\n\t\t} while (i !== 0);\n\n\t\tif (c[0] == n) { // null input--all zero length codes\n\t\t\tt[0] = -1;\n\t\t\tm[0] = 0;\n\t\t\treturn Z_OK;\n\t\t}\n\n\t\t// Find minimum and maximum length, bound *m by those\n\t\tl = m[0];\n\t\tfor (j = 1; j <= BMAX; j++)\n\t\t\tif (c[j] !== 0)\n\t\t\t\tbreak;\n\t\tk = j; // minimum code length\n\t\tif (l < j) {\n\t\t\tl = j;\n\t\t}\n\t\tfor (i = BMAX; i !== 0; i--) {\n\t\t\tif (c[i] !== 0)\n\t\t\t\tbreak;\n\t\t}\n\t\tg = i; // maximum code length\n\t\tif (l > i) {\n\t\t\tl = i;\n\t\t}\n\t\tm[0] = l;\n\n\t\t// Adjust last length count to fill out codes, if needed\n\t\tfor (y = 1 << j; j < i; j++, y <<= 1) {\n\t\t\tif ((y -= c[j]) < 0) {\n\t\t\t\treturn Z_DATA_ERROR;\n\t\t\t}\n\t\t}\n\t\tif ((y -= c[i]) < 0) {\n\t\t\treturn Z_DATA_ERROR;\n\t\t}\n\t\tc[i] += y;\n\n\t\t// Generate starting offsets into the value table for each length\n\t\tx[1] = j = 0;\n\t\tp = 1;\n\t\txp = 2;\n\t\twhile (--i !== 0) { // note that i == g from above\n\t\t\tx[xp] = (j += c[p]);\n\t\t\txp++;\n\t\t\tp++;\n\t\t}\n\n\t\t// Make a table of values in order of bit lengths\n\t\ti = 0;\n\t\tp = 0;\n\t\tdo {\n\t\t\tif ((j = b[bindex + p]) !== 0) {\n\t\t\t\tv[x[j]++] = i;\n\t\t\t}\n\t\t\tp++;\n\t\t} while (++i < n);\n\t\tn = x[g]; // set n to length of v\n\n\t\t// Generate the Huffman codes and for each, make the table entries\n\t\tx[0] = i = 0; // first Huffman code is zero\n\t\tp = 0; // grab values in bit order\n\t\th = -1; // no tables yet--level -1\n\t\tw = -l; // bits decoded == (l * h)\n\t\tu[0] = 0; // just to keep compilers happy\n\t\tq = 0; // ditto\n\t\tz = 0; // ditto\n\n\t\t// go through the bit lengths (k already is bits in shortest code)\n\t\tfor (; k <= g; k++) {\n\t\t\ta = c[k];\n\t\t\twhile (a-- !== 0) {\n\t\t\t\t// here i is the Huffman code of length k bits for value *p\n\t\t\t\t// make tables up to required level\n\t\t\t\twhile (k > w + l) {\n\t\t\t\t\th++;\n\t\t\t\t\tw += l; // previous table always l bits\n\t\t\t\t\t// compute minimum size table less than or equal to l bits\n\t\t\t\t\tz = g - w;\n\t\t\t\t\tz = (z > l) ? l : z; // table size upper limit\n\t\t\t\t\tif ((f = 1 << (j = k - w)) > a + 1) { // try a k-w bit table\n\t\t\t\t\t\t// too few codes for\n\t\t\t\t\t\t// k-w bit table\n\t\t\t\t\t\tf -= a + 1; // deduct codes from patterns left\n\t\t\t\t\t\txp = k;\n\t\t\t\t\t\tif (j < z) {\n\t\t\t\t\t\t\twhile (++j < z) { // try smaller tables up to z bits\n\t\t\t\t\t\t\t\tif ((f <<= 1) <= c[++xp])\n\t\t\t\t\t\t\t\t\tbreak; // enough codes to use up j bits\n\t\t\t\t\t\t\t\tf -= c[xp]; // else deduct codes from patterns\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tz = 1 << j; // table entries for j-bit table\n\n\t\t\t\t\t// allocate new table\n\t\t\t\t\tif (hn[0] + z > MANY) { // (note: doesn't matter for fixed)\n\t\t\t\t\t\treturn Z_DATA_ERROR; // overflow of MANY\n\t\t\t\t\t}\n\t\t\t\t\tu[h] = q = /* hp+ */hn[0]; // DEBUG\n\t\t\t\t\thn[0] += z;\n\n\t\t\t\t\t// connect to last table, if there is one\n\t\t\t\t\tif (h !== 0) {\n\t\t\t\t\t\tx[h] = i; // save pattern for backing up\n\t\t\t\t\t\tr[0] = /* (byte) */j; // bits in this table\n\t\t\t\t\t\tr[1] = /* (byte) */l; // bits to dump before this table\n\t\t\t\t\t\tj = i >>> (w - l);\n\t\t\t\t\t\tr[2] = /* (int) */(q - u[h - 1] - j); // offset to this table\n\t\t\t\t\t\thp.set(r, (u[h - 1] + j) * 3);\n\t\t\t\t\t\t// to\n\t\t\t\t\t\t// last\n\t\t\t\t\t\t// table\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt[0] = q; // first table is returned result\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// set up table entry in r\n\t\t\t\tr[1] = /* (byte) */(k - w);\n\t\t\t\tif (p >= n) {\n\t\t\t\t\tr[0] = 128 + 64; // out of values--invalid code\n\t\t\t\t} else if (v[p] < s) {\n\t\t\t\t\tr[0] = /* (byte) */(v[p] < 256 ? 0 : 32 + 64); // 256 is\n\t\t\t\t\t// end-of-block\n\t\t\t\t\tr[2] = v[p++]; // simple code is just the value\n\t\t\t\t} else {\n\t\t\t\t\tr[0] = /* (byte) */(e[v[p] - s] + 16 + 64); // non-simple--look\n\t\t\t\t\t// up in lists\n\t\t\t\t\tr[2] = d[v[p++] - s];\n\t\t\t\t}\n\n\t\t\t\t// fill code-like entries with r\n\t\t\t\tf = 1 << (k - w);\n\t\t\t\tfor (j = i >>> w; j < z; j += f) {\n\t\t\t\t\thp.set(r, (q + j) * 3);\n\t\t\t\t}\n\n\t\t\t\t// backwards increment the k-bit code i\n\t\t\t\tfor (j = 1 << (k - 1); (i & j) !== 0; j >>>= 1) {\n\t\t\t\t\ti ^= j;\n\t\t\t\t}\n\t\t\t\ti ^= j;\n\n\t\t\t\t// backup over finished tables\n\t\t\t\tmask = (1 << w) - 1; // needed on HP, cc -O bug\n\t\t\t\twhile ((i & mask) != x[h]) {\n\t\t\t\t\th--; // don't need to update q\n\t\t\t\t\tw -= l;\n\t\t\t\t\tmask = (1 << w) - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Return Z_BUF_ERROR if we were given an incomplete table\n\t\treturn y !== 0 && g != 1 ? Z_BUF_ERROR : Z_OK;\n\t}\n\n\tfunction initWorkArea(vsize) {\n\t\tlet i;\n\t\tif (!hn) {\n\t\t\thn = []; // []; //new Array(1);\n\t\t\tv = []; // new Array(vsize);\n\t\t\tc = new Int32Array(BMAX + 1); // new Array(BMAX + 1);\n\t\t\tr = []; // new Array(3);\n\t\t\tu = new Int32Array(BMAX); // new Array(BMAX);\n\t\t\tx = new Int32Array(BMAX + 1); // new Array(BMAX + 1);\n\t\t}\n\t\tif (v.length < vsize) {\n\t\t\tv = []; // new Array(vsize);\n\t\t}\n\t\tfor (i = 0; i < vsize; i++) {\n\t\t\tv[i] = 0;\n\t\t}\n\t\tfor (i = 0; i < BMAX + 1; i++) {\n\t\t\tc[i] = 0;\n\t\t}\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\tr[i] = 0;\n\t\t}\n\t\t// for(int i=0; i<BMAX; i++){u[i]=0;}\n\t\tu.set(c.subarray(0, BMAX), 0);\n\t\t// for(int i=0; i<BMAX+1; i++){x[i]=0;}\n\t\tx.set(c.subarray(0, BMAX + 1), 0);\n\t}\n\n\tthat.inflate_trees_bits = function (c, // 19 code lengths\n\t\tbb, // bits tree desired/actual depth\n\t\ttb, // bits tree result\n\t\thp, // space for trees\n\t\tz // for messages\n\t) {\n\t\tlet result;\n\t\tinitWorkArea(19);\n\t\thn[0] = 0;\n\t\tresult = huft_build(c, 0, 19, 19, null, null, tb, bb, hp, hn, v);\n\n\t\tif (result == Z_DATA_ERROR) {\n\t\t\tz.msg = \"oversubscribed dynamic bit lengths tree\";\n\t\t} else if (result == Z_BUF_ERROR || bb[0] === 0) {\n\t\t\tz.msg = \"incomplete dynamic bit lengths tree\";\n\t\t\tresult = Z_DATA_ERROR;\n\t\t}\n\t\treturn result;\n\t};\n\n\tthat.inflate_trees_dynamic = function (nl, // number of literal/length codes\n\t\tnd, // number of distance codes\n\t\tc, // that many (total) code lengths\n\t\tbl, // literal desired/actual bit depth\n\t\tbd, // distance desired/actual bit depth\n\t\ttl, // literal/length tree result\n\t\ttd, // distance tree result\n\t\thp, // space for trees\n\t\tz // for messages\n\t) {\n\t\tlet result;\n\n\t\t// build literal/length tree\n\t\tinitWorkArea(288);\n\t\thn[0] = 0;\n\t\tresult = huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, hn, v);\n\t\tif (result != Z_OK || bl[0] === 0) {\n\t\t\tif (result == Z_DATA_ERROR) {\n\t\t\t\tz.msg = \"oversubscribed literal/length tree\";\n\t\t\t} else if (result != Z_MEM_ERROR) {\n\t\t\t\tz.msg = \"incomplete literal/length tree\";\n\t\t\t\tresult = Z_DATA_ERROR;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t// build distance tree\n\t\tinitWorkArea(288);\n\t\tresult = huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, hn, v);\n\n\t\tif (result != Z_OK || (bd[0] === 0 && nl > 257)) {\n\t\t\tif (result == Z_DATA_ERROR) {\n\t\t\t\tz.msg = \"oversubscribed distance tree\";\n\t\t\t} else if (result == Z_BUF_ERROR) {\n\t\t\t\tz.msg = \"incomplete distance tree\";\n\t\t\t\tresult = Z_DATA_ERROR;\n\t\t\t} else if (result != Z_MEM_ERROR) {\n\t\t\t\tz.msg = \"empty distance tree with lengths\";\n\t\t\t\tresult = Z_DATA_ERROR;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\treturn Z_OK;\n\t};\n\n}\n\nInfTree.inflate_trees_fixed = function (bl, // literal desired/actual bit depth\n\tbd, // distance desired/actual bit depth\n\ttl,// literal/length tree result\n\ttd// distance tree result\n) {\n\tbl[0] = fixed_bl;\n\tbd[0] = fixed_bd;\n\ttl[0] = fixed_tl;\n\ttd[0] = fixed_td;\n\treturn Z_OK;\n};\n\n// InfCodes\n\n// waiting for \"i:\"=input,\n// \"o:\"=output,\n// \"x:\"=nothing\nconst START = 0; // x: set up for LEN\nconst LEN = 1; // i: get length/literal/eob next\nconst LENEXT = 2; // i: getting length extra (have base)\nconst DIST = 3; // i: get distance next\nconst DISTEXT = 4;// i: getting distance extra\nconst COPY = 5; // o: copying bytes in win, waiting\n// for space\nconst LIT = 6; // o: got literal, waiting for output\n// space\nconst WASH = 7; // o: got eob, possibly still output\n// waiting\nconst END = 8; // x: got eob and all data flushed\nconst BADCODE = 9;// x: got error\n\nfunction InfCodes() {\n\tconst that = this;\n\n\tlet mode; // current inflate_codes mode\n\n\t// mode dependent information\n\tlet len = 0;\n\n\tlet tree; // pointer into tree\n\tlet tree_index = 0;\n\tlet need = 0; // bits needed\n\n\tlet lit = 0;\n\n\t// if EXT or COPY, where and how much\n\tlet get = 0; // bits to get for extra\n\tlet dist = 0; // distance back to copy from\n\n\tlet lbits = 0; // ltree bits decoded per branch\n\tlet dbits = 0; // dtree bits decoder per branch\n\tlet ltree; // literal/length/eob tree\n\tlet ltree_index = 0; // literal/length/eob tree\n\tlet dtree; // distance tree\n\tlet dtree_index = 0; // distance tree\n\n\t// Called with number of bytes left to write in win at least 258\n\t// (the maximum string length) and number of input bytes available\n\t// at least ten. The ten bytes are six bytes for the longest length/\n\t// distance pair plus four bytes for overloading the bit buffer.\n\n\tfunction inflate_fast(bl, bd, tl, tl_index, td, td_index, s, z) {\n\t\tlet t; // temporary pointer\n\t\tlet tp; // temporary pointer\n\t\tlet tp_index; // temporary pointer\n\t\tlet e; // extra bits or operation\n\t\tlet b; // bit buffer\n\t\tlet k; // bits in bit buffer\n\t\tlet p; // input data pointer\n\t\tlet n; // bytes available there\n\t\tlet q; // output win write pointer\n\t\tlet m; // bytes to end of win or read pointer\n\t\tlet ml; // mask for literal/length tree\n\t\tlet md; // mask for distance tree\n\t\tlet c; // bytes to copy\n\t\tlet d; // distance back to copy from\n\t\tlet r; // copy source pointer\n\n\t\tlet tp_index_t_3; // (tp_index+t)*3\n\n\t\t// load input, output, bit values\n\t\tp = z.next_in_index;\n\t\tn = z.avail_in;\n\t\tb = s.bitb;\n\t\tk = s.bitk;\n\t\tq = s.write;\n\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t// initialize masks\n\t\tml = inflate_mask[bl];\n\t\tmd = inflate_mask[bd];\n\n\t\t// do until not enough input or output space for fast loop\n\t\tdo { // assume called with m >= 258 && n >= 10\n\t\t\t// get literal/length code\n\t\t\twhile (k < (20)) { // max bits for literal/length code\n\t\t\t\tn--;\n\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\tk += 8;\n\t\t\t}\n\n\t\t\tt = b & ml;\n\t\t\ttp = tl;\n\t\t\ttp_index = tl_index;\n\t\t\ttp_index_t_3 = (tp_index + t) * 3;\n\t\t\tif ((e = tp[tp_index_t_3]) === 0) {\n\t\t\t\tb >>= (tp[tp_index_t_3 + 1]);\n\t\t\t\tk -= (tp[tp_index_t_3 + 1]);\n\n\t\t\t\ts.win[q++] = /* (byte) */tp[tp_index_t_3 + 2];\n\t\t\t\tm--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tdo {\n\n\t\t\t\tb >>= (tp[tp_index_t_3 + 1]);\n\t\t\t\tk -= (tp[tp_index_t_3 + 1]);\n\n\t\t\t\tif ((e & 16) !== 0) {\n\t\t\t\t\te &= 15;\n\t\t\t\t\tc = tp[tp_index_t_3 + 2] + (/* (int) */b & inflate_mask[e]);\n\n\t\t\t\t\tb >>= e;\n\t\t\t\t\tk -= e;\n\n\t\t\t\t\t// decode distance base of block to copy\n\t\t\t\t\twhile (k < (15)) { // max bits for distance code\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\tt = b & md;\n\t\t\t\t\ttp = td;\n\t\t\t\t\ttp_index = td_index;\n\t\t\t\t\ttp_index_t_3 = (tp_index + t) * 3;\n\t\t\t\t\te = tp[tp_index_t_3];\n\n\t\t\t\t\tdo {\n\n\t\t\t\t\t\tb >>= (tp[tp_index_t_3 + 1]);\n\t\t\t\t\t\tk -= (tp[tp_index_t_3 + 1]);\n\n\t\t\t\t\t\tif ((e & 16) !== 0) {\n\t\t\t\t\t\t\t// get extra bits to add to distance base\n\t\t\t\t\t\t\te &= 15;\n\t\t\t\t\t\t\twhile (k < (e)) { // get extra bits (up to 13)\n\t\t\t\t\t\t\t\tn--;\n\t\t\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\t\t\tk += 8;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\td = tp[tp_index_t_3 + 2] + (b & inflate_mask[e]);\n\n\t\t\t\t\t\t\tb >>= (e);\n\t\t\t\t\t\t\tk -= (e);\n\n\t\t\t\t\t\t\t// do the copy\n\t\t\t\t\t\t\tm -= c;\n\t\t\t\t\t\t\tif (q >= d) { // offset before dest\n\t\t\t\t\t\t\t\t// just copy\n\t\t\t\t\t\t\t\tr = q - d;\n\t\t\t\t\t\t\t\tif (q - r > 0 && 2 > (q - r)) {\n\t\t\t\t\t\t\t\t\ts.win[q++] = s.win[r++]; // minimum\n\t\t\t\t\t\t\t\t\t// count is\n\t\t\t\t\t\t\t\t\t// three,\n\t\t\t\t\t\t\t\t\ts.win[q++] = s.win[r++]; // so unroll\n\t\t\t\t\t\t\t\t\t// loop a\n\t\t\t\t\t\t\t\t\t// little\n\t\t\t\t\t\t\t\t\tc -= 2;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ts.win.set(s.win.subarray(r, r + 2), q);\n\t\t\t\t\t\t\t\t\tq += 2;\n\t\t\t\t\t\t\t\t\tr += 2;\n\t\t\t\t\t\t\t\t\tc -= 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else { // else offset after destination\n\t\t\t\t\t\t\t\tr = q - d;\n\t\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\t\tr += s.end; // force pointer in win\n\t\t\t\t\t\t\t\t} while (r < 0); // covers invalid distances\n\t\t\t\t\t\t\t\te = s.end - r;\n\t\t\t\t\t\t\t\tif (c > e) { // if source crosses,\n\t\t\t\t\t\t\t\t\tc -= e; // wrapped copy\n\t\t\t\t\t\t\t\t\tif (q - r > 0 && e > (q - r)) {\n\t\t\t\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\t\t\t\ts.win[q++] = s.win[r++];\n\t\t\t\t\t\t\t\t\t\t} while (--e !== 0);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ts.win.set(s.win.subarray(r, r + e), q);\n\t\t\t\t\t\t\t\t\t\tq += e;\n\t\t\t\t\t\t\t\t\t\tr += e;\n\t\t\t\t\t\t\t\t\t\te = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tr = 0; // copy rest from start of win\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// copy all or what's left\n\t\t\t\t\t\t\tif (q - r > 0 && c > (q - r)) {\n\t\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\t\ts.win[q++] = s.win[r++];\n\t\t\t\t\t\t\t\t} while (--c !== 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ts.win.set(s.win.subarray(r, r + c), q);\n\t\t\t\t\t\t\t\tq += c;\n\t\t\t\t\t\t\t\tr += c;\n\t\t\t\t\t\t\t\tc = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if ((e & 64) === 0) {\n\t\t\t\t\t\t\tt += tp[tp_index_t_3 + 2];\n\t\t\t\t\t\t\tt += (b & inflate_mask[e]);\n\t\t\t\t\t\t\ttp_index_t_3 = (tp_index + t) * 3;\n\t\t\t\t\t\t\te = tp[tp_index_t_3];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tz.msg = \"invalid distance code\";\n\n\t\t\t\t\t\t\tc = z.avail_in - n;\n\t\t\t\t\t\t\tc = (k >> 3) < c ? k >> 3 : c;\n\t\t\t\t\t\t\tn += c;\n\t\t\t\t\t\t\tp -= c;\n\t\t\t\t\t\t\tk -= c << 3;\n\n\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\ts.write = q;\n\n\t\t\t\t\t\t\treturn Z_DATA_ERROR;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// eslint-disable-next-line no-constant-condition\n\t\t\t\t\t} while (true);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ((e & 64) === 0) {\n\t\t\t\t\tt += tp[tp_index_t_3 + 2];\n\t\t\t\t\tt += (b & inflate_mask[e]);\n\t\t\t\t\ttp_index_t_3 = (tp_index + t) * 3;\n\t\t\t\t\tif ((e = tp[tp_index_t_3]) === 0) {\n\n\t\t\t\t\t\tb >>= (tp[tp_index_t_3 + 1]);\n\t\t\t\t\t\tk -= (tp[tp_index_t_3 + 1]);\n\n\t\t\t\t\t\ts.win[q++] = /* (byte) */tp[tp_index_t_3 + 2];\n\t\t\t\t\t\tm--;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if ((e & 32) !== 0) {\n\n\t\t\t\t\tc = z.avail_in - n;\n\t\t\t\t\tc = (k >> 3) < c ? k >> 3 : c;\n\t\t\t\t\tn += c;\n\t\t\t\t\tp -= c;\n\t\t\t\t\tk -= c << 3;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\n\t\t\t\t\treturn Z_STREAM_END;\n\t\t\t\t} else {\n\t\t\t\t\tz.msg = \"invalid literal/length code\";\n\n\t\t\t\t\tc = z.avail_in - n;\n\t\t\t\t\tc = (k >> 3) < c ? k >> 3 : c;\n\t\t\t\t\tn += c;\n\t\t\t\t\tp -= c;\n\t\t\t\t\tk -= c << 3;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\n\t\t\t\t\treturn Z_DATA_ERROR;\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line no-constant-condition\n\t\t\t} while (true);\n\t\t} while (m >= 258 && n >= 10);\n\n\t\t// not enough input or output--restore pointers and return\n\t\tc = z.avail_in - n;\n\t\tc = (k >> 3) < c ? k >> 3 : c;\n\t\tn += c;\n\t\tp -= c;\n\t\tk -= c << 3;\n\n\t\ts.bitb = b;\n\t\ts.bitk = k;\n\t\tz.avail_in = n;\n\t\tz.total_in += p - z.next_in_index;\n\t\tz.next_in_index = p;\n\t\ts.write = q;\n\n\t\treturn Z_OK;\n\t}\n\n\tthat.init = function (bl, bd, tl, tl_index, td, td_index) {\n\t\tmode = START;\n\t\tlbits = /* (byte) */bl;\n\t\tdbits = /* (byte) */bd;\n\t\tltree = tl;\n\t\tltree_index = tl_index;\n\t\tdtree = td;\n\t\tdtree_index = td_index;\n\t\ttree = null;\n\t};\n\n\tthat.proc = function (s, z, r) {\n\t\tlet j; // temporary storage\n\t\tlet tindex; // temporary pointer\n\t\tlet e; // extra bits or operation\n\t\tlet b = 0; // bit buffer\n\t\tlet k = 0; // bits in bit buffer\n\t\tlet p = 0; // input data pointer\n\t\tlet n; // bytes available there\n\t\tlet q; // output win write pointer\n\t\tlet m; // bytes to end of win or read pointer\n\t\tlet f; // pointer to copy strings from\n\n\t\t// copy input/output information to locals (UPDATE macro restores)\n\t\tp = z.next_in_index;\n\t\tn = z.avail_in;\n\t\tb = s.bitb;\n\t\tk = s.bitk;\n\t\tq = s.write;\n\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t// process input and output based on current state\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tswitch (mode) {\n\t\t\t\t// waiting for \"i:\"=input, \"o:\"=output, \"x:\"=nothing\n\t\t\t\tcase START: // x: set up for LEN\n\t\t\t\t\tif (m >= 258 && n >= 10) {\n\n\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\tr = inflate_fast(lbits, dbits, ltree, ltree_index, dtree, dtree_index, s, z);\n\n\t\t\t\t\t\tp = z.next_in_index;\n\t\t\t\t\t\tn = z.avail_in;\n\t\t\t\t\t\tb = s.bitb;\n\t\t\t\t\t\tk = s.bitk;\n\t\t\t\t\t\tq = s.write;\n\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t\t\t\t\tif (r != Z_OK) {\n\t\t\t\t\t\t\tmode = r == Z_STREAM_END ? WASH : BADCODE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tneed = lbits;\n\t\t\t\t\ttree = ltree;\n\t\t\t\t\ttree_index = ltree_index;\n\n\t\t\t\t\tmode = LEN;\n\t\t\t\t/* falls through */\n\t\t\t\tcase LEN: // i: get length/literal/eob next\n\t\t\t\t\tj = need;\n\n\t\t\t\t\twhile (k < (j)) {\n\t\t\t\t\t\tif (n !== 0)\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\ttindex = (tree_index + (b & inflate_mask[j])) * 3;\n\n\t\t\t\t\tb >>>= (tree[tindex + 1]);\n\t\t\t\t\tk -= (tree[tindex + 1]);\n\n\t\t\t\t\te = tree[tindex];\n\n\t\t\t\t\tif (e === 0) { // literal\n\t\t\t\t\t\tlit = tree[tindex + 2];\n\t\t\t\t\t\tmode = LIT;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ((e & 16) !== 0) { // length\n\t\t\t\t\t\tget = e & 15;\n\t\t\t\t\t\tlen = tree[tindex + 2];\n\t\t\t\t\t\tmode = LENEXT;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ((e & 64) === 0) { // next table\n\t\t\t\t\t\tneed = e;\n\t\t\t\t\t\ttree_index = tindex / 3 + tree[tindex + 2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ((e & 32) !== 0) { // end of block\n\t\t\t\t\t\tmode = WASH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmode = BADCODE; // invalid code\n\t\t\t\t\tz.msg = \"invalid literal/length code\";\n\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\t\t\t\t\treturn s.inflate_flush(z, r);\n\n\t\t\t\tcase LENEXT: // i: getting length extra (have base)\n\t\t\t\t\tj = get;\n\n\t\t\t\t\twhile (k < (j)) {\n\t\t\t\t\t\tif (n !== 0)\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\tlen += (b & inflate_mask[j]);\n\n\t\t\t\t\tb >>= j;\n\t\t\t\t\tk -= j;\n\n\t\t\t\t\tneed = dbits;\n\t\t\t\t\ttree = dtree;\n\t\t\t\t\ttree_index = dtree_index;\n\t\t\t\t\tmode = DIST;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DIST: // i: get distance next\n\t\t\t\t\tj = need;\n\n\t\t\t\t\twhile (k < (j)) {\n\t\t\t\t\t\tif (n !== 0)\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\ttindex = (tree_index + (b & inflate_mask[j])) * 3;\n\n\t\t\t\t\tb >>= tree[tindex + 1];\n\t\t\t\t\tk -= tree[tindex + 1];\n\n\t\t\t\t\te = (tree[tindex]);\n\t\t\t\t\tif ((e & 16) !== 0) { // distance\n\t\t\t\t\t\tget = e & 15;\n\t\t\t\t\t\tdist = tree[tindex + 2];\n\t\t\t\t\t\tmode = DISTEXT;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ((e & 64) === 0) { // next table\n\t\t\t\t\t\tneed = e;\n\t\t\t\t\t\ttree_index = tindex / 3 + tree[tindex + 2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmode = BADCODE; // invalid code\n\t\t\t\t\tz.msg = \"invalid distance code\";\n\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\t\t\t\t\treturn s.inflate_flush(z, r);\n\n\t\t\t\tcase DISTEXT: // i: getting distance extra\n\t\t\t\t\tj = get;\n\n\t\t\t\t\twhile (k < (j)) {\n\t\t\t\t\t\tif (n !== 0)\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\tdist += (b & inflate_mask[j]);\n\n\t\t\t\t\tb >>= j;\n\t\t\t\t\tk -= j;\n\n\t\t\t\t\tmode = COPY;\n\t\t\t\t/* falls through */\n\t\t\t\tcase COPY: // o: copying bytes in win, waiting for space\n\t\t\t\t\tf = q - dist;\n\t\t\t\t\twhile (f < 0) { // modulo win size-\"while\" instead\n\t\t\t\t\t\tf += s.end; // of \"if\" handles invalid distances\n\t\t\t\t\t}\n\t\t\t\t\twhile (len !== 0) {\n\n\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\tif (q == s.end && s.read !== 0) {\n\t\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\t\tr = s.inflate_flush(z, r);\n\t\t\t\t\t\t\t\tq = s.write;\n\t\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t\t\t\t\t\t\tif (q == s.end && s.read !== 0) {\n\t\t\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ts.win[q++] = s.win[f++];\n\t\t\t\t\t\tm--;\n\n\t\t\t\t\t\tif (f == s.end)\n\t\t\t\t\t\t\tf = 0;\n\t\t\t\t\t\tlen--;\n\t\t\t\t\t}\n\t\t\t\t\tmode = START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LIT: // o: got literal, waiting for output space\n\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\tif (q == s.end && s.read !== 0) {\n\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\tr = s.inflate_flush(z, r);\n\t\t\t\t\t\t\tq = s.write;\n\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t\t\t\t\t\tif (q == s.end && s.read !== 0) {\n\t\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tr = Z_OK;\n\n\t\t\t\t\ts.win[q++] = /* (byte) */lit;\n\t\t\t\t\tm--;\n\n\t\t\t\t\tmode = START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase WASH: // o: got eob, possibly more output\n\t\t\t\t\tif (k > 7) { // return unused byte, if any\n\t\t\t\t\t\tk -= 8;\n\t\t\t\t\t\tn++;\n\t\t\t\t\t\tp--; // can always return one\n\t\t\t\t\t}\n\n\t\t\t\t\ts.write = q;\n\t\t\t\t\tr = s.inflate_flush(z, r);\n\t\t\t\t\tq = s.write;\n\t\t\t\t\tm = q < s.read ? s.read - q - 1 : s.end - q;\n\n\t\t\t\t\tif (s.read != s.write) {\n\t\t\t\t\t\ts.bitb = b;\n\t\t\t\t\t\ts.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\ts.write = q;\n\t\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tmode = END;\n\t\t\t\t/* falls through */\n\t\t\t\tcase END:\n\t\t\t\t\tr = Z_STREAM_END;\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\t\t\t\t\treturn s.inflate_flush(z, r);\n\n\t\t\t\tcase BADCODE: // x: got error\n\n\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\t\t\t\t\treturn s.inflate_flush(z, r);\n\n\t\t\t\tdefault:\n\t\t\t\t\tr = Z_STREAM_ERROR;\n\n\t\t\t\t\ts.bitb = b;\n\t\t\t\t\ts.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\ts.write = q;\n\t\t\t\t\treturn s.inflate_flush(z, r);\n\t\t\t}\n\t\t}\n\t};\n\n\tthat.free = function () {\n\t\t// ZFREE(z, c);\n\t};\n\n}\n\n// InfBlocks\n\n// Table for deflate from PKZIP's appnote.txt.\nconst border = [ // Order of the bit length code lengths\n\t16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];\n\nconst TYPE = 0; // get type bits (3, including end bit)\nconst LENS = 1; // get lengths for stored\nconst STORED = 2;// processing stored block\nconst TABLE = 3; // get table lengths\nconst BTREE = 4; // get bit lengths tree for a dynamic\n// block\nconst DTREE = 5; // get length, distance trees for a\n// dynamic block\nconst CODES = 6; // processing fixed or dynamic block\nconst DRY = 7; // output remaining win bytes\nconst DONELOCKS = 8; // finished last block, done\nconst BADBLOCKS = 9; // ot a data error--stuck here\n\nfunction InfBlocks(z, w) {\n\tconst that = this;\n\n\tlet mode = TYPE; // current inflate_block mode\n\n\tlet left = 0; // if STORED, bytes left to copy\n\n\tlet table = 0; // table lengths (14 bits)\n\tlet index = 0; // index into blens (or border)\n\tlet blens; // bit lengths of codes\n\tconst bb = [0]; // bit length tree depth\n\tconst tb = [0]; // bit length decoding tree\n\n\tconst codes = new InfCodes(); // if CODES, current state\n\n\tlet last = 0; // true if this block is the last block\n\n\tlet hufts = new Int32Array(MANY * 3); // single malloc for tree space\n\tconst check = 0; // check on output\n\tconst inftree = new InfTree();\n\n\tthat.bitk = 0; // bits in bit buffer\n\tthat.bitb = 0; // bit buffer\n\tthat.win = new Uint8Array(w); // sliding win\n\tthat.end = w; // one byte after sliding win\n\tthat.read = 0; // win read pointer\n\tthat.write = 0; // win write pointer\n\n\tthat.reset = function (z, c) {\n\t\tif (c)\n\t\t\tc[0] = check;\n\t\t// if (mode == BTREE || mode == DTREE) {\n\t\t// }\n\t\tif (mode == CODES) {\n\t\t\tcodes.free(z);\n\t\t}\n\t\tmode = TYPE;\n\t\tthat.bitk = 0;\n\t\tthat.bitb = 0;\n\t\tthat.read = that.write = 0;\n\t};\n\n\tthat.reset(z, null);\n\n\t// copy as much as possible from the sliding win to the output area\n\tthat.inflate_flush = function (z, r) {\n\t\tlet n;\n\t\tlet p;\n\t\tlet q;\n\n\t\t// local copies of source and destination pointers\n\t\tp = z.next_out_index;\n\t\tq = that.read;\n\n\t\t// compute number of bytes to copy as far as end of win\n\t\tn = /* (int) */((q <= that.write ? that.write : that.end) - q);\n\t\tif (n > z.avail_out)\n\t\t\tn = z.avail_out;\n\t\tif (n !== 0 && r == Z_BUF_ERROR)\n\t\t\tr = Z_OK;\n\n\t\t// update counters\n\t\tz.avail_out -= n;\n\t\tz.total_out += n;\n\n\t\t// copy as far as end of win\n\t\tz.next_out.set(that.win.subarray(q, q + n), p);\n\t\tp += n;\n\t\tq += n;\n\n\t\t// see if more to copy at beginning of win\n\t\tif (q == that.end) {\n\t\t\t// wrap pointers\n\t\t\tq = 0;\n\t\t\tif (that.write == that.end)\n\t\t\t\tthat.write = 0;\n\n\t\t\t// compute bytes to copy\n\t\t\tn = that.write - q;\n\t\t\tif (n > z.avail_out)\n\t\t\t\tn = z.avail_out;\n\t\t\tif (n !== 0 && r == Z_BUF_ERROR)\n\t\t\t\tr = Z_OK;\n\n\t\t\t// update counters\n\t\t\tz.avail_out -= n;\n\t\t\tz.total_out += n;\n\n\t\t\t// copy\n\t\t\tz.next_out.set(that.win.subarray(q, q + n), p);\n\t\t\tp += n;\n\t\t\tq += n;\n\t\t}\n\n\t\t// update pointers\n\t\tz.next_out_index = p;\n\t\tthat.read = q;\n\n\t\t// done\n\t\treturn r;\n\t};\n\n\tthat.proc = function (z, r) {\n\t\tlet t; // temporary storage\n\t\tlet b; // bit buffer\n\t\tlet k; // bits in bit buffer\n\t\tlet p; // input data pointer\n\t\tlet n; // bytes available there\n\t\tlet q; // output win write pointer\n\t\tlet m; // bytes to end of win or read pointer\n\n\t\tlet i;\n\n\t\t// copy input/output information to locals (UPDATE macro restores)\n\t\t// {\n\t\tp = z.next_in_index;\n\t\tn = z.avail_in;\n\t\tb = that.bitb;\n\t\tk = that.bitk;\n\t\t// }\n\t\t// {\n\t\tq = that.write;\n\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\t\t// }\n\n\t\t// process input based on current state\n\t\t// DEBUG dtree\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tlet bl, bd, tl, td, bl_, bd_, tl_, td_;\n\t\t\tswitch (mode) {\n\t\t\t\tcase TYPE:\n\n\t\t\t\t\twhile (k < (3)) {\n\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\t\t\t\t\tt = /* (int) */(b & 7);\n\t\t\t\t\tlast = t & 1;\n\n\t\t\t\t\tswitch (t >>> 1) {\n\t\t\t\t\t\tcase 0: // stored\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tb >>>= (3);\n\t\t\t\t\t\t\tk -= (3);\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\tt = k & 7; // go to byte boundary\n\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tb >>>= (t);\n\t\t\t\t\t\t\tk -= (t);\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\tmode = LENS; // get length of stored block\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1: // fixed\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tbl = []; // new Array(1);\n\t\t\t\t\t\t\tbd = []; // new Array(1);\n\t\t\t\t\t\t\ttl = [[]]; // new Array(1);\n\t\t\t\t\t\t\ttd = [[]]; // new Array(1);\n\n\t\t\t\t\t\t\tInfTree.inflate_trees_fixed(bl, bd, tl, td);\n\t\t\t\t\t\t\tcodes.init(bl[0], bd[0], tl[0], 0, td[0], 0);\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tb >>>= (3);\n\t\t\t\t\t\t\tk -= (3);\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tmode = CODES;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2: // dynamic\n\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tb >>>= (3);\n\t\t\t\t\t\t\tk -= (3);\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tmode = TABLE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3: // illegal\n\n\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\tb >>>= (3);\n\t\t\t\t\t\t\tk -= (3);\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\t\tz.msg = \"invalid block type\";\n\t\t\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase LENS:\n\n\t\t\t\t\twhile (k < (32)) {\n\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((((~b) >>> 16) & 0xffff) != (b & 0xffff)) {\n\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\tz.msg = \"invalid stored block lengths\";\n\t\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tleft = (b & 0xffff);\n\t\t\t\t\tb = k = 0; // dump bits\n\t\t\t\t\tmode = left !== 0 ? STORED : (last !== 0 ? DRY : TYPE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STORED:\n\t\t\t\t\tif (n === 0) {\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\tif (q == that.end && that.read !== 0) {\n\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\tr = that.inflate_flush(z, r);\n\t\t\t\t\t\t\tq = that.write;\n\t\t\t\t\t\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\t\t\t\t\t\t\tif (q == that.end && that.read !== 0) {\n\t\t\t\t\t\t\t\tq = 0;\n\t\t\t\t\t\t\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (m === 0) {\n\t\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tr = Z_OK;\n\n\t\t\t\t\tt = left;\n\t\t\t\t\tif (t > n)\n\t\t\t\t\t\tt = n;\n\t\t\t\t\tif (t > m)\n\t\t\t\t\t\tt = m;\n\t\t\t\t\tthat.win.set(z.read_buf(p, t), q);\n\t\t\t\t\tp += t;\n\t\t\t\t\tn -= t;\n\t\t\t\t\tq += t;\n\t\t\t\t\tm -= t;\n\t\t\t\t\tif ((left -= t) !== 0)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tmode = last !== 0 ? DRY : TYPE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase TABLE:\n\n\t\t\t\t\twhile (k < (14)) {\n\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tn--;\n\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\tk += 8;\n\t\t\t\t\t}\n\n\t\t\t\t\ttable = t = (b & 0x3fff);\n\t\t\t\t\tif ((t & 0x1f) > 29 || ((t >> 5) & 0x1f) > 29) {\n\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\tz.msg = \"too many length or distance symbols\";\n\t\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tt = 258 + (t & 0x1f) + ((t >> 5) & 0x1f);\n\t\t\t\t\tif (!blens || blens.length < t) {\n\t\t\t\t\t\tblens = []; // new Array(t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (i = 0; i < t; i++) {\n\t\t\t\t\t\t\tblens[i] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// {\n\t\t\t\t\tb >>>= (14);\n\t\t\t\t\tk -= (14);\n\t\t\t\t\t// }\n\n\t\t\t\t\tindex = 0;\n\t\t\t\t\tmode = BTREE;\n\t\t\t\t/* falls through */\n\t\t\t\tcase BTREE:\n\t\t\t\t\twhile (index < 4 + (table >>> 10)) {\n\t\t\t\t\t\twhile (k < (3)) {\n\t\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tn--;\n\t\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\t\tk += 8;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tblens[border[index++]] = b & 7;\n\n\t\t\t\t\t\t// {\n\t\t\t\t\t\tb >>>= (3);\n\t\t\t\t\t\tk -= (3);\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (index < 19) {\n\t\t\t\t\t\tblens[border[index++]] = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tbb[0] = 7;\n\t\t\t\t\tt = inftree.inflate_trees_bits(blens, bb, tb, hufts, z);\n\t\t\t\t\tif (t != Z_OK) {\n\t\t\t\t\t\tr = t;\n\t\t\t\t\t\tif (r == Z_DATA_ERROR) {\n\t\t\t\t\t\t\tblens = null;\n\t\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\n\t\t\t\t\tindex = 0;\n\t\t\t\t\tmode = DTREE;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DTREE:\n\t\t\t\t\t// eslint-disable-next-line no-constant-condition\n\t\t\t\t\twhile (true) {\n\t\t\t\t\t\tt = table;\n\t\t\t\t\t\tif (index >= 258 + (t & 0x1f) + ((t >> 5) & 0x1f)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet j, c;\n\n\t\t\t\t\t\tt = bb[0];\n\n\t\t\t\t\t\twhile (k < (t)) {\n\t\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tn--;\n\t\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\t\tk += 8;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if (tb[0] == -1) {\n\t\t\t\t\t\t// System.err.println(\"null...\");\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tt = hufts[(tb[0] + (b & inflate_mask[t])) * 3 + 1];\n\t\t\t\t\t\tc = hufts[(tb[0] + (b & inflate_mask[t])) * 3 + 2];\n\n\t\t\t\t\t\tif (c < 16) {\n\t\t\t\t\t\t\tb >>>= (t);\n\t\t\t\t\t\t\tk -= (t);\n\t\t\t\t\t\t\tblens[index++] = c;\n\t\t\t\t\t\t} else { // c == 16..18\n\t\t\t\t\t\t\ti = c == 18 ? 7 : c - 14;\n\t\t\t\t\t\t\tj = c == 18 ? 11 : 3;\n\n\t\t\t\t\t\t\twhile (k < (t + i)) {\n\t\t\t\t\t\t\t\tif (n !== 0) {\n\t\t\t\t\t\t\t\t\tr = Z_OK;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tn--;\n\t\t\t\t\t\t\t\tb |= (z.read_byte(p++) & 0xff) << k;\n\t\t\t\t\t\t\t\tk += 8;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tb >>>= (t);\n\t\t\t\t\t\t\tk -= (t);\n\n\t\t\t\t\t\t\tj += (b & inflate_mask[i]);\n\n\t\t\t\t\t\t\tb >>>= (i);\n\t\t\t\t\t\t\tk -= (i);\n\n\t\t\t\t\t\t\ti = index;\n\t\t\t\t\t\t\tt = table;\n\t\t\t\t\t\t\tif (i + j > 258 + (t & 0x1f) + ((t >> 5) & 0x1f) || (c == 16 && i < 1)) {\n\t\t\t\t\t\t\t\tblens = null;\n\t\t\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\t\t\tz.msg = \"invalid bit length repeat\";\n\t\t\t\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tc = c == 16 ? blens[i - 1] : 0;\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tblens[i++] = c;\n\t\t\t\t\t\t\t} while (--j !== 0);\n\t\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttb[0] = -1;\n\t\t\t\t\t// {\n\t\t\t\t\tbl_ = []; // new Array(1);\n\t\t\t\t\tbd_ = []; // new Array(1);\n\t\t\t\t\ttl_ = []; // new Array(1);\n\t\t\t\t\ttd_ = []; // new Array(1);\n\t\t\t\t\tbl_[0] = 9; // must be <= 9 for lookahead assumptions\n\t\t\t\t\tbd_[0] = 6; // must be <= 9 for lookahead assumptions\n\n\t\t\t\t\tt = table;\n\t\t\t\t\tt = inftree.inflate_trees_dynamic(257 + (t & 0x1f), 1 + ((t >> 5) & 0x1f), blens, bl_, bd_, tl_, td_, hufts, z);\n\n\t\t\t\t\tif (t != Z_OK) {\n\t\t\t\t\t\tif (t == Z_DATA_ERROR) {\n\t\t\t\t\t\t\tblens = null;\n\t\t\t\t\t\t\tmode = BADBLOCKS;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tr = t;\n\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tcodes.init(bl_[0], bd_[0], hufts, tl_[0], hufts, td_[0]);\n\t\t\t\t\t// }\n\t\t\t\t\tmode = CODES;\n\t\t\t\t/* falls through */\n\t\t\t\tcase CODES:\n\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\tthat.write = q;\n\n\t\t\t\t\tif ((r = codes.proc(that, z, r)) != Z_STREAM_END) {\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tr = Z_OK;\n\t\t\t\t\tcodes.free(z);\n\n\t\t\t\t\tp = z.next_in_index;\n\t\t\t\t\tn = z.avail_in;\n\t\t\t\t\tb = that.bitb;\n\t\t\t\t\tk = that.bitk;\n\t\t\t\t\tq = that.write;\n\t\t\t\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\n\t\t\t\t\tif (last === 0) {\n\t\t\t\t\t\tmode = TYPE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmode = DRY;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DRY:\n\t\t\t\t\tthat.write = q;\n\t\t\t\t\tr = that.inflate_flush(z, r);\n\t\t\t\t\tq = that.write;\n\t\t\t\t\tm = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);\n\t\t\t\t\tif (that.read != that.write) {\n\t\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\t\tthat.write = q;\n\t\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\t\t}\n\t\t\t\t\tmode = DONELOCKS;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DONELOCKS:\n\t\t\t\t\tr = Z_STREAM_END;\n\n\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\tthat.write = q;\n\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t\tcase BADBLOCKS:\n\t\t\t\t\tr = Z_DATA_ERROR;\n\n\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\tthat.write = q;\n\t\t\t\t\treturn that.inflate_flush(z, r);\n\n\t\t\t\tdefault:\n\t\t\t\t\tr = Z_STREAM_ERROR;\n\n\t\t\t\t\tthat.bitb = b;\n\t\t\t\t\tthat.bitk = k;\n\t\t\t\t\tz.avail_in = n;\n\t\t\t\t\tz.total_in += p - z.next_in_index;\n\t\t\t\t\tz.next_in_index = p;\n\t\t\t\t\tthat.write = q;\n\t\t\t\t\treturn that.inflate_flush(z, r);\n\t\t\t}\n\t\t}\n\t};\n\n\tthat.free = function (z) {\n\t\tthat.reset(z, null);\n\t\tthat.win = null;\n\t\thufts = null;\n\t\t// ZFREE(z, s);\n\t};\n\n\tthat.set_dictionary = function (d, start, n) {\n\t\tthat.win.set(d.subarray(start, start + n), 0);\n\t\tthat.read = that.write = n;\n\t};\n\n\t// Returns true if inflate is currently at the end of a block generated\n\t// by Z_SYNC_FLUSH or Z_FULL_FLUSH.\n\tthat.sync_point = function () {\n\t\treturn mode == LENS ? 1 : 0;\n\t};\n\n}\n\n// Inflate\n\n// preset dictionary flag in zlib header\nconst PRESET_DICT = 0x20;\n\nconst Z_DEFLATED = 8;\n\nconst METHOD = 0; // waiting for method byte\nconst FLAG = 1; // waiting for flag byte\nconst DICT4 = 2; // four dictionary check bytes to go\nconst DICT3 = 3; // three dictionary check bytes to go\nconst DICT2 = 4; // two dictionary check bytes to go\nconst DICT1 = 5; // one dictionary check byte to go\nconst DICT0 = 6; // waiting for inflateSetDictionary\nconst BLOCKS = 7; // decompressing blocks\nconst DONE = 12; // finished check, done\nconst BAD = 13; // got an error--stay here\n\nconst mark = [0, 0, 0xff, 0xff];\n\nfunction Inflate() {\n\tconst that = this;\n\n\tthat.mode = 0; // current inflate mode\n\n\t// mode dependent information\n\tthat.method = 0; // if FLAGS, method byte\n\n\t// if CHECK, check values to compare\n\tthat.was = [0]; // new Array(1); // computed check value\n\tthat.need = 0; // stream check value\n\n\t// if BAD, inflateSync's marker bytes count\n\tthat.marker = 0;\n\n\t// mode independent information\n\tthat.wbits = 0; // log2(win size) (8..15, defaults to 15)\n\n\t// this.blocks; // current inflate_blocks state\n\n\tfunction inflateReset(z) {\n\t\tif (!z || !z.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\n\t\tz.total_in = z.total_out = 0;\n\t\tz.msg = null;\n\t\tz.istate.mode = BLOCKS;\n\t\tz.istate.blocks.reset(z, null);\n\t\treturn Z_OK;\n\t}\n\n\tthat.inflateEnd = function (z) {\n\t\tif (that.blocks)\n\t\t\tthat.blocks.free(z);\n\t\tthat.blocks = null;\n\t\t// ZFREE(z, z->state);\n\t\treturn Z_OK;\n\t};\n\n\tthat.inflateInit = function (z, w) {\n\t\tz.msg = null;\n\t\tthat.blocks = null;\n\n\t\t// set win size\n\t\tif (w < 8 || w > 15) {\n\t\t\tthat.inflateEnd(z);\n\t\t\treturn Z_STREAM_ERROR;\n\t\t}\n\t\tthat.wbits = w;\n\n\t\tz.istate.blocks = new InfBlocks(z, 1 << w);\n\n\t\t// reset state\n\t\tinflateReset(z);\n\t\treturn Z_OK;\n\t};\n\n\tthat.inflate = function (z, f) {\n\t\tlet r;\n\t\tlet b;\n\n\t\tif (!z || !z.istate || !z.next_in)\n\t\t\treturn Z_STREAM_ERROR;\n\t\tconst istate = z.istate;\n\t\tf = f == Z_FINISH ? Z_BUF_ERROR : Z_OK;\n\t\tr = Z_BUF_ERROR;\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tswitch (istate.mode) {\n\t\t\t\tcase METHOD:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tif (((istate.method = z.read_byte(z.next_in_index++)) & 0xf) != Z_DEFLATED) {\n\t\t\t\t\t\tistate.mode = BAD;\n\t\t\t\t\t\tz.msg = \"unknown compression method\";\n\t\t\t\t\t\tistate.marker = 5; // can't try inflateSync\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ((istate.method >> 4) + 8 > istate.wbits) {\n\t\t\t\t\t\tistate.mode = BAD;\n\t\t\t\t\t\tz.msg = \"invalid win size\";\n\t\t\t\t\t\tistate.marker = 5; // can't try inflateSync\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tistate.mode = FLAG;\n\t\t\t\t/* falls through */\n\t\t\t\tcase FLAG:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tb = (z.read_byte(z.next_in_index++)) & 0xff;\n\n\t\t\t\t\tif ((((istate.method << 8) + b) % 31) !== 0) {\n\t\t\t\t\t\tistate.mode = BAD;\n\t\t\t\t\t\tz.msg = \"incorrect header check\";\n\t\t\t\t\t\tistate.marker = 5; // can't try inflateSync\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((b & PRESET_DICT) === 0) {\n\t\t\t\t\t\tistate.mode = BLOCKS;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tistate.mode = DICT4;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DICT4:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tistate.need = ((z.read_byte(z.next_in_index++) & 0xff) << 24) & 0xff000000;\n\t\t\t\t\tistate.mode = DICT3;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DICT3:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tistate.need += ((z.read_byte(z.next_in_index++) & 0xff) << 16) & 0xff0000;\n\t\t\t\t\tistate.mode = DICT2;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DICT2:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tistate.need += ((z.read_byte(z.next_in_index++) & 0xff) << 8) & 0xff00;\n\t\t\t\t\tistate.mode = DICT1;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DICT1:\n\n\t\t\t\t\tif (z.avail_in === 0)\n\t\t\t\t\t\treturn r;\n\t\t\t\t\tr = f;\n\n\t\t\t\t\tz.avail_in--;\n\t\t\t\t\tz.total_in++;\n\t\t\t\t\tistate.need += (z.read_byte(z.next_in_index++) & 0xff);\n\t\t\t\t\tistate.mode = DICT0;\n\t\t\t\t\treturn Z_NEED_DICT;\n\t\t\t\tcase DICT0:\n\t\t\t\t\tistate.mode = BAD;\n\t\t\t\t\tz.msg = \"need dictionary\";\n\t\t\t\t\tistate.marker = 0; // can try inflateSync\n\t\t\t\t\treturn Z_STREAM_ERROR;\n\t\t\t\tcase BLOCKS:\n\n\t\t\t\t\tr = istate.blocks.proc(z, r);\n\t\t\t\t\tif (r == Z_DATA_ERROR) {\n\t\t\t\t\t\tistate.mode = BAD;\n\t\t\t\t\t\tistate.marker = 0; // can try inflateSync\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (r == Z_OK) {\n\t\t\t\t\t\tr = f;\n\t\t\t\t\t}\n\t\t\t\t\tif (r != Z_STREAM_END) {\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t}\n\t\t\t\t\tr = f;\n\t\t\t\t\tistate.blocks.reset(z, istate.was);\n\t\t\t\t\tistate.mode = DONE;\n\t\t\t\t/* falls through */\n\t\t\t\tcase DONE:\n\t\t\t\t\treturn Z_STREAM_END;\n\t\t\t\tcase BAD:\n\t\t\t\t\treturn Z_DATA_ERROR;\n\t\t\t\tdefault:\n\t\t\t\t\treturn Z_STREAM_ERROR;\n\t\t\t}\n\t\t}\n\t};\n\n\tthat.inflateSetDictionary = function (z, dictionary, dictLength) {\n\t\tlet index = 0, length = dictLength;\n\t\tif (!z || !z.istate || z.istate.mode != DICT0)\n\t\t\treturn Z_STREAM_ERROR;\n\t\tconst istate = z.istate;\n\t\tif (length >= (1 << istate.wbits)) {\n\t\t\tlength = (1 << istate.wbits) - 1;\n\t\t\tindex = dictLength - length;\n\t\t}\n\t\tistate.blocks.set_dictionary(dictionary, index, length);\n\t\tistate.mode = BLOCKS;\n\t\treturn Z_OK;\n\t};\n\n\tthat.inflateSync = function (z) {\n\t\tlet n; // number of bytes to look at\n\t\tlet p; // pointer to bytes\n\t\tlet m; // number of marker bytes found in a row\n\t\tlet r, w; // temporaries to save total_in and total_out\n\n\t\t// set up\n\t\tif (!z || !z.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\tconst istate = z.istate;\n\t\tif (istate.mode != BAD) {\n\t\t\tistate.mode = BAD;\n\t\t\tistate.marker = 0;\n\t\t}\n\t\tif ((n = z.avail_in) === 0)\n\t\t\treturn Z_BUF_ERROR;\n\t\tp = z.next_in_index;\n\t\tm = istate.marker;\n\n\t\t// search\n\t\twhile (n !== 0 && m < 4) {\n\t\t\tif (z.read_byte(p) == mark[m]) {\n\t\t\t\tm++;\n\t\t\t} else if (z.read_byte(p) !== 0) {\n\t\t\t\tm = 0;\n\t\t\t} else {\n\t\t\t\tm = 4 - m;\n\t\t\t}\n\t\t\tp++;\n\t\t\tn--;\n\t\t}\n\n\t\t// restore\n\t\tz.total_in += p - z.next_in_index;\n\t\tz.next_in_index = p;\n\t\tz.avail_in = n;\n\t\tistate.marker = m;\n\n\t\t// return no joy or set up to restart on a new block\n\t\tif (m != 4) {\n\t\t\treturn Z_DATA_ERROR;\n\t\t}\n\t\tr = z.total_in;\n\t\tw = z.total_out;\n\t\tinflateReset(z);\n\t\tz.total_in = r;\n\t\tz.total_out = w;\n\t\tistate.mode = BLOCKS;\n\t\treturn Z_OK;\n\t};\n\n\t// Returns true if inflate is currently at the end of a block generated\n\t// by Z_SYNC_FLUSH or Z_FULL_FLUSH. This function is used by one PPP\n\t// implementation to provide an additional safety check. PPP uses\n\t// Z_SYNC_FLUSH\n\t// but removes the length bytes of the resulting empty stored block. When\n\t// decompressing, PPP checks that at the end of input packet, inflate is\n\t// waiting for these length bytes.\n\tthat.inflateSyncPoint = function (z) {\n\t\tif (!z || !z.istate || !z.istate.blocks)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn z.istate.blocks.sync_point();\n\t};\n}\n\n// ZStream\n\nfunction ZStream() {\n}\n\nZStream.prototype = {\n\tinflateInit: function (bits) {\n\t\tconst that = this;\n\t\tthat.istate = new Inflate();\n\t\tif (!bits)\n\t\t\tbits = MAX_BITS;\n\t\treturn that.istate.inflateInit(that, bits);\n\t},\n\n\tinflate: function (f) {\n\t\tconst that = this;\n\t\tif (!that.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn that.istate.inflate(that, f);\n\t},\n\n\tinflateEnd: function () {\n\t\tconst that = this;\n\t\tif (!that.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\tconst ret = that.istate.inflateEnd(that);\n\t\tthat.istate = null;\n\t\treturn ret;\n\t},\n\n\tinflateSync: function () {\n\t\tconst that = this;\n\t\tif (!that.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn that.istate.inflateSync(that);\n\t},\n\tinflateSetDictionary: function (dictionary, dictLength) {\n\t\tconst that = this;\n\t\tif (!that.istate)\n\t\t\treturn Z_STREAM_ERROR;\n\t\treturn that.istate.inflateSetDictionary(that, dictionary, dictLength);\n\t},\n\tread_byte: function (start) {\n\t\tconst that = this;\n\t\treturn that.next_in[start];\n\t},\n\tread_buf: function (start, size) {\n\t\tconst that = this;\n\t\treturn that.next_in.subarray(start, start + size);\n\t}\n};\n\n// Inflater\n\nfunction ZipInflate(options) {\n\tconst that = this;\n\tconst z = new ZStream();\n\tconst bufsize = options && options.chunkSize ? Math.floor(options.chunkSize * 2) : 128 * 1024;\n\tconst flush = Z_NO_FLUSH;\n\tconst buf = new Uint8Array(bufsize);\n\tlet nomoreinput = false;\n\n\tz.inflateInit();\n\tz.next_out = buf;\n\n\tthat.append = function (data, onprogress) {\n\t\tconst buffers = [];\n\t\tlet err, array, lastIndex = 0, bufferIndex = 0, bufferSize = 0;\n\t\tif (data.length === 0)\n\t\t\treturn;\n\t\tz.next_in_index = 0;\n\t\tz.next_in = data;\n\t\tz.avail_in = data.length;\n\t\tdo {\n\t\t\tz.next_out_index = 0;\n\t\t\tz.avail_out = bufsize;\n\t\t\tif ((z.avail_in === 0) && (!nomoreinput)) { // if buffer is empty and more input is available, refill it\n\t\t\t\tz.next_in_index = 0;\n\t\t\t\tnomoreinput = true;\n\t\t\t}\n\t\t\terr = z.inflate(flush);\n\t\t\tif (nomoreinput && (err === Z_BUF_ERROR)) {\n\t\t\t\tif (z.avail_in !== 0)\n\t\t\t\t\tthrow new Error(\"inflating: bad input\");\n\t\t\t} else if (err !== Z_OK && err !== Z_STREAM_END)\n\t\t\t\tthrow new Error(\"inflating: \" + z.msg);\n\t\t\tif ((nomoreinput || err === Z_STREAM_END) && (z.avail_in === data.length))\n\t\t\t\tthrow new Error(\"inflating: bad input\");\n\t\t\tif (z.next_out_index)\n\t\t\t\tif (z.next_out_index === bufsize)\n\t\t\t\t\tbuffers.push(new Uint8Array(buf));\n\t\t\t\telse\n\t\t\t\t\tbuffers.push(buf.slice(0, z.next_out_index));\n\t\t\tbufferSize += z.next_out_index;\n\t\t\tif (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {\n\t\t\t\tonprogress(z.next_in_index);\n\t\t\t\tlastIndex = z.next_in_index;\n\t\t\t}\n\t\t} while (z.avail_in > 0 || z.avail_out === 0);\n\t\tif (buffers.length > 1) {\n\t\t\tarray = new Uint8Array(bufferSize);\n\t\t\tbuffers.forEach(function (chunk) {\n\t\t\t\tarray.set(chunk, bufferIndex);\n\t\t\t\tbufferIndex += chunk.length;\n\t\t\t});\n\t\t} else {\n\t\t\tarray = buffers[0] || new Uint8Array(0);\n\t\t}\n\t\treturn array;\n\t};\n\tthat.flush = function () {\n\t\tz.inflateEnd();\n\t};\n}\n\nexport default ZipInflate;","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global navigator */\n\nconst DEFAULT_CONFIGURATION = {\n\tchunkSize: 512 * 1024,\n\tmaxWorkers: (typeof navigator != \"undefined\" && navigator.hardwareConcurrency) || 2,\n\tterminateWorkerTimeout: 5000,\n\tuseWebWorkers: true,\n\tworkerScripts: undefined\n};\n\nconst config = Object.assign({}, DEFAULT_CONFIGURATION);\n\nexport {\n\tconfigure,\n\tgetConfiguration\n};\n\nfunction getConfiguration() {\n\treturn config;\n}\n\nfunction configure(configuration) {\n\tif (configuration.baseURL !== undefined) {\n\t\tconfig.baseURL = configuration.baseURL;\n\t}\n\tif (configuration.chunkSize !== undefined) {\n\t\tconfig.chunkSize = configuration.chunkSize;\n\t}\n\tif (configuration.maxWorkers !== undefined) {\n\t\tconfig.maxWorkers = configuration.maxWorkers;\n\t}\n\tif (configuration.terminateWorkerTimeout !== undefined) {\n\t\tconfig.terminateWorkerTimeout = configuration.terminateWorkerTimeout;\n\t}\n\tif (configuration.useWebWorkers !== undefined) {\n\t\tconfig.useWebWorkers = configuration.useWebWorkers;\n\t}\n\tif (configuration.Deflate !== undefined) {\n\t\tconfig.Deflate = configuration.Deflate;\n\t}\n\tif (configuration.Inflate !== undefined) {\n\t\tconfig.Inflate = configuration.Inflate;\n\t}\n\tif (configuration.workerScripts !== undefined) {\n\t\tif (configuration.workerScripts.deflate) {\n\t\t\tif (!Array.isArray(configuration.workerScripts.deflate)) {\n\t\t\t\tthrow new Error(\"workerScripts.deflate must be an array\");\n\t\t\t}\n\t\t\tif (!config.workerScripts) {\n\t\t\t\tconfig.workerScripts = {};\n\t\t\t}\n\t\t\tconfig.workerScripts.deflate = configuration.workerScripts.deflate;\n\t\t}\n\t\tif (configuration.workerScripts.inflate) {\n\t\t\tif (!Array.isArray(configuration.workerScripts.inflate)) {\n\t\t\t\tthrow new Error(\"workerScripts.inflate must be an array\");\n\t\t\t}\n\t\t\tif (!config.workerScripts) {\n\t\t\t\tconfig.workerScripts = {};\n\t\t\t}\n\t\t\tconfig.workerScripts.inflate = configuration.workerScripts.inflate;\n\t\t}\n\t}\n}\n","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst table = {\n\t\"application\": {\n\t\t\"andrew-inset\": \"ez\",\n\t\t\"annodex\": \"anx\",\n\t\t\"atom+xml\": \"atom\",\n\t\t\"atomcat+xml\": \"atomcat\",\n\t\t\"atomserv+xml\": \"atomsrv\",\n\t\t\"bbolin\": \"lin\",\n\t\t\"cap\": [\"cap\", \"pcap\"],\n\t\t\"cu-seeme\": \"cu\",\n\t\t\"davmount+xml\": \"davmount\",\n\t\t\"dsptype\": \"tsp\",\n\t\t\"ecmascript\": [\"es\", \"ecma\"],\n\t\t\"futuresplash\": \"spl\",\n\t\t\"hta\": \"hta\",\n\t\t\"java-archive\": \"jar\",\n\t\t\"java-serialized-object\": \"ser\",\n\t\t\"java-vm\": \"class\",\n\t\t\"javascript\": \"js\",\n\t\t\"m3g\": \"m3g\",\n\t\t\"mac-binhex40\": \"hqx\",\n\t\t\"mathematica\": [\"nb\", \"ma\", \"mb\"],\n\t\t\"msaccess\": \"mdb\",\n\t\t\"msword\": [\"doc\", \"dot\"],\n\t\t\"mxf\": \"mxf\",\n\t\t\"oda\": \"oda\",\n\t\t\"ogg\": \"ogx\",\n\t\t\"pdf\": \"pdf\",\n\t\t\"pgp-keys\": \"key\",\n\t\t\"pgp-signature\": [\"asc\", \"sig\"],\n\t\t\"pics-rules\": \"prf\",\n\t\t\"postscript\": [\"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\"],\n\t\t\"rar\": \"rar\",\n\t\t\"rdf+xml\": \"rdf\",\n\t\t\"rss+xml\": \"rss\",\n\t\t\"rtf\": \"rtf\",\n\t\t\"smil\": [\"smi\", \"smil\"],\n\t\t\"xhtml+xml\": [\"xhtml\", \"xht\"],\n\t\t\"xml\": [\"xml\", \"xsl\", \"xsd\"],\n\t\t\"xspf+xml\": \"xspf\",\n\t\t\"zip\": \"zip\",\n\t\t\"vnd.android.package-archive\": \"apk\",\n\t\t\"vnd.cinderella\": \"cdy\",\n\t\t\"vnd.google-earth.kml+xml\": \"kml\",\n\t\t\"vnd.google-earth.kmz\": \"kmz\",\n\t\t\"vnd.mozilla.xul+xml\": \"xul\",\n\t\t\"vnd.ms-excel\": [\"xls\", \"xlb\", \"xlt\", \"xlm\", \"xla\", \"xlc\", \"xlw\"],\n\t\t\"vnd.ms-pki.seccat\": \"cat\",\n\t\t\"vnd.ms-pki.stl\": \"stl\",\n\t\t\"vnd.ms-powerpoint\": [\"ppt\", \"pps\", \"pot\"],\n\t\t\"vnd.oasis.opendocument.chart\": \"odc\",\n\t\t\"vnd.oasis.opendocument.database\": \"odb\",\n\t\t\"vnd.oasis.opendocument.formula\": \"odf\",\n\t\t\"vnd.oasis.opendocument.graphics\": \"odg\",\n\t\t\"vnd.oasis.opendocument.graphics-template\": \"otg\",\n\t\t\"vnd.oasis.opendocument.image\": \"odi\",\n\t\t\"vnd.oasis.opendocument.presentation\": \"odp\",\n\t\t\"vnd.oasis.opendocument.presentation-template\": \"otp\",\n\t\t\"vnd.oasis.opendocument.spreadsheet\": \"ods\",\n\t\t\"vnd.oasis.opendocument.spreadsheet-template\": \"ots\",\n\t\t\"vnd.oasis.opendocument.text\": \"odt\",\n\t\t\"vnd.oasis.opendocument.text-master\": \"odm\",\n\t\t\"vnd.oasis.opendocument.text-template\": \"ott\",\n\t\t\"vnd.oasis.opendocument.text-web\": \"oth\",\n\t\t\"vnd.openxmlformats-officedocument.spreadsheetml.sheet\": \"xlsx\",\n\t\t\"vnd.openxmlformats-officedocument.spreadsheetml.template\": \"xltx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.presentation\": \"pptx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.slideshow\": \"ppsx\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.template\": \"potx\",\n\t\t\"vnd.openxmlformats-officedocument.wordprocessingml.document\": \"docx\",\n\t\t\"vnd.openxmlformats-officedocument.wordprocessingml.template\": \"dotx\",\n\t\t\"vnd.smaf\": \"mmf\",\n\t\t\"vnd.stardivision.calc\": \"sdc\",\n\t\t\"vnd.stardivision.chart\": \"sds\",\n\t\t\"vnd.stardivision.draw\": \"sda\",\n\t\t\"vnd.stardivision.impress\": \"sdd\",\n\t\t\"vnd.stardivision.math\": [\"sdf\", \"smf\"],\n\t\t\"vnd.stardivision.writer\": [\"sdw\", \"vor\"],\n\t\t\"vnd.stardivision.writer-global\": \"sgl\",\n\t\t\"vnd.sun.xml.calc\": \"sxc\",\n\t\t\"vnd.sun.xml.calc.template\": \"stc\",\n\t\t\"vnd.sun.xml.draw\": \"sxd\",\n\t\t\"vnd.sun.xml.draw.template\": \"std\",\n\t\t\"vnd.sun.xml.impress\": \"sxi\",\n\t\t\"vnd.sun.xml.impress.template\": \"sti\",\n\t\t\"vnd.sun.xml.math\": \"sxm\",\n\t\t\"vnd.sun.xml.writer\": \"sxw\",\n\t\t\"vnd.sun.xml.writer.global\": \"sxg\",\n\t\t\"vnd.sun.xml.writer.template\": \"stw\",\n\t\t\"vnd.symbian.install\": [\"sis\", \"sisx\"],\n\t\t\"vnd.visio\": [\"vsd\", \"vst\", \"vss\", \"vsw\"],\n\t\t\"vnd.wap.wbxml\": \"wbxml\",\n\t\t\"vnd.wap.wmlc\": \"wmlc\",\n\t\t\"vnd.wap.wmlscriptc\": \"wmlsc\",\n\t\t\"vnd.wordperfect\": \"wpd\",\n\t\t\"vnd.wordperfect5.1\": \"wp5\",\n\t\t\"x-123\": \"wk\",\n\t\t\"x-7z-compressed\": \"7z\",\n\t\t\"x-abiword\": \"abw\",\n\t\t\"x-apple-diskimage\": \"dmg\",\n\t\t\"x-bcpio\": \"bcpio\",\n\t\t\"x-bittorrent\": \"torrent\",\n\t\t\"x-cbr\": [\"cbr\", \"cba\", \"cbt\", \"cb7\"],\n\t\t\"x-cbz\": \"cbz\",\n\t\t\"x-cdf\": [\"cdf\", \"cda\"],\n\t\t\"x-cdlink\": \"vcd\",\n\t\t\"x-chess-pgn\": \"pgn\",\n\t\t\"x-cpio\": \"cpio\",\n\t\t\"x-csh\": \"csh\",\n\t\t\"x-debian-package\": [\"deb\", \"udeb\"],\n\t\t\"x-director\": [\"dcr\", \"dir\", \"dxr\", \"cst\", \"cct\", \"cxt\", \"w3d\", \"fgd\", \"swa\"],\n\t\t\"x-dms\": \"dms\",\n\t\t\"x-doom\": \"wad\",\n\t\t\"x-dvi\": \"dvi\",\n\t\t\"x-httpd-eruby\": \"rhtml\",\n\t\t\"x-font\": \"pcf.Z\",\n\t\t\"x-freemind\": \"mm\",\n\t\t\"x-gnumeric\": \"gnumeric\",\n\t\t\"x-go-sgf\": \"sgf\",\n\t\t\"x-graphing-calculator\": \"gcf\",\n\t\t\"x-gtar\": [\"gtar\", \"taz\"],\n\t\t\"x-hdf\": \"hdf\",\n\t\t\"x-httpd-php\": [\"phtml\", \"pht\", \"php\"],\n\t\t\"x-httpd-php-source\": \"phps\",\n\t\t\"x-httpd-php3\": \"php3\",\n\t\t\"x-httpd-php3-preprocessed\": \"php3p\",\n\t\t\"x-httpd-php4\": \"php4\",\n\t\t\"x-httpd-php5\": \"php5\",\n\t\t\"x-ica\": \"ica\",\n\t\t\"x-info\": \"info\",\n\t\t\"x-internet-signup\": [\"ins\", \"isp\"],\n\t\t\"x-iphone\": \"iii\",\n\t\t\"x-iso9660-image\": \"iso\",\n\t\t\"x-java-jnlp-file\": \"jnlp\",\n\t\t\"x-jmol\": \"jmz\",\n\t\t\"x-killustrator\": \"kil\",\n\t\t\"x-koan\": [\"skp\", \"skd\", \"skt\", \"skm\"],\n\t\t\"x-kpresenter\": [\"kpr\", \"kpt\"],\n\t\t\"x-kword\": [\"kwd\", \"kwt\"],\n\t\t\"x-latex\": \"latex\",\n\t\t\"x-lha\": \"lha\",\n\t\t\"x-lyx\": \"lyx\",\n\t\t\"x-lzh\": \"lzh\",\n\t\t\"x-lzx\": \"lzx\",\n\t\t\"x-maker\": [\"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\"],\n\t\t\"x-ms-wmd\": \"wmd\",\n\t\t\"x-ms-wmz\": \"wmz\",\n\t\t\"x-msdos-program\": [\"com\", \"exe\", \"bat\", \"dll\"],\n\t\t\"x-msi\": \"msi\",\n\t\t\"x-netcdf\": [\"nc\", \"cdf\"],\n\t\t\"x-ns-proxy-autoconfig\": [\"pac\", \"dat\"],\n\t\t\"x-nwc\": \"nwc\",\n\t\t\"x-object\": \"o\",\n\t\t\"x-oz-application\": \"oza\",\n\t\t\"x-pkcs7-certreqresp\": \"p7r\",\n\t\t\"x-python-code\": [\"pyc\", \"pyo\"],\n\t\t\"x-qgis\": [\"qgs\", \"shp\", \"shx\"],\n\t\t\"x-quicktimeplayer\": \"qtl\",\n\t\t\"x-redhat-package-manager\": \"rpm\",\n\t\t\"x-ruby\": \"rb\",\n\t\t\"x-sh\": \"sh\",\n\t\t\"x-shar\": \"shar\",\n\t\t\"x-shockwave-flash\": [\"swf\", \"swfl\"],\n\t\t\"x-silverlight\": \"scr\",\n\t\t\"x-stuffit\": \"sit\",\n\t\t\"x-sv4cpio\": \"sv4cpio\",\n\t\t\"x-sv4crc\": \"sv4crc\",\n\t\t\"x-tar\": \"tar\",\n\t\t\"x-tcl\": \"tcl\",\n\t\t\"x-tex-gf\": \"gf\",\n\t\t\"x-tex-pk\": \"pk\",\n\t\t\"x-texinfo\": [\"texinfo\", \"texi\"],\n\t\t\"x-trash\": [\"~\", \"%\", \"bak\", \"old\", \"sik\"],\n\t\t\"x-troff\": [\"t\", \"tr\", \"roff\"],\n\t\t\"x-troff-man\": \"man\",\n\t\t\"x-troff-me\": \"me\",\n\t\t\"x-troff-ms\": \"ms\",\n\t\t\"x-ustar\": \"ustar\",\n\t\t\"x-wais-source\": \"src\",\n\t\t\"x-wingz\": \"wz\",\n\t\t\"x-x509-ca-cert\": [\"crt\", \"der\", \"cer\"],\n\t\t\"x-xcf\": \"xcf\",\n\t\t\"x-xfig\": \"fig\",\n\t\t\"x-xpinstall\": \"xpi\",\n\t\t\"applixware\": \"aw\",\n\t\t\"atomsvc+xml\": \"atomsvc\",\n\t\t\"ccxml+xml\": \"ccxml\",\n\t\t\"cdmi-capability\": \"cdmia\",\n\t\t\"cdmi-container\": \"cdmic\",\n\t\t\"cdmi-domain\": \"cdmid\",\n\t\t\"cdmi-object\": \"cdmio\",\n\t\t\"cdmi-queue\": \"cdmiq\",\n\t\t\"docbook+xml\": \"dbk\",\n\t\t\"dssc+der\": \"dssc\",\n\t\t\"dssc+xml\": \"xdssc\",\n\t\t\"emma+xml\": \"emma\",\n\t\t\"epub+zip\": \"epub\",\n\t\t\"exi\": \"exi\",\n\t\t\"font-tdpfr\": \"pfr\",\n\t\t\"gml+xml\": \"gml\",\n\t\t\"gpx+xml\": \"gpx\",\n\t\t\"gxf\": \"gxf\",\n\t\t\"hyperstudio\": \"stk\",\n\t\t\"inkml+xml\": [\"ink\", \"inkml\"],\n\t\t\"ipfix\": \"ipfix\",\n\t\t\"json\": \"json\",\n\t\t\"jsonml+json\": \"jsonml\",\n\t\t\"lost+xml\": \"lostxml\",\n\t\t\"mads+xml\": \"mads\",\n\t\t\"marc\": \"mrc\",\n\t\t\"marcxml+xml\": \"mrcx\",\n\t\t\"mathml+xml\": \"mathml\",\n\t\t\"mbox\": \"mbox\",\n\t\t\"mediaservercontrol+xml\": \"mscml\",\n\t\t\"metalink+xml\": \"metalink\",\n\t\t\"metalink4+xml\": \"meta4\",\n\t\t\"mets+xml\": \"mets\",\n\t\t\"mods+xml\": \"mods\",\n\t\t\"mp21\": [\"m21\", \"mp21\"],\n\t\t\"mp4\": \"mp4s\",\n\t\t\"oebps-package+xml\": \"opf\",\n\t\t\"omdoc+xml\": \"omdoc\",\n\t\t\"onenote\": [\"onetoc\", \"onetoc2\", \"onetmp\", \"onepkg\"],\n\t\t\"oxps\": \"oxps\",\n\t\t\"patch-ops-error+xml\": \"xer\",\n\t\t\"pgp-encrypted\": \"pgp\",\n\t\t\"pkcs10\": \"p10\",\n\t\t\"pkcs7-mime\": [\"p7m\", \"p7c\"],\n\t\t\"pkcs7-signature\": \"p7s\",\n\t\t\"pkcs8\": \"p8\",\n\t\t\"pkix-attr-cert\": \"ac\",\n\t\t\"pkix-crl\": \"crl\",\n\t\t\"pkix-pkipath\": \"pkipath\",\n\t\t\"pkixcmp\": \"pki\",\n\t\t\"pls+xml\": \"pls\",\n\t\t\"prs.cww\": \"cww\",\n\t\t\"pskc+xml\": \"pskcxml\",\n\t\t\"reginfo+xml\": \"rif\",\n\t\t\"relax-ng-compact-syntax\": \"rnc\",\n\t\t\"resource-lists+xml\": \"rl\",\n\t\t\"resource-lists-diff+xml\": \"rld\",\n\t\t\"rls-services+xml\": \"rs\",\n\t\t\"rpki-ghostbusters\": \"gbr\",\n\t\t\"rpki-manifest\": \"mft\",\n\t\t\"rpki-roa\": \"roa\",\n\t\t\"rsd+xml\": \"rsd\",\n\t\t\"sbml+xml\": \"sbml\",\n\t\t\"scvp-cv-request\": \"scq\",\n\t\t\"scvp-cv-response\": \"scs\",\n\t\t\"scvp-vp-request\": \"spq\",\n\t\t\"scvp-vp-response\": \"spp\",\n\t\t\"sdp\": \"sdp\",\n\t\t\"set-payment-initiation\": \"setpay\",\n\t\t\"set-registration-initiation\": \"setreg\",\n\t\t\"shf+xml\": \"shf\",\n\t\t\"sparql-query\": \"rq\",\n\t\t\"sparql-results+xml\": \"srx\",\n\t\t\"srgs\": \"gram\",\n\t\t\"srgs+xml\": \"grxml\",\n\t\t\"sru+xml\": \"sru\",\n\t\t\"ssdl+xml\": \"ssdl\",\n\t\t\"ssml+xml\": \"ssml\",\n\t\t\"tei+xml\": [\"tei\", \"teicorpus\"],\n\t\t\"thraud+xml\": \"tfi\",\n\t\t\"timestamped-data\": \"tsd\",\n\t\t\"vnd.3gpp.pic-bw-large\": \"plb\",\n\t\t\"vnd.3gpp.pic-bw-small\": \"psb\",\n\t\t\"vnd.3gpp.pic-bw-var\": \"pvb\",\n\t\t\"vnd.3gpp2.tcap\": \"tcap\",\n\t\t\"vnd.3m.post-it-notes\": \"pwn\",\n\t\t\"vnd.accpac.simply.aso\": \"aso\",\n\t\t\"vnd.accpac.simply.imp\": \"imp\",\n\t\t\"vnd.acucobol\": \"acu\",\n\t\t\"vnd.acucorp\": [\"atc\", \"acutc\"],\n\t\t\"vnd.adobe.air-application-installer-package+zip\": \"air\",\n\t\t\"vnd.adobe.formscentral.fcdt\": \"fcdt\",\n\t\t\"vnd.adobe.fxp\": [\"fxp\", \"fxpl\"],\n\t\t\"vnd.adobe.xdp+xml\": \"xdp\",\n\t\t\"vnd.adobe.xfdf\": \"xfdf\",\n\t\t\"vnd.ahead.space\": \"ahead\",\n\t\t\"vnd.airzip.filesecure.azf\": \"azf\",\n\t\t\"vnd.airzip.filesecure.azs\": \"azs\",\n\t\t\"vnd.amazon.ebook\": \"azw\",\n\t\t\"vnd.americandynamics.acc\": \"acc\",\n\t\t\"vnd.amiga.ami\": \"ami\",\n\t\t\"vnd.anser-web-certificate-issue-initiation\": \"cii\",\n\t\t\"vnd.anser-web-funds-transfer-initiation\": \"fti\",\n\t\t\"vnd.antix.game-component\": \"atx\",\n\t\t\"vnd.apple.installer+xml\": \"mpkg\",\n\t\t\"vnd.apple.mpegurl\": \"m3u8\",\n\t\t\"vnd.aristanetworks.swi\": \"swi\",\n\t\t\"vnd.astraea-software.iota\": \"iota\",\n\t\t\"vnd.audiograph\": \"aep\",\n\t\t\"vnd.blueice.multipass\": \"mpm\",\n\t\t\"vnd.bmi\": \"bmi\",\n\t\t\"vnd.businessobjects\": \"rep\",\n\t\t\"vnd.chemdraw+xml\": \"cdxml\",\n\t\t\"vnd.chipnuts.karaoke-mmd\": \"mmd\",\n\t\t\"vnd.claymore\": \"cla\",\n\t\t\"vnd.cloanto.rp9\": \"rp9\",\n\t\t\"vnd.clonk.c4group\": [\"c4g\", \"c4d\", \"c4f\", \"c4p\", \"c4u\"],\n\t\t\"vnd.cluetrust.cartomobile-config\": \"c11amc\",\n\t\t\"vnd.cluetrust.cartomobile-config-pkg\": \"c11amz\",\n\t\t\"vnd.commonspace\": \"csp\",\n\t\t\"vnd.contact.cmsg\": \"cdbcmsg\",\n\t\t\"vnd.cosmocaller\": \"cmc\",\n\t\t\"vnd.crick.clicker\": \"clkx\",\n\t\t\"vnd.crick.clicker.keyboard\": \"clkk\",\n\t\t\"vnd.crick.clicker.palette\": \"clkp\",\n\t\t\"vnd.crick.clicker.template\": \"clkt\",\n\t\t\"vnd.crick.clicker.wordbank\": \"clkw\",\n\t\t\"vnd.criticaltools.wbs+xml\": \"wbs\",\n\t\t\"vnd.ctc-posml\": \"pml\",\n\t\t\"vnd.cups-ppd\": \"ppd\",\n\t\t\"vnd.curl.car\": \"car\",\n\t\t\"vnd.curl.pcurl\": \"pcurl\",\n\t\t\"vnd.dart\": \"dart\",\n\t\t\"vnd.data-vision.rdz\": \"rdz\",\n\t\t\"vnd.dece.data\": [\"uvf\", \"uvvf\", \"uvd\", \"uvvd\"],\n\t\t\"vnd.dece.ttml+xml\": [\"uvt\", \"uvvt\"],\n\t\t\"vnd.dece.unspecified\": [\"uvx\", \"uvvx\"],\n\t\t\"vnd.dece.zip\": [\"uvz\", \"uvvz\"],\n\t\t\"vnd.denovo.fcselayout-link\": \"fe_launch\",\n\t\t\"vnd.dna\": \"dna\",\n\t\t\"vnd.dolby.mlp\": \"mlp\",\n\t\t\"vnd.dpgraph\": \"dpg\",\n\t\t\"vnd.dreamfactory\": \"dfac\",\n\t\t\"vnd.ds-keypoint\": \"kpxx\",\n\t\t\"vnd.dvb.ait\": \"ait\",\n\t\t\"vnd.dvb.service\": \"svc\",\n\t\t\"vnd.dynageo\": \"geo\",\n\t\t\"vnd.ecowin.chart\": \"mag\",\n\t\t\"vnd.enliven\": \"nml\",\n\t\t\"vnd.epson.esf\": \"esf\",\n\t\t\"vnd.epson.msf\": \"msf\",\n\t\t\"vnd.epson.quickanime\": \"qam\",\n\t\t\"vnd.epson.salt\": \"slt\",\n\t\t\"vnd.epson.ssf\": \"ssf\",\n\t\t\"vnd.eszigno3+xml\": [\"es3\", \"et3\"],\n\t\t\"vnd.ezpix-album\": \"ez2\",\n\t\t\"vnd.ezpix-package\": \"ez3\",\n\t\t\"vnd.fdf\": \"fdf\",\n\t\t\"vnd.fdsn.mseed\": \"mseed\",\n\t\t\"vnd.fdsn.seed\": [\"seed\", \"dataless\"],\n\t\t\"vnd.flographit\": \"gph\",\n\t\t\"vnd.fluxtime.clip\": \"ftc\",\n\t\t\"vnd.framemaker\": [\"fm\", \"frame\", \"maker\", \"book\"],\n\t\t\"vnd.frogans.fnc\": \"fnc\",\n\t\t\"vnd.frogans.ltf\": \"ltf\",\n\t\t\"vnd.fsc.weblaunch\": \"fsc\",\n\t\t\"vnd.fujitsu.oasys\": \"oas\",\n\t\t\"vnd.fujitsu.oasys2\": \"oa2\",\n\t\t\"vnd.fujitsu.oasys3\": \"oa3\",\n\t\t\"vnd.fujitsu.oasysgp\": \"fg5\",\n\t\t\"vnd.fujitsu.oasysprs\": \"bh2\",\n\t\t\"vnd.fujixerox.ddd\": \"ddd\",\n\t\t\"vnd.fujixerox.docuworks\": \"xdw\",\n\t\t\"vnd.fujixerox.docuworks.binder\": \"xbd\",\n\t\t\"vnd.fuzzysheet\": \"fzs\",\n\t\t\"vnd.genomatix.tuxedo\": \"txd\",\n\t\t\"vnd.geogebra.file\": \"ggb\",\n\t\t\"vnd.geogebra.tool\": \"ggt\",\n\t\t\"vnd.geometry-explorer\": [\"gex\", \"gre\"],\n\t\t\"vnd.geonext\": \"gxt\",\n\t\t\"vnd.geoplan\": \"g2w\",\n\t\t\"vnd.geospace\": \"g3w\",\n\t\t\"vnd.gmx\": \"gmx\",\n\t\t\"vnd.grafeq\": [\"gqf\", \"gqs\"],\n\t\t\"vnd.groove-account\": \"gac\",\n\t\t\"vnd.groove-help\": \"ghf\",\n\t\t\"vnd.groove-identity-message\": \"gim\",\n\t\t\"vnd.groove-injector\": \"grv\",\n\t\t\"vnd.groove-tool-message\": \"gtm\",\n\t\t\"vnd.groove-tool-template\": \"tpl\",\n\t\t\"vnd.groove-vcard\": \"vcg\",\n\t\t\"vnd.hal+xml\": \"hal\",\n\t\t\"vnd.handheld-entertainment+xml\": \"zmm\",\n\t\t\"vnd.hbci\": \"hbci\",\n\t\t\"vnd.hhe.lesson-player\": \"les\",\n\t\t\"vnd.hp-hpgl\": \"hpgl\",\n\t\t\"vnd.hp-hpid\": \"hpid\",\n\t\t\"vnd.hp-hps\": \"hps\",\n\t\t\"vnd.hp-jlyt\": \"jlt\",\n\t\t\"vnd.hp-pcl\": \"pcl\",\n\t\t\"vnd.hp-pclxl\": \"pclxl\",\n\t\t\"vnd.hydrostatix.sof-data\": \"sfd-hdstx\",\n\t\t\"vnd.ibm.minipay\": \"mpy\",\n\t\t\"vnd.ibm.modcap\": [\"afp\", \"listafp\", \"list3820\"],\n\t\t\"vnd.ibm.rights-management\": \"irm\",\n\t\t\"vnd.ibm.secure-container\": \"sc\",\n\t\t\"vnd.iccprofile\": [\"icc\", \"icm\"],\n\t\t\"vnd.igloader\": \"igl\",\n\t\t\"vnd.immervision-ivp\": \"ivp\",\n\t\t\"vnd.immervision-ivu\": \"ivu\",\n\t\t\"vnd.insors.igm\": \"igm\",\n\t\t\"vnd.intercon.formnet\": [\"xpw\", \"xpx\"],\n\t\t\"vnd.intergeo\": \"i2g\",\n\t\t\"vnd.intu.qbo\": \"qbo\",\n\t\t\"vnd.intu.qfx\": \"qfx\",\n\t\t\"vnd.ipunplugged.rcprofile\": \"rcprofile\",\n\t\t\"vnd.irepository.package+xml\": \"irp\",\n\t\t\"vnd.is-xpr\": \"xpr\",\n\t\t\"vnd.isac.fcs\": \"fcs\",\n\t\t\"vnd.jam\": \"jam\",\n\t\t\"vnd.jcp.javame.midlet-rms\": \"rms\",\n\t\t\"vnd.jisp\": \"jisp\",\n\t\t\"vnd.joost.joda-archive\": \"joda\",\n\t\t\"vnd.kahootz\": [\"ktz\", \"ktr\"],\n\t\t\"vnd.kde.karbon\": \"karbon\",\n\t\t\"vnd.kde.kchart\": \"chrt\",\n\t\t\"vnd.kde.kformula\": \"kfo\",\n\t\t\"vnd.kde.kivio\": \"flw\",\n\t\t\"vnd.kde.kontour\": \"kon\",\n\t\t\"vnd.kde.kpresenter\": [\"kpr\", \"kpt\"],\n\t\t\"vnd.kde.kspread\": \"ksp\",\n\t\t\"vnd.kde.kword\": [\"kwd\", \"kwt\"],\n\t\t\"vnd.kenameaapp\": \"htke\",\n\t\t\"vnd.kidspiration\": \"kia\",\n\t\t\"vnd.kinar\": [\"kne\", \"knp\"],\n\t\t\"vnd.koan\": [\"skp\", \"skd\", \"skt\", \"skm\"],\n\t\t\"vnd.kodak-descriptor\": \"sse\",\n\t\t\"vnd.las.las+xml\": \"lasxml\",\n\t\t\"vnd.llamagraphics.life-balance.desktop\": \"lbd\",\n\t\t\"vnd.llamagraphics.life-balance.exchange+xml\": \"lbe\",\n\t\t\"vnd.lotus-1-2-3\": \"123\",\n\t\t\"vnd.lotus-approach\": \"apr\",\n\t\t\"vnd.lotus-freelance\": \"pre\",\n\t\t\"vnd.lotus-notes\": \"nsf\",\n\t\t\"vnd.lotus-organizer\": \"org\",\n\t\t\"vnd.lotus-screencam\": \"scm\",\n\t\t\"vnd.lotus-wordpro\": \"lwp\",\n\t\t\"vnd.macports.portpkg\": \"portpkg\",\n\t\t\"vnd.mcd\": \"mcd\",\n\t\t\"vnd.medcalcdata\": \"mc1\",\n\t\t\"vnd.mediastation.cdkey\": \"cdkey\",\n\t\t\"vnd.mfer\": \"mwf\",\n\t\t\"vnd.mfmp\": \"mfm\",\n\t\t\"vnd.micrografx.flo\": \"flo\",\n\t\t\"vnd.micrografx.igx\": \"igx\",\n\t\t\"vnd.mif\": \"mif\",\n\t\t\"vnd.mobius.daf\": \"daf\",\n\t\t\"vnd.mobius.dis\": \"dis\",\n\t\t\"vnd.mobius.mbk\": \"mbk\",\n\t\t\"vnd.mobius.mqy\": \"mqy\",\n\t\t\"vnd.mobius.msl\": \"msl\",\n\t\t\"vnd.mobius.plc\": \"plc\",\n\t\t\"vnd.mobius.txf\": \"txf\",\n\t\t\"vnd.mophun.application\": \"mpn\",\n\t\t\"vnd.mophun.certificate\": \"mpc\",\n\t\t\"vnd.ms-artgalry\": \"cil\",\n\t\t\"vnd.ms-cab-compressed\": \"cab\",\n\t\t\"vnd.ms-excel.addin.macroenabled.12\": \"xlam\",\n\t\t\"vnd.ms-excel.sheet.binary.macroenabled.12\": \"xlsb\",\n\t\t\"vnd.ms-excel.sheet.macroenabled.12\": \"xlsm\",\n\t\t\"vnd.ms-excel.template.macroenabled.12\": \"xltm\",\n\t\t\"vnd.ms-fontobject\": \"eot\",\n\t\t\"vnd.ms-htmlhelp\": \"chm\",\n\t\t\"vnd.ms-ims\": \"ims\",\n\t\t\"vnd.ms-lrm\": \"lrm\",\n\t\t\"vnd.ms-officetheme\": \"thmx\",\n\t\t\"vnd.ms-powerpoint.addin.macroenabled.12\": \"ppam\",\n\t\t\"vnd.ms-powerpoint.presentation.macroenabled.12\": \"pptm\",\n\t\t\"vnd.ms-powerpoint.slide.macroenabled.12\": \"sldm\",\n\t\t\"vnd.ms-powerpoint.slideshow.macroenabled.12\": \"ppsm\",\n\t\t\"vnd.ms-powerpoint.template.macroenabled.12\": \"potm\",\n\t\t\"vnd.ms-project\": [\"mpp\", \"mpt\"],\n\t\t\"vnd.ms-word.document.macroenabled.12\": \"docm\",\n\t\t\"vnd.ms-word.template.macroenabled.12\": \"dotm\",\n\t\t\"vnd.ms-works\": [\"wps\", \"wks\", \"wcm\", \"wdb\"],\n\t\t\"vnd.ms-wpl\": \"wpl\",\n\t\t\"vnd.ms-xpsdocument\": \"xps\",\n\t\t\"vnd.mseq\": \"mseq\",\n\t\t\"vnd.musician\": \"mus\",\n\t\t\"vnd.muvee.style\": \"msty\",\n\t\t\"vnd.mynfc\": \"taglet\",\n\t\t\"vnd.neurolanguage.nlu\": \"nlu\",\n\t\t\"vnd.nitf\": [\"ntf\", \"nitf\"],\n\t\t\"vnd.noblenet-directory\": \"nnd\",\n\t\t\"vnd.noblenet-sealer\": \"nns\",\n\t\t\"vnd.noblenet-web\": \"nnw\",\n\t\t\"vnd.nokia.n-gage.data\": \"ngdat\",\n\t\t\"vnd.nokia.n-gage.symbian.install\": \"n-gage\",\n\t\t\"vnd.nokia.radio-preset\": \"rpst\",\n\t\t\"vnd.nokia.radio-presets\": \"rpss\",\n\t\t\"vnd.novadigm.edm\": \"edm\",\n\t\t\"vnd.novadigm.edx\": \"edx\",\n\t\t\"vnd.novadigm.ext\": \"ext\",\n\t\t\"vnd.oasis.opendocument.chart-template\": \"otc\",\n\t\t\"vnd.oasis.opendocument.formula-template\": \"odft\",\n\t\t\"vnd.oasis.opendocument.image-template\": \"oti\",\n\t\t\"vnd.olpc-sugar\": \"xo\",\n\t\t\"vnd.oma.dd2+xml\": \"dd2\",\n\t\t\"vnd.openofficeorg.extension\": \"oxt\",\n\t\t\"vnd.openxmlformats-officedocument.presentationml.slide\": \"sldx\",\n\t\t\"vnd.osgeo.mapguide.package\": \"mgp\",\n\t\t\"vnd.osgi.dp\": \"dp\",\n\t\t\"vnd.osgi.subsystem\": \"esa\",\n\t\t\"vnd.palm\": [\"pdb\", \"pqa\", \"oprc\"],\n\t\t\"vnd.pawaafile\": \"paw\",\n\t\t\"vnd.pg.format\": \"str\",\n\t\t\"vnd.pg.osasli\": \"ei6\",\n\t\t\"vnd.picsel\": \"efif\",\n\t\t\"vnd.pmi.widget\": \"wg\",\n\t\t\"vnd.pocketlearn\": \"plf\",\n\t\t\"vnd.powerbuilder6\": \"pbd\",\n\t\t\"vnd.previewsystems.box\": \"box\",\n\t\t\"vnd.proteus.magazine\": \"mgz\",\n\t\t\"vnd.publishare-delta-tree\": \"qps\",\n\t\t\"vnd.pvi.ptid1\": \"ptid\",\n\t\t\"vnd.quark.quarkxpress\": [\"qxd\", \"qxt\", \"qwd\", \"qwt\", \"qxl\", \"qxb\"],\n\t\t\"vnd.realvnc.bed\": \"bed\",\n\t\t\"vnd.recordare.musicxml\": \"mxl\",\n\t\t\"vnd.recordare.musicxml+xml\": \"musicxml\",\n\t\t\"vnd.rig.cryptonote\": \"cryptonote\",\n\t\t\"vnd.rn-realmedia\": \"rm\",\n\t\t\"vnd.rn-realmedia-vbr\": \"rmvb\",\n\t\t\"vnd.route66.link66+xml\": \"link66\",\n\t\t\"vnd.sailingtracker.track\": \"st\",\n\t\t\"vnd.seemail\": \"see\",\n\t\t\"vnd.sema\": \"sema\",\n\t\t\"vnd.semd\": \"semd\",\n\t\t\"vnd.semf\": \"semf\",\n\t\t\"vnd.shana.informed.formdata\": \"ifm\",\n\t\t\"vnd.shana.informed.formtemplate\": \"itp\",\n\t\t\"vnd.shana.informed.interchange\": \"iif\",\n\t\t\"vnd.shana.informed.package\": \"ipk\",\n\t\t\"vnd.simtech-mindmapper\": [\"twd\", \"twds\"],\n\t\t\"vnd.smart.teacher\": \"teacher\",\n\t\t\"vnd.solent.sdkm+xml\": [\"sdkm\", \"sdkd\"],\n\t\t\"vnd.spotfire.dxp\": \"dxp\",\n\t\t\"vnd.spotfire.sfs\": \"sfs\",\n\t\t\"vnd.stepmania.package\": \"smzip\",\n\t\t\"vnd.stepmania.stepchart\": \"sm\",\n\t\t\"vnd.sus-calendar\": [\"sus\", \"susp\"],\n\t\t\"vnd.svd\": \"svd\",\n\t\t\"vnd.syncml+xml\": \"xsm\",\n\t\t\"vnd.syncml.dm+wbxml\": \"bdm\",\n\t\t\"vnd.syncml.dm+xml\": \"xdm\",\n\t\t\"vnd.tao.intent-module-archive\": \"tao\",\n\t\t\"vnd.tcpdump.pcap\": [\"pcap\", \"cap\", \"dmp\"],\n\t\t\"vnd.tmobile-livetv\": \"tmo\",\n\t\t\"vnd.trid.tpt\": \"tpt\",\n\t\t\"vnd.triscape.mxs\": \"mxs\",\n\t\t\"vnd.trueapp\": \"tra\",\n\t\t\"vnd.ufdl\": [\"ufd\", \"ufdl\"],\n\t\t\"vnd.uiq.theme\": \"utz\",\n\t\t\"vnd.umajin\": \"umj\",\n\t\t\"vnd.unity\": \"unityweb\",\n\t\t\"vnd.uoml+xml\": \"uoml\",\n\t\t\"vnd.vcx\": \"vcx\",\n\t\t\"vnd.visionary\": \"vis\",\n\t\t\"vnd.vsf\": \"vsf\",\n\t\t\"vnd.webturbo\": \"wtb\",\n\t\t\"vnd.wolfram.player\": \"nbp\",\n\t\t\"vnd.wqd\": \"wqd\",\n\t\t\"vnd.wt.stf\": \"stf\",\n\t\t\"vnd.xara\": \"xar\",\n\t\t\"vnd.xfdl\": \"xfdl\",\n\t\t\"vnd.yamaha.hv-dic\": \"hvd\",\n\t\t\"vnd.yamaha.hv-script\": \"hvs\",\n\t\t\"vnd.yamaha.hv-voice\": \"hvp\",\n\t\t\"vnd.yamaha.openscoreformat\": \"osf\",\n\t\t\"vnd.yamaha.openscoreformat.osfpvg+xml\": \"osfpvg\",\n\t\t\"vnd.yamaha.smaf-audio\": \"saf\",\n\t\t\"vnd.yamaha.smaf-phrase\": \"spf\",\n\t\t\"vnd.yellowriver-custom-menu\": \"cmp\",\n\t\t\"vnd.zul\": [\"zir\", \"zirz\"],\n\t\t\"vnd.zzazz.deck+xml\": \"zaz\",\n\t\t\"voicexml+xml\": \"vxml\",\n\t\t\"widget\": \"wgt\",\n\t\t\"winhlp\": \"hlp\",\n\t\t\"wsdl+xml\": \"wsdl\",\n\t\t\"wspolicy+xml\": \"wspolicy\",\n\t\t\"x-ace-compressed\": \"ace\",\n\t\t\"x-authorware-bin\": [\"aab\", \"x32\", \"u32\", \"vox\"],\n\t\t\"x-authorware-map\": \"aam\",\n\t\t\"x-authorware-seg\": \"aas\",\n\t\t\"x-blorb\": [\"blb\", \"blorb\"],\n\t\t\"x-bzip\": \"bz\",\n\t\t\"x-bzip2\": [\"bz2\", \"boz\"],\n\t\t\"x-cfs-compressed\": \"cfs\",\n\t\t\"x-chat\": \"chat\",\n\t\t\"x-conference\": \"nsc\",\n\t\t\"x-dgc-compressed\": \"dgc\",\n\t\t\"x-dtbncx+xml\": \"ncx\",\n\t\t\"x-dtbook+xml\": \"dtb\",\n\t\t\"x-dtbresource+xml\": \"res\",\n\t\t\"x-eva\": \"eva\",\n\t\t\"x-font-bdf\": \"bdf\",\n\t\t\"x-font-ghostscript\": \"gsf\",\n\t\t\"x-font-linux-psf\": \"psf\",\n\t\t\"x-font-otf\": \"otf\",\n\t\t\"x-font-pcf\": \"pcf\",\n\t\t\"x-font-snf\": \"snf\",\n\t\t\"x-font-ttf\": [\"ttf\", \"ttc\"],\n\t\t\"x-font-type1\": [\"pfa\", \"pfb\", \"pfm\", \"afm\"],\n\t\t\"x-font-woff\": \"woff\",\n\t\t\"x-freearc\": \"arc\",\n\t\t\"x-gca-compressed\": \"gca\",\n\t\t\"x-glulx\": \"ulx\",\n\t\t\"x-gramps-xml\": \"gramps\",\n\t\t\"x-install-instructions\": \"install\",\n\t\t\"x-lzh-compressed\": [\"lzh\", \"lha\"],\n\t\t\"x-mie\": \"mie\",\n\t\t\"x-mobipocket-ebook\": [\"prc\", \"mobi\"],\n\t\t\"x-ms-application\": \"application\",\n\t\t\"x-ms-shortcut\": \"lnk\",\n\t\t\"x-ms-xbap\": \"xbap\",\n\t\t\"x-msbinder\": \"obd\",\n\t\t\"x-mscardfile\": \"crd\",\n\t\t\"x-msclip\": \"clp\",\n\t\t\"x-msdownload\": [\"exe\", \"dll\", \"com\", \"bat\", \"msi\"],\n\t\t\"x-msmediaview\": [\"mvb\", \"m13\", \"m14\"],\n\t\t\"x-msmetafile\": [\"wmf\", \"wmz\", \"emf\", \"emz\"],\n\t\t\"x-msmoney\": \"mny\",\n\t\t\"x-mspublisher\": \"pub\",\n\t\t\"x-msschedule\": \"scd\",\n\t\t\"x-msterminal\": \"trm\",\n\t\t\"x-mswrite\": \"wri\",\n\t\t\"x-nzb\": \"nzb\",\n\t\t\"x-pkcs12\": [\"p12\", \"pfx\"],\n\t\t\"x-pkcs7-certificates\": [\"p7b\", \"spc\"],\n\t\t\"x-research-info-systems\": \"ris\",\n\t\t\"x-silverlight-app\": \"xap\",\n\t\t\"x-sql\": \"sql\",\n\t\t\"x-stuffitx\": \"sitx\",\n\t\t\"x-subrip\": \"srt\",\n\t\t\"x-t3vm-image\": \"t3\",\n\t\t\"x-tads\": \"gam\",\n\t\t\"x-tex\": \"tex\",\n\t\t\"x-tex-tfm\": \"tfm\",\n\t\t\"x-tgif\": \"obj\",\n\t\t\"x-xliff+xml\": \"xlf\",\n\t\t\"x-xz\": \"xz\",\n\t\t\"x-zmachine\": [\"z1\", \"z2\", \"z3\", \"z4\", \"z5\", \"z6\", \"z7\", \"z8\"],\n\t\t\"xaml+xml\": \"xaml\",\n\t\t\"xcap-diff+xml\": \"xdf\",\n\t\t\"xenc+xml\": \"xenc\",\n\t\t\"xml-dtd\": \"dtd\",\n\t\t\"xop+xml\": \"xop\",\n\t\t\"xproc+xml\": \"xpl\",\n\t\t\"xslt+xml\": \"xslt\",\n\t\t\"xv+xml\": [\"mxml\", \"xhvml\", \"xvml\", \"xvm\"],\n\t\t\"yang\": \"yang\",\n\t\t\"yin+xml\": \"yin\",\n\t\t\"envoy\": \"evy\",\n\t\t\"fractals\": \"fif\",\n\t\t\"internet-property-stream\": \"acx\",\n\t\t\"olescript\": \"axs\",\n\t\t\"vnd.ms-outlook\": \"msg\",\n\t\t\"vnd.ms-pkicertstore\": \"sst\",\n\t\t\"x-compress\": \"z\",\n\t\t\"x-compressed\": \"tgz\",\n\t\t\"x-gzip\": \"gz\",\n\t\t\"x-perfmon\": [\"pma\", \"pmc\", \"pml\", \"pmr\", \"pmw\"],\n\t\t\"x-pkcs7-mime\": [\"p7c\", \"p7m\"],\n\t\t\"ynd.ms-pkipko\": \"pko\"\n\t},\n\t\"audio\": {\n\t\t\"amr\": \"amr\",\n\t\t\"amr-wb\": \"awb\",\n\t\t\"annodex\": \"axa\",\n\t\t\"basic\": [\"au\", \"snd\"],\n\t\t\"flac\": \"flac\",\n\t\t\"midi\": [\"mid\", \"midi\", \"kar\", \"rmi\"],\n\t\t\"mpeg\": [\"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\"],\n\t\t\"mpegurl\": \"m3u\",\n\t\t\"ogg\": [\"oga\", \"ogg\", \"spx\"],\n\t\t\"prs.sid\": \"sid\",\n\t\t\"x-aiff\": [\"aif\", \"aiff\", \"aifc\"],\n\t\t\"x-gsm\": \"gsm\",\n\t\t\"x-ms-wma\": \"wma\",\n\t\t\"x-ms-wax\": \"wax\",\n\t\t\"x-pn-realaudio\": \"ram\",\n\t\t\"x-realaudio\": \"ra\",\n\t\t\"x-sd2\": \"sd2\",\n\t\t\"x-wav\": \"wav\",\n\t\t\"adpcm\": \"adp\",\n\t\t\"mp4\": \"mp4a\",\n\t\t\"s3m\": \"s3m\",\n\t\t\"silk\": \"sil\",\n\t\t\"vnd.dece.audio\": [\"uva\", \"uvva\"],\n\t\t\"vnd.digital-winds\": \"eol\",\n\t\t\"vnd.dra\": \"dra\",\n\t\t\"vnd.dts\": \"dts\",\n\t\t\"vnd.dts.hd\": \"dtshd\",\n\t\t\"vnd.lucent.voice\": \"lvp\",\n\t\t\"vnd.ms-playready.media.pya\": \"pya\",\n\t\t\"vnd.nuera.ecelp4800\": \"ecelp4800\",\n\t\t\"vnd.nuera.ecelp7470\": \"ecelp7470\",\n\t\t\"vnd.nuera.ecelp9600\": \"ecelp9600\",\n\t\t\"vnd.rip\": \"rip\",\n\t\t\"webm\": \"weba\",\n\t\t\"x-aac\": \"aac\",\n\t\t\"x-caf\": \"caf\",\n\t\t\"x-matroska\": \"mka\",\n\t\t\"x-pn-realaudio-plugin\": \"rmp\",\n\t\t\"xm\": \"xm\",\n\t\t\"mid\": [\"mid\", \"rmi\"]\n\t},\n\t\"chemical\": {\n\t\t\"x-alchemy\": \"alc\",\n\t\t\"x-cache\": [\"cac\", \"cache\"],\n\t\t\"x-cache-csf\": \"csf\",\n\t\t\"x-cactvs-binary\": [\"cbin\", \"cascii\", \"ctab\"],\n\t\t\"x-cdx\": \"cdx\",\n\t\t\"x-chem3d\": \"c3d\",\n\t\t\"x-cif\": \"cif\",\n\t\t\"x-cmdf\": \"cmdf\",\n\t\t\"x-cml\": \"cml\",\n\t\t\"x-compass\": \"cpa\",\n\t\t\"x-crossfire\": \"bsd\",\n\t\t\"x-csml\": [\"csml\", \"csm\"],\n\t\t\"x-ctx\": \"ctx\",\n\t\t\"x-cxf\": [\"cxf\", \"cef\"],\n\t\t\"x-embl-dl-nucleotide\": [\"emb\", \"embl\"],\n\t\t\"x-gamess-input\": [\"inp\", \"gam\", \"gamin\"],\n\t\t\"x-gaussian-checkpoint\": [\"fch\", \"fchk\"],\n\t\t\"x-gaussian-cube\": \"cub\",\n\t\t\"x-gaussian-input\": [\"gau\", \"gjc\", \"gjf\"],\n\t\t\"x-gaussian-log\": \"gal\",\n\t\t\"x-gcg8-sequence\": \"gcg\",\n\t\t\"x-genbank\": \"gen\",\n\t\t\"x-hin\": \"hin\",\n\t\t\"x-isostar\": [\"istr\", \"ist\"],\n\t\t\"x-jcamp-dx\": [\"jdx\", \"dx\"],\n\t\t\"x-kinemage\": \"kin\",\n\t\t\"x-macmolecule\": \"mcm\",\n\t\t\"x-macromodel-input\": [\"mmd\", \"mmod\"],\n\t\t\"x-mdl-molfile\": \"mol\",\n\t\t\"x-mdl-rdfile\": \"rd\",\n\t\t\"x-mdl-rxnfile\": \"rxn\",\n\t\t\"x-mdl-sdfile\": [\"sd\", \"sdf\"],\n\t\t\"x-mdl-tgf\": \"tgf\",\n\t\t\"x-mmcif\": \"mcif\",\n\t\t\"x-mol2\": \"mol2\",\n\t\t\"x-molconn-Z\": \"b\",\n\t\t\"x-mopac-graph\": \"gpt\",\n\t\t\"x-mopac-input\": [\"mop\", \"mopcrt\", \"mpc\", \"zmt\"],\n\t\t\"x-mopac-out\": \"moo\",\n\t\t\"x-ncbi-asn1\": \"asn\",\n\t\t\"x-ncbi-asn1-ascii\": [\"prt\", \"ent\"],\n\t\t\"x-ncbi-asn1-binary\": [\"val\", \"aso\"],\n\t\t\"x-pdb\": [\"pdb\", \"ent\"],\n\t\t\"x-rosdal\": \"ros\",\n\t\t\"x-swissprot\": \"sw\",\n\t\t\"x-vamas-iso14976\": \"vms\",\n\t\t\"x-vmd\": \"vmd\",\n\t\t\"x-xtel\": \"xtel\",\n\t\t\"x-xyz\": \"xyz\"\n\t},\n\t\"image\": {\n\t\t\"gif\": \"gif\",\n\t\t\"ief\": \"ief\",\n\t\t\"jpeg\": [\"jpeg\", \"jpg\", \"jpe\"],\n\t\t\"pcx\": \"pcx\",\n\t\t\"png\": \"png\",\n\t\t\"svg+xml\": [\"svg\", \"svgz\"],\n\t\t\"tiff\": [\"tiff\", \"tif\"],\n\t\t\"vnd.djvu\": [\"djvu\", \"djv\"],\n\t\t\"vnd.wap.wbmp\": \"wbmp\",\n\t\t\"x-canon-cr2\": \"cr2\",\n\t\t\"x-canon-crw\": \"crw\",\n\t\t\"x-cmu-raster\": \"ras\",\n\t\t\"x-coreldraw\": \"cdr\",\n\t\t\"x-coreldrawpattern\": \"pat\",\n\t\t\"x-coreldrawtemplate\": \"cdt\",\n\t\t\"x-corelphotopaint\": \"cpt\",\n\t\t\"x-epson-erf\": \"erf\",\n\t\t\"x-icon\": \"ico\",\n\t\t\"x-jg\": \"art\",\n\t\t\"x-jng\": \"jng\",\n\t\t\"x-nikon-nef\": \"nef\",\n\t\t\"x-olympus-orf\": \"orf\",\n\t\t\"x-photoshop\": \"psd\",\n\t\t\"x-portable-anymap\": \"pnm\",\n\t\t\"x-portable-bitmap\": \"pbm\",\n\t\t\"x-portable-graymap\": \"pgm\",\n\t\t\"x-portable-pixmap\": \"ppm\",\n\t\t\"x-rgb\": \"rgb\",\n\t\t\"x-xbitmap\": \"xbm\",\n\t\t\"x-xpixmap\": \"xpm\",\n\t\t\"x-xwindowdump\": \"xwd\",\n\t\t\"bmp\": \"bmp\",\n\t\t\"cgm\": \"cgm\",\n\t\t\"g3fax\": \"g3\",\n\t\t\"ktx\": \"ktx\",\n\t\t\"prs.btif\": \"btif\",\n\t\t\"sgi\": \"sgi\",\n\t\t\"vnd.dece.graphic\": [\"uvi\", \"uvvi\", \"uvg\", \"uvvg\"],\n\t\t\"vnd.dwg\": \"dwg\",\n\t\t\"vnd.dxf\": \"dxf\",\n\t\t\"vnd.fastbidsheet\": \"fbs\",\n\t\t\"vnd.fpx\": \"fpx\",\n\t\t\"vnd.fst\": \"fst\",\n\t\t\"vnd.fujixerox.edmics-mmr\": \"mmr\",\n\t\t\"vnd.fujixerox.edmics-rlc\": \"rlc\",\n\t\t\"vnd.ms-modi\": \"mdi\",\n\t\t\"vnd.ms-photo\": \"wdp\",\n\t\t\"vnd.net-fpx\": \"npx\",\n\t\t\"vnd.xiff\": \"xif\",\n\t\t\"webp\": \"webp\",\n\t\t\"x-3ds\": \"3ds\",\n\t\t\"x-cmx\": \"cmx\",\n\t\t\"x-freehand\": [\"fh\", \"fhc\", \"fh4\", \"fh5\", \"fh7\"],\n\t\t\"x-pict\": [\"pic\", \"pct\"],\n\t\t\"x-tga\": \"tga\",\n\t\t\"cis-cod\": \"cod\",\n\t\t\"pipeg\": \"jfif\"\n\t},\n\t\"message\": {\n\t\t\"rfc822\": [\"eml\", \"mime\", \"mht\", \"mhtml\", \"nws\"]\n\t},\n\t\"model\": {\n\t\t\"iges\": [\"igs\", \"iges\"],\n\t\t\"mesh\": [\"msh\", \"mesh\", \"silo\"],\n\t\t\"vrml\": [\"wrl\", \"vrml\"],\n\t\t\"x3d+vrml\": [\"x3dv\", \"x3dvz\"],\n\t\t\"x3d+xml\": [\"x3d\", \"x3dz\"],\n\t\t\"x3d+binary\": [\"x3db\", \"x3dbz\"],\n\t\t\"vnd.collada+xml\": \"dae\",\n\t\t\"vnd.dwf\": \"dwf\",\n\t\t\"vnd.gdl\": \"gdl\",\n\t\t\"vnd.gtw\": \"gtw\",\n\t\t\"vnd.mts\": \"mts\",\n\t\t\"vnd.vtu\": \"vtu\"\n\t},\n\t\"text\": {\n\t\t\"cache-manifest\": [\"manifest\", \"appcache\"],\n\t\t\"calendar\": [\"ics\", \"icz\", \"ifb\"],\n\t\t\"css\": \"css\",\n\t\t\"csv\": \"csv\",\n\t\t\"h323\": \"323\",\n\t\t\"html\": [\"html\", \"htm\", \"shtml\", \"stm\"],\n\t\t\"iuls\": \"uls\",\n\t\t\"mathml\": \"mml\",\n\t\t\"plain\": [\"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\"],\n\t\t\"richtext\": \"rtx\",\n\t\t\"scriptlet\": [\"sct\", \"wsc\"],\n\t\t\"texmacs\": [\"tm\", \"ts\"],\n\t\t\"tab-separated-values\": \"tsv\",\n\t\t\"vnd.sun.j2me.app-descriptor\": \"jad\",\n\t\t\"vnd.wap.wml\": \"wml\",\n\t\t\"vnd.wap.wmlscript\": \"wmls\",\n\t\t\"x-bibtex\": \"bib\",\n\t\t\"x-boo\": \"boo\",\n\t\t\"x-c++hdr\": [\"h++\", \"hpp\", \"hxx\", \"hh\"],\n\t\t\"x-c++src\": [\"c++\", \"cpp\", \"cxx\", \"cc\"],\n\t\t\"x-component\": \"htc\",\n\t\t\"x-dsrc\": \"d\",\n\t\t\"x-diff\": [\"diff\", \"patch\"],\n\t\t\"x-haskell\": \"hs\",\n\t\t\"x-java\": \"java\",\n\t\t\"x-literate-haskell\": \"lhs\",\n\t\t\"x-moc\": \"moc\",\n\t\t\"x-pascal\": [\"p\", \"pas\"],\n\t\t\"x-pcs-gcd\": \"gcd\",\n\t\t\"x-perl\": [\"pl\", \"pm\"],\n\t\t\"x-python\": \"py\",\n\t\t\"x-scala\": \"scala\",\n\t\t\"x-setext\": \"etx\",\n\t\t\"x-tcl\": [\"tcl\", \"tk\"],\n\t\t\"x-tex\": [\"tex\", \"ltx\", \"sty\", \"cls\"],\n\t\t\"x-vcalendar\": \"vcs\",\n\t\t\"x-vcard\": \"vcf\",\n\t\t\"n3\": \"n3\",\n\t\t\"prs.lines.tag\": \"dsc\",\n\t\t\"sgml\": [\"sgml\", \"sgm\"],\n\t\t\"troff\": [\"t\", \"tr\", \"roff\", \"man\", \"me\", \"ms\"],\n\t\t\"turtle\": \"ttl\",\n\t\t\"uri-list\": [\"uri\", \"uris\", \"urls\"],\n\t\t\"vcard\": \"vcard\",\n\t\t\"vnd.curl\": \"curl\",\n\t\t\"vnd.curl.dcurl\": \"dcurl\",\n\t\t\"vnd.curl.scurl\": \"scurl\",\n\t\t\"vnd.curl.mcurl\": \"mcurl\",\n\t\t\"vnd.dvb.subtitle\": \"sub\",\n\t\t\"vnd.fly\": \"fly\",\n\t\t\"vnd.fmi.flexstor\": \"flx\",\n\t\t\"vnd.graphviz\": \"gv\",\n\t\t\"vnd.in3d.3dml\": \"3dml\",\n\t\t\"vnd.in3d.spot\": \"spot\",\n\t\t\"x-asm\": [\"s\", \"asm\"],\n\t\t\"x-c\": [\"c\", \"cc\", \"cxx\", \"cpp\", \"h\", \"hh\", \"dic\"],\n\t\t\"x-fortran\": [\"f\", \"for\", \"f77\", \"f90\"],\n\t\t\"x-opml\": \"opml\",\n\t\t\"x-nfo\": \"nfo\",\n\t\t\"x-sfv\": \"sfv\",\n\t\t\"x-uuencode\": \"uu\",\n\t\t\"webviewhtml\": \"htt\"\n\t},\n\t\"video\": {\n\t\t\"avif\": \".avif\",\n\t\t\"3gpp\": \"3gp\",\n\t\t\"annodex\": \"axv\",\n\t\t\"dl\": \"dl\",\n\t\t\"dv\": [\"dif\", \"dv\"],\n\t\t\"fli\": \"fli\",\n\t\t\"gl\": \"gl\",\n\t\t\"mpeg\": [\"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\"],\n\t\t\"mp4\": [\"mp4\", \"mp4v\", \"mpg4\"],\n\t\t\"quicktime\": [\"qt\", \"mov\"],\n\t\t\"ogg\": \"ogv\",\n\t\t\"vnd.mpegurl\": [\"mxu\", \"m4u\"],\n\t\t\"x-flv\": \"flv\",\n\t\t\"x-la-asf\": [\"lsf\", \"lsx\"],\n\t\t\"x-mng\": \"mng\",\n\t\t\"x-ms-asf\": [\"asf\", \"asx\", \"asr\"],\n\t\t\"x-ms-wm\": \"wm\",\n\t\t\"x-ms-wmv\": \"wmv\",\n\t\t\"x-ms-wmx\": \"wmx\",\n\t\t\"x-ms-wvx\": \"wvx\",\n\t\t\"x-msvideo\": \"avi\",\n\t\t\"x-sgi-movie\": \"movie\",\n\t\t\"x-matroska\": [\"mpv\", \"mkv\", \"mk3d\", \"mks\"],\n\t\t\"3gpp2\": \"3g2\",\n\t\t\"h261\": \"h261\",\n\t\t\"h263\": \"h263\",\n\t\t\"h264\": \"h264\",\n\t\t\"jpeg\": \"jpgv\",\n\t\t\"jpm\": [\"jpm\", \"jpgm\"],\n\t\t\"mj2\": [\"mj2\", \"mjp2\"],\n\t\t\"vnd.dece.hd\": [\"uvh\", \"uvvh\"],\n\t\t\"vnd.dece.mobile\": [\"uvm\", \"uvvm\"],\n\t\t\"vnd.dece.pd\": [\"uvp\", \"uvvp\"],\n\t\t\"vnd.dece.sd\": [\"uvs\", \"uvvs\"],\n\t\t\"vnd.dece.video\": [\"uvv\", \"uvvv\"],\n\t\t\"vnd.dvb.file\": \"dvb\",\n\t\t\"vnd.fvt\": \"fvt\",\n\t\t\"vnd.ms-playready.media.pyv\": \"pyv\",\n\t\t\"vnd.uvvu.mp4\": [\"uvu\", \"uvvu\"],\n\t\t\"vnd.vivo\": \"viv\",\n\t\t\"webm\": \"webm\",\n\t\t\"x-f4v\": \"f4v\",\n\t\t\"x-m4v\": \"m4v\",\n\t\t\"x-ms-vob\": \"vob\",\n\t\t\"x-smv\": \"smv\"\t\t\n\t},\n\t\"x-conference\": {\n\t\t\"x-cooltalk\": \"ice\"\n\t},\n\t\"x-world\": {\n\t\t\"x-vrml\": [\"vrm\", \"vrml\", \"wrl\", \"flr\", \"wrz\", \"xaf\", \"xof\"]\n\t}\n};\n\nconst mimeTypes = (() => {\n\tconst mimeTypes = {};\n\tfor (let type in table) {\n\t\t// eslint-disable-next-line no-prototype-builtins\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (let subtype in table[type]) {\n\t\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tconst value = table[type][subtype];\n\t\t\t\t\tif (typeof value == \"string\") {\n\t\t\t\t\t\tmimeTypes[value] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let indexMimeType = 0; indexMimeType < value.length; indexMimeType++) {\n\t\t\t\t\t\t\tmimeTypes[value[indexMimeType]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn mimeTypes;\n})();\n\nexport default getMimeType;\n\nfunction getMimeType(filename) {\n\tconst defaultValue = \"application/octet-stream\";\n\treturn filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst table = [];\nfor (let i = 0; i < 256; i++) {\n\tlet t = i;\n\tfor (let j = 0; j < 8; j++) {\n\t\tif (t & 1) {\n\t\t\tt = (t >>> 1) ^ 0xEDB88320;\n\t\t} else {\n\t\t\tt = t >>> 1;\n\t\t}\n\t}\n\ttable[i] = t;\n}\n\nclass Crc32 {\n\n\tconstructor(crc) {\n\t\tthis.crc = crc || -1;\n\t}\n\n\tappend(data) {\n\t\tlet crc = this.crc | 0;\n\t\tfor (let offset = 0, length = data.length | 0; offset < length; offset++) {\n\t\t\tcrc = (crc >>> 8) ^ table[(crc ^ data[offset]) & 0xFF];\n\t\t}\n\t\tthis.crc = crc;\n\t}\n\n\tget() {\n\t\treturn ~this.crc;\n\t}\n}\n\nexport default Crc32;","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global TextEncoder */\n\nexport default encodeText;\n\nfunction encodeText(value) {\n\tif (typeof TextEncoder == \"undefined\") {\n\t\tvalue = unescape(encodeURIComponent(value));\n\t\tconst result = new Uint8Array(value.length);\n\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\tresult[i] = value.charCodeAt(i);\n\t\t}\n\t\treturn result;\n\t} else {\n\t\treturn new TextEncoder().encode(value);\n\t}\n}","// Derived from https://github.com/xqdoo00o/jszip/blob/master/lib/sjcl.js\n\n/** @fileOverview Javascript cryptography implementation.\n *\n * Crush to remove comments, shorten variable names and\n * generally reduce transmission size.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/*jslint indent: 2, bitwise: false, nomen: false, plusplus: false, white: false, regexp: false */\n\n/** @fileOverview Arrays of bits, encoded as arrays of Numbers.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Arrays of bits, encoded as arrays of Numbers.\n * @namespace\n * @description\n * <p>\n * These objects are the currency accepted by SJCL's crypto functions.\n * </p>\n *\n * <p>\n * Most of our crypto primitives operate on arrays of 4-byte words internally,\n * but many of them can take arguments that are not a multiple of 4 bytes.\n * This library encodes arrays of bits (whose size need not be a multiple of 8\n * bits) as arrays of 32-bit words.  The bits are packed, big-endian, into an\n * array of words, 32 bits at a time.  Since the words are double-precision\n * floating point numbers, they fit some extra data.  We use this (in a private,\n * possibly-changing manner) to encode the number of bits actually  present\n * in the last word of the array.\n * </p>\n *\n * <p>\n * Because bitwise ops clear this out-of-band data, these arrays can be passed\n * to ciphers like AES which want arrays of words.\n * </p>\n */\nconst bitArray = {\n\t/**\n\t * Concatenate two bit arrays.\n\t * @param {bitArray} a1 The first array.\n\t * @param {bitArray} a2 The second array.\n\t * @return {bitArray} The concatenation of a1 and a2.\n\t */\n\tconcat(a1, a2) {\n\t\tif (a1.length === 0 || a2.length === 0) {\n\t\t\treturn a1.concat(a2);\n\t\t}\n\n\t\tconst last = a1[a1.length - 1], shift = bitArray.getPartial(last);\n\t\tif (shift === 32) {\n\t\t\treturn a1.concat(a2);\n\t\t} else {\n\t\t\treturn bitArray._shiftRight(a2, shift, last | 0, a1.slice(0, a1.length - 1));\n\t\t}\n\t},\n\n\t/**\n\t * Find the length of an array of bits.\n\t * @param {bitArray} a The array.\n\t * @return {Number} The length of a, in bits.\n\t */\n\tbitLength(a) {\n\t\tconst l = a.length;\n\t\tif (l === 0) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst x = a[l - 1];\n\t\treturn (l - 1) * 32 + bitArray.getPartial(x);\n\t},\n\n\t/**\n\t * Truncate an array.\n\t * @param {bitArray} a The array.\n\t * @param {Number} len The length to truncate to, in bits.\n\t * @return {bitArray} A new array, truncated to len bits.\n\t */\n\tclamp(a, len) {\n\t\tif (a.length * 32 < len) {\n\t\t\treturn a;\n\t\t}\n\t\ta = a.slice(0, Math.ceil(len / 32));\n\t\tconst l = a.length;\n\t\tlen = len & 31;\n\t\tif (l > 0 && len) {\n\t\t\ta[l - 1] = bitArray.partial(len, a[l - 1] & 0x80000000 >> (len - 1), 1);\n\t\t}\n\t\treturn a;\n\t},\n\n\t/**\n\t * Make a partial word for a bit array.\n\t * @param {Number} len The number of bits in the word.\n\t * @param {Number} x The bits.\n\t * @param {Number} [_end=0] Pass 1 if x has already been shifted to the high side.\n\t * @return {Number} The partial word.\n\t */\n\tpartial(len, x, _end) {\n\t\tif (len === 32) {\n\t\t\treturn x;\n\t\t}\n\t\treturn (_end ? x | 0 : x << (32 - len)) + len * 0x10000000000;\n\t},\n\n\t/**\n\t * Get the number of bits used by a partial word.\n\t * @param {Number} x The partial word.\n\t * @return {Number} The number of bits used by the partial word.\n\t */\n\tgetPartial(x) {\n\t\treturn Math.round(x / 0x10000000000) || 32;\n\t},\n\n\t/** Shift an array right.\n\t * @param {bitArray} a The array to shift.\n\t * @param {Number} shift The number of bits to shift.\n\t * @param {Number} [carry=0] A byte to carry in\n\t * @param {bitArray} [out=[]] An array to prepend to the output.\n\t * @private\n\t */\n\t_shiftRight(a, shift, carry, out) {\n\t\tif (out === undefined) {\n\t\t\tout = [];\n\t\t}\n\n\t\tfor (; shift >= 32; shift -= 32) {\n\t\t\tout.push(carry);\n\t\t\tcarry = 0;\n\t\t}\n\t\tif (shift === 0) {\n\t\t\treturn out.concat(a);\n\t\t}\n\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tout.push(carry | a[i] >>> shift);\n\t\t\tcarry = a[i] << (32 - shift);\n\t\t}\n\t\tconst last2 = a.length ? a[a.length - 1] : 0;\n\t\tconst shift2 = bitArray.getPartial(last2);\n\t\tout.push(bitArray.partial(shift + shift2 & 31, (shift + shift2 > 32) ? carry : out.pop(), 1));\n\t\treturn out;\n\t}\n};\n\n/** @fileOverview Bit array codec implementations.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Arrays of bytes\n * @namespace\n */\nconst codec = {\n\tbytes: {\n\t\t/** Convert from a bitArray to an array of bytes. */\n\t\tfromBits(arr) {\n\t\t\tconst bl = bitArray.bitLength(arr);\n\t\t\tconst byteLength = bl / 8;\n\t\t\tconst out = new Uint8Array(byteLength);\n\t\t\tlet tmp;\n\t\t\tfor (let i = 0; i < byteLength; i++) {\n\t\t\t\tif ((i & 3) === 0) {\n\t\t\t\t\ttmp = arr[i / 4];\n\t\t\t\t}\n\t\t\t\tout[i] = tmp >>> 24;\n\t\t\t\ttmp <<= 8;\n\t\t\t}\n\t\t\treturn out;\n\t\t},\n\t\t/** Convert from an array of bytes to a bitArray. */\n\t\ttoBits(bytes) {\n\t\t\tconst out = [];\n\t\t\tlet i;\n\t\t\tlet tmp = 0;\n\t\t\tfor (i = 0; i < bytes.length; i++) {\n\t\t\t\ttmp = tmp << 8 | bytes[i];\n\t\t\t\tif ((i & 3) === 3) {\n\t\t\t\t\tout.push(tmp);\n\t\t\t\t\ttmp = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i & 3) {\n\t\t\t\tout.push(bitArray.partial(8 * (i & 3), tmp));\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t}\n};\n\nconst hash = {};\n\n/**\n * Context for a SHA-1 operation in progress.\n * @constructor\n */\nhash.sha1 = function (hash) {\n\tif (hash) {\n\t\tthis._h = hash._h.slice(0);\n\t\tthis._buffer = hash._buffer.slice(0);\n\t\tthis._length = hash._length;\n\t} else {\n\t\tthis.reset();\n\t}\n};\n\nhash.sha1.prototype = {\n\t/**\n\t * The hash's block size, in bits.\n\t * @constant\n\t */\n\tblockSize: 512,\n\n\t/**\n\t * Reset the hash state.\n\t * @return this\n\t */\n\treset: function () {\n\t\tconst sha1 = this;\n\t\tsha1._h = this._init.slice(0);\n\t\tsha1._buffer = [];\n\t\tsha1._length = 0;\n\t\treturn sha1;\n\t},\n\n\t/**\n\t * Input several words to the hash.\n\t * @param {bitArray|String} data the data to hash.\n\t * @return this\n\t */\n\tupdate: function (data) {\n\t\tconst sha1 = this;\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = codec.utf8String.toBits(data);\n\t\t}\n\t\tconst b = sha1._buffer = bitArray.concat(sha1._buffer, data);\n\t\tconst ol = sha1._length;\n\t\tconst nl = sha1._length = ol + bitArray.bitLength(data);\n\t\tif (nl > 9007199254740991) {\n\t\t\tthrow new Error(\"Cannot hash more than 2^53 - 1 bits\");\n\t\t}\n\t\tconst c = new Uint32Array(b);\n\t\tlet j = 0;\n\t\tfor (let i = sha1.blockSize + ol - ((sha1.blockSize + ol) & (sha1.blockSize - 1)); i <= nl;\n\t\t\ti += sha1.blockSize) {\n\t\t\tsha1._block(c.subarray(16 * j, 16 * (j + 1)));\n\t\t\tj += 1;\n\t\t}\n\t\tb.splice(0, 16 * j);\n\t\treturn sha1;\n\t},\n\n\t/**\n\t * Complete hashing and output the hash value.\n\t * @return {bitArray} The hash value, an array of 5 big-endian words. TODO\n\t */\n\tfinalize: function () {\n\t\tconst sha1 = this;\n\t\tlet b = sha1._buffer;\n\t\tconst h = sha1._h;\n\n\t\t// Round out and push the buffer\n\t\tb = bitArray.concat(b, [bitArray.partial(1, 1)]);\n\t\t// Round out the buffer to a multiple of 16 words, less the 2 length words.\n\t\tfor (let i = b.length + 2; i & 15; i++) {\n\t\t\tb.push(0);\n\t\t}\n\n\t\t// append the length\n\t\tb.push(Math.floor(sha1._length / 0x100000000));\n\t\tb.push(sha1._length | 0);\n\n\t\twhile (b.length) {\n\t\t\tsha1._block(b.splice(0, 16));\n\t\t}\n\n\t\tsha1.reset();\n\t\treturn h;\n\t},\n\n\t/**\n\t * The SHA-1 initialization vector.\n\t * @private\n\t */\n\t_init: [0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0],\n\n\t/**\n\t * The SHA-1 hash key.\n\t * @private\n\t */\n\t_key: [0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xCA62C1D6],\n\n\t/**\n\t * The SHA-1 logical functions f(0), f(1), ..., f(79).\n\t * @private\n\t */\n\t_f: function (t, b, c, d) {\n\t\tif (t <= 19) {\n\t\t\treturn (b & c) | (~b & d);\n\t\t} else if (t <= 39) {\n\t\t\treturn b ^ c ^ d;\n\t\t} else if (t <= 59) {\n\t\t\treturn (b & c) | (b & d) | (c & d);\n\t\t} else if (t <= 79) {\n\t\t\treturn b ^ c ^ d;\n\t\t}\n\t},\n\n\t/**\n\t * Circular left-shift operator.\n\t * @private\n\t */\n\t_S: function (n, x) {\n\t\treturn (x << n) | (x >>> 32 - n);\n\t},\n\n\t/**\n\t * Perform one cycle of SHA-1.\n\t * @param {Uint32Array|bitArray} words one block of words.\n\t * @private\n\t */\n\t_block: function (words) {\n\t\tconst sha1 = this;\n\t\tconst h = sha1._h;\n\t\t// When words is passed to _block, it has 16 elements. SHA1 _block\n\t\t// function extends words with new elements (at the end there are 80 elements). \n\t\t// The problem is that if we use Uint32Array instead of Array, \n\t\t// the length of Uint32Array cannot be changed. Thus, we replace words with a \n\t\t// normal Array here.\n\t\tconst w = Array(80); // do not use Uint32Array here as the instantiation is slower\n\t\tfor (let j = 0; j < 16; j++) {\n\t\t\tw[j] = words[j];\n\t\t}\n\n\t\tlet a = h[0];\n\t\tlet b = h[1];\n\t\tlet c = h[2];\n\t\tlet d = h[3];\n\t\tlet e = h[4];\n\n\t\tfor (let t = 0; t <= 79; t++) {\n\t\t\tif (t >= 16) {\n\t\t\t\tw[t] = sha1._S(1, w[t - 3] ^ w[t - 8] ^ w[t - 14] ^ w[t - 16]);\n\t\t\t}\n\t\t\tconst tmp = (sha1._S(5, a) + sha1._f(t, b, c, d) + e + w[t] +\n\t\t\t\tsha1._key[Math.floor(t / 20)]) | 0;\n\t\t\te = d;\n\t\t\td = c;\n\t\t\tc = sha1._S(30, b);\n\t\t\tb = a;\n\t\t\ta = tmp;\n\t\t}\n\n\t\th[0] = (h[0] + a) | 0;\n\t\th[1] = (h[1] + b) | 0;\n\t\th[2] = (h[2] + c) | 0;\n\t\th[3] = (h[3] + d) | 0;\n\t\th[4] = (h[4] + e) | 0;\n\t}\n};\n\n/** @fileOverview Low-level AES implementation.\n *\n * This file contains a low-level implementation of AES, optimized for\n * size and for efficiency on several browsers.  It is based on\n * OpenSSL's aes_core.c, a public-domain implementation by Vincent\n * Rijmen, Antoon Bosselaers and Paulo Barreto.\n *\n * An older version of this implementation is available in the public\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\n * Stanford University 2008-2010 and BSD-licensed for liability\n * reasons.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\nconst cipher = {};\n\n/**\n * Schedule out an AES key for both encryption and decryption.  This\n * is a low-level class.  Use a cipher mode to do bulk encryption.\n *\n * @constructor\n * @param {Array} key The key as an array of 4, 6 or 8 words.\n */\ncipher.aes = class {\n\tconstructor(key) {\n\t\t/**\n\t\t * The expanded S-box and inverse S-box tables.  These will be computed\n\t\t * on the client so that we don't have to send them down the wire.\n\t\t *\n\t\t * There are two tables, _tables[0] is for encryption and\n\t\t * _tables[1] is for decryption.\n\t\t *\n\t\t * The first 4 sub-tables are the expanded S-box with MixColumns.  The\n\t\t * last (_tables[01][4]) is the S-box itself.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tconst aes = this;\n\t\taes._tables = [[[], [], [], [], []], [[], [], [], [], []]];\n\n\t\tif (!aes._tables[0][0][0]) {\n\t\t\taes._precompute();\n\t\t}\n\n\t\tconst sbox = aes._tables[0][4];\n\t\tconst decTable = aes._tables[1];\n\t\tconst keyLen = key.length;\n\n\t\tlet i, encKey, decKey, rcon = 1;\n\n\t\tif (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n\t\t\tthrow new Error(\"invalid aes key size\");\n\t\t}\n\n\t\taes._key = [encKey = key.slice(0), decKey = []];\n\n\t\t// schedule encryption keys\n\t\tfor (i = keyLen; i < 4 * keyLen + 28; i++) {\n\t\t\tlet tmp = encKey[i - 1];\n\n\t\t\t// apply sbox\n\t\t\tif (i % keyLen === 0 || (keyLen === 8 && i % keyLen === 4)) {\n\t\t\t\ttmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255];\n\n\t\t\t\t// shift rows and add rcon\n\t\t\t\tif (i % keyLen === 0) {\n\t\t\t\t\ttmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n\t\t\t\t\trcon = rcon << 1 ^ (rcon >> 7) * 283;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tencKey[i] = encKey[i - keyLen] ^ tmp;\n\t\t}\n\n\t\t// schedule decryption keys\n\t\tfor (let j = 0; i; j++, i--) {\n\t\t\tconst tmp = encKey[j & 3 ? i : i - 4];\n\t\t\tif (i <= 4 || j < 4) {\n\t\t\t\tdecKey[j] = tmp;\n\t\t\t} else {\n\t\t\t\tdecKey[j] = decTable[0][sbox[tmp >>> 24]] ^\n\t\t\t\t\tdecTable[1][sbox[tmp >> 16 & 255]] ^\n\t\t\t\t\tdecTable[2][sbox[tmp >> 8 & 255]] ^\n\t\t\t\t\tdecTable[3][sbox[tmp & 255]];\n\t\t\t}\n\t\t}\n\t}\n\t// public\n\t/* Something like this might appear here eventually\n\tname: \"AES\",\n\tblockSize: 4,\n\tkeySizes: [4,6,8],\n\t*/\n\n\t/**\n\t * Encrypt an array of 4 big-endian words.\n\t * @param {Array} data The plaintext.\n\t * @return {Array} The ciphertext.\n\t */\n\tencrypt(data) {\n\t\treturn this._crypt(data, 0);\n\t}\n\n\t/**\n\t * Decrypt an array of 4 big-endian words.\n\t * @param {Array} data The ciphertext.\n\t * @return {Array} The plaintext.\n\t */\n\tdecrypt(data) {\n\t\treturn this._crypt(data, 1);\n\t}\n\n\t/**\n\t * Expand the S-box tables.\n\t *\n\t * @private\n\t */\n\t_precompute() {\n\t\tconst encTable = this._tables[0];\n\t\tconst decTable = this._tables[1];\n\t\tconst sbox = encTable[4];\n\t\tconst sboxInv = decTable[4];\n\t\tconst d = [];\n\t\tconst th = [];\n\t\tlet xInv, x2, x4, x8;\n\n\t\t// Compute double and third tables\n\t\tfor (let i = 0; i < 256; i++) {\n\t\t\tth[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n\t\t}\n\n\t\tfor (let x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n\t\t\t// Compute sbox\n\t\t\tlet s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n\t\t\ts = s >> 8 ^ s & 255 ^ 99;\n\t\t\tsbox[x] = s;\n\t\t\tsboxInv[s] = x;\n\n\t\t\t// Compute MixColumns\n\t\t\tx8 = d[x4 = d[x2 = d[x]]];\n\t\t\tlet tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n\t\t\tlet tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tencTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n\t\t\t\tdecTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n\t\t\t}\n\t\t}\n\n\t\t// Compactify.  Considerable speedup on Firefox.\n\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tencTable[i] = encTable[i].slice(0);\n\t\t\tdecTable[i] = decTable[i].slice(0);\n\t\t}\n\t}\n\n\t/**\n\t * Encryption and decryption core.\n\t * @param {Array} input Four words to be encrypted or decrypted.\n\t * @param dir The direction, 0 for encrypt and 1 for decrypt.\n\t * @return {Array} The four encrypted or decrypted words.\n\t * @private\n\t */\n\t_crypt(input, dir) {\n\t\tif (input.length !== 4) {\n\t\t\tthrow new Error(\"invalid aes block size\");\n\t\t}\n\n\t\tconst key = this._key[dir];\n\n\t\tconst nInnerRounds = key.length / 4 - 2;\n\t\tconst out = [0, 0, 0, 0];\n\t\tconst table = this._tables[dir];\n\n\t\t// load up the tables\n\t\tconst t0 = table[0];\n\t\tconst t1 = table[1];\n\t\tconst t2 = table[2];\n\t\tconst t3 = table[3];\n\t\tconst sbox = table[4];\n\n\t\t// state variables a,b,c,d are loaded with pre-whitened data\n\t\tlet a = input[0] ^ key[0];\n\t\tlet b = input[dir ? 3 : 1] ^ key[1];\n\t\tlet c = input[2] ^ key[2];\n\t\tlet d = input[dir ? 1 : 3] ^ key[3];\n\t\tlet kIndex = 4;\n\t\tlet a2, b2, c2;\n\n\t\t// Inner rounds.  Cribbed from OpenSSL.\n\t\tfor (let i = 0; i < nInnerRounds; i++) {\n\t\t\ta2 = t0[a >>> 24] ^ t1[b >> 16 & 255] ^ t2[c >> 8 & 255] ^ t3[d & 255] ^ key[kIndex];\n\t\t\tb2 = t0[b >>> 24] ^ t1[c >> 16 & 255] ^ t2[d >> 8 & 255] ^ t3[a & 255] ^ key[kIndex + 1];\n\t\t\tc2 = t0[c >>> 24] ^ t1[d >> 16 & 255] ^ t2[a >> 8 & 255] ^ t3[b & 255] ^ key[kIndex + 2];\n\t\t\td = t0[d >>> 24] ^ t1[a >> 16 & 255] ^ t2[b >> 8 & 255] ^ t3[c & 255] ^ key[kIndex + 3];\n\t\t\tkIndex += 4;\n\t\t\ta = a2; b = b2; c = c2;\n\t\t}\n\n\t\t// Last round.\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tout[dir ? 3 & -i : i] =\n\t\t\t\tsbox[a >>> 24] << 24 ^\n\t\t\t\tsbox[b >> 16 & 255] << 16 ^\n\t\t\t\tsbox[c >> 8 & 255] << 8 ^\n\t\t\t\tsbox[d & 255] ^\n\t\t\t\tkey[kIndex++];\n\t\t\ta2 = a; a = b; b = c; c = d; d = a2;\n\t\t}\n\n\t\treturn out;\n\t}\n};\n\n/** @fileOverview CTR mode implementation.\n *\n * Special thanks to Roy Nicholson for pointing out a bug in our\n * implementation.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/** Brian Gladman's CTR Mode.\n* @constructor\n* @param {Object} _prf The aes instance to generate key.\n* @param {bitArray} _iv The iv for ctr mode, it must be 128 bits.\n*/\n\nconst mode = {};\n\n/**\n * Brian Gladman's CTR Mode.\n * @namespace\n */\nmode.ctrGladman = class {\n\tconstructor(prf, iv) {\n\t\tthis._prf = prf;\n\t\tthis._initIv = iv;\n\t\tthis._iv = iv;\n\t}\n\n\treset() {\n\t\tthis._iv = this._initIv;\n\t}\n\n\t/** Input some data to calculate.\n\t * @param {bitArray} data the data to process, it must be intergral multiple of 128 bits unless it's the last.\n\t */\n\tupdate(data) {\n\t\treturn this.calculate(this._prf, data, this._iv);\n\t}\n\n\tincWord(word) {\n\t\tif (((word >> 24) & 0xff) === 0xff) { //overflow\n\t\t\tlet b1 = (word >> 16) & 0xff;\n\t\t\tlet b2 = (word >> 8) & 0xff;\n\t\t\tlet b3 = word & 0xff;\n\n\t\t\tif (b1 === 0xff) { // overflow b1   \n\t\t\t\tb1 = 0;\n\t\t\t\tif (b2 === 0xff) {\n\t\t\t\t\tb2 = 0;\n\t\t\t\t\tif (b3 === 0xff) {\n\t\t\t\t\t\tb3 = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t++b3;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t++b2;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t++b1;\n\t\t\t}\n\n\t\t\tword = 0;\n\t\t\tword += (b1 << 16);\n\t\t\tword += (b2 << 8);\n\t\t\tword += b3;\n\t\t} else {\n\t\t\tword += (0x01 << 24);\n\t\t}\n\t\treturn word;\n\t}\n\n\tincCounter(counter) {\n\t\tif ((counter[0] = this.incWord(counter[0])) === 0) {\n\t\t\t// encr_data in fileenc.c from  Dr Brian Gladman's counts only with DWORD j < 8\n\t\t\tcounter[1] = this.incWord(counter[1]);\n\t\t}\n\t}\n\n\tcalculate(prf, data, iv) {\n\t\tlet l;\n\t\tif (!(l = data.length)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst bl = bitArray.bitLength(data);\n\t\tfor (let i = 0; i < l; i += 4) {\n\t\t\tthis.incCounter(iv);\n\t\t\tconst e = prf.encrypt(iv);\n\t\t\tdata[i] ^= e[0];\n\t\t\tdata[i + 1] ^= e[1];\n\t\t\tdata[i + 2] ^= e[2];\n\t\t\tdata[i + 3] ^= e[3];\n\t\t}\n\t\treturn bitArray.clamp(data, bl);\n\t}\n};\n\n\nconst misc = {};\n\n/** @fileOverview HMAC implementation.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/** HMAC with the specified hash function.\n * @constructor\n * @param {bitArray} key the key for HMAC.\n * @param {Object} [Hash=hash.sha1] The hash function to use.\n */\nmisc.hmacSha1 = class {\n\n\tconstructor(key) {\n\t\tconst hmac = this;\n\t\tconst Hash = hmac._hash = hash.sha1;\n\t\tconst exKey = [[], []];\n\t\tconst bs = Hash.prototype.blockSize / 32;\n\t\thmac._baseHash = [new Hash(), new Hash()];\n\n\t\tif (key.length > bs) {\n\t\t\tkey = Hash.hash(key);\n\t\t}\n\n\t\tfor (let i = 0; i < bs; i++) {\n\t\t\texKey[0][i] = key[i] ^ 0x36363636;\n\t\t\texKey[1][i] = key[i] ^ 0x5C5C5C5C;\n\t\t}\n\n\t\thmac._baseHash[0].update(exKey[0]);\n\t\thmac._baseHash[1].update(exKey[1]);\n\t\thmac._resultHash = new Hash(hmac._baseHash[0]);\n\t}\n\treset() {\n\t\tconst hmac = this;\n\t\thmac._resultHash = new hmac._hash(hmac._baseHash[0]);\n\t\thmac._updated = false;\n\t}\n\n\tupdate(data) {\n\t\tconst hmac = this;\n\t\thmac._updated = true;\n\t\thmac._resultHash.update(data);\n\t}\n\n\tdigest() {\n\t\tconst hmac = this;\n\t\tconst w = hmac._resultHash.finalize();\n\t\tconst result = new (hmac._hash)(hmac._baseHash[1]).update(w).finalize();\n\n\t\thmac.reset();\n\n\t\treturn result;\n\t}\n};\n\nexport {\n\tcipher,\n\tcodec,\n\tmisc,\n\tmode\n};","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global crypto */\n\nimport encodeText from \"./../util/encode-text.js\";\nimport { cipher, codec, misc, mode } from \"./sjcl.js\";\n\nconst ERR_INVALID_PASSWORD = \"Invalid pasword\";\nconst BLOCK_LENGTH = 16;\nconst RAW_FORMAT = \"raw\";\nconst PBKDF2_ALGORITHM = { name: \"PBKDF2\" };\nconst HASH_ALGORITHM = { name: \"HMAC\" };\nconst HASH_FUNCTION = \"SHA-1\";\nconst BASE_KEY_ALGORITHM = Object.assign({ hash: HASH_ALGORITHM }, PBKDF2_ALGORITHM);\nconst DERIVED_BITS_ALGORITHM = Object.assign({ iterations: 1000, hash: { name: HASH_FUNCTION } }, PBKDF2_ALGORITHM);\nconst DERIVED_BITS_USAGE = [\"deriveBits\"];\nconst SALT_LENGTH = [8, 12, 16];\nconst KEY_LENGTH = [16, 24, 32];\nconst SIGNATURE_LENGTH = 10;\nconst COUNTER_DEFAULT_VALUE = [0, 0, 0, 0];\nconst codecBytes = codec.bytes;\nconst Aes = cipher.aes;\nconst CtrGladman = mode.ctrGladman;\nconst HmacSha1 = misc.hmacSha1;\nclass AESDecrypt {\n\n\tconstructor(password, signed, strength) {\n\t\tObject.assign(this, {\n\t\t\tpassword,\n\t\t\tsigned,\n\t\t\tstrength: strength - 1,\n\t\t\tpendingInput: new Uint8Array(0)\n\t\t});\n\t}\n\n\tasync append(input) {\n\t\tconst aesCrypto = this;\n\t\tif (aesCrypto.password) {\n\t\t\tconst preamble = subarray(input, 0, SALT_LENGTH[aesCrypto.strength] + 2);\n\t\t\tawait createDecryptionKeys(aesCrypto, preamble, aesCrypto.password);\n\t\t\taesCrypto.password = null;\n\t\t\taesCrypto.aesCtrGladman = new CtrGladman(new Aes(aesCrypto.keys.key), Array.from(COUNTER_DEFAULT_VALUE));\n\t\t\taesCrypto.hmac = new HmacSha1(aesCrypto.keys.authentication);\n\t\t\tinput = subarray(input, SALT_LENGTH[aesCrypto.strength] + 2);\n\t\t}\n\t\tconst output = new Uint8Array(input.length - SIGNATURE_LENGTH - ((input.length - SIGNATURE_LENGTH) % BLOCK_LENGTH));\n\t\treturn append(aesCrypto, input, output, 0, SIGNATURE_LENGTH, true);\n\t}\n\n\tflush() {\n\t\tconst aesCrypto = this;\n\t\tconst pendingInput = aesCrypto.pendingInput;\n\t\tconst chunkToDecrypt = subarray(pendingInput, 0, pendingInput.length - SIGNATURE_LENGTH);\n\t\tconst originalSignature = subarray(pendingInput, pendingInput.length - SIGNATURE_LENGTH);\n\t\tlet decryptedChunkArray = new Uint8Array(0);\n\t\tif (chunkToDecrypt.length) {\n\t\t\tconst encryptedChunk = codecBytes.toBits(chunkToDecrypt);\n\t\t\taesCrypto.hmac.update(encryptedChunk);\n\t\t\tconst decryptedChunk = aesCrypto.aesCtrGladman.update(encryptedChunk);\n\t\t\tdecryptedChunkArray = codecBytes.fromBits(decryptedChunk);\n\t\t}\n\t\tlet valid = true;\n\t\tif (aesCrypto.signed) {\n\t\t\tconst signature = subarray(codecBytes.fromBits(aesCrypto.hmac.digest()), 0, SIGNATURE_LENGTH);\n\t\t\tfor (let indexSignature = 0; indexSignature < SIGNATURE_LENGTH; indexSignature++) {\n\t\t\t\tif (signature[indexSignature] != originalSignature[indexSignature]) {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tvalid,\n\t\t\tdata: decryptedChunkArray\n\t\t};\n\t}\n}\n\nclass AESEncrypt {\n\n\tconstructor(password, strength) {\n\t\tObject.assign(this, {\n\t\t\tpassword,\n\t\t\tstrength: strength - 1,\n\t\t\tpendingInput: new Uint8Array(0)\n\t\t});\n\t}\n\n\tasync append(input) {\n\t\tconst aesCrypto = this;\n\t\tlet preamble = new Uint8Array(0);\n\t\tif (aesCrypto.password) {\n\t\t\tpreamble = await createEncryptionKeys(aesCrypto, aesCrypto.password);\n\t\t\taesCrypto.password = null;\n\t\t\taesCrypto.aesCtrGladman = new CtrGladman(new Aes(aesCrypto.keys.key), Array.from(COUNTER_DEFAULT_VALUE));\n\t\t\taesCrypto.hmac = new HmacSha1(aesCrypto.keys.authentication);\n\t\t}\n\t\tconst output = new Uint8Array(preamble.length + input.length - (input.length % BLOCK_LENGTH));\n\t\toutput.set(preamble, 0);\n\t\treturn append(aesCrypto, input, output, preamble.length, 0);\n\t}\n\n\tflush() {\n\t\tconst aesCrypto = this;\n\t\tlet encryptedChunkArray = new Uint8Array(0);\n\t\tif (aesCrypto.pendingInput.length) {\n\t\t\tconst encryptedChunk = aesCrypto.aesCtrGladman.update(codecBytes.toBits(aesCrypto.pendingInput));\n\t\t\taesCrypto.hmac.update(encryptedChunk);\n\t\t\tencryptedChunkArray = codecBytes.fromBits(encryptedChunk);\n\t\t}\n\t\tconst signature = subarray(codecBytes.fromBits(aesCrypto.hmac.digest()), 0, SIGNATURE_LENGTH);\n\t\treturn {\n\t\t\tdata: concat(encryptedChunkArray, signature),\n\t\t\tsignature\n\t\t};\n\t}\n}\n\nexport {\n\tAESDecrypt,\n\tAESEncrypt,\n\tERR_INVALID_PASSWORD\n};\n\nfunction append(aesCrypto, input, output, paddingStart, paddingEnd, verifySignature) {\n\tconst inputLength = input.length - paddingEnd;\n\tif (aesCrypto.pendingInput.length) {\n\t\tinput = concat(aesCrypto.pendingInput, input);\n\t\toutput = expand(output, inputLength - (inputLength % BLOCK_LENGTH));\n\t}\n\tlet offset;\n\tfor (offset = 0; offset <= inputLength - BLOCK_LENGTH; offset += BLOCK_LENGTH) {\n\t\tconst inputChunk = codecBytes.toBits(subarray(input, offset, offset + BLOCK_LENGTH));\n\t\tif (verifySignature) {\n\t\t\taesCrypto.hmac.update(inputChunk);\n\t\t}\n\t\tconst outputChunk = aesCrypto.aesCtrGladman.update(inputChunk);\n\t\tif (!verifySignature) {\n\t\t\taesCrypto.hmac.update(outputChunk);\n\t\t}\n\t\toutput.set(codecBytes.fromBits(outputChunk), offset + paddingStart);\n\t}\n\taesCrypto.pendingInput = subarray(input, offset);\n\treturn output;\n}\n\nasync function createDecryptionKeys(decrypt, preambleArray, password) {\n\tawait createKeys(decrypt, password, subarray(preambleArray, 0, SALT_LENGTH[decrypt.strength]));\n\tconst passwordVerification = subarray(preambleArray, SALT_LENGTH[decrypt.strength]);\n\tconst passwordVerificationKey = decrypt.keys.passwordVerification;\n\tif (passwordVerificationKey[0] != passwordVerification[0] || passwordVerificationKey[1] != passwordVerification[1]) {\n\t\tthrow new Error(ERR_INVALID_PASSWORD);\n\t}\n}\n\nasync function createEncryptionKeys(encrypt, password) {\n\tconst salt = crypto.getRandomValues(new Uint8Array(SALT_LENGTH[encrypt.strength]));\n\tawait createKeys(encrypt, password, salt);\n\treturn concat(salt, encrypt.keys.passwordVerification);\n}\n\nasync function createKeys(target, password, salt) {\n\tconst encodedPassword = encodeText(password);\n\tconst basekey = await crypto.subtle.importKey(RAW_FORMAT, encodedPassword, BASE_KEY_ALGORITHM, false, DERIVED_BITS_USAGE);\n\tconst derivedBits = await crypto.subtle.deriveBits(Object.assign({ salt }, DERIVED_BITS_ALGORITHM), basekey, 8 * ((KEY_LENGTH[target.strength] * 2) + 2));\n\tconst compositeKey = new Uint8Array(derivedBits);\n\ttarget.keys = {\n\t\tkey: codecBytes.toBits(subarray(compositeKey, 0, KEY_LENGTH[target.strength])),\n\t\tauthentication: codecBytes.toBits(subarray(compositeKey, KEY_LENGTH[target.strength], KEY_LENGTH[target.strength] * 2)),\n\t\tpasswordVerification: subarray(compositeKey, KEY_LENGTH[target.strength] * 2)\n\t};\n}\n\nfunction concat(leftArray, rightArray) {\n\tlet array = leftArray;\n\tif (leftArray.length + rightArray.length) {\n\t\tarray = new Uint8Array(leftArray.length + rightArray.length);\n\t\tarray.set(leftArray, 0);\n\t\tarray.set(rightArray, leftArray.length);\n\t}\n\treturn array;\n}\n\nfunction expand(inputArray, length) {\n\tif (length && length > inputArray.length) {\n\t\tconst array = inputArray;\n\t\tinputArray = new Uint8Array(length);\n\t\tinputArray.set(array, 0);\n\t}\n\treturn inputArray;\n}\n\nfunction subarray(array, begin, end) {\n\treturn array.subarray(begin, end);\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global crypto */\n\nimport Crc32 from \"./crc32.js\";\nimport { ERR_INVALID_PASSWORD } from \"./aes-crypto.js\";\n\nconst HEADER_LENGTH = 12;\n\nclass ZipCryptoDecrypt {\n\n\tconstructor(password, passwordVerification) {\n\t\tconst zipCrypto = this;\n\t\tObject.assign(zipCrypto, {\n\t\t\tpassword,\n\t\t\tpasswordVerification\n\t\t});\n\t\tcreateKeys(zipCrypto, password);\n\t}\n\n\tappend(input) {\n\t\tconst zipCrypto = this;\n\t\tif (zipCrypto.password) {\n\t\t\tconst decryptedHeader = decrypt(zipCrypto, input.subarray(0, HEADER_LENGTH));\n\t\t\tzipCrypto.password = null;\n\t\t\tif (decryptedHeader[HEADER_LENGTH - 1] != zipCrypto.passwordVerification) {\n\t\t\t\tthrow new Error(ERR_INVALID_PASSWORD);\n\t\t\t}\n\t\t\tinput = input.subarray(HEADER_LENGTH);\n\t\t}\n\t\treturn decrypt(zipCrypto, input);\n\t}\n\n\tflush() {\n\t\treturn {\n\t\t\tvalid: true,\n\t\t\tdata: new Uint8Array(0)\n\t\t};\n\t}\n}\n\nclass ZipCryptoEncrypt {\n\n\tconstructor(password, passwordVerification) {\n\t\tconst zipCrypto = this;\n\t\tObject.assign(zipCrypto, {\n\t\t\tpassword,\n\t\t\tpasswordVerification\n\t\t});\n\t\tcreateKeys(zipCrypto, password);\n\t}\n\n\tappend(input) {\n\t\tconst zipCrypto = this;\n\t\tlet output;\n\t\tlet offset;\n\t\tif (zipCrypto.password) {\n\t\t\tzipCrypto.password = null;\n\t\t\tconst header = crypto.getRandomValues(new Uint8Array(HEADER_LENGTH));\n\t\t\theader[HEADER_LENGTH - 1] = zipCrypto.passwordVerification;\n\t\t\toutput = new Uint8Array(input.length + header.length);\n\t\t\toutput.set(encrypt(zipCrypto, header), 0);\n\t\t\toffset = HEADER_LENGTH;\n\t\t} else {\n\t\t\toutput = new Uint8Array(input.length);\n\t\t\toffset = 0;\n\t\t}\n\t\toutput.set(encrypt(zipCrypto, input), offset);\n\t\treturn output;\n\t}\n\n\tflush() {\n\t\treturn {\n\t\t\tdata: new Uint8Array(0)\n\t\t};\n\t}\n}\n\nexport {\n\tZipCryptoDecrypt,\n\tZipCryptoEncrypt,\n\tERR_INVALID_PASSWORD\n};\n\nfunction decrypt(target, input) {\n\tconst output = new Uint8Array(input.length);\n\tfor (let index = 0; index < input.length; index++) {\n\t\toutput[index] = getByte(target) ^ input[index];\n\t\tupdateKeys(target, output[index]);\n\t}\n\treturn output;\n}\n\nfunction encrypt(target, input) {\n\tconst output = new Uint8Array(input.length);\n\tfor (let index = 0; index < input.length; index++) {\n\t\toutput[index] = getByte(target) ^ input[index];\n\t\tupdateKeys(target, input[index]);\n\t}\n\treturn output;\n}\n\nfunction createKeys(target, password) {\n\ttarget.keys = [0x12345678, 0x23456789, 0x34567890];\n\ttarget.crcKey0 = new Crc32(target.keys[0]);\n\ttarget.crcKey2 = new Crc32(target.keys[2]);\n\tfor (let index = 0; index < password.length; index++) {\n\t\tupdateKeys(target, password.charCodeAt(index));\n\t}\n}\n\nfunction updateKeys(target, byte) {\n\ttarget.crcKey0.append([byte]);\n\ttarget.keys[0] = ~target.crcKey0.get();\n\ttarget.keys[1] = getInt32(target.keys[1] + getInt8(target.keys[0]));\n\ttarget.keys[1] = getInt32(Math.imul(target.keys[1], 134775813) + 1);\n\ttarget.crcKey2.append([target.keys[1] >>> 24]);\n\ttarget.keys[2] = ~target.crcKey2.get();\n}\n\nfunction getByte(target) {\n\tconst temp = target.keys[2] | 2;\n\treturn getInt8(Math.imul(temp, (temp ^ 1)) >>> 8);\n}\n\nfunction getInt8(number) {\n\treturn number & 0xFF;\n}\n\nfunction getInt32(number) {\n\treturn number & 0xFFFFFFFF;\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport Crc32 from \"./crc32.js\";\nimport { AESEncrypt, AESDecrypt, ERR_INVALID_PASSWORD } from \"./aes-crypto.js\";\nimport { ZipCryptoDecrypt, ZipCryptoEncrypt } from \"./zip-crypto.js\";\n\nconst CODEC_DEFLATE = \"deflate\";\nconst CODEC_INFLATE = \"inflate\";\nconst ERR_INVALID_SIGNATURE = \"Invalid signature\";\n\nclass Inflate {\n\n\tconstructor(codecConstructor, {\n\t\tsignature,\n\t\tpassword,\n\t\tsigned,\n\t\tcompressed,\n\t\tzipCrypto,\n\t\tpasswordVerification,\n\t\tencryptionStrength\n\t}, { chunkSize }) {\n\t\tconst encrypted = Boolean(password);\n\t\tObject.assign(this, {\n\t\t\tsignature,\n\t\t\tencrypted,\n\t\t\tsigned,\n\t\t\tcompressed,\n\t\t\tinflate: compressed && new codecConstructor({ chunkSize }),\n\t\t\tcrc32: signed && new Crc32(),\n\t\t\tzipCrypto,\n\t\t\tdecrypt: encrypted && zipCrypto ?\n\t\t\t\tnew ZipCryptoDecrypt(password, passwordVerification) :\n\t\t\t\tnew AESDecrypt(password, signed, encryptionStrength)\n\t\t});\n\t}\n\n\tasync append(data) {\n\t\tconst codec = this;\n\t\tif (codec.encrypted && data.length) {\n\t\t\tdata = await codec.decrypt.append(data);\n\t\t}\n\t\tif (codec.compressed && data.length) {\n\t\t\tdata = await codec.inflate.append(data);\n\t\t}\n\t\tif ((!codec.encrypted || codec.zipCrypto) && codec.signed && data.length) {\n\t\t\tcodec.crc32.append(data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tasync flush() {\n\t\tconst codec = this;\n\t\tlet signature;\n\t\tlet data = new Uint8Array(0);\n\t\tif (codec.encrypted) {\n\t\t\tconst result = codec.decrypt.flush();\n\t\t\tif (!result.valid) {\n\t\t\t\tthrow new Error(ERR_INVALID_SIGNATURE);\n\t\t\t}\n\t\t\tdata = result.data;\n\t\t}\n\t\tif ((!codec.encrypted || codec.zipCrypto) && codec.signed) {\n\t\t\tconst dataViewSignature = new DataView(new Uint8Array(4).buffer);\n\t\t\tsignature = codec.crc32.get();\n\t\t\tdataViewSignature.setUint32(0, signature);\n\t\t\tif (codec.signature != dataViewSignature.getUint32(0, false)) {\n\t\t\t\tthrow new Error(ERR_INVALID_SIGNATURE);\n\t\t\t}\n\t\t}\n\t\tif (codec.compressed) {\n\t\t\tdata = (await codec.inflate.append(data)) || new Uint8Array(0);\n\t\t\tawait codec.inflate.flush();\n\t\t}\n\t\treturn { data, signature };\n\t}\n}\n\nclass Deflate {\n\n\tconstructor(codecConstructor, {\n\t\tencrypted,\n\t\tsigned,\n\t\tcompressed,\n\t\tlevel,\n\t\tzipCrypto,\n\t\tpassword,\n\t\tpasswordVerification,\n\t\tencryptionStrength\n\t}, { chunkSize }) {\n\t\tObject.assign(this, {\n\t\t\tencrypted,\n\t\t\tsigned,\n\t\t\tcompressed,\n\t\t\tdeflate: compressed && new codecConstructor({ level: level || 5, chunkSize }),\n\t\t\tcrc32: signed && new Crc32(),\n\t\t\tzipCrypto,\n\t\t\tencrypt: encrypted && zipCrypto ?\n\t\t\t\tnew ZipCryptoEncrypt(password, passwordVerification) :\n\t\t\t\tnew AESEncrypt(password, encryptionStrength)\n\t\t});\n\t}\n\n\tasync append(inputData) {\n\t\tconst codec = this;\n\t\tlet data = inputData;\n\t\tif (codec.compressed && inputData.length) {\n\t\t\tdata = await codec.deflate.append(inputData);\n\t\t}\n\t\tif (codec.encrypted && data.length) {\n\t\t\tdata = await codec.encrypt.append(data);\n\t\t}\n\t\tif ((!codec.encrypted || codec.zipCrypto) && codec.signed && inputData.length) {\n\t\t\tcodec.crc32.append(inputData);\n\t\t}\n\t\treturn data;\n\t}\n\n\tasync flush() {\n\t\tconst codec = this;\n\t\tlet signature;\n\t\tlet data = new Uint8Array(0);\n\t\tif (codec.compressed) {\n\t\t\tdata = (await codec.deflate.flush()) || new Uint8Array(0);\n\t\t}\n\t\tif (codec.encrypted) {\n\t\t\tdata = await codec.encrypt.append(data);\n\t\t\tconst result = codec.encrypt.flush();\n\t\t\tsignature = result.signature;\n\t\t\tconst newData = new Uint8Array(data.length + result.data.length);\n\t\t\tnewData.set(data, 0);\n\t\t\tnewData.set(result.data, data.length);\n\t\t\tdata = newData;\n\t\t}\n\t\tif ((!codec.encrypted || codec.zipCrypto) && codec.signed) {\n\t\t\tsignature = codec.crc32.get();\n\t\t}\n\t\treturn { data, signature };\n\t}\n}\n\nexport {\n\tInflate,\n\tDeflate,\n\tcreateCodec,\n\tCODEC_DEFLATE,\n\tCODEC_INFLATE,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSWORD\n};\n\nfunction createCodec(codecConstructor, options, config) {\n\tif (options.codecType.startsWith(CODEC_DEFLATE)) {\n\t\treturn new Deflate(codecConstructor, options, config);\n\t} else if (options.codecType.startsWith(CODEC_INFLATE)) {\n\t\treturn new Inflate(codecConstructor, options, config);\n\t}\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global Worker, URL */\n\nimport { createCodec } from \"./codec.js\";\n\nconst MESSAGE_INIT = \"init\";\nconst MESSAGE_APPEND = \"append\";\nconst MESSAGE_FLUSH = \"flush\";\nconst MESSAGE_EVENT_TYPE = \"message\";\n\nlet classicWorkersSupported = true;\n\nexport default (workerData, codecConstructor, options, config, onTaskFinished, webWorker, scripts) => {\n\tObject.assign(workerData, {\n\t\tbusy: true,\n\t\tcodecConstructor,\n\t\toptions: Object.assign({}, options),\n\t\tscripts,\n\t\tterminate() {\n\t\t\tif (workerData.worker && !workerData.busy) {\n\t\t\t\tworkerData.worker.terminate();\n\t\t\t\tworkerData.interface = null;\n\t\t\t}\n\t\t},\n\t\tonTaskFinished() {\n\t\t\tworkerData.busy = false;\n\t\t\tonTaskFinished(workerData);\n\t\t}\n\t});\n\treturn webWorker ? createWebWorkerInterface(workerData, config) : createWorkerInterface(workerData, config);\n};\n\nfunction createWorkerInterface(workerData, config) {\n\tconst interfaceCodec = createCodec(workerData.codecConstructor, workerData.options, config);\n\treturn {\n\t\tasync append(data) {\n\t\t\ttry {\n\t\t\t\treturn await interfaceCodec.append(data);\n\t\t\t} catch (error) {\n\t\t\t\tworkerData.onTaskFinished();\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\tasync flush() {\n\t\t\ttry {\n\t\t\t\treturn await interfaceCodec.flush();\n\t\t\t} finally {\n\t\t\t\tworkerData.onTaskFinished();\n\t\t\t}\n\t\t},\n\t\tabort() {\n\t\t\tworkerData.onTaskFinished();\n\t\t}\n\t};\n}\n\nfunction createWebWorkerInterface(workerData, config) {\n\tlet messageTask;\n\tconst workerOptions = { type: \"module\" };\n\tif (!workerData.interface) {\n\t\tif (!classicWorkersSupported) {\n\t\t\tworkerData.worker = getWorker(workerOptions, config.baseURL);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tworkerData.worker = getWorker({}, config.baseURL);\n\t\t\t} catch (error) {\n\t\t\t\tclassicWorkersSupported = false;\n\t\t\t\tworkerData.worker = getWorker(workerOptions, config.baseURL);\n\t\t\t}\n\t\t}\n\t\tworkerData.worker.addEventListener(MESSAGE_EVENT_TYPE, onMessage, false);\n\t\tworkerData.interface = {\n\t\t\tappend(data) {\n\t\t\t\treturn initAndSendMessage({ type: MESSAGE_APPEND, data });\n\t\t\t},\n\t\t\tflush() {\n\t\t\t\treturn initAndSendMessage({ type: MESSAGE_FLUSH });\n\t\t\t},\n\t\t\tabort() {\n\t\t\t\tworkerData.onTaskFinished();\n\t\t\t}\n\t\t};\n\t}\n\treturn workerData.interface;\n\n\tfunction getWorker(options, baseURL) {\n\t\tlet url, scriptUrl;\n\t\turl = workerData.scripts[0];\n\t\tif (typeof url == \"function\") {\n\t\t\turl = url();\n\t\t}\n\t\ttry {\n\t\t\tscriptUrl = new URL(url, baseURL);\n\t\t} catch (error) {\n\t\t\tscriptUrl = url;\n\t\t}\n\t\treturn new Worker(scriptUrl, options);\n\t}\n\n\tasync function initAndSendMessage(message) {\n\t\tif (!messageTask) {\n\t\t\tconst options = workerData.options;\n\t\t\tconst scripts = workerData.scripts.slice(1);\n\t\t\tawait sendMessage({ scripts, type: MESSAGE_INIT, options, config: { chunkSize: config.chunkSize } });\n\t\t}\n\t\treturn sendMessage(message);\n\t}\n\n\tfunction sendMessage(message) {\n\t\tconst worker = workerData.worker;\n\t\tconst result = new Promise((resolve, reject) => messageTask = { resolve, reject });\n\t\ttry {\n\t\t\tif (message.data) {\n\t\t\t\ttry {\n\t\t\t\t\tmessage.data = message.data.buffer;\n\t\t\t\t\tworker.postMessage(message, [message.data]);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tworker.postMessage(message);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tworker.postMessage(message);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tmessageTask.reject(error);\n\t\t\tmessageTask = null;\n\t\t\tworkerData.onTaskFinished();\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction onMessage(event) {\n\t\tconst message = event.data;\n\t\tif (messageTask) {\n\t\t\tconst reponseError = message.error;\n\t\t\tconst type = message.type;\n\t\t\tif (reponseError) {\n\t\t\t\tconst error = new Error(reponseError.message);\n\t\t\t\terror.stack = reponseError.stack;\n\t\t\t\tmessageTask.reject(error);\n\t\t\t\tmessageTask = null;\n\t\t\t\tworkerData.onTaskFinished();\n\t\t\t} else if (type == MESSAGE_INIT || type == MESSAGE_FLUSH || type == MESSAGE_APPEND) {\n\t\t\t\tconst data = message.data;\n\t\t\t\tif (type == MESSAGE_FLUSH) {\n\t\t\t\t\tmessageTask.resolve({ data: new Uint8Array(data), signature: message.signature });\n\t\t\t\t\tmessageTask = null;\n\t\t\t\t\tworkerData.onTaskFinished();\n\t\t\t\t} else {\n\t\t\t\t\tmessageTask.resolve(data && new Uint8Array(data));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global setTimeout, clearTimeout */\n\nimport { CODEC_INFLATE, CODEC_DEFLATE, ERR_INVALID_SIGNATURE, ERR_INVALID_PASSWORD } from \"./codec.js\";\nimport getWorker from \"./codec-pool-worker.js\";\n\nlet pool = [];\nlet pendingRequests = [];\n\nexport {\n\tcreateCodec,\n\tterminateWorkers,\n\tCODEC_DEFLATE,\n\tCODEC_INFLATE,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSWORD\n};\n\nfunction createCodec(codecConstructor, options, config) {\n\tconst streamCopy = !options.compressed && !options.signed && !options.encrypted;\n\tconst webWorker = !streamCopy && (options.useWebWorkers || (options.useWebWorkers === undefined && config.useWebWorkers));\n\tconst scripts = webWorker && config.workerScripts ? config.workerScripts[options.codecType] : [];\n\tif (pool.length < config.maxWorkers) {\n\t\tconst workerData = {};\n\t\tpool.push(workerData);\n\t\treturn getWorker(workerData, codecConstructor, options, config, onTaskFinished, webWorker, scripts);\n\t} else {\n\t\tconst workerData = pool.find(workerData => !workerData.busy);\n\t\tif (workerData) {\n\t\t\tclearTerminateTimeout(workerData);\n\t\t\treturn getWorker(workerData, codecConstructor, options, config, onTaskFinished, webWorker, scripts);\n\t\t} else {\n\t\t\treturn new Promise(resolve => pendingRequests.push({ resolve, codecConstructor, options, webWorker, scripts }));\n\t\t}\n\t}\n\n\tfunction onTaskFinished(workerData) {\n\t\tif (pendingRequests.length) {\n\t\t\tconst [{ resolve, codecConstructor, options, webWorker, scripts }] = pendingRequests.splice(0, 1);\n\t\t\tresolve(getWorker(workerData, codecConstructor, options, config, onTaskFinished, webWorker, scripts));\n\t\t} else if (workerData.worker) {\n\t\t\tclearTerminateTimeout(workerData);\n\t\t\tif (Number.isFinite(config.terminateWorkerTimeout) && config.terminateWorkerTimeout >= 0) {\n\t\t\t\tworkerData.terminateTimeout = setTimeout(() => {\n\t\t\t\t\tpool = pool.filter(data => data != workerData);\n\t\t\t\t\tworkerData.terminate();\n\t\t\t\t}, config.terminateWorkerTimeout);\n\t\t\t}\n\t\t} else {\n\t\t\tpool = pool.filter(data => data != workerData);\n\t\t}\n\t}\n}\n\nfunction clearTerminateTimeout(workerData) {\n\tif (workerData.terminateTimeout) {\n\t\tclearTimeout(workerData.terminateTimeout);\n\t\tworkerData.terminateTimeout = null;\n\t}\n}\n\nfunction terminateWorkers() {\n\tpool.forEach(workerData => {\n\t\tclearTerminateTimeout(workerData);\n\t\tworkerData.terminate();\n\t});\n}","var t=t=>{if(\"function\"==typeof URL.createObjectURL){const e=()=>URL.createObjectURL(new Blob(['const{Array:t,Object:e,Math:n,Error:r,Uint8Array:i,Uint16Array:s,Uint32Array:o,Int32Array:f,DataView:c,TextEncoder:l,crypto:u,postMessage:a}=globalThis,w=[];for(let t=0;256>t;t++){let e=t;for(let t=0;8>t;t++)1&e?e=e>>>1^3988292384:e>>>=1;w[t]=e}class h{constructor(t){this.t=t||-1}append(t){let e=0|this.t;for(let n=0,r=0|t.length;r>n;n++)e=e>>>8^w[255&(e^t[n])];this.t=e}get(){return~this.t}}const d={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=d.i(n);return 32===r?t.concat(e):d.o(e,r,0|n,t.slice(0,t.length-1))},l(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+d.i(n)},u(t,e){if(32*t.length<e)return t;const r=(t=t.slice(0,n.ceil(e/32))).length;return e&=31,r>0&&e&&(t[r-1]=d.h(e,t[r-1]&2147483648>>e-1,1)),t},h:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,i:t=>n.round(t/1099511627776)||32,o(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;const i=t.length?t[t.length-1]:0,s=d.i(i);return r.push(d.h(e+s&31,e+s>32?n:r.pop(),1)),r}},p={p:{k(t){const e=d.l(t)/8,n=new i(e);let r;for(let i=0;e>i;i++)0==(3&i)&&(r=t[i/4]),n[i]=r>>>24,r<<=8;return n},g(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(d.h(8*(3&n),r)),e}}},b={v:function(t){t?(this.m=t.m.slice(0),this.S=t.S.slice(0),this._=t._):this.reset()}};b.v.prototype={blockSize:512,reset:function(){const t=this;return t.m=this.I.slice(0),t.S=[],t._=0,t},update:function(t){const e=this;\"string\"==typeof t&&(t=p.C.g(t));const n=e.S=d.concat(e.S,t),i=e._,s=e._=i+d.l(t);if(s>9007199254740991)throw new r(\"Cannot hash more than 2^53 - 1 bits\");const f=new o(n);let c=0;for(let t=e.blockSize+i-(e.blockSize+i&e.blockSize-1);s>=t;t+=e.blockSize)e.A(f.subarray(16*c,16*(c+1))),c+=1;return n.splice(0,16*c),e},V:function(){const t=this;let e=t.S;const r=t.m;e=d.concat(e,[d.h(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(n.floor(t._/4294967296)),e.push(0|t._);e.length;)t.A(e.splice(0,16));return t.reset(),r},I:[1732584193,4023233417,2562383102,271733878,3285377520],B:[1518500249,1859775393,2400959708,3395469782],D:(t,e,n,r)=>t>19?t>39?t>59?t>79?void 0:e^n^r:e&n|e&r|n&r:e^n^r:e&n|~e&r,U:(t,e)=>e<<t|e>>>32-t,A:function(e){const r=this,i=r.m,s=t(80);for(let t=0;16>t;t++)s[t]=e[t];let o=i[0],f=i[1],c=i[2],l=i[3],u=i[4];for(let t=0;79>=t;t++){16>t||(s[t]=r.U(1,s[t-3]^s[t-8]^s[t-14]^s[t-16]));const e=r.U(5,o)+r.D(t,f,c,l)+u+s[t]+r.B[n.floor(t/20)]|0;u=l,l=c,c=r.U(30,f),f=o,o=e}i[0]=i[0]+o|0,i[1]=i[1]+f|0,i[2]=i[2]+c|0,i[3]=i[3]+l|0,i[4]=i[4]+u|0}};const y={name:\"PBKDF2\"},k=e.assign({hash:{name:\"HMAC\"}},y),g=e.assign({iterations:1e3,hash:{name:\"SHA-1\"}},y),v=[\"deriveBits\"],m=[8,12,16],z=[16,24,32],S=[0,0,0,0],_=p.p,I=class{constructor(t){const e=this;e.M=[[[],[],[],[],[]],[[],[],[],[],[]]],e.M[0][0][0]||e.P();const n=e.M[0][4],i=e.M[1],s=t.length;let o,f,c,l=1;if(4!==s&&6!==s&&8!==s)throw new r(\"invalid aes key size\");for(e.B=[f=t.slice(0),c=[]],o=s;4*s+28>o;o++){let t=f[o-1];(o%s==0||8===s&&o%s==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],o%s==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),f[o]=f[o-s]^t}for(let t=0;o;t++,o--){const e=f[3&t?o:o-4];c[t]=4>=o||4>t?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]]}}encrypt(t){return this.H(t,0)}decrypt(t){return this.H(t,1)}P(){const t=this.M[0],e=this.M[1],n=t[4],r=e[4],i=[],s=[];let o,f,c,l;for(let t=0;256>t;t++)s[(i[t]=t<<1^283*(t>>7))^t]=t;for(let u=o=0;!n[u];u^=f||1,o=s[o]||1){let s=o^o<<1^o<<2^o<<3^o<<4;s=s>>8^255&s^99,n[u]=s,r[s]=u,l=i[c=i[f=i[u]]];let a=16843009*l^65537*c^257*f^16843008*u,w=257*i[s]^16843008*s;for(let n=0;4>n;n++)t[n][u]=w=w<<24^w>>>8,e[n][s]=a=a<<24^a>>>8}for(let n=0;5>n;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}H(t,e){if(4!==t.length)throw new r(\"invalid aes block size\");const n=this.B[e],i=n.length/4-2,s=[0,0,0,0],o=this.M[e],f=o[0],c=o[1],l=o[2],u=o[3],a=o[4];let w,h,d,p=t[0]^n[0],b=t[e?3:1]^n[1],y=t[2]^n[2],k=t[e?1:3]^n[3],g=4;for(let t=0;i>t;t++)w=f[p>>>24]^c[b>>16&255]^l[y>>8&255]^u[255&k]^n[g],h=f[b>>>24]^c[y>>16&255]^l[k>>8&255]^u[255&p]^n[g+1],d=f[y>>>24]^c[k>>16&255]^l[p>>8&255]^u[255&b]^n[g+2],k=f[k>>>24]^c[p>>16&255]^l[b>>8&255]^u[255&y]^n[g+3],g+=4,p=w,b=h,y=d;for(let t=0;4>t;t++)s[e?3&-t:t]=a[p>>>24]<<24^a[b>>16&255]<<16^a[y>>8&255]<<8^a[255&k]^n[g++],w=p,p=b,b=y,y=k,k=w;return s}},C=class{constructor(t,e){this.L=t,this.R=e,this.T=e}reset(){this.T=this.R}update(t){return this.j(this.L,t,this.T)}F(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}K(t){0===(t[0]=this.F(t[0]))&&(t[1]=this.F(t[1]))}j(t,e,n){let r;if(!(r=e.length))return[];const i=d.l(e);for(let i=0;r>i;i+=4){this.K(n);const r=t.encrypt(n);e[i]^=r[0],e[i+1]^=r[1],e[i+2]^=r[2],e[i+3]^=r[3]}return d.u(e,i)}},A=class{constructor(t){const e=this,n=e.O=b.v,r=[[],[]],i=n.prototype.blockSize/32;e.W=[new n,new n],t.length>i&&(t=n.hash(t));for(let e=0;i>e;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e.W[0].update(r[0]),e.W[1].update(r[1]),e.q=new n(e.W[0])}reset(){const t=this;t.q=new t.O(t.W[0]),t.G=!1}update(t){this.G=!0,this.q.update(t)}digest(){const t=this,e=t.q.V(),n=new t.O(t.W[1]).update(e).V();return t.reset(),n}};class V{constructor(t,n,r){e.assign(this,{password:t,signed:n,J:r-1,N:new i(0)})}async append(e){const n=this;if(n.password){const i=M(e,0,m[n.J]+2);await(async(t,e,n)=>{await D(t,n,M(e,0,m[t.J]));const i=M(e,m[t.J]),s=t.keys.passwordVerification;if(s[0]!=i[0]||s[1]!=i[1])throw new r(\"Invalid pasword\")})(n,i,n.password),n.password=null,n.X=new C(new I(n.keys.key),t.from(S)),n.Y=new A(n.keys.Z),e=M(e,m[n.J]+2)}return B(n,e,new i(e.length-10-(e.length-10)%16),0,10,!0)}flush(){const t=this,e=t.N,n=M(e,0,e.length-10),r=M(e,e.length-10);let s=new i(0);if(n.length){const e=_.g(n);t.Y.update(e);const r=t.X.update(e);s=_.k(r)}let o=!0;if(t.signed){const e=M(_.k(t.Y.digest()),0,10);for(let t=0;10>t;t++)e[t]!=r[t]&&(o=!1)}return{valid:o,data:s}}}class E{constructor(t,n){e.assign(this,{password:t,J:n-1,N:new i(0)})}async append(e){const n=this;let r=new i(0);n.password&&(r=await(async(t,e)=>{const n=u.getRandomValues(new i(m[t.J]));return await D(t,e,n),U(n,t.keys.passwordVerification)})(n,n.password),n.password=null,n.X=new C(new I(n.keys.key),t.from(S)),n.Y=new A(n.keys.Z));const s=new i(r.length+e.length-e.length%16);return s.set(r,0),B(n,e,s,r.length,0)}flush(){const t=this;let e=new i(0);if(t.N.length){const n=t.X.update(_.g(t.N));t.Y.update(n),e=_.k(n)}const n=M(_.k(t.Y.digest()),0,10);return{data:U(e,n),signature:n}}}function B(t,e,n,r,s,o){const f=e.length-s;let c;for(t.N.length&&(e=U(t.N,e),n=((t,e)=>{if(e&&e>t.length){const n=t;(t=new i(e)).set(n,0)}return t})(n,f-f%16)),c=0;f-16>=c;c+=16){const i=_.g(M(e,c,c+16));o&&t.Y.update(i);const s=t.X.update(i);o||t.Y.update(s),n.set(_.k(s),c+r)}return t.N=M(e,c),n}async function D(t,n,r){const s=(t=>{if(void 0===l){const e=new i((t=unescape(encodeURIComponent(t))).length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}return(new l).encode(t)})(n),o=await u.subtle.importKey(\"raw\",s,k,!1,v),f=await u.subtle.deriveBits(e.assign({salt:r},g),o,8*(2*z[t.J]+2)),c=new i(f);t.keys={key:_.g(M(c,0,z[t.J])),Z:_.g(M(c,z[t.J],2*z[t.J])),passwordVerification:M(c,2*z[t.J])}}function U(t,e){let n=t;return t.length+e.length&&(n=new i(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function M(t,e,n){return t.subarray(e,n)}class P{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),T(this,t)}append(t){const e=this;if(e.password){const n=L(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new r(\"Invalid pasword\");t=t.subarray(12)}return L(e,t)}flush(){return{valid:!0,data:new i(0)}}}class H{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),T(this,t)}append(t){const e=this;let n,r;if(e.password){e.password=null;const s=u.getRandomValues(new i(12));s[11]=e.passwordVerification,n=new i(t.length+s.length),n.set(R(e,s),0),r=12}else n=new i(t.length),r=0;return n.set(R(e,t),r),n}flush(){return{data:new i(0)}}}function L(t,e){const n=new i(e.length);for(let r=0;r<e.length;r++)n[r]=x(t)^e[r],j(t,n[r]);return n}function R(t,e){const n=new i(e.length);for(let r=0;r<e.length;r++)n[r]=x(t)^e[r],j(t,e[r]);return n}function T(t,e){t.keys=[305419896,591751049,878082192],t.$=new h(t.keys[0]),t.tt=new h(t.keys[2]);for(let n=0;n<e.length;n++)j(t,e.charCodeAt(n))}function j(t,e){t.$.append([e]),t.keys[0]=~t.$.get(),t.keys[1]=K(t.keys[1]+F(t.keys[0])),t.keys[1]=K(n.imul(t.keys[1],134775813)+1),t.tt.append([t.keys[1]>>>24]),t.keys[2]=~t.tt.get()}function x(t){const e=2|t.keys[2];return F(n.imul(e,1^e)>>>8)}function F(t){return 255&t}function K(t){return 4294967295&t}class O{constructor(t,{signature:n,password:r,signed:i,compressed:s,zipCrypto:o,passwordVerification:f,encryptionStrength:c},{et:l}){const u=!!r;e.assign(this,{signature:n,encrypted:u,signed:i,compressed:s,nt:s&&new t({et:l}),rt:i&&new h,zipCrypto:o,decrypt:u&&o?new P(r,f):new V(r,i,c)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.nt.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.rt.append(t),t}async flush(){const t=this;let e,n=new i(0);if(t.encrypted){const e=t.decrypt.flush();if(!e.valid)throw new r(\"Invalid signature\");n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new c(new i(4).buffer);if(e=t.rt.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new r(\"Invalid signature\")}return t.compressed&&(n=await t.nt.append(n)||new i(0),await t.nt.flush()),{data:n,signature:e}}}class W{constructor(t,{encrypted:n,signed:r,compressed:i,level:s,zipCrypto:o,password:f,passwordVerification:c,encryptionStrength:l},{et:u}){e.assign(this,{encrypted:n,signed:r,compressed:i,it:i&&new t({level:s||5,et:u}),rt:r&&new h,zipCrypto:o,encrypt:n&&o?new H(f,c):new E(f,l)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.it.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.rt.append(t),n}async flush(){const t=this;let e,n=new i(0);if(t.compressed&&(n=await t.it.flush()||new i(0)),t.encrypted){n=await t.encrypt.append(n);const r=t.encrypt.flush();e=r.signature;const s=new i(n.length+r.data.length);s.set(n,0),s.set(r.data,n.length),n=s}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.rt.get()),{data:n,signature:e}}}const q={init(t){t.scripts&&t.scripts.length&&importScripts.apply(void 0,t.scripts);const e=t.options;let n;self.initCodec&&self.initCodec(),e.codecType.startsWith(\"deflate\")?n=self.Deflate:e.codecType.startsWith(\"inflate\")&&(n=self.Inflate),G=((t,e,n)=>e.codecType.startsWith(\"deflate\")?new W(t,e,n):e.codecType.startsWith(\"inflate\")?new O(t,e,n):void 0)(n,e,t.config)},append:async t=>({data:await G.append(t.data)}),flush:()=>G.flush()};let G;function J(e){return N(e.map((([e,n])=>new t(e).fill(n,0,e))))}function N(e){return e.reduce(((e,n)=>e.concat(t.isArray(n)?N(n):n)),[])}addEventListener(\"message\",(async t=>{const e=t.data,n=e.type,r=q[n];if(r)try{e.data&&(e.data=new i(e.data));const t=await r(e)||{};if(t.type=n,t.data)try{t.data=t.data.buffer,a(t,[t.data])}catch(e){a(t)}else a(t)}catch(t){a({type:n,error:{message:t.message,stack:t.stack}})}}));const Q=[0,1,2,3].concat(...J([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function X(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.st=r=>{const i=t.ot,s=t.ct.ft,o=t.ct.lt;let f,c,l,u=-1;for(r.ut=0,r.at=573,f=0;o>f;f++)0!==i[2*f]?(r.wt[++r.ut]=u=f,r.ht[f]=0):i[2*f+1]=0;for(;2>r.ut;)l=r.wt[++r.ut]=2>u?++u:0,i[2*l]=1,r.ht[l]=0,r.dt--,s&&(r.bt-=s[2*l+1]);for(t.yt=u,f=n.floor(r.ut/2);f>=1;f--)r.kt(i,f);l=o;do{f=r.wt[1],r.wt[1]=r.wt[r.ut--],r.kt(i,1),c=r.wt[1],r.wt[--r.at]=f,r.wt[--r.at]=c,i[2*l]=i[2*f]+i[2*c],r.ht[l]=n.max(r.ht[f],r.ht[c])+1,i[2*f+1]=i[2*c+1]=l,r.wt[1]=l++,r.kt(i,1)}while(r.ut>=2);r.wt[--r.at]=r.wt[1],(e=>{const n=t.ot,r=t.ct.ft,i=t.ct.gt,s=t.ct.vt,o=t.ct.zt;let f,c,l,u,a,w,h=0;for(u=0;15>=u;u++)e.St[u]=0;for(n[2*e.wt[e.at]+1]=0,f=e.at+1;573>f;f++)c=e.wt[f],u=n[2*n[2*c+1]+1]+1,u>o&&(u=o,h++),n[2*c+1]=u,c>t.yt||(e.St[u]++,a=0,s>c||(a=i[c-s]),w=n[2*c],e.dt+=w*(u+a),r&&(e.bt+=w*(r[2*c+1]+a)));if(0!==h){do{for(u=o-1;0===e.St[u];)u--;e.St[u]--,e.St[u+1]+=2,e.St[o]--,h-=2}while(h>0);for(u=o;0!==u;u--)for(c=e.St[u];0!==c;)l=e.wt[--f],l>t.yt||(n[2*l+1]!=u&&(e.dt+=(u-n[2*l+1])*n[2*l],n[2*l+1]=u),c--)}})(r),((t,n,r)=>{const i=[];let s,o,f,c=0;for(s=1;15>=s;s++)i[s]=c=c+r[s-1]<<1;for(o=0;n>=o;o++)f=t[2*o+1],0!==f&&(t[2*o]=e(i[f]++,f))})(i,t.yt,r.St)}}function Y(t,e,n,r,i){const s=this;s.ft=t,s.gt=e,s.vt=n,s.lt=r,s.zt=i}X._t=[0,1,2,3,4,5,6,7].concat(...J([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),X.It=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],X.Ct=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],X.At=t=>256>t?Q[t]:Q[256+(t>>>7)],X.Vt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X.Et=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X.Bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X.Dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Z=J([[144,8],[112,9],[24,7],[8,8]]);Y.Ut=N([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,Z[e]])));const $=J([[30,5]]);function tt(t,e,n,r,i){const s=this;s.Mt=t,s.Pt=e,s.Ht=n,s.Lt=r,s.Rt=i}Y.Tt=N([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,$[e]]))),Y.jt=new Y(Y.Ut,X.Vt,257,286,15),Y.xt=new Y(Y.Tt,X.Et,0,30,15),Y.Ft=new Y(null,X.Bt,0,19,7);const et=[new tt(0,0,0,0,0),new tt(4,4,8,4,1),new tt(4,5,16,8,1),new tt(4,6,32,32,1),new tt(4,4,16,16,2),new tt(8,16,32,32,2),new tt(8,16,128,128,2),new tt(8,32,128,256,2),new tt(32,128,258,1024,2),new tt(32,258,258,4096,2)],nt=[\"need dictionary\",\"stream end\",\"\",\"\",\"stream error\",\"data error\",\"\",\"buffer error\",\"\",\"\"];function rt(t,e,n,r){const i=t[2*e],s=t[2*n];return s>i||i==s&&r[e]<=r[n]}function it(){const t=this;let e,r,o,f,c,l,u,a,w,h,d,p,b,y,k,g,v,m,z,S,_,I,C,A,V,E,B,D,U,M,P,H,L;const R=new X,T=new X,j=new X;let x,F,K,O,W,q;function G(){let e;for(e=0;286>e;e++)P[2*e]=0;for(e=0;30>e;e++)H[2*e]=0;for(e=0;19>e;e++)L[2*e]=0;P[512]=1,t.dt=t.bt=0,F=K=0}function J(t,e){let n,r=-1,i=t[1],s=0,o=7,f=4;0===i&&(o=138,f=3),t[2*(e+1)+1]=65535;for(let c=0;e>=c;c++)n=i,i=t[2*(c+1)+1],++s<o&&n==i||(f>s?L[2*n]+=s:0!==n?(n!=r&&L[2*n]++,L[32]++):s>10?L[36]++:L[34]++,s=0,r=n,0===i?(o=138,f=3):n==i?(o=6,f=3):(o=7,f=4))}function N(e){t.Kt[t.pending++]=e}function Q(t){N(255&t),N(t>>>8&255)}function Z(t,e){let n;const r=e;q>16-r?(n=t,W|=n<<q&65535,Q(W),W=n>>>16-q,q+=r-16):(W|=t<<q&65535,q+=r)}function $(t,e){const n=2*t;Z(65535&e[n],65535&e[n+1])}function tt(t,e){let n,r,i=-1,s=t[1],o=0,f=7,c=4;for(0===s&&(f=138,c=3),n=0;e>=n;n++)if(r=s,s=t[2*(n+1)+1],++o>=f||r!=s){if(c>o)do{$(r,L)}while(0!=--o);else 0!==r?(r!=i&&($(r,L),o--),$(16,L),Z(o-3,2)):o>10?($(18,L),Z(o-11,7)):($(17,L),Z(o-3,3));o=0,i=r,0===s?(f=138,c=3):r==s?(f=6,c=3):(f=7,c=4)}}function it(){16==q?(Q(W),W=0,q=0):8>q||(N(255&W),W>>>=8,q-=8)}function st(e,r){let i,s,o;if(t.Ot[F]=e,t.Wt[F]=255&r,F++,0===e?P[2*r]++:(K++,e--,P[2*(X._t[r]+256+1)]++,H[2*X.At(e)]++),0==(8191&F)&&B>2){for(i=8*F,s=_-v,o=0;30>o;o++)i+=H[2*o]*(5+X.Et[o]);if(i>>>=3,K<n.floor(F/2)&&i<n.floor(s/2))return!0}return F==x-1}function ot(e,n){let r,i,s,o,f=0;if(0!==F)do{r=t.Ot[f],i=t.Wt[f],f++,0===r?$(i,e):(s=X._t[i],$(s+256+1,e),o=X.Vt[s],0!==o&&(i-=X.It[s],Z(i,o)),r--,s=X.At(r),$(s,n),o=X.Et[s],0!==o&&(r-=X.Ct[s],Z(r,o)))}while(F>f);$(256,e),O=e[513]}function ft(){q>8?Q(W):q>0&&N(255&W),W=0,q=0}function ct(e,n,r){Z(0+(r?1:0),3),((e,n)=>{ft(),O=8,Q(n),Q(~n),t.Kt.set(a.subarray(e,e+n),t.pending),t.pending+=n})(e,n)}function lt(n){((e,n,r)=>{let i,s,o=0;B>0?(R.st(t),T.st(t),o=(()=>{let e;for(J(P,R.yt),J(H,T.yt),j.st(t),e=18;e>=3&&0===L[2*X.Dt[e]+1];e--);return t.dt+=14+3*(e+1),e})(),i=t.dt+3+7>>>3,s=t.bt+3+7>>>3,s>i||(i=s)):i=s=n+5,n+4>i||-1==e?s==i?(Z(2+(r?1:0),3),ot(Y.Ut,Y.Tt)):(Z(4+(r?1:0),3),((t,e,n)=>{let r;for(Z(t-257,5),Z(e-1,5),Z(n-4,4),r=0;n>r;r++)Z(L[2*X.Dt[r]+1],3);tt(P,t-1),tt(H,e-1)})(R.yt+1,T.yt+1,o+1),ot(P,H)):ct(e,n,r),G(),r&&ft()})(0>v?-1:v,_-v,n),v=_,e.qt()}function ut(){let t,n,r,i;do{if(i=w-C-_,0===i&&0===_&&0===C)i=c;else if(-1==i)i--;else if(_>=c+c-262){a.set(a.subarray(c,c+c),0),I-=c,_-=c,v-=c,t=b,r=t;do{n=65535&d[--r],d[r]=c>n?0:n-c}while(0!=--t);t=c,r=t;do{n=65535&h[--r],h[r]=c>n?0:n-c}while(0!=--t);i+=c}if(0===e.Gt)return;t=e.Jt(a,_+C,i),C+=t,3>C||(p=255&a[_],p=(p<<g^255&a[_+1])&k)}while(262>C&&0!==e.Gt)}function at(t){let e,n,r=V,i=_,s=A;const o=_>c-262?_-(c-262):0;let f=M;const l=u,w=_+258;let d=a[i+s-1],p=a[i+s];U>A||(r>>=2),f>C&&(f=C);do{if(e=t,a[e+s]==p&&a[e+s-1]==d&&a[e]==a[i]&&a[++e]==a[i+1]){i+=2,e++;do{}while(a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&a[++i]==a[++e]&&w>i);if(n=258-(w-i),i=w-258,n>s){if(I=t,s=n,n>=f)break;d=a[i+s-1],p=a[i+s]}}}while((t=65535&h[t&l])>o&&0!=--r);return s>C?C:s}t.ht=[],t.St=[],t.wt=[],P=[],H=[],L=[],t.kt=(e,n)=>{const r=t.wt,i=r[n];let s=n<<1;for(;s<=t.ut&&(s<t.ut&&rt(e,r[s+1],r[s],t.ht)&&s++,!rt(e,i,r[s],t.ht));)r[n]=r[s],n=s,s<<=1;r[n]=i},t.Nt=(e,z,I,F,K,J)=>(F||(F=8),K||(K=8),J||(J=0),e.Qt=null,-1==z&&(z=6),1>K||K>9||8!=F||9>I||I>15||0>z||z>9||0>J||J>2?-2:(e.Xt=t,l=I,c=1<<l,u=c-1,y=K+7,b=1<<y,k=b-1,g=n.floor((y+3-1)/3),a=new i(2*c),h=[],d=[],x=1<<K+6,t.Kt=new i(4*x),o=4*x,t.Ot=new s(x),t.Wt=new i(x),B=z,D=J,(e=>(e.Yt=e.Zt=0,e.Qt=null,t.pending=0,t.$t=0,r=113,f=0,R.ot=P,R.ct=Y.jt,T.ot=H,T.ct=Y.xt,j.ot=L,j.ct=Y.Ft,W=0,q=0,O=8,G(),(()=>{w=2*c,d[b-1]=0;for(let t=0;b-1>t;t++)d[t]=0;E=et[B].Pt,U=et[B].Mt,M=et[B].Ht,V=et[B].Lt,_=0,v=0,C=0,m=A=2,S=0,p=0})(),0))(e))),t.te=()=>42!=r&&113!=r&&666!=r?-2:(t.Wt=null,t.Ot=null,t.Kt=null,d=null,h=null,a=null,t.Xt=null,113==r?-3:0),t.ee=(t,e,n)=>{let r=0;return-1==e&&(e=6),0>e||e>9||0>n||n>2?-2:(et[B].Rt!=et[e].Rt&&0!==t.Yt&&(r=t.it(1)),B!=e&&(B=e,E=et[B].Pt,U=et[B].Mt,M=et[B].Ht,V=et[B].Lt),D=n,r)},t.ne=(t,e,n)=>{let i,s=n,o=0;if(!e||42!=r)return-2;if(3>s)return 0;for(s>c-262&&(s=c-262,o=n-s),a.set(e.subarray(o,o+s),0),_=s,v=s,p=255&a[0],p=(p<<g^255&a[1])&k,i=0;s-3>=i;i++)p=(p<<g^255&a[i+2])&k,h[i&u]=d[p],d[p]=i;return 0},t.it=(n,i)=>{let s,w,y,V,U;if(i>4||0>i)return-2;if(!n.re||!n.ie&&0!==n.Gt||666==r&&4!=i)return n.Qt=nt[4],-2;if(0===n.se)return n.Qt=nt[7],-5;var M;if(e=n,V=f,f=i,42==r&&(w=8+(l-8<<4)<<8,y=(B-1&255)>>1,y>3&&(y=3),w|=y<<6,0!==_&&(w|=32),w+=31-w%31,r=113,N((M=w)>>8&255),N(255&M)),0!==t.pending){if(e.qt(),0===e.se)return f=-1,0}else if(0===e.Gt&&V>=i&&4!=i)return e.Qt=nt[7],-5;if(666==r&&0!==e.Gt)return n.Qt=nt[7],-5;if(0!==e.Gt||0!==C||0!=i&&666!=r){switch(U=-1,et[B].Rt){case 0:U=(t=>{let n,r=65535;for(r>o-5&&(r=o-5);;){if(1>=C){if(ut(),0===C&&0==t)return 0;if(0===C)break}if(_+=C,C=0,n=v+r,(0===_||_>=n)&&(C=_-n,_=n,lt(!1),0===e.se))return 0;if(_-v>=c-262&&(lt(!1),0===e.se))return 0}return lt(4==t),0===e.se?4==t?2:0:4==t?3:1})(i);break;case 1:U=(t=>{let n,r=0;for(;;){if(262>C){if(ut(),262>C&&0==t)return 0;if(0===C)break}if(3>C||(p=(p<<g^255&a[_+2])&k,r=65535&d[p],h[_&u]=d[p],d[p]=_),0===r||(_-r&65535)>c-262||2!=D&&(m=at(r)),3>m)n=st(0,255&a[_]),C--,_++;else if(n=st(_-I,m-3),C-=m,m>E||3>C)_+=m,m=0,p=255&a[_],p=(p<<g^255&a[_+1])&k;else{m--;do{_++,p=(p<<g^255&a[_+2])&k,r=65535&d[p],h[_&u]=d[p],d[p]=_}while(0!=--m);_++}if(n&&(lt(!1),0===e.se))return 0}return lt(4==t),0===e.se?4==t?2:0:4==t?3:1})(i);break;case 2:U=(t=>{let n,r,i=0;for(;;){if(262>C){if(ut(),262>C&&0==t)return 0;if(0===C)break}if(3>C||(p=(p<<g^255&a[_+2])&k,i=65535&d[p],h[_&u]=d[p],d[p]=_),A=m,z=I,m=2,0!==i&&E>A&&c-262>=(_-i&65535)&&(2!=D&&(m=at(i)),5>=m&&(1==D||3==m&&_-I>4096)&&(m=2)),3>A||m>A)if(0!==S){if(n=st(0,255&a[_-1]),n&&lt(!1),_++,C--,0===e.se)return 0}else S=1,_++,C--;else{r=_+C-3,n=st(_-1-z,A-3),C-=A-1,A-=2;do{++_>r||(p=(p<<g^255&a[_+2])&k,i=65535&d[p],h[_&u]=d[p],d[p]=_)}while(0!=--A);if(S=0,m=2,_++,n&&(lt(!1),0===e.se))return 0}}return 0!==S&&(n=st(0,255&a[_-1]),S=0),lt(4==t),0===e.se?4==t?2:0:4==t?3:1})(i)}if(2!=U&&3!=U||(r=666),0==U||2==U)return 0===e.se&&(f=-1),0;if(1==U){if(1==i)Z(2,3),$(256,Y.Ut),it(),9>1+O+10-q&&(Z(2,3),$(256,Y.Ut),it()),O=7;else if(ct(0,0,!1),3==i)for(s=0;b>s;s++)d[s]=0;if(e.qt(),0===e.se)return f=-1,0}}return 4!=i?0:1}}function st(){const t=this;t.oe=0,t.fe=0,t.Gt=0,t.Yt=0,t.se=0,t.Zt=0}function ot(t){const e=new st,s=(o=t&&t.et?t.et:65536)+5*(n.floor(o/16383)+1);var o;const f=new i(s);let c=t?t.level:-1;void 0===c&&(c=-1),e.Nt(c),e.re=f,this.append=(t,n)=>{let o,c,l=0,u=0,a=0;const w=[];if(t.length){e.oe=0,e.ie=t,e.Gt=t.length;do{if(e.fe=0,e.se=s,o=e.it(0),0!=o)throw new r(\"deflating: \"+e.Qt);e.fe&&(e.fe==s?w.push(new i(f)):w.push(f.slice(0,e.fe))),a+=e.fe,n&&e.oe>0&&e.oe!=l&&(n(e.oe),l=e.oe)}while(e.Gt>0||0===e.se);return w.length>1?(c=new i(a),w.forEach((t=>{c.set(t,u),u+=t.length}))):c=w[0]||new i(0),c}},this.flush=()=>{let t,n,o=0,c=0;const l=[];do{if(e.fe=0,e.se=s,t=e.it(4),1!=t&&0!=t)throw new r(\"deflating: \"+e.Qt);s-e.se>0&&l.push(f.slice(0,e.fe)),c+=e.fe}while(e.Gt>0||0===e.se);return e.te(),n=new i(c),l.forEach((t=>{n.set(t,o),o+=t.length})),n}}st.prototype={Nt:function(t,e){const n=this;return n.Xt=new it,e||(e=15),n.Xt.Nt(n,t,e)},it:function(t){const e=this;return e.Xt?e.Xt.it(e,t):-2},te:function(){const t=this;if(!t.Xt)return-2;const e=t.Xt.te();return t.Xt=null,e},ee:function(t,e){const n=this;return n.Xt?n.Xt.ee(n,t,e):-2},ne:function(t,e){const n=this;return n.Xt?n.Xt.ne(n,t,e):-2},Jt:function(t,e,n){const r=this;let i=r.Gt;return i>n&&(i=n),0===i?0:(r.Gt-=i,t.set(r.ie.subarray(r.oe,r.oe+i),e),r.oe+=i,r.Yt+=i,i)},qt:function(){const t=this;let e=t.Xt.pending;e>t.se&&(e=t.se),0!==e&&(t.re.set(t.Xt.Kt.subarray(t.Xt.$t,t.Xt.$t+e),t.fe),t.fe+=e,t.Xt.$t+=e,t.Zt+=e,t.se-=e,t.Xt.pending-=e,0===t.Xt.pending&&(t.Xt.$t=0))}};const ft=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ct=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],lt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ut=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],at=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],wt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ht=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function dt(){let t,e,n,r,i,s;function o(t,e,o,f,c,l,u,a,w,h,d){let p,b,y,k,g,v,m,z,S,_,I,C,A,V,E;_=0,g=o;do{n[t[e+_]]++,_++,g--}while(0!==g);if(n[0]==o)return u[0]=-1,a[0]=0,0;for(z=a[0],v=1;15>=v&&0===n[v];v++);for(m=v,v>z&&(z=v),g=15;0!==g&&0===n[g];g--);for(y=g,z>g&&(z=g),a[0]=z,V=1<<v;g>v;v++,V<<=1)if(0>(V-=n[v]))return-3;if(0>(V-=n[g]))return-3;for(n[g]+=V,s[1]=v=0,_=1,A=2;0!=--g;)s[A]=v+=n[_],A++,_++;g=0,_=0;do{0!==(v=t[e+_])&&(d[s[v]++]=g),_++}while(++g<o);for(o=s[y],s[0]=g=0,_=0,k=-1,C=-z,i[0]=0,I=0,E=0;y>=m;m++)for(p=n[m];0!=p--;){for(;m>C+z;){if(k++,C+=z,E=y-C,E=E>z?z:E,(b=1<<(v=m-C))>p+1&&(b-=p+1,A=m,E>v))for(;++v<E&&(b<<=1)>n[++A];)b-=n[A];if(E=1<<v,h[0]+E>1440)return-3;i[k]=I=h[0],h[0]+=E,0!==k?(s[k]=g,r[0]=v,r[1]=z,v=g>>>C-z,r[2]=I-i[k-1]-v,w.set(r,3*(i[k-1]+v))):u[0]=I}for(r[1]=m-C,o>_?d[_]<f?(r[0]=256>d[_]?0:96,r[2]=d[_++]):(r[0]=l[d[_]-f]+16+64,r[2]=c[d[_++]-f]):r[0]=192,b=1<<m-C,v=g>>>C;E>v;v+=b)w.set(r,3*(I+v));for(v=1<<m-1;0!=(g&v);v>>>=1)g^=v;for(g^=v,S=(1<<C)-1;(g&S)!=s[k];)k--,C-=z,S=(1<<C)-1}return 0!==V&&1!=y?-5:0}function c(o){let c;for(t||(t=[],e=[],n=new f(16),r=[],i=new f(15),s=new f(16)),e.length<o&&(e=[]),c=0;o>c;c++)e[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;i.set(n.subarray(0,15),0),s.set(n.subarray(0,16),0)}this.ce=(n,r,i,s,f)=>{let l;return c(19),t[0]=0,l=o(n,0,19,19,null,null,i,r,s,t,e),-3==l?f.Qt=\"oversubscribed dynamic bit lengths tree\":-5!=l&&0!==r[0]||(f.Qt=\"incomplete dynamic bit lengths tree\",l=-3),l},this.le=(n,r,i,s,f,l,u,a,w)=>{let h;return c(288),t[0]=0,h=o(i,0,n,257,ut,at,l,s,a,t,e),0!=h||0===s[0]?(-3==h?w.Qt=\"oversubscribed literal/length tree\":-4!=h&&(w.Qt=\"incomplete literal/length tree\",h=-3),h):(c(288),h=o(i,n,r,0,wt,ht,u,f,a,t,e),0!=h||0===f[0]&&n>257?(-3==h?w.Qt=\"oversubscribed distance tree\":-5==h?(w.Qt=\"incomplete distance tree\",h=-3):-4!=h&&(w.Qt=\"empty distance tree with lengths\",h=-3),h):0)}}function pt(){const t=this;let e,n,r,i,s=0,o=0,f=0,c=0,l=0,u=0,a=0,w=0,h=0,d=0;function p(t,e,n,r,i,s,o,f){let c,l,u,a,w,h,d,p,b,y,k,g,v,m,z,S;d=f.oe,p=f.Gt,w=o.ue,h=o.ae,b=o.write,y=b<o.read?o.read-b-1:o.end-b,k=ft[t],g=ft[e];do{for(;20>h;)p--,w|=(255&f.we(d++))<<h,h+=8;if(c=w&k,l=n,u=r,S=3*(u+c),0!==(a=l[S]))for(;;){if(w>>=l[S+1],h-=l[S+1],0!=(16&a)){for(a&=15,v=l[S+2]+(w&ft[a]),w>>=a,h-=a;15>h;)p--,w|=(255&f.we(d++))<<h,h+=8;for(c=w&g,l=i,u=s,S=3*(u+c),a=l[S];;){if(w>>=l[S+1],h-=l[S+1],0!=(16&a)){for(a&=15;a>h;)p--,w|=(255&f.we(d++))<<h,h+=8;if(m=l[S+2]+(w&ft[a]),w>>=a,h-=a,y-=v,m>b){z=b-m;do{z+=o.end}while(0>z);if(a=o.end-z,v>a){if(v-=a,b-z>0&&a>b-z)do{o.he[b++]=o.he[z++]}while(0!=--a);else o.he.set(o.he.subarray(z,z+a),b),b+=a,z+=a,a=0;z=0}}else z=b-m,b-z>0&&2>b-z?(o.he[b++]=o.he[z++],o.he[b++]=o.he[z++],v-=2):(o.he.set(o.he.subarray(z,z+2),b),b+=2,z+=2,v-=2);if(b-z>0&&v>b-z)do{o.he[b++]=o.he[z++]}while(0!=--v);else o.he.set(o.he.subarray(z,z+v),b),b+=v,z+=v,v=0;break}if(0!=(64&a))return f.Qt=\"invalid distance code\",v=f.Gt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,o.ue=w,o.ae=h,f.Gt=p,f.Yt+=d-f.oe,f.oe=d,o.write=b,-3;c+=l[S+2],c+=w&ft[a],S=3*(u+c),a=l[S]}break}if(0!=(64&a))return 0!=(32&a)?(v=f.Gt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,o.ue=w,o.ae=h,f.Gt=p,f.Yt+=d-f.oe,f.oe=d,o.write=b,1):(f.Qt=\"invalid literal/length code\",v=f.Gt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,o.ue=w,o.ae=h,f.Gt=p,f.Yt+=d-f.oe,f.oe=d,o.write=b,-3);if(c+=l[S+2],c+=w&ft[a],S=3*(u+c),0===(a=l[S])){w>>=l[S+1],h-=l[S+1],o.he[b++]=l[S+2],y--;break}}else w>>=l[S+1],h-=l[S+1],o.he[b++]=l[S+2],y--}while(y>=258&&p>=10);return v=f.Gt-p,v=v>h>>3?h>>3:v,p+=v,d-=v,h-=v<<3,o.ue=w,o.ae=h,f.Gt=p,f.Yt+=d-f.oe,f.oe=d,o.write=b,0}t.init=(t,s,o,f,c,l)=>{e=0,a=t,w=s,r=o,h=f,i=c,d=l,n=null},t.de=(t,b,y)=>{let k,g,v,m,z,S,_,I=0,C=0,A=0;for(A=b.oe,m=b.Gt,I=t.ue,C=t.ae,z=t.write,S=z<t.read?t.read-z-1:t.end-z;;)switch(e){case 0:if(S>=258&&m>=10&&(t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,y=p(a,w,r,h,i,d,t,b),A=b.oe,m=b.Gt,I=t.ue,C=t.ae,z=t.write,S=z<t.read?t.read-z-1:t.end-z,0!=y)){e=1==y?7:9;break}f=a,n=r,o=h,e=1;case 1:for(k=f;k>C;){if(0===m)return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);y=0,m--,I|=(255&b.we(A++))<<C,C+=8}if(g=3*(o+(I&ft[k])),I>>>=n[g+1],C-=n[g+1],v=n[g],0===v){c=n[g+2],e=6;break}if(0!=(16&v)){l=15&v,s=n[g+2],e=2;break}if(0==(64&v)){f=v,o=g/3+n[g+2];break}if(0!=(32&v)){e=7;break}return e=9,b.Qt=\"invalid literal/length code\",y=-3,t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);case 2:for(k=l;k>C;){if(0===m)return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);y=0,m--,I|=(255&b.we(A++))<<C,C+=8}s+=I&ft[k],I>>=k,C-=k,f=w,n=i,o=d,e=3;case 3:for(k=f;k>C;){if(0===m)return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);y=0,m--,I|=(255&b.we(A++))<<C,C+=8}if(g=3*(o+(I&ft[k])),I>>=n[g+1],C-=n[g+1],v=n[g],0!=(16&v)){l=15&v,u=n[g+2],e=4;break}if(0==(64&v)){f=v,o=g/3+n[g+2];break}return e=9,b.Qt=\"invalid distance code\",y=-3,t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);case 4:for(k=l;k>C;){if(0===m)return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);y=0,m--,I|=(255&b.we(A++))<<C,C+=8}u+=I&ft[k],I>>=k,C-=k,e=5;case 5:for(_=z-u;0>_;)_+=t.end;for(;0!==s;){if(0===S&&(z==t.end&&0!==t.read&&(z=0,S=z<t.read?t.read-z-1:t.end-z),0===S&&(t.write=z,y=t.pe(b,y),z=t.write,S=z<t.read?t.read-z-1:t.end-z,z==t.end&&0!==t.read&&(z=0,S=z<t.read?t.read-z-1:t.end-z),0===S)))return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);t.he[z++]=t.he[_++],S--,_==t.end&&(_=0),s--}e=0;break;case 6:if(0===S&&(z==t.end&&0!==t.read&&(z=0,S=z<t.read?t.read-z-1:t.end-z),0===S&&(t.write=z,y=t.pe(b,y),z=t.write,S=z<t.read?t.read-z-1:t.end-z,z==t.end&&0!==t.read&&(z=0,S=z<t.read?t.read-z-1:t.end-z),0===S)))return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);y=0,t.he[z++]=c,S--,e=0;break;case 7:if(C>7&&(C-=8,m++,A--),t.write=z,y=t.pe(b,y),z=t.write,S=z<t.read?t.read-z-1:t.end-z,t.read!=t.write)return t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);e=8;case 8:return y=1,t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);case 9:return y=-3,t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y);default:return y=-2,t.ue=I,t.ae=C,b.Gt=m,b.Yt+=A-b.oe,b.oe=A,t.write=z,t.pe(b,y)}},t.be=()=>{}}dt.ye=(t,e,n,r)=>(t[0]=9,e[0]=5,n[0]=ct,r[0]=lt,0);const bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function yt(t,e){const n=this;let r,s=0,o=0,c=0,l=0;const u=[0],a=[0],w=new pt;let h=0,d=new f(4320);const p=new dt;n.ae=0,n.ue=0,n.he=new i(e),n.end=e,n.read=0,n.write=0,n.reset=(t,e)=>{e&&(e[0]=0),6==s&&w.be(t),s=0,n.ae=0,n.ue=0,n.read=n.write=0},n.reset(t,null),n.pe=(t,e)=>{let r,i,s;return i=t.fe,s=n.read,r=(s>n.write?n.end:n.write)-s,r>t.se&&(r=t.se),0!==r&&-5==e&&(e=0),t.se-=r,t.Zt+=r,t.re.set(n.he.subarray(s,s+r),i),i+=r,s+=r,s==n.end&&(s=0,n.write==n.end&&(n.write=0),r=n.write-s,r>t.se&&(r=t.se),0!==r&&-5==e&&(e=0),t.se-=r,t.Zt+=r,t.re.set(n.he.subarray(s,s+r),i),i+=r,s+=r),t.fe=i,n.read=s,e},n.de=(t,e)=>{let i,f,b,y,k,g,v,m;for(y=t.oe,k=t.Gt,f=n.ue,b=n.ae,g=n.write,v=g<n.read?n.read-g-1:n.end-g;;){let z,S,_,I,C,A,V,E;switch(s){case 0:for(;3>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,b-=3,i=7&b,f>>>=i,b-=i,s=1;break;case 1:z=[],S=[],_=[[]],I=[[]],dt.ye(z,S,_,I),w.init(z[0],S[0],_[0],0,I[0],0),f>>>=3,b-=3,s=6;break;case 2:f>>>=3,b-=3,s=3;break;case 3:return f>>>=3,b-=3,s=9,t.Qt=\"invalid block type\",e=-3,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e)}break;case 1:for(;32>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}if((~f>>>16&65535)!=(65535&f))return s=9,t.Qt=\"invalid stored block lengths\",e=-3,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);o=65535&f,f=b=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);if(0===v&&(g==n.end&&0!==n.read&&(g=0,v=g<n.read?n.read-g-1:n.end-g),0===v&&(n.write=g,e=n.pe(t,e),g=n.write,v=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,v=g<n.read?n.read-g-1:n.end-g),0===v)))return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);if(e=0,i=o,i>k&&(i=k),i>v&&(i=v),n.he.set(t.Jt(y,i),g),y+=i,k-=i,g+=i,v-=i,0!=(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,t.Qt=\"too many length or distance symbols\",e=-3,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(m=0;i>m;m++)r[m]=0;f>>>=14,b-=14,l=0,s=4;case 4:for(;4+(c>>>10)>l;){for(;3>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}r[bt[l++]]=7&f,f>>>=3,b-=3}for(;19>l;)r[bt[l++]]=0;if(u[0]=7,i=p.ce(r,u,a,d,t),0!=i)return-3==(e=i)&&(r=null,s=9),n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);l=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>l;){let o,w;for(i=u[0];i>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}if(i=d[3*(a[0]+(f&ft[i]))+1],w=d[3*(a[0]+(f&ft[i]))+2],16>w)f>>>=i,b-=i,r[l++]=w;else{for(m=18==w?7:w-14,o=18==w?11:3;i+m>b;){if(0===k)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);e=0,k--,f|=(255&t.we(y++))<<b,b+=8}if(f>>>=i,b-=i,o+=f&ft[m],f>>>=m,b-=m,m=l,i=c,m+o>258+(31&i)+(i>>5&31)||16==w&&1>m)return r=null,s=9,t.Qt=\"invalid bit length repeat\",e=-3,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);w=16==w?r[m-1]:0;do{r[m++]=w}while(0!=--o);l=m}}if(a[0]=-1,C=[],A=[],V=[],E=[],C[0]=9,A[0]=6,i=c,i=p.le(257+(31&i),1+(i>>5&31),r,C,A,V,E,d,t),0!=i)return-3==i&&(r=null,s=9),e=i,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);w.init(C[0],A[0],d,V[0],d,E[0]),s=6;case 6:if(n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,1!=(e=w.de(n,t,e)))return n.pe(t,e);if(e=0,w.be(t),y=t.oe,k=t.Gt,f=n.ue,b=n.ae,g=n.write,v=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,e=n.pe(t,e),g=n.write,v=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);s=8;case 8:return e=1,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);case 9:return e=-3,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e);default:return e=-2,n.ue=f,n.ae=b,t.Gt=k,t.Yt+=y-t.oe,t.oe=y,n.write=g,n.pe(t,e)}}},n.be=t=>{n.reset(t,null),n.he=null,d=null},n.ke=(t,e,r)=>{n.he.set(t.subarray(e,e+r),0),n.read=n.write=r},n.ge=()=>1==s?1:0}const kt=[0,0,255,255];function gt(){const t=this;function e(t){return t&&t.ve?(t.Yt=t.Zt=0,t.Qt=null,t.ve.mode=7,t.ve.me.reset(t,null),0):-2}t.mode=0,t.method=0,t.ze=[0],t.Se=0,t.marker=0,t._e=0,t.Ie=e=>(t.me&&t.me.be(e),t.me=null,0),t.Ce=(n,r)=>(n.Qt=null,t.me=null,8>r||r>15?(t.Ie(n),-2):(t._e=r,n.ve.me=new yt(n,1<<r),e(n),0)),t.nt=(t,e)=>{let n,r;if(!t||!t.ve||!t.ie)return-2;const i=t.ve;for(e=4==e?-5:0,n=-5;;)switch(i.mode){case 0:if(0===t.Gt)return n;if(n=e,t.Gt--,t.Yt++,8!=(15&(i.method=t.we(t.oe++)))){i.mode=13,t.Qt=\"unknown compression method\",i.marker=5;break}if(8+(i.method>>4)>i._e){i.mode=13,t.Qt=\"invalid win size\",i.marker=5;break}i.mode=1;case 1:if(0===t.Gt)return n;if(n=e,t.Gt--,t.Yt++,r=255&t.we(t.oe++),((i.method<<8)+r)%31!=0){i.mode=13,t.Qt=\"incorrect header check\",i.marker=5;break}if(0==(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===t.Gt)return n;n=e,t.Gt--,t.Yt++,i.Se=(255&t.we(t.oe++))<<24&4278190080,i.mode=3;case 3:if(0===t.Gt)return n;n=e,t.Gt--,t.Yt++,i.Se+=(255&t.we(t.oe++))<<16&16711680,i.mode=4;case 4:if(0===t.Gt)return n;n=e,t.Gt--,t.Yt++,i.Se+=(255&t.we(t.oe++))<<8&65280,i.mode=5;case 5:return 0===t.Gt?n:(n=e,t.Gt--,t.Yt++,i.Se+=255&t.we(t.oe++),i.mode=6,2);case 6:return i.mode=13,t.Qt=\"need dictionary\",i.marker=0,-2;case 7:if(n=i.me.de(t,n),-3==n){i.mode=13,i.marker=0;break}if(0==n&&(n=e),1!=n)return n;n=e,i.me.reset(t,i.ze),i.mode=12;case 12:return 1;case 13:return-3;default:return-2}},t.Ae=(t,e,n)=>{let r=0,i=n;if(!t||!t.ve||6!=t.ve.mode)return-2;const s=t.ve;return i<1<<s._e||(i=(1<<s._e)-1,r=n-i),s.me.ke(e,r,i),s.mode=7,0},t.Ve=t=>{let n,r,i,s,o;if(!t||!t.ve)return-2;const f=t.ve;if(13!=f.mode&&(f.mode=13,f.marker=0),0===(n=t.Gt))return-5;for(r=t.oe,i=f.marker;0!==n&&4>i;)t.we(r)==kt[i]?i++:i=0!==t.we(r)?0:4-i,r++,n--;return t.Yt+=r-t.oe,t.oe=r,t.Gt=n,f.marker=i,4!=i?-3:(s=t.Yt,o=t.Zt,e(t),t.Yt=s,t.Zt=o,f.mode=7,0)},t.Ee=t=>t&&t.ve&&t.ve.me?t.ve.me.ge():-2}function vt(){}function mt(t){const e=new vt,s=t&&t.et?n.floor(2*t.et):131072,o=new i(s);let f=!1;e.Ce(),e.re=o,this.append=(t,n)=>{const c=[];let l,u,a=0,w=0,h=0;if(0!==t.length){e.oe=0,e.ie=t,e.Gt=t.length;do{if(e.fe=0,e.se=s,0!==e.Gt||f||(e.oe=0,f=!0),l=e.nt(0),f&&-5===l){if(0!==e.Gt)throw new r(\"inflating: bad input\")}else if(0!==l&&1!==l)throw new r(\"inflating: \"+e.Qt);if((f||1===l)&&e.Gt===t.length)throw new r(\"inflating: bad input\");e.fe&&(e.fe===s?c.push(new i(o)):c.push(o.slice(0,e.fe))),h+=e.fe,n&&e.oe>0&&e.oe!=a&&(n(e.oe),a=e.oe)}while(e.Gt>0||0===e.se);return c.length>1?(u=new i(h),c.forEach((t=>{u.set(t,w),w+=t.length}))):u=c[0]||new i(0),u}},this.flush=()=>{e.Ie()}}vt.prototype={Ce:function(t){const e=this;return e.ve=new gt,t||(t=15),e.ve.Ce(e,t)},nt:function(t){const e=this;return e.ve?e.ve.nt(e,t):-2},Ie:function(){const t=this;if(!t.ve)return-2;const e=t.ve.Ie(t);return t.ve=null,e},Ve:function(){const t=this;return t.ve?t.ve.Ve(t):-2},Ae:function(t,e){const n=this;return n.ve?n.ve.Ae(n,t,e):-2},we:function(t){return this.ie[t]},Jt:function(t,e){return this.ie.subarray(t,t+e)}},self.initCodec=()=>{self.Deflate=ot,self.Inflate=mt};\\n'],{type:\"text/javascript\"}));t({workerScripts:{inflate:[e],deflate:[e]}})}};export{t as default};\n","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global Blob, FileReader, atob, btoa, XMLHttpRequest, document, fetch */\n\nconst ERR_HTTP_STATUS = \"HTTP error \";\nconst ERR_HTTP_RANGE = \"HTTP Range not supported\";\n\nconst CONTENT_TYPE_TEXT_PLAIN = \"text/plain\";\nconst HTTP_HEADER_CONTENT_LENGTH = \"Content-Length\";\nconst HTTP_HEADER_CONTENT_RANGE = \"Content-Range\";\nconst HTTP_HEADER_ACCEPT_RANGES = \"Accept-Ranges\";\nconst HTTP_HEADER_RANGE = \"Range\";\nconst HTTP_METHOD_HEAD = \"HEAD\";\nconst HTTP_METHOD_GET = \"GET\";\nconst HTTP_RANGE_UNIT = \"bytes\";\n\nclass Stream {\n\n\tconstructor() {\n\t\tthis.size = 0;\n\t}\n\n\tinit() {\n\t\tthis.initialized = true;\n\t}\n}\n\nclass Reader extends Stream {\n}\n\nclass Writer extends Stream {\n\n\twriteUint8Array(array) {\n\t\tthis.size += array.length;\n\t}\n}\n\nclass TextReader extends Reader {\n\n\tconstructor(text) {\n\t\tsuper();\n\t\tthis.blobReader = new BlobReader(new Blob([text], { type: CONTENT_TYPE_TEXT_PLAIN }));\n\t}\n\n\tasync init() {\n\t\tsuper.init();\n\t\tthis.blobReader.init();\n\t\tthis.size = this.blobReader.size;\n\t}\n\n\tasync readUint8Array(offset, length) {\n\t\treturn this.blobReader.readUint8Array(offset, length);\n\t}\n}\n\nclass TextWriter extends Writer {\n\n\tconstructor(encoding) {\n\t\tsuper();\n\t\tthis.encoding = encoding;\n\t\tthis.blob = new Blob([], { type: CONTENT_TYPE_TEXT_PLAIN });\n\t}\n\n\tasync writeUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tthis.blob = new Blob([this.blob, array.buffer], { type: CONTENT_TYPE_TEXT_PLAIN });\n\t}\n\n\tgetData() {\n\t\tif (this.blob.text) {\n\t\t\treturn this.blob.text();\n\t\t} else {\n\t\t\tconst reader = new FileReader();\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treader.onload = event => resolve(event.target.result);\n\t\t\t\treader.onerror = () => reject(reader.error);\n\t\t\t\treader.readAsText(this.blob, this.encoding);\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass Data64URIReader extends Reader {\n\n\tconstructor(dataURI) {\n\t\tsuper();\n\t\tthis.dataURI = dataURI;\n\t\tlet dataEnd = dataURI.length;\n\t\twhile (dataURI.charAt(dataEnd - 1) == \"=\") {\n\t\t\tdataEnd--;\n\t\t}\n\t\tthis.dataStart = dataURI.indexOf(\",\") + 1;\n\t\tthis.size = Math.floor((dataEnd - this.dataStart) * 0.75);\n\t}\n\n\tasync readUint8Array(offset, length) {\n\t\tconst dataArray = new Uint8Array(length);\n\t\tconst start = Math.floor(offset / 3) * 4;\n\t\tconst bytes = atob(this.dataURI.substring(start + this.dataStart, Math.ceil((offset + length) / 3) * 4 + this.dataStart));\n\t\tconst delta = offset - Math.floor(start / 4) * 3;\n\t\tfor (let indexByte = delta; indexByte < delta + length; indexByte++) {\n\t\t\tdataArray[indexByte - delta] = bytes.charCodeAt(indexByte);\n\t\t}\n\t\treturn dataArray;\n\t}\n}\n\nclass Data64URIWriter extends Writer {\n\n\tconstructor(contentType) {\n\t\tsuper();\n\t\tthis.data = \"data:\" + (contentType || \"\") + \";base64,\";\n\t\tthis.pending = [];\n\t}\n\n\tasync writeUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tlet indexArray = 0;\n\t\tlet dataString = this.pending;\n\t\tconst delta = this.pending.length;\n\t\tthis.pending = \"\";\n\t\tfor (indexArray = 0; indexArray < (Math.floor((delta + array.length) / 3) * 3) - delta; indexArray++) {\n\t\t\tdataString += String.fromCharCode(array[indexArray]);\n\t\t}\n\t\tfor (; indexArray < array.length; indexArray++) {\n\t\t\tthis.pending += String.fromCharCode(array[indexArray]);\n\t\t}\n\t\tif (dataString.length > 2) {\n\t\t\tthis.data += btoa(dataString);\n\t\t} else {\n\t\t\tthis.pending = dataString;\n\t\t}\n\t}\n\n\tgetData() {\n\t\treturn this.data + btoa(this.pending);\n\t}\n}\n\nclass BlobReader extends Reader {\n\n\tconstructor(blob) {\n\t\tsuper();\n\t\tthis.blob = blob;\n\t\tthis.size = blob.size;\n\t}\n\n\tasync readUint8Array(offset, length) {\n\t\tif (this.blob.arrayBuffer) {\n\t\t\treturn new Uint8Array(await this.blob.slice(offset, offset + length).arrayBuffer());\n\t\t} else {\n\t\t\tconst reader = new FileReader();\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treader.onload = event => resolve(new Uint8Array(event.target.result));\n\t\t\t\treader.onerror = () => reject(reader.error);\n\t\t\t\treader.readAsArrayBuffer(this.blob.slice(offset, offset + length));\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass BlobWriter extends Writer {\n\n\tconstructor(contentType) {\n\t\tsuper();\n\t\tthis.contentType = contentType;\n\t\tthis.arrayBuffers = [];\n\t}\n\n\tasync writeUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tthis.arrayBuffers.push(array.buffer);\n\t}\n\n\tgetData() {\n\t\tif (!this.blob) {\n\t\t\tthis.blob = new Blob(this.arrayBuffers, { type: this.contentType });\n\t\t}\n\t\treturn this.blob;\n\t}\n}\n\nclass WritableStreamWriter extends Writer {\n\tconstructor(writableStream) {\n\t\tsuper();\n\t\tthis.writableStream = writableStream;\n\t\tthis.writer = writableStream.getWriter();\n\t}\n\n\tasync writeUint8Array(array) {\n\t\tawait this.writer.ready;\n\t\treturn this.writer.write(array);\n\t}\n\n\tasync getData() {\n\t\tawait this.writer.ready;\n\t\tawait this.writer.close();\n\t\treturn this.writableStream;\n\t}\n}\n\nclass FetchReader extends Reader {\n\n\tconstructor(url, options) {\n\t\tsuper();\n\t\tthis.url = url;\n\t\tthis.preventHeadRequest = options.preventHeadRequest;\n\t\tthis.useRangeHeader = options.useRangeHeader;\n\t\tthis.forceRangeRequests = options.forceRangeRequests;\n\t\tthis.options = Object.assign({}, options);\n\t\tdelete this.options.preventHeadRequest;\n\t\tdelete this.options.useRangeHeader;\n\t\tdelete this.options.forceRangeRequests;\n\t\tdelete this.options.useXHR;\n\t}\n\n\tasync init() {\n\t\tsuper.init();\n\t\tawait initHttpReader(this, sendFetchRequest, getFetchRequestData);\n\t}\n\n\tasync readUint8Array(index, length) {\n\t\treturn readUint8ArrayHttpReader(this, index, length, sendFetchRequest, getFetchRequestData);\n\t}\n}\n\nclass XHRReader extends Reader {\n\n\tconstructor(url, options) {\n\t\tsuper();\n\t\tthis.url = url;\n\t\tthis.preventHeadRequest = options.preventHeadRequest;\n\t\tthis.useRangeHeader = options.useRangeHeader;\n\t\tthis.forceRangeRequests = options.forceRangeRequests;\n\t\tthis.options = options;\n\t}\n\n\tasync init() {\n\t\tsuper.init();\n\t\tawait initHttpReader(this, sendXMLHttpRequest, getXMLHttpRequestData);\n\t}\n\n\tasync readUint8Array(index, length) {\n\t\treturn readUint8ArrayHttpReader(this, index, length, sendXMLHttpRequest, getXMLHttpRequestData);\n\t}\n}\n\nasync function initHttpReader(httpReader, sendRequest, getRequestData) {\n\tif (isHttpFamily(httpReader.url) && (httpReader.useRangeHeader || httpReader.forceRangeRequests)) {\n\t\tconst response = await sendRequest(HTTP_METHOD_GET, httpReader, getRangeHeaders(httpReader));\n\t\tif (!httpReader.forceRangeRequests && response.headers.get(HTTP_HEADER_ACCEPT_RANGES) != HTTP_RANGE_UNIT) {\n\t\t\tthrow new Error(ERR_HTTP_RANGE);\n\t\t} else {\n\t\t\tlet contentSize;\n\t\t\tconst contentRangeHeader = response.headers.get(HTTP_HEADER_CONTENT_RANGE);\n\t\t\tif (contentRangeHeader) {\n\t\t\t\tconst splitHeader = contentRangeHeader.trim().split(/\\s*\\/\\s*/);\n\t\t\t\tif (splitHeader.length) {\n\t\t\t\t\tconst headerValue = splitHeader[1];\n\t\t\t\t\tif (headerValue && headerValue != \"*\") {\n\t\t\t\t\t\tcontentSize = Number(headerValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (contentSize === undefined) {\n\t\t\t\tawait getContentLength(httpReader, sendRequest, getRequestData);\n\t\t\t} else {\n\t\t\t\thttpReader.size = contentSize;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tawait getContentLength(httpReader, sendRequest, getRequestData);\n\t}\n}\n\nasync function readUint8ArrayHttpReader(httpReader, index, length, sendRequest, getRequestData) {\n\tif (httpReader.useRangeHeader || httpReader.forceRangeRequests) {\n\t\tconst response = await sendRequest(HTTP_METHOD_GET, httpReader, getRangeHeaders(httpReader, index, length));\n\t\tif (response.status != 206) {\n\t\t\tthrow new Error(ERR_HTTP_RANGE);\n\t\t}\n\t\treturn new Uint8Array(await response.arrayBuffer());\n\t} else {\n\t\tif (!httpReader.data) {\n\t\t\tawait getRequestData(httpReader, httpReader.options);\n\t\t}\n\t\treturn new Uint8Array(httpReader.data.subarray(index, index + length));\n\t}\n}\n\nfunction getRangeHeaders(httpReader, index = 0, length = 1) {\n\treturn Object.assign({}, getHeaders(httpReader), { [HTTP_HEADER_RANGE]: HTTP_RANGE_UNIT + \"=\" + index + \"-\" + (index + length - 1) });\n}\n\nfunction getHeaders(httpReader) {\n\tlet headers = httpReader.options.headers;\n\tif (headers) {\n\t\tif (Symbol.iterator in headers) {\n\t\t\treturn Object.fromEntries(headers);\n\t\t} else {\n\t\t\treturn headers;\n\t\t}\n\t}\n}\n\nasync function getFetchRequestData(httpReader) {\n\tawait getRequestData(httpReader, sendFetchRequest);\n}\n\nasync function getXMLHttpRequestData(httpReader) {\n\tawait getRequestData(httpReader, sendXMLHttpRequest);\n}\n\nasync function getRequestData(httpReader, sendRequest) {\n\tconst response = await sendRequest(HTTP_METHOD_GET, httpReader, getHeaders(httpReader));\n\thttpReader.data = new Uint8Array(await response.arrayBuffer());\n\tif (!httpReader.size) {\n\t\thttpReader.size = httpReader.data.length;\n\t}\n}\n\nasync function getContentLength(httpReader, sendRequest, getRequestData) {\n\tif (httpReader.preventHeadRequest) {\n\t\tawait getRequestData(httpReader, httpReader.options);\n\t} else {\n\t\tconst response = await sendRequest(HTTP_METHOD_HEAD, httpReader, getHeaders(httpReader));\n\t\tconst contentLength = response.headers.get(HTTP_HEADER_CONTENT_LENGTH);\n\t\tif (contentLength) {\n\t\t\thttpReader.size = Number(contentLength);\n\t\t} else {\n\t\t\tawait getRequestData(httpReader, httpReader.options);\n\t\t}\n\t}\n}\n\nasync function sendFetchRequest(method, { options, url }, headers) {\n\tconst response = await fetch(url, Object.assign({}, options, { method, headers }));\n\tif (response.status < 400) {\n\t\treturn response;\n\t} else {\n\t\tthrow new Error(ERR_HTTP_STATUS + (response.statusText || response.status));\n\t}\n}\n\nfunction sendXMLHttpRequest(method, { url }, headers) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\trequest.addEventListener(\"load\", () => {\n\t\t\tif (request.status < 400) {\n\t\t\t\tconst headers = [];\n\t\t\t\trequest.getAllResponseHeaders().trim().split(/[\\r\\n]+/).forEach(header => {\n\t\t\t\t\tconst splitHeader = header.trim().split(/\\s*:\\s*/);\n\t\t\t\t\tsplitHeader[0] = splitHeader[0].trim().replace(/^[a-z]|-[a-z]/g, value => value.toUpperCase());\n\t\t\t\t\theaders.push(splitHeader);\n\t\t\t\t});\n\t\t\t\tresolve({\n\t\t\t\t\tstatus: request.status,\n\t\t\t\t\tarrayBuffer: () => request.response,\n\t\t\t\t\theaders: new Map(headers)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject(new Error(ERR_HTTP_STATUS + (request.statusText || request.status)));\n\t\t\t}\n\t\t}, false);\n\t\trequest.addEventListener(\"error\", event => reject(event.detail.error), false);\n\t\trequest.open(method, url);\n\t\tif (headers) {\n\t\t\tfor (const entry of Object.entries(headers)) {\n\t\t\t\trequest.setRequestHeader(entry[0], entry[1]);\n\t\t\t}\n\t\t}\n\t\trequest.responseType = \"arraybuffer\";\n\t\trequest.send();\n\t});\n}\n\nclass HttpReader extends Reader {\n\n\tconstructor(url, options = {}) {\n\t\tsuper();\n\t\tthis.url = url;\n\t\tif (options.useXHR) {\n\t\t\tthis.reader = new XHRReader(url, options);\n\t\t} else {\n\t\t\tthis.reader = new FetchReader(url, options);\n\t\t}\n\t}\n\n\tset size(value) {\n\t\t// ignored\n\t}\n\n\tget size() {\n\t\treturn this.reader.size;\n\t}\n\n\tasync init() {\n\t\tsuper.init();\n\t\tawait this.reader.init();\n\t}\n\n\tasync readUint8Array(index, length) {\n\t\treturn this.reader.readUint8Array(index, length);\n\t}\n}\n\nclass HttpRangeReader extends HttpReader {\n\n\tconstructor(url, options = {}) {\n\t\toptions.useRangeHeader = true;\n\t\tsuper(url, options);\n\t}\n}\n\n\nclass Uint8ArrayReader extends Reader {\n\n\tconstructor(array) {\n\t\tsuper();\n\t\tthis.array = array;\n\t\tthis.size = array.length;\n\t}\n\n\tasync readUint8Array(index, length) {\n\t\treturn this.array.slice(index, index + length);\n\t}\n}\n\nclass Uint8ArrayWriter extends Writer {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.array = new Uint8Array(0);\n\t}\n\n\tasync writeUint8Array(array) {\n\t\tsuper.writeUint8Array(array);\n\t\tconst previousArray = this.array;\n\t\tthis.array = new Uint8Array(previousArray.length + array.length);\n\t\tthis.array.set(previousArray);\n\t\tthis.array.set(array, previousArray.length);\n\t}\n\n\tgetData() {\n\t\treturn this.array;\n\t}\n}\n\nfunction isHttpFamily(url) {\n\tif (typeof document != \"undefined\") {\n\t\tconst anchor = document.createElement(\"a\");\n\t\tanchor.href = url;\n\t\treturn anchor.protocol == \"http:\" || anchor.protocol == \"https:\";\n\t} else {\n\t\treturn /^https?:\\/\\//i.test(url);\n\t}\n}\n\nexport {\n\tReader,\n\tWriter,\n\tTextReader,\n\tTextWriter,\n\tData64URIReader,\n\tData64URIWriter,\n\tBlobReader,\n\tBlobWriter,\n\tUint8ArrayReader,\n\tUint8ArrayWriter,\n\tHttpReader,\n\tHttpRangeReader,\n\tWritableStreamWriter,\n\tERR_HTTP_RANGE\n};\n","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst MAX_32_BITS = 0xffffffff;\nconst MAX_16_BITS = 0xffff;\nconst COMPRESSION_METHOD_DEFLATE = 0x08;\nconst COMPRESSION_METHOD_STORE = 0x00;\nconst COMPRESSION_METHOD_AES = 0x63;\n\nconst LOCAL_FILE_HEADER_SIGNATURE = 0x04034b50;\nconst DATA_DESCRIPTOR_RECORD_SIGNATURE = 0x08074b50;\nconst CENTRAL_FILE_HEADER_SIGNATURE = 0x02014b50;\nconst END_OF_CENTRAL_DIR_SIGNATURE = 0x06054b50;\nconst ZIP64_END_OF_CENTRAL_DIR_SIGNATURE = 0x06064b50;\nconst ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE = 0x07064b50;\nconst END_OF_CENTRAL_DIR_LENGTH = 22;\nconst ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH = 20;\nconst ZIP64_END_OF_CENTRAL_DIR_LENGTH = 56;\nconst ZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH = END_OF_CENTRAL_DIR_LENGTH + ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH + ZIP64_END_OF_CENTRAL_DIR_LENGTH;\n\nconst ZIP64_TOTAL_NUMBER_OF_DISKS = 1;\n\nconst EXTRAFIELD_TYPE_ZIP64 = 0x0001;\nconst EXTRAFIELD_TYPE_AES = 0x9901;\nconst EXTRAFIELD_TYPE_NTFS = 0x000a;\nconst EXTRAFIELD_TYPE_NTFS_TAG1 = 0x0001;\nconst EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP = 0x5455;\nconst EXTRAFIELD_TYPE_UNICODE_PATH = 0x7075;\nconst EXTRAFIELD_TYPE_UNICODE_COMMENT = 0x6375;\n\nconst BITFLAG_ENCRYPTED = 0x01;\nconst BITFLAG_LEVEL = 0x06;\nconst BITFLAG_DATA_DESCRIPTOR = 0x0008;\nconst BITFLAG_LANG_ENCODING_FLAG = 0x0800;\nconst FILE_ATTR_MSDOS_DIR_MASK = 0x10;\n\nconst VERSION_DEFLATE = 0x14;\nconst VERSION_ZIP64 = 0x2D;\nconst VERSION_AES = 0x33;\n\nconst DIRECTORY_SIGNATURE = \"/\";\n\nconst MAX_DATE = new Date(2107, 11, 31);\nconst MIN_DATE = new Date(1980, 0, 1);\n\nexport {\n\tMAX_32_BITS,\n\tMAX_16_BITS,\n\tCOMPRESSION_METHOD_DEFLATE,\n\tCOMPRESSION_METHOD_STORE,\n\tCOMPRESSION_METHOD_AES,\n\tLOCAL_FILE_HEADER_SIGNATURE,\n\tDATA_DESCRIPTOR_RECORD_SIGNATURE,\n\tCENTRAL_FILE_HEADER_SIGNATURE,\n\tEND_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_SIGNATURE,\n\tEXTRAFIELD_TYPE_ZIP64,\n\tEXTRAFIELD_TYPE_AES,\n\tEXTRAFIELD_TYPE_NTFS,\n\tEXTRAFIELD_TYPE_NTFS_TAG1,\n\tEXTRAFIELD_TYPE_EXTENDED_TIMESTAMP,\n\tEXTRAFIELD_TYPE_UNICODE_PATH,\n\tEXTRAFIELD_TYPE_UNICODE_COMMENT,\n\tEND_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH,\n\tZIP64_TOTAL_NUMBER_OF_DISKS,\n\tBITFLAG_ENCRYPTED,\n\tBITFLAG_LEVEL,\n\tBITFLAG_DATA_DESCRIPTOR,\n\tBITFLAG_LANG_ENCODING_FLAG,\n\tFILE_ATTR_MSDOS_DIR_MASK,\n\tVERSION_DEFLATE,\n\tVERSION_ZIP64,\n\tVERSION_AES,\n\tDIRECTORY_SIGNATURE,\n\tMIN_DATE,\n\tMAX_DATE\n};","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst CP437 = \"\\0 !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ \".split(\"\");\n\nexport default stringValue => {\n\tlet result = \"\";\n\tfor (let indexCharacter = 0; indexCharacter < stringValue.length; indexCharacter++) {\n\t\tresult += CP437[stringValue[indexCharacter]];\n\t}\n\treturn result;\n};","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global TextDecoder, FileReader, Blob */\n\nimport decodeCP437 from \"./cp437-decode.js\";\n\nexport default decodeText;\n\nasync function decodeText(value, encoding) {\n\tif (encoding && encoding.trim().toLowerCase() == \"cp437\") {\n\t\treturn decodeCP437(value);\n\t} else if (typeof TextDecoder == \"undefined\") {\n\t\tconst fileReader = new FileReader();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfileReader.onload = event => resolve(event.target.result);\n\t\t\tfileReader.onerror = () => reject(fileReader.error);\n\t\t\tfileReader.readAsText(new Blob([value]));\n\t\t});\n\t} else {\n\t\treturn new TextDecoder(encoding).decode(value);\n\t}\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst MINIMUM_CHUNK_SIZE = 64;\nconst ERR_ABORT = \"Abort error\";\n\nexport {\n\tERR_ABORT,\n\tprocessData\n};\n\nasync function processData(codec, reader, writer, offset, inputLength, config, options) {\n\tconst chunkSize = Math.max(config.chunkSize, MINIMUM_CHUNK_SIZE);\n\treturn processChunk();\n\n\tasync function processChunk(chunkOffset = 0, outputLength = 0) {\n\t\tconst signal = options.signal;\n\t\tif (chunkOffset < inputLength) {\n\t\t\ttestAborted(signal, codec);\n\t\t\tconst inputData = await reader.readUint8Array(chunkOffset + offset, Math.min(chunkSize, inputLength - chunkOffset));\n\t\t\tconst chunkLength = inputData.length;\n\t\t\ttestAborted(signal, codec);\n\t\t\tconst data = await codec.append(inputData);\n\t\t\ttestAborted(signal, codec);\n\t\t\toutputLength += await writeData(writer, data);\n\t\t\tif (options.onprogress) {\n\t\t\t\ttry {\n\t\t\t\t\toptions.onprogress(chunkOffset + chunkLength, inputLength);\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// ignored\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn processChunk(chunkOffset + chunkSize, outputLength);\n\t\t} else {\n\t\t\tconst result = await codec.flush();\n\t\t\toutputLength += await writeData(writer, result.data);\n\t\t\treturn { signature: result.signature, length: outputLength };\n\t\t}\n\t}\n}\n\nfunction testAborted(signal, codec) {\n\tif (signal && signal.aborted) {\n\t\tcodec.abort();\n\t\tthrow new Error(ERR_ABORT);\n\t}\n}\n\nasync function writeData(writer, data) {\n\tif (data.length) {\n\t\tawait writer.writeUint8Array(data);\n\t}\n\treturn data.length;\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst PROPERTY_NAMES = [\n\t\"filename\", \"rawFilename\", \"directory\", \"encrypted\", \"compressedSize\", \"uncompressedSize\",\n\t\"lastModDate\", \"rawLastModDate\", \"comment\", \"rawComment\", \"signature\", \"extraField\",\n\t\"rawExtraField\", \"bitFlag\", \"extraFieldZip64\", \"extraFieldUnicodePath\", \"extraFieldUnicodeComment\",\n\t\"extraFieldAES\", \"filenameUTF8\", \"commentUTF8\", \"offset\", \"zip64\", \"compressionMethod\",\n\t\"extraFieldNTFS\", \"lastAccessDate\", \"creationDate\", \"extraFieldExtendedTimestamp\",\n\t\"version\", \"versionMadeBy\", \"msDosCompatible\", \"internalFileAttribute\", \"externalFileAttribute\"];\n\nexport default class Entry {\n\n\tconstructor(data) {\n\t\tPROPERTY_NAMES.forEach(name => this[name] = data[name]);\n\t}\n\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global BigInt */\n\nimport {\n\tMAX_32_BITS,\n\tMAX_16_BITS,\n\tCOMPRESSION_METHOD_DEFLATE,\n\tCOMPRESSION_METHOD_STORE,\n\tCOMPRESSION_METHOD_AES,\n\tLOCAL_FILE_HEADER_SIGNATURE,\n\tCENTRAL_FILE_HEADER_SIGNATURE,\n\tEND_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_SIGNATURE,\n\tEXTRAFIELD_TYPE_ZIP64,\n\tEXTRAFIELD_TYPE_UNICODE_PATH,\n\tEXTRAFIELD_TYPE_UNICODE_COMMENT,\n\tEXTRAFIELD_TYPE_AES,\n\tEXTRAFIELD_TYPE_NTFS,\n\tEXTRAFIELD_TYPE_NTFS_TAG1,\n\tEXTRAFIELD_TYPE_EXTENDED_TIMESTAMP,\n\tEND_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_LENGTH,\n\tBITFLAG_ENCRYPTED,\n\tBITFLAG_LEVEL,\n\tBITFLAG_DATA_DESCRIPTOR,\n\tBITFLAG_LANG_ENCODING_FLAG,\n\tFILE_ATTR_MSDOS_DIR_MASK,\n\tDIRECTORY_SIGNATURE\n} from \"./constants.js\";\nimport { getConfiguration } from \"./configuration.js\";\nimport { createCodec, CODEC_INFLATE, ERR_INVALID_SIGNATURE, ERR_INVALID_PASSWORD } from \"./codecs/codec-pool.js\";\nimport decodeText from \"./util/decode-text.js\";\nimport Crc32 from \"./codecs/crc32.js\";\nimport { processData } from \"./engine.js\";\nimport Entry from \"./zip-entry.js\";\n\nconst ERR_BAD_FORMAT = \"File format is not recognized\";\nconst ERR_EOCDR_NOT_FOUND = \"End of central directory not found\";\nconst ERR_EOCDR_ZIP64_NOT_FOUND = \"End of Zip64 central directory not found\";\nconst ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND = \"End of Zip64 central directory locator not found\";\nconst ERR_CENTRAL_DIRECTORY_NOT_FOUND = \"Central directory header not found\";\nconst ERR_LOCAL_FILE_HEADER_NOT_FOUND = \"Local file header not found\";\nconst ERR_EXTRAFIELD_ZIP64_NOT_FOUND = \"Zip64 extra field not found\";\nconst ERR_ENCRYPTED = \"File contains encrypted entry\";\nconst ERR_UNSUPPORTED_ENCRYPTION = \"Encryption method not supported\";\nconst ERR_UNSUPPORTED_COMPRESSION = \"Compression method not supported\";\nconst CHARSET_UTF8 = \"utf-8\";\nconst CHARSET_CP437 = \"cp437\";\nconst ZIP64_PROPERTIES = [\"uncompressedSize\", \"compressedSize\", \"offset\"];\n\nclass ZipReader {\n\n\tconstructor(reader, options = {}) {\n\t\tObject.assign(this, {\n\t\t\treader,\n\t\t\toptions,\n\t\t\tconfig: getConfiguration()\n\t\t});\n\t}\n\n\tasync getEntries(options = {}) {\n\t\tconst zipReader = this;\n\t\tconst reader = zipReader.reader;\n\t\tif (!reader.initialized) {\n\t\t\tawait reader.init();\n\t\t}\n\t\tif (reader.size < END_OF_CENTRAL_DIR_LENGTH) {\n\t\t\tthrow new Error(ERR_BAD_FORMAT);\n\t\t}\n\t\tconst endOfDirectoryInfo = await seekSignature(reader, END_OF_CENTRAL_DIR_SIGNATURE, reader.size, END_OF_CENTRAL_DIR_LENGTH, MAX_16_BITS * 16);\n\t\tif (!endOfDirectoryInfo) {\n\t\t\tthrow new Error(ERR_EOCDR_NOT_FOUND);\n\t\t}\n\t\tconst endOfDirectoryView = getDataView(endOfDirectoryInfo);\n\t\tlet directoryDataLength = getUint32(endOfDirectoryView, 12);\n\t\tlet directoryDataOffset = getUint32(endOfDirectoryView, 16);\n\t\tlet filesLength = getUint16(endOfDirectoryView, 8);\n\t\tlet prependedDataLength = 0;\n\t\tif (directoryDataOffset == MAX_32_BITS || directoryDataLength == MAX_32_BITS || filesLength == MAX_16_BITS) {\n\t\t\tconst endOfDirectoryLocatorArray = await readUint8Array(reader, endOfDirectoryInfo.offset - ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH, ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH);\n\t\t\tconst endOfDirectoryLocatorView = getDataView(endOfDirectoryLocatorArray);\n\t\t\tif (getUint32(endOfDirectoryLocatorView, 0) != ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_EOCDR_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t\tdirectoryDataOffset = getBigUint64(endOfDirectoryLocatorView, 8);\n\t\t\tlet endOfDirectoryArray = await readUint8Array(reader, directoryDataOffset, ZIP64_END_OF_CENTRAL_DIR_LENGTH);\n\t\t\tlet endOfDirectoryView = getDataView(endOfDirectoryArray);\n\t\t\tconst expectedDirectoryDataOffset = endOfDirectoryInfo.offset - ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH - ZIP64_END_OF_CENTRAL_DIR_LENGTH;\n\t\t\tif (getUint32(endOfDirectoryView, 0) != ZIP64_END_OF_CENTRAL_DIR_SIGNATURE && directoryDataOffset != expectedDirectoryDataOffset) {\n\t\t\t\tconst originalDirectoryDataOffset = directoryDataOffset;\n\t\t\t\tdirectoryDataOffset = expectedDirectoryDataOffset;\n\t\t\t\tprependedDataLength = directoryDataOffset - originalDirectoryDataOffset;\n\t\t\t\tendOfDirectoryArray = await readUint8Array(reader, directoryDataOffset, ZIP64_END_OF_CENTRAL_DIR_LENGTH);\n\t\t\t\tendOfDirectoryView = getDataView(endOfDirectoryArray);\n\t\t\t}\n\t\t\tif (getUint32(endOfDirectoryView, 0) != ZIP64_END_OF_CENTRAL_DIR_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t\tfilesLength = getBigUint64(endOfDirectoryView, 32);\n\t\t\tdirectoryDataLength = getBigUint64(endOfDirectoryView, 40);\n\t\t\tdirectoryDataOffset -= directoryDataLength;\n\t\t}\n\t\tif (directoryDataOffset < 0 || directoryDataOffset >= reader.size) {\n\t\t\tthrow new Error(ERR_BAD_FORMAT);\n\t\t}\n\t\tlet offset = 0;\n\t\tlet directoryArray = await readUint8Array(reader, directoryDataOffset, directoryDataLength);\n\t\tlet directoryView = getDataView(directoryArray);\n\t\tif (directoryDataLength) {\n\t\t\tconst expectedDirectoryDataOffset = endOfDirectoryInfo.offset - directoryDataLength;\n\t\t\tif (getUint32(directoryView, offset) != CENTRAL_FILE_HEADER_SIGNATURE && directoryDataOffset != expectedDirectoryDataOffset) {\n\t\t\t\tconst originalDirectoryDataOffset = directoryDataOffset;\n\t\t\t\tdirectoryDataOffset = expectedDirectoryDataOffset;\n\t\t\t\tprependedDataLength = directoryDataOffset - originalDirectoryDataOffset;\n\t\t\t\tdirectoryArray = await readUint8Array(reader, directoryDataOffset, directoryDataLength);\n\t\t\t\tdirectoryView = getDataView(directoryArray);\n\t\t\t}\n\t\t}\n\t\tif (directoryDataOffset < 0 || directoryDataOffset >= reader.size) {\n\t\t\tthrow new Error(ERR_BAD_FORMAT);\n\t\t}\n\t\tconst entries = [];\n\t\tfor (let indexFile = 0; indexFile < filesLength; indexFile++) {\n\t\t\tconst fileEntry = new ZipEntry(reader, zipReader.config, zipReader.options);\n\t\t\tif (getUint32(directoryView, offset) != CENTRAL_FILE_HEADER_SIGNATURE) {\n\t\t\t\tthrow new Error(ERR_CENTRAL_DIRECTORY_NOT_FOUND);\n\t\t\t}\n\t\t\treadCommonHeader(fileEntry, directoryView, offset + 6);\n\t\t\tconst languageEncodingFlag = Boolean(fileEntry.bitFlag.languageEncodingFlag);\n\t\t\tconst filenameOffset = offset + 46;\n\t\t\tconst extraFieldOffset = filenameOffset + fileEntry.filenameLength;\n\t\t\tconst commentOffset = extraFieldOffset + fileEntry.extraFieldLength;\n\t\t\tconst versionMadeBy = getUint16(directoryView, offset + 4);\n\t\t\tconst msDosCompatible = (versionMadeBy & 0) == 0;\n\t\t\tObject.assign(fileEntry, {\n\t\t\t\tversionMadeBy,\n\t\t\t\tmsDosCompatible,\n\t\t\t\tcompressedSize: 0,\n\t\t\t\tuncompressedSize: 0,\n\t\t\t\tcommentLength: getUint16(directoryView, offset + 32),\n\t\t\t\tdirectory: msDosCompatible && ((getUint8(directoryView, offset + 38) & FILE_ATTR_MSDOS_DIR_MASK) == FILE_ATTR_MSDOS_DIR_MASK),\n\t\t\t\toffset: getUint32(directoryView, offset + 42) + prependedDataLength,\n\t\t\t\tinternalFileAttribute: getUint32(directoryView, offset + 34),\n\t\t\t\texternalFileAttribute: getUint32(directoryView, offset + 38),\n\t\t\t\trawFilename: directoryArray.subarray(filenameOffset, extraFieldOffset),\n\t\t\t\tfilenameUTF8: languageEncodingFlag,\n\t\t\t\tcommentUTF8: languageEncodingFlag,\n\t\t\t\trawExtraField: directoryArray.subarray(extraFieldOffset, commentOffset)\n\t\t\t});\n\t\t\tconst endOffset = commentOffset + fileEntry.commentLength;\n\t\t\tfileEntry.rawComment = directoryArray.subarray(commentOffset, endOffset);\n\t\t\tconst filenameEncoding = getOptionValue(zipReader, options, \"filenameEncoding\");\n\t\t\tconst commentEncoding = getOptionValue(zipReader, options, \"commentEncoding\");\n\t\t\tconst [filename, comment] = await Promise.all([\n\t\t\t\tdecodeText(fileEntry.rawFilename, fileEntry.filenameUTF8 ? CHARSET_UTF8 : filenameEncoding || CHARSET_CP437),\n\t\t\t\tdecodeText(fileEntry.rawComment, fileEntry.commentUTF8 ? CHARSET_UTF8 : commentEncoding || CHARSET_CP437)\n\t\t\t]);\n\t\t\tfileEntry.filename = filename;\n\t\t\tfileEntry.comment = comment;\n\t\t\tif (!fileEntry.directory && fileEntry.filename.endsWith(DIRECTORY_SIGNATURE)) {\n\t\t\t\tfileEntry.directory = true;\n\t\t\t}\n\t\t\tawait readCommonFooter(fileEntry, fileEntry, directoryView, offset + 6);\n\t\t\tconst entry = new Entry(fileEntry);\n\t\t\tentry.getData = (writer, options) => fileEntry.getData(writer, entry, options);\n\t\t\tentries.push(entry);\n\t\t\toffset = endOffset;\n\t\t\tif (options.onprogress) {\n\t\t\t\ttry {\n\t\t\t\t\toptions.onprogress(indexFile + 1, filesLength, new Entry(fileEntry));\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// ignored\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn entries;\n\t}\n\n\tasync close() {\n\t}\n}\n\nexport {\n\tZipReader,\n\tERR_BAD_FORMAT,\n\tERR_EOCDR_NOT_FOUND,\n\tERR_EOCDR_ZIP64_NOT_FOUND,\n\tERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,\n\tERR_CENTRAL_DIRECTORY_NOT_FOUND,\n\tERR_LOCAL_FILE_HEADER_NOT_FOUND,\n\tERR_EXTRAFIELD_ZIP64_NOT_FOUND,\n\tERR_ENCRYPTED,\n\tERR_UNSUPPORTED_ENCRYPTION,\n\tERR_UNSUPPORTED_COMPRESSION,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSWORD\n};\n\nclass ZipEntry {\n\n\tconstructor(reader, config, options) {\n\t\tObject.assign(this, {\n\t\t\treader,\n\t\t\tconfig,\n\t\t\toptions\n\t\t});\n\t}\n\n\tasync getData(writer, fileEntry, options = {}) {\n\t\tconst zipEntry = this;\n\t\tconst {\n\t\t\treader,\n\t\t\toffset,\n\t\t\textraFieldAES,\n\t\t\tcompressionMethod,\n\t\t\tconfig,\n\t\t\tbitFlag,\n\t\t\tsignature,\n\t\t\trawLastModDate,\n\t\t\tcompressedSize\n\t\t} = zipEntry;\n\t\tconst localDirectory = zipEntry.localDirectory = {};\n\t\tif (!reader.initialized) {\n\t\t\tawait reader.init();\n\t\t}\n\t\tlet dataArray = await readUint8Array(reader, offset, 30);\n\t\tconst dataView = getDataView(dataArray);\n\t\tlet password = getOptionValue(zipEntry, options, \"password\");\n\t\tpassword = password && password.length && password;\n\t\tif (extraFieldAES) {\n\t\t\tif (extraFieldAES.originalCompressionMethod != COMPRESSION_METHOD_AES) {\n\t\t\t\tthrow new Error(ERR_UNSUPPORTED_COMPRESSION);\n\t\t\t}\n\t\t}\n\t\tif (compressionMethod != COMPRESSION_METHOD_STORE && compressionMethod != COMPRESSION_METHOD_DEFLATE) {\n\t\t\tthrow new Error(ERR_UNSUPPORTED_COMPRESSION);\n\t\t}\n\t\tif (getUint32(dataView, 0) != LOCAL_FILE_HEADER_SIGNATURE) {\n\t\t\tthrow new Error(ERR_LOCAL_FILE_HEADER_NOT_FOUND);\n\t\t}\n\t\treadCommonHeader(localDirectory, dataView, 4);\n\t\tdataArray = await readUint8Array(reader, offset, 30 + localDirectory.filenameLength + localDirectory.extraFieldLength);\n\t\tlocalDirectory.rawExtraField = dataArray.subarray(30 + localDirectory.filenameLength);\n\t\tawait readCommonFooter(zipEntry, localDirectory, dataView, 4);\n\t\tfileEntry.lastAccessDate = localDirectory.lastAccessDate;\n\t\tfileEntry.creationDate = localDirectory.creationDate;\n\t\tconst encrypted = zipEntry.encrypted && localDirectory.encrypted;\n\t\tconst zipCrypto = encrypted && !extraFieldAES;\n\t\tif (encrypted) {\n\t\t\tif (!zipCrypto && extraFieldAES.strength === undefined) {\n\t\t\t\tthrow new Error(ERR_UNSUPPORTED_ENCRYPTION);\n\t\t\t} else if (!password) {\n\t\t\t\tthrow new Error(ERR_ENCRYPTED);\n\t\t\t}\n\t\t}\n\t\tconst codec = await createCodec(config.Inflate, {\n\t\t\tcodecType: CODEC_INFLATE,\n\t\t\tpassword,\n\t\t\tzipCrypto,\n\t\t\tencryptionStrength: extraFieldAES && extraFieldAES.strength,\n\t\t\tsigned: getOptionValue(zipEntry, options, \"checkSignature\"),\n\t\t\tpasswordVerification: zipCrypto && (bitFlag.dataDescriptor ? ((rawLastModDate >>> 8) & 0xFF) : ((signature >>> 24) & 0xFF)),\n\t\t\tsignature,\n\t\t\tcompressed: compressionMethod != 0,\n\t\t\tencrypted,\n\t\t\tuseWebWorkers: getOptionValue(zipEntry, options, \"useWebWorkers\")\n\t\t}, config);\n\t\tif (!writer.initialized) {\n\t\t\tawait writer.init();\n\t\t}\n\t\tconst signal = getOptionValue(zipEntry, options, \"signal\");\n\t\tconst dataOffset = offset + 30 + localDirectory.filenameLength + localDirectory.extraFieldLength;\n\t\tawait processData(codec, reader, writer, dataOffset, compressedSize, config, { onprogress: options.onprogress, signal });\n\t\treturn writer.getData();\n\t}\n}\n\nfunction readCommonHeader(directory, dataView, offset) {\n\tconst rawBitFlag = directory.rawBitFlag = getUint16(dataView, offset + 2);\n\tconst encrypted = (rawBitFlag & BITFLAG_ENCRYPTED) == BITFLAG_ENCRYPTED;\n\tconst rawLastModDate = getUint32(dataView, offset + 6);\n\tObject.assign(directory, {\n\t\tencrypted,\n\t\tversion: getUint16(dataView, offset),\n\t\tbitFlag: {\n\t\t\tlevel: (rawBitFlag & BITFLAG_LEVEL) >> 1,\n\t\t\tdataDescriptor: (rawBitFlag & BITFLAG_DATA_DESCRIPTOR) == BITFLAG_DATA_DESCRIPTOR,\n\t\t\tlanguageEncodingFlag: (rawBitFlag & BITFLAG_LANG_ENCODING_FLAG) == BITFLAG_LANG_ENCODING_FLAG\n\t\t},\n\t\trawLastModDate,\n\t\tlastModDate: getDate(rawLastModDate),\n\t\tfilenameLength: getUint16(dataView, offset + 22),\n\t\textraFieldLength: getUint16(dataView, offset + 24)\n\t});\n}\n\nasync function readCommonFooter(fileEntry, directory, dataView, offset) {\n\tconst rawExtraField = directory.rawExtraField;\n\tconst extraField = directory.extraField = new Map();\n\tconst rawExtraFieldView = getDataView(new Uint8Array(rawExtraField));\n\tlet offsetExtraField = 0;\n\ttry {\n\t\twhile (offsetExtraField < rawExtraField.length) {\n\t\t\tconst type = getUint16(rawExtraFieldView, offsetExtraField);\n\t\t\tconst size = getUint16(rawExtraFieldView, offsetExtraField + 2);\n\t\t\textraField.set(type, {\n\t\t\t\ttype,\n\t\t\t\tdata: rawExtraField.slice(offsetExtraField + 4, offsetExtraField + 4 + size)\n\t\t\t});\n\t\t\toffsetExtraField += 4 + size;\n\t\t}\n\t} catch (error) {\n\t\t// ignored\n\t}\n\tconst compressionMethod = getUint16(dataView, offset + 4);\n\tdirectory.signature = getUint32(dataView, offset + 10);\n\tdirectory.uncompressedSize = getUint32(dataView, offset + 18);\n\tdirectory.compressedSize = getUint32(dataView, offset + 14);\n\tconst extraFieldZip64 = extraField.get(EXTRAFIELD_TYPE_ZIP64);\n\tif (extraFieldZip64) {\n\t\treadExtraFieldZip64(extraFieldZip64, directory);\n\t\tdirectory.extraFieldZip64 = extraFieldZip64;\n\t}\n\tconst extraFieldUnicodePath = extraField.get(EXTRAFIELD_TYPE_UNICODE_PATH);\n\tif (extraFieldUnicodePath) {\n\t\tawait readExtraFieldUnicode(extraFieldUnicodePath, \"filename\", \"rawFilename\", directory, fileEntry);\n\t\tdirectory.extraFieldUnicodePath = extraFieldUnicodePath;\n\t}\n\tconst extraFieldUnicodeComment = extraField.get(EXTRAFIELD_TYPE_UNICODE_COMMENT);\n\tif (extraFieldUnicodeComment) {\n\t\tawait readExtraFieldUnicode(extraFieldUnicodeComment, \"comment\", \"rawComment\", directory, fileEntry);\n\t\tdirectory.extraFieldUnicodeComment = extraFieldUnicodeComment;\n\t}\n\tconst extraFieldAES = extraField.get(EXTRAFIELD_TYPE_AES);\n\tif (extraFieldAES) {\n\t\treadExtraFieldAES(extraFieldAES, directory, compressionMethod);\n\t\tdirectory.extraFieldAES = extraFieldAES;\n\t} else {\n\t\tdirectory.compressionMethod = compressionMethod;\n\t}\n\tconst extraFieldNTFS = extraField.get(EXTRAFIELD_TYPE_NTFS);\n\tif (extraFieldNTFS) {\n\t\treadExtraFieldNTFS(extraFieldNTFS, directory);\n\t\tdirectory.extraFieldNTFS = extraFieldNTFS;\n\t}\n\tconst extraFieldExtendedTimestamp = extraField.get(EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP);\n\tif (extraFieldExtendedTimestamp) {\n\t\treadExtraFieldExtendedTimestamp(extraFieldExtendedTimestamp, directory);\n\t\tdirectory.extraFieldExtendedTimestamp = extraFieldExtendedTimestamp;\n\t}\n}\n\nfunction readExtraFieldZip64(extraFieldZip64, directory) {\n\tdirectory.zip64 = true;\n\tconst extraFieldView = getDataView(extraFieldZip64.data);\n\textraFieldZip64.values = [];\n\tfor (let indexValue = 0; indexValue < Math.floor(extraFieldZip64.data.length / 8); indexValue++) {\n\t\textraFieldZip64.values.push(getBigUint64(extraFieldView, 0 + indexValue * 8));\n\t}\n\tconst missingProperties = ZIP64_PROPERTIES.filter(propertyName => directory[propertyName] == MAX_32_BITS);\n\tfor (let indexMissingProperty = 0; indexMissingProperty < missingProperties.length; indexMissingProperty++) {\n\t\textraFieldZip64[missingProperties[indexMissingProperty]] = extraFieldZip64.values[indexMissingProperty];\n\t}\n\tZIP64_PROPERTIES.forEach(propertyName => {\n\t\tif (directory[propertyName] == MAX_32_BITS) {\n\t\t\tif (extraFieldZip64[propertyName] !== undefined) {\n\t\t\t\tdirectory[propertyName] = extraFieldZip64[propertyName];\n\t\t\t} else {\n\t\t\t\tthrow new Error(ERR_EXTRAFIELD_ZIP64_NOT_FOUND);\n\t\t\t}\n\t\t}\n\t});\n}\n\nasync function readExtraFieldUnicode(extraFieldUnicode, propertyName, rawPropertyName, directory, fileEntry) {\n\tconst extraFieldView = getDataView(extraFieldUnicode.data);\n\textraFieldUnicode.version = getUint8(extraFieldView, 0);\n\textraFieldUnicode.signature = getUint32(extraFieldView, 1);\n\tconst crc32 = new Crc32();\n\tcrc32.append(fileEntry[rawPropertyName]);\n\tconst dataViewSignature = getDataView(new Uint8Array(4));\n\tdataViewSignature.setUint32(0, crc32.get(), true);\n\textraFieldUnicode[propertyName] = await decodeText(extraFieldUnicode.data.subarray(5));\n\textraFieldUnicode.valid = !fileEntry.bitFlag.languageEncodingFlag && extraFieldUnicode.signature == getUint32(dataViewSignature, 0);\n\tif (extraFieldUnicode.valid) {\n\t\tdirectory[propertyName] = extraFieldUnicode[propertyName];\n\t\tdirectory[propertyName + \"UTF8\"] = true;\n\t}\n}\n\nfunction readExtraFieldAES(extraFieldAES, directory, compressionMethod) {\n\tconst extraFieldView = getDataView(extraFieldAES.data);\n\textraFieldAES.vendorVersion = getUint8(extraFieldView, 0);\n\textraFieldAES.vendorId = getUint8(extraFieldView, 2);\n\tconst strength = getUint8(extraFieldView, 4);\n\textraFieldAES.strength = strength;\n\textraFieldAES.originalCompressionMethod = compressionMethod;\n\tdirectory.compressionMethod = extraFieldAES.compressionMethod = getUint16(extraFieldView, 5);\n}\n\nfunction readExtraFieldNTFS(extraFieldNTFS, directory) {\n\tconst extraFieldView = getDataView(extraFieldNTFS.data);\n\tlet offsetExtraField = 4;\n\tlet tag1Data;\n\ttry {\n\t\twhile (offsetExtraField < extraFieldNTFS.data.length && !tag1Data) {\n\t\t\tconst tagValue = getUint16(extraFieldView, offsetExtraField);\n\t\t\tconst attributeSize = getUint16(extraFieldView, offsetExtraField + 2);\n\t\t\tif (tagValue == EXTRAFIELD_TYPE_NTFS_TAG1) {\n\t\t\t\ttag1Data = extraFieldNTFS.data.slice(offsetExtraField + 4, offsetExtraField + 4 + attributeSize);\n\t\t\t}\n\t\t\toffsetExtraField += 4 + attributeSize;\n\t\t}\n\t} catch (error) {\n\t\t// ignored\n\t}\n\ttry {\n\t\tif (tag1Data && tag1Data.length == 24) {\n\t\t\tconst tag1View = getDataView(tag1Data);\n\t\t\tconst rawLastModDate = tag1View.getBigUint64(0, true);\n\t\t\tconst rawLastAccessDate = tag1View.getBigUint64(8, true);\n\t\t\tconst rawCreationDate = tag1View.getBigUint64(16, true);\n\t\t\tObject.assign(extraFieldNTFS, {\n\t\t\t\trawLastModDate,\n\t\t\t\trawLastAccessDate,\n\t\t\t\trawCreationDate\n\t\t\t});\n\t\t\tconst lastModDate = getDateNTFS(rawLastModDate);\n\t\t\tconst lastAccessDate = getDateNTFS(rawLastAccessDate);\n\t\t\tconst creationDate = getDateNTFS(rawCreationDate);\n\t\t\tconst extraFieldData = { lastModDate, lastAccessDate, creationDate };\n\t\t\tObject.assign(extraFieldNTFS, extraFieldData);\n\t\t\tObject.assign(directory, extraFieldData);\n\t\t}\n\t} catch (error) {\n\t\t// ignored\n\t}\n}\n\nfunction readExtraFieldExtendedTimestamp(extraFieldExtendedTimestamp, directory) {\n\tconst extraFieldView = getDataView(extraFieldExtendedTimestamp.data);\n\tconst flags = getUint8(extraFieldView, 0);\n\tconst timeProperties = [];\n\tconst timeRawProperties = [];\n\tif ((flags & 0x1) == 0x1) {\n\t\ttimeProperties.push(\"lastModDate\");\n\t\ttimeRawProperties.push(\"rawLastModDate\");\n\t}\n\tif ((flags & 0x2) == 0x2) {\n\t\ttimeProperties.push(\"lastAccessDate\");\n\t\ttimeRawProperties.push(\"rawLastAccessDate\");\n\t}\n\tif ((flags & 0x4) == 0x4) {\n\t\ttimeProperties.push(\"creationDate\");\n\t\ttimeRawProperties.push(\"rawCreationDate\");\n\t}\n\tlet offset = 1;\n\ttimeProperties.forEach((propertyName, indexProperty) => {\n\t\tif (extraFieldExtendedTimestamp.data.length >= offset + 4) {\n\t\t\tconst time = getUint32(extraFieldView, offset);\n\t\t\tdirectory[propertyName] = extraFieldExtendedTimestamp[propertyName] = new Date(time * 1000);\n\t\t\tconst rawPropertyName = timeRawProperties[indexProperty];\n\t\t\textraFieldExtendedTimestamp[rawPropertyName] = time;\n\t\t}\n\t\toffset += 4;\n\t});\n}\n\nasync function seekSignature(reader, signature, startOffset, minimumBytes, maximumLength) {\n\tconst signatureArray = new Uint8Array(4);\n\tconst signatureView = getDataView(signatureArray);\n\tsetUint32(signatureView, 0, signature);\n\tconst maximumBytes = minimumBytes + maximumLength;\n\treturn (await seek(minimumBytes)) || await seek(Math.min(maximumBytes, startOffset));\n\n\tasync function seek(length) {\n\t\tconst offset = startOffset - length;\n\t\tconst bytes = await readUint8Array(reader, offset, length);\n\t\tfor (let indexByte = bytes.length - minimumBytes; indexByte >= 0; indexByte--) {\n\t\t\tif (bytes[indexByte] == signatureArray[0] && bytes[indexByte + 1] == signatureArray[1] &&\n\t\t\t\tbytes[indexByte + 2] == signatureArray[2] && bytes[indexByte + 3] == signatureArray[3]) {\n\t\t\t\treturn {\n\t\t\t\t\toffset: offset + indexByte,\n\t\t\t\t\tbuffer: bytes.slice(indexByte, indexByte + minimumBytes).buffer\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getOptionValue(zipReader, options, name) {\n\treturn options[name] === undefined ? zipReader.options[name] : options[name];\n}\n\nfunction getDate(timeRaw) {\n\tconst date = (timeRaw & 0xffff0000) >> 16, time = timeRaw & 0x0000ffff;\n\ttry {\n\t\treturn new Date(1980 + ((date & 0xFE00) >> 9), ((date & 0x01E0) >> 5) - 1, date & 0x001F, (time & 0xF800) >> 11, (time & 0x07E0) >> 5, (time & 0x001F) * 2, 0);\n\t} catch (error) {\n\t\t// ignored\n\t}\n}\n\nfunction getDateNTFS(timeRaw) {\n\treturn new Date((Number((timeRaw / BigInt(10000)) - BigInt(11644473600000))));\n}\n\nfunction getUint8(view, offset) {\n\treturn view.getUint8(offset);\n}\n\nfunction getUint16(view, offset) {\n\treturn view.getUint16(offset, true);\n}\n\nfunction getUint32(view, offset) {\n\treturn view.getUint32(offset, true);\n}\n\nfunction getBigUint64(view, offset) {\n\treturn Number(view.getBigUint64(offset, true));\n}\n\nfunction setUint32(view, offset, value) {\n\tview.setUint32(offset, value, true);\n}\n\nfunction getDataView(array) {\n\treturn new DataView(array.buffer);\n}\n\nfunction readUint8Array(reader, offset, size) {\n\treturn reader.readUint8Array(offset, size);\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global BigInt, FileReader */\n\nimport {\n\tMAX_32_BITS,\n\tMAX_16_BITS,\n\tCOMPRESSION_METHOD_DEFLATE,\n\tCOMPRESSION_METHOD_STORE,\n\tCOMPRESSION_METHOD_AES,\n\tLOCAL_FILE_HEADER_SIGNATURE,\n\tDATA_DESCRIPTOR_RECORD_SIGNATURE,\n\tCENTRAL_FILE_HEADER_SIGNATURE,\n\tEND_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE,\n\tZIP64_END_OF_CENTRAL_DIR_SIGNATURE,\n\tZIP64_TOTAL_NUMBER_OF_DISKS,\n\tEXTRAFIELD_TYPE_AES,\n\tEXTRAFIELD_TYPE_ZIP64,\n\tEXTRAFIELD_TYPE_EXTENDED_TIMESTAMP,\n\tEXTRAFIELD_TYPE_NTFS,\n\tEXTRAFIELD_TYPE_NTFS_TAG1,\n\tEND_OF_CENTRAL_DIR_LENGTH,\n\tZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH,\n\tBITFLAG_ENCRYPTED,\n\tBITFLAG_DATA_DESCRIPTOR,\n\tBITFLAG_LANG_ENCODING_FLAG,\n\tFILE_ATTR_MSDOS_DIR_MASK,\n\tVERSION_DEFLATE,\n\tVERSION_ZIP64,\n\tVERSION_AES,\n\tDIRECTORY_SIGNATURE,\n\tMIN_DATE,\n\tMAX_DATE\n} from \"./constants.js\";\nimport { getConfiguration } from \"./configuration.js\";\nimport { CODEC_DEFLATE, createCodec } from \"./codecs/codec-pool.js\";\nimport encodeText from \"./util/encode-text.js\";\nimport { BlobWriter } from \"./io.js\";\nimport { processData } from \"./engine.js\";\nimport Entry from \"./zip-entry.js\";\n\nconst ERR_DUPLICATED_NAME = \"File already exists\";\nconst ERR_INVALID_COMMENT = \"Zip file comment exceeds 64KB\";\nconst ERR_INVALID_ENTRY_COMMENT = \"File entry comment exceeds 64KB\";\nconst ERR_INVALID_ENTRY_NAME = \"File entry name exceeds 64KB\";\nconst ERR_INVALID_VERSION = \"Version exceeds 65535\";\nconst ERR_INVALID_ENCRYPTION_STRENGTH = \"The strength must equal 1, 2, or 3\";\nconst ERR_INVALID_EXTRAFIELD_TYPE = \"Extra field type exceeds 65535\";\nconst ERR_INVALID_EXTRAFIELD_DATA = \"Extra field data exceeds 64KB\";\nconst ERR_UNSUPPORTED_FORMAT = \"Zip64 is not supported\";\n\nconst EXTRAFIELD_DATA_AES = new Uint8Array([0x07, 0x00, 0x02, 0x00, 0x41, 0x45, 0x03, 0x00, 0x00]);\nconst EXTRAFIELD_LENGTH_ZIP64 = 24;\n\nlet workers = 0;\n\nclass ZipWriter {\n\n\tconstructor(writer, options = {}) {\n\t\tObject.assign(this, {\n\t\t\twriter,\n\t\t\toptions,\n\t\t\tconfig: getConfiguration(),\n\t\t\tfiles: new Map(),\n\t\t\toffset: writer.size,\n\t\t\tpendingCompressedSize: 0,\n\t\t\tpendingEntries: []\n\t\t});\n\t}\n\n\tasync add(name = \"\", reader, options = {}) {\n\t\tconst zipWriter = this;\n\t\tif (workers < zipWriter.config.maxWorkers) {\n\t\t\tworkers++;\n\t\t\ttry {\n\t\t\t\treturn await addFile(zipWriter, name, reader, options);\n\t\t\t} finally {\n\t\t\t\tworkers--;\n\t\t\t\tconst pendingEntry = zipWriter.pendingEntries.shift();\n\t\t\t\tif (pendingEntry) {\n\t\t\t\t\tzipWriter.add(pendingEntry.name, pendingEntry.reader, pendingEntry.options)\n\t\t\t\t\t\t.then(pendingEntry.resolve)\n\t\t\t\t\t\t.catch(pendingEntry.reject);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn new Promise((resolve, reject) => zipWriter.pendingEntries.push({ name, reader, options, resolve, reject }));\n\t\t}\n\t}\n\n\tasync close(comment = new Uint8Array(0), options = {}) {\n\t\tawait closeFile(this, comment, options);\n\t\treturn this.writer.getData();\n\t}\n}\n\nexport {\n\tZipWriter,\n\tERR_DUPLICATED_NAME,\n\tERR_INVALID_COMMENT,\n\tERR_INVALID_ENTRY_NAME,\n\tERR_INVALID_ENTRY_COMMENT,\n\tERR_INVALID_VERSION,\n\tERR_INVALID_EXTRAFIELD_TYPE,\n\tERR_INVALID_EXTRAFIELD_DATA,\n\tERR_INVALID_ENCRYPTION_STRENGTH,\n\tERR_UNSUPPORTED_FORMAT\n};\n\nasync function addFile(zipWriter, name, reader, options) {\n\tname = name.trim();\n\tif (options.directory && (!name.endsWith(DIRECTORY_SIGNATURE))) {\n\t\tname += DIRECTORY_SIGNATURE;\n\t} else {\n\t\toptions.directory = name.endsWith(DIRECTORY_SIGNATURE);\n\t}\n\tif (zipWriter.files.has(name)) {\n\t\tthrow new Error(ERR_DUPLICATED_NAME);\n\t}\n\tconst rawFilename = encodeText(name);\n\tif (rawFilename.length > MAX_16_BITS) {\n\t\tthrow new Error(ERR_INVALID_ENTRY_NAME);\n\t}\n\tconst comment = options.comment || \"\";\n\tconst rawComment = encodeText(comment);\n\tif (rawComment.length > MAX_16_BITS) {\n\t\tthrow new Error(ERR_INVALID_ENTRY_COMMENT);\n\t}\n\tconst version = zipWriter.options.version || options.version || 0;\n\tif (version > MAX_16_BITS) {\n\t\tthrow new Error(ERR_INVALID_VERSION);\n\t}\n\tconst versionMadeBy = zipWriter.options.versionMadeBy || options.versionMadeBy || 20;\n\tif (versionMadeBy > MAX_16_BITS) {\n\t\tthrow new Error(ERR_INVALID_VERSION);\n\t}\n\tconst lastModDate = getOptionValue(zipWriter, options, \"lastModDate\") || new Date();\n\tconst lastAccessDate = getOptionValue(zipWriter, options, \"lastAccessDate\");\n\tconst creationDate = getOptionValue(zipWriter, options, \"creationDate\");\n\tconst password = getOptionValue(zipWriter, options, \"password\");\n\tconst encryptionStrength = getOptionValue(zipWriter, options, \"encryptionStrength\") || 3;\n\tconst zipCrypto = getOptionValue(zipWriter, options, \"zipCrypto\");\n\tif (password !== undefined && encryptionStrength !== undefined && (encryptionStrength < 1 || encryptionStrength > 3)) {\n\t\tthrow new Error(ERR_INVALID_ENCRYPTION_STRENGTH);\n\t}\n\tlet rawExtraField = new Uint8Array(0);\n\tconst extraField = options.extraField;\n\tif (extraField) {\n\t\tlet extraFieldSize = 0;\n\t\tlet offset = 0;\n\t\textraField.forEach(data => extraFieldSize += 4 + data.length);\n\t\trawExtraField = new Uint8Array(extraFieldSize);\n\t\textraField.forEach((data, type) => {\n\t\t\tif (type > MAX_16_BITS) {\n\t\t\t\tthrow new Error(ERR_INVALID_EXTRAFIELD_TYPE);\n\t\t\t}\n\t\t\tif (data.length > MAX_16_BITS) {\n\t\t\t\tthrow new Error(ERR_INVALID_EXTRAFIELD_DATA);\n\t\t\t}\n\t\t\tarraySet(rawExtraField, new Uint16Array([type]), offset);\n\t\t\tarraySet(rawExtraField, new Uint16Array([data.length]), offset + 2);\n\t\t\tarraySet(rawExtraField, data, offset + 4);\n\t\t\toffset += 4 + data.length;\n\t\t});\n\t}\n\tlet extendedTimestamp = getOptionValue(zipWriter, options, \"extendedTimestamp\");\n\tif (extendedTimestamp === undefined) {\n\t\textendedTimestamp = true;\n\t}\n\tlet maximumCompressedSize = 0;\n\tlet keepOrder = getOptionValue(zipWriter, options, \"keepOrder\");\n\tif (keepOrder === undefined) {\n\t\tkeepOrder = true;\n\t}\n\tlet uncompressedSize = 0;\n\tlet msDosCompatible = getOptionValue(zipWriter, options, \"msDosCompatible\");\n\tif (msDosCompatible === undefined) {\n\t\tmsDosCompatible = true;\n\t}\n\tconst internalFileAttribute = getOptionValue(zipWriter, options, \"internalFileAttribute\") || 0;\n\tconst externalFileAttribute = getOptionValue(zipWriter, options, \"externalFileAttribute\") || 0;\n\tif (reader) {\n\t\tif (!reader.initialized) {\n\t\t\tawait reader.init();\n\t\t}\n\t\tuncompressedSize = reader.size;\n\t\tmaximumCompressedSize = getMaximumCompressedSize(uncompressedSize);\n\t}\n\tlet zip64 = options.zip64 || zipWriter.options.zip64 || false;\n\tif (zipWriter.offset + zipWriter.pendingCompressedSize >= MAX_32_BITS ||\n\t\tuncompressedSize >= MAX_32_BITS ||\n\t\tmaximumCompressedSize >= MAX_32_BITS) {\n\t\tif (options.zip64 === false || zipWriter.options.zip64 === false || !keepOrder) {\n\t\t\tthrow new Error(ERR_UNSUPPORTED_FORMAT);\n\t\t} else {\n\t\t\tzip64 = true;\n\t\t}\n\t}\n\tzipWriter.pendingCompressedSize += maximumCompressedSize;\n\tawait Promise.resolve();\n\tconst level = getOptionValue(zipWriter, options, \"level\");\n\tconst useWebWorkers = getOptionValue(zipWriter, options, \"useWebWorkers\");\n\tconst bufferedWrite = getOptionValue(zipWriter, options, \"bufferedWrite\");\n\tlet dataDescriptor = getOptionValue(zipWriter, options, \"dataDescriptor\");\n\tlet dataDescriptorSignature = getOptionValue(zipWriter, options, \"dataDescriptorSignature\");\n\tconst signal = getOptionValue(zipWriter, options, \"signal\");\n\tif (dataDescriptor === undefined) {\n\t\tdataDescriptor = true;\n\t}\n\tif (dataDescriptor && dataDescriptorSignature === undefined) {\n\t\tdataDescriptorSignature = true;\n\t}\n\tconst fileEntry = await getFileEntry(zipWriter, name, reader, Object.assign({}, options, {\n\t\trawFilename,\n\t\trawComment,\n\t\tversion,\n\t\tversionMadeBy,\n\t\tlastModDate,\n\t\tlastAccessDate,\n\t\tcreationDate,\n\t\trawExtraField,\n\t\tzip64,\n\t\tpassword,\n\t\tlevel,\n\t\tuseWebWorkers,\n\t\tencryptionStrength,\n\t\textendedTimestamp,\n\t\tzipCrypto,\n\t\tbufferedWrite,\n\t\tkeepOrder,\n\t\tdataDescriptor,\n\t\tdataDescriptorSignature,\n\t\tsignal,\n\t\tmsDosCompatible,\n\t\tinternalFileAttribute,\n\t\texternalFileAttribute\n\t}));\n\tif (maximumCompressedSize) {\n\t\tzipWriter.pendingCompressedSize -= maximumCompressedSize;\n\t}\n\tObject.assign(fileEntry, { name, comment, extraField });\n\treturn new Entry(fileEntry);\n}\n\nasync function getFileEntry(zipWriter, name, reader, options) {\n\tconst files = zipWriter.files;\n\tconst writer = zipWriter.writer;\n\tconst previousFileEntry = Array.from(files.values()).pop();\n\tlet fileEntry = {};\n\tlet bufferedWrite;\n\tlet resolveLockUnbufferedWrite;\n\tlet resolveLockCurrentFileEntry;\n\tfiles.set(name, fileEntry);\n\ttry {\n\t\tlet lockPreviousFileEntry;\n\t\tlet fileWriter;\n\t\tlet lockCurrentFileEntry;\n\t\tif (options.keepOrder) {\n\t\t\tlockPreviousFileEntry = previousFileEntry && previousFileEntry.lock;\n\t\t}\n\t\tfileEntry.lock = lockCurrentFileEntry = new Promise(resolve => resolveLockCurrentFileEntry = resolve);\n\t\tif (options.bufferedWrite || zipWriter.lockWrite || !options.dataDescriptor) {\n\t\t\tfileWriter = new BlobWriter();\n\t\t\tfileWriter.init();\n\t\t\tbufferedWrite = true;\n\t\t} else {\n\t\t\tzipWriter.lockWrite = new Promise(resolve => resolveLockUnbufferedWrite = resolve);\n\t\t\tif (!writer.initialized) {\n\t\t\t\tawait writer.init();\n\t\t\t}\n\t\t\tfileWriter = writer;\n\t\t}\n\t\tfileEntry = await createFileEntry(reader, fileWriter, zipWriter.config, options);\n\t\tfileEntry.lock = lockCurrentFileEntry;\n\t\tfiles.set(name, fileEntry);\n\t\tfileEntry.filename = name;\n\t\tif (bufferedWrite) {\n\t\t\tlet indexWrittenData = 0;\n\t\t\tconst blob = fileWriter.getData();\n\t\t\tawait Promise.all([zipWriter.lockWrite, lockPreviousFileEntry]);\n\t\t\tlet pendingFileEntry;\n\t\t\tdo {\n\t\t\t\tpendingFileEntry = Array.from(files.values()).find(fileEntry => fileEntry.writingBufferedData);\n\t\t\t\tif (pendingFileEntry) {\n\t\t\t\t\tawait pendingFileEntry.lock;\n\t\t\t\t}\n\t\t\t} while (pendingFileEntry && pendingFileEntry.lock);\n\t\t\tfileEntry.writingBufferedData = true;\n\t\t\tif (!options.dataDescriptor) {\n\t\t\t\tconst headerLength = 26;\n\t\t\t\tconst arrayBuffer = await sliceAsArrayBuffer(blob, 0, headerLength);\n\t\t\t\tconst arrayBufferView = new DataView(arrayBuffer);\n\t\t\t\tif (!fileEntry.encrypted || options.zipCrypto) {\n\t\t\t\t\tsetUint32(arrayBufferView, 14, fileEntry.signature);\n\t\t\t\t}\n\t\t\t\tif (fileEntry.zip64) {\n\t\t\t\t\tsetUint32(arrayBufferView, 18, MAX_32_BITS);\n\t\t\t\t\tsetUint32(arrayBufferView, 22, MAX_32_BITS);\n\t\t\t\t} else {\n\t\t\t\t\tsetUint32(arrayBufferView, 18, fileEntry.compressedSize);\n\t\t\t\t\tsetUint32(arrayBufferView, 22, fileEntry.uncompressedSize);\n\t\t\t\t}\n\t\t\t\tawait writer.writeUint8Array(new Uint8Array(arrayBuffer));\n\t\t\t\tindexWrittenData = headerLength;\n\t\t\t}\n\t\t\tawait writeBlob(writer, blob, indexWrittenData);\n\t\t\tdelete fileEntry.writingBufferedData;\n\t\t}\n\t\tfileEntry.offset = zipWriter.offset;\n\t\tif (fileEntry.zip64) {\n\t\t\tconst rawExtraFieldZip64View = getDataView(fileEntry.rawExtraFieldZip64);\n\t\t\tsetBigUint64(rawExtraFieldZip64View, 20, BigInt(fileEntry.offset));\n\t\t} else if (fileEntry.offset >= MAX_32_BITS) {\n\t\t\tthrow new Error(ERR_UNSUPPORTED_FORMAT);\n\t\t}\n\t\tzipWriter.offset += fileEntry.length;\n\t\treturn fileEntry;\n\t} catch (error) {\n\t\tif ((bufferedWrite && fileEntry.writingBufferedData) || (!bufferedWrite && fileEntry.dataWritten)) {\n\t\t\terror.corruptedEntry = zipWriter.hasCorruptedEntries = true;\n\t\t\tif (fileEntry.uncompressedSize) {\n\t\t\t\tzipWriter.offset += fileEntry.uncompressedSize;\n\t\t\t}\n\t\t}\n\t\tfiles.delete(name);\n\t\tthrow error;\n\t} finally {\n\t\tresolveLockCurrentFileEntry();\n\t\tif (resolveLockUnbufferedWrite) {\n\t\t\tresolveLockUnbufferedWrite();\n\t\t}\n\t}\n}\n\nasync function createFileEntry(reader, writer, config, options) {\n\tconst {\n\t\trawFilename,\n\t\tlastAccessDate,\n\t\tcreationDate,\n\t\tpassword,\n\t\tlevel,\n\t\tzip64,\n\t\tzipCrypto,\n\t\tdataDescriptor,\n\t\tdataDescriptorSignature,\n\t\tdirectory,\n\t\tversion,\n\t\tversionMadeBy,\n\t\trawComment,\n\t\trawExtraField,\n\t\tuseWebWorkers,\n\t\tonprogress,\n\t\tsignal,\n\t\tencryptionStrength,\n\t\textendedTimestamp,\n\t\tmsDosCompatible,\n\t\tinternalFileAttribute,\n\t\texternalFileAttribute\n\t} = options;\n\tconst encrypted = Boolean(password && password.length);\n\tconst compressed = level !== 0 && !directory;\n\tlet rawExtraFieldAES;\n\tif (encrypted && !zipCrypto) {\n\t\trawExtraFieldAES = new Uint8Array(EXTRAFIELD_DATA_AES.length + 2);\n\t\tconst extraFieldAESView = getDataView(rawExtraFieldAES);\n\t\tsetUint16(extraFieldAESView, 0, EXTRAFIELD_TYPE_AES);\n\t\tarraySet(rawExtraFieldAES, EXTRAFIELD_DATA_AES, 2);\n\t\tsetUint8(extraFieldAESView, 8, encryptionStrength);\n\t} else {\n\t\trawExtraFieldAES = new Uint8Array(0);\n\t}\n\tlet rawExtraFieldNTFS;\n\tlet rawExtraFieldExtendedTimestamp;\n\tif (extendedTimestamp) {\n\t\trawExtraFieldExtendedTimestamp = new Uint8Array(9 + (lastAccessDate ? 4 : 0) + (creationDate ? 4 : 0));\n\t\tconst extraFieldExtendedTimestampView = getDataView(rawExtraFieldExtendedTimestamp);\n\t\tsetUint16(extraFieldExtendedTimestampView, 0, EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP);\n\t\tsetUint16(extraFieldExtendedTimestampView, 2, rawExtraFieldExtendedTimestamp.length - 4);\n\t\tconst extraFieldExtendedTimestampFlag = 0x1 + (lastAccessDate ? 0x2 : 0) + (creationDate ? 0x4 : 0);\n\t\tsetUint8(extraFieldExtendedTimestampView, 4, extraFieldExtendedTimestampFlag);\n\t\tsetUint32(extraFieldExtendedTimestampView, 5, Math.floor(options.lastModDate.getTime() / 1000));\n\t\tif (lastAccessDate) {\n\t\t\tsetUint32(extraFieldExtendedTimestampView, 9, Math.floor(lastAccessDate.getTime() / 1000));\n\t\t}\n\t\tif (creationDate) {\n\t\t\tsetUint32(extraFieldExtendedTimestampView, 13, Math.floor(creationDate.getTime() / 1000));\n\t\t}\n\t\ttry {\n\t\t\trawExtraFieldNTFS = new Uint8Array(36);\n\t\t\tconst extraFieldNTFSView = getDataView(rawExtraFieldNTFS);\n\t\t\tconst lastModTimeNTFS = getTimeNTFS(options.lastModDate);\n\t\t\tsetUint16(extraFieldNTFSView, 0, EXTRAFIELD_TYPE_NTFS);\n\t\t\tsetUint16(extraFieldNTFSView, 2, 32);\n\t\t\tsetUint16(extraFieldNTFSView, 8, EXTRAFIELD_TYPE_NTFS_TAG1);\n\t\t\tsetUint16(extraFieldNTFSView, 10, 24);\n\t\t\tsetBigUint64(extraFieldNTFSView, 12, lastModTimeNTFS);\n\t\t\tsetBigUint64(extraFieldNTFSView, 20, getTimeNTFS(lastAccessDate) || lastModTimeNTFS);\n\t\t\tsetBigUint64(extraFieldNTFSView, 28, getTimeNTFS(creationDate) || lastModTimeNTFS);\n\t\t} catch (error) {\n\t\t\trawExtraFieldNTFS = new Uint8Array(0);\n\t\t}\n\t} else {\n\t\trawExtraFieldNTFS = rawExtraFieldExtendedTimestamp = new Uint8Array(0);\n\t}\n\tconst fileEntry = {\n\t\tversion: version || VERSION_DEFLATE,\n\t\tversionMadeBy,\n\t\tzip64,\n\t\tdirectory: Boolean(directory),\n\t\tfilenameUTF8: true,\n\t\trawFilename,\n\t\tcommentUTF8: true,\n\t\trawComment,\n\t\trawExtraFieldZip64: zip64 ? new Uint8Array(EXTRAFIELD_LENGTH_ZIP64 + 4) : new Uint8Array(0),\n\t\trawExtraFieldExtendedTimestamp,\n\t\trawExtraFieldNTFS,\n\t\trawExtraFieldAES,\n\t\trawExtraField,\n\t\textendedTimestamp,\n\t\tmsDosCompatible,\n\t\tinternalFileAttribute,\n\t\texternalFileAttribute\n\t};\n\tlet uncompressedSize = fileEntry.uncompressedSize = 0;\n\tlet bitFlag = BITFLAG_LANG_ENCODING_FLAG;\n\tif (dataDescriptor) {\n\t\tbitFlag = bitFlag | BITFLAG_DATA_DESCRIPTOR;\n\t}\n\tlet compressionMethod = COMPRESSION_METHOD_STORE;\n\tif (compressed) {\n\t\tcompressionMethod = COMPRESSION_METHOD_DEFLATE;\n\t}\n\tif (zip64) {\n\t\tfileEntry.version = fileEntry.version > VERSION_ZIP64 ? fileEntry.version : VERSION_ZIP64;\n\t}\n\tif (encrypted) {\n\t\tbitFlag = bitFlag | BITFLAG_ENCRYPTED;\n\t\tif (!zipCrypto) {\n\t\t\tfileEntry.version = fileEntry.version > VERSION_AES ? fileEntry.version : VERSION_AES;\n\t\t\tcompressionMethod = COMPRESSION_METHOD_AES;\n\t\t\tif (compressed) {\n\t\t\t\tfileEntry.rawExtraFieldAES[9] = COMPRESSION_METHOD_DEFLATE;\n\t\t\t}\n\t\t}\n\t}\n\tfileEntry.compressionMethod = compressionMethod;\n\tconst headerArray = fileEntry.headerArray = new Uint8Array(26);\n\tconst headerView = getDataView(headerArray);\n\tsetUint16(headerView, 0, fileEntry.version);\n\tsetUint16(headerView, 2, bitFlag);\n\tsetUint16(headerView, 4, compressionMethod);\n\tconst dateArray = new Uint32Array(1);\n\tconst dateView = getDataView(dateArray);\n\tlet lastModDate;\n\tif (options.lastModDate < MIN_DATE) {\n\t\tlastModDate = MIN_DATE;\n\t} else if (options.lastModDate > MAX_DATE) {\n\t\tlastModDate = MAX_DATE;\n\t} else {\n\t\tlastModDate = options.lastModDate;\n\t}\n\tsetUint16(dateView, 0, (((lastModDate.getHours() << 6) | lastModDate.getMinutes()) << 5) | lastModDate.getSeconds() / 2);\n\tsetUint16(dateView, 2, ((((lastModDate.getFullYear() - 1980) << 4) | (lastModDate.getMonth() + 1)) << 5) | lastModDate.getDate());\n\tconst rawLastModDate = dateArray[0];\n\tsetUint32(headerView, 6, rawLastModDate);\n\tsetUint16(headerView, 22, rawFilename.length);\n\tconst extraFieldLength = rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length + rawExtraFieldNTFS.length + fileEntry.rawExtraField.length;\n\tsetUint16(headerView, 24, extraFieldLength);\n\tconst localHeaderArray = new Uint8Array(30 + rawFilename.length + extraFieldLength);\n\tconst localHeaderView = getDataView(localHeaderArray);\n\tsetUint32(localHeaderView, 0, LOCAL_FILE_HEADER_SIGNATURE);\n\tarraySet(localHeaderArray, headerArray, 4);\n\tarraySet(localHeaderArray, rawFilename, 30);\n\tarraySet(localHeaderArray, rawExtraFieldAES, 30 + rawFilename.length);\n\tarraySet(localHeaderArray, rawExtraFieldExtendedTimestamp, 30 + rawFilename.length + rawExtraFieldAES.length);\n\tarraySet(localHeaderArray, rawExtraFieldNTFS, 30 + rawFilename.length + rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length);\n\tarraySet(localHeaderArray, fileEntry.rawExtraField, 30 + rawFilename.length + rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length + rawExtraFieldNTFS.length);\n\tlet result;\n\tlet compressedSize = 0;\n\tif (reader) {\n\t\tuncompressedSize = fileEntry.uncompressedSize = reader.size;\n\t\tconst codec = await createCodec(config.Deflate, {\n\t\t\tcodecType: CODEC_DEFLATE,\n\t\t\tlevel,\n\t\t\tpassword,\n\t\t\tencryptionStrength,\n\t\t\tzipCrypto: encrypted && zipCrypto,\n\t\t\tpasswordVerification: encrypted && zipCrypto && (rawLastModDate >> 8) & 0xFF,\n\t\t\tsigned: true,\n\t\t\tcompressed,\n\t\t\tencrypted,\n\t\t\tuseWebWorkers\n\t\t}, config);\n\t\tawait writer.writeUint8Array(localHeaderArray);\n\t\tfileEntry.dataWritten = true;\n\t\tresult = await processData(codec, reader, writer, 0, uncompressedSize, config, { onprogress, signal });\n\t\tcompressedSize = result.length;\n\t} else {\n\t\tawait writer.writeUint8Array(localHeaderArray);\n\t\tfileEntry.dataWritten = true;\n\t}\n\tlet dataDescriptorArray = new Uint8Array(0);\n\tlet dataDescriptorView, dataDescriptorOffset = 0;\n\tif (dataDescriptor) {\n\t\tdataDescriptorArray = new Uint8Array(zip64 ? (dataDescriptorSignature ? 24 : 20) : (dataDescriptorSignature ? 16 : 12));\n\t\tdataDescriptorView = getDataView(dataDescriptorArray);\n\t\tif (dataDescriptorSignature) {\n\t\t\tdataDescriptorOffset = 4;\n\t\t\tsetUint32(dataDescriptorView, 0, DATA_DESCRIPTOR_RECORD_SIGNATURE);\n\t\t}\n\t}\n\tif (reader) {\n\t\tconst signature = result.signature;\n\t\tif ((!encrypted || zipCrypto) && signature !== undefined) {\n\t\t\tsetUint32(headerView, 10, signature);\n\t\t\tfileEntry.signature = signature;\n\t\t\tif (dataDescriptor) {\n\t\t\t\tsetUint32(dataDescriptorView, dataDescriptorOffset, signature);\n\t\t\t}\n\t\t}\n\t\tif (zip64) {\n\t\t\tconst rawExtraFieldZip64View = getDataView(fileEntry.rawExtraFieldZip64);\n\t\t\tsetUint16(rawExtraFieldZip64View, 0, EXTRAFIELD_TYPE_ZIP64);\n\t\t\tsetUint16(rawExtraFieldZip64View, 2, EXTRAFIELD_LENGTH_ZIP64);\n\t\t\tsetUint32(headerView, 14, MAX_32_BITS);\n\t\t\tsetBigUint64(rawExtraFieldZip64View, 12, BigInt(compressedSize));\n\t\t\tsetUint32(headerView, 18, MAX_32_BITS);\n\t\t\tsetBigUint64(rawExtraFieldZip64View, 4, BigInt(uncompressedSize));\n\t\t\tif (dataDescriptor) {\n\t\t\t\tsetBigUint64(dataDescriptorView, dataDescriptorOffset + 4, BigInt(compressedSize));\n\t\t\t\tsetBigUint64(dataDescriptorView, dataDescriptorOffset + 12, BigInt(uncompressedSize));\n\t\t\t}\n\t\t} else {\n\t\t\tsetUint32(headerView, 14, compressedSize);\n\t\t\tsetUint32(headerView, 18, uncompressedSize);\n\t\t\tif (dataDescriptor) {\n\t\t\t\tsetUint32(dataDescriptorView, dataDescriptorOffset + 4, compressedSize);\n\t\t\t\tsetUint32(dataDescriptorView, dataDescriptorOffset + 8, uncompressedSize);\n\t\t\t}\n\t\t}\n\t}\n\tif (dataDescriptor) {\n\t\tawait writer.writeUint8Array(dataDescriptorArray);\n\t}\n\tconst length = localHeaderArray.length + compressedSize + dataDescriptorArray.length;\n\tObject.assign(fileEntry, { compressedSize, lastModDate, rawLastModDate, creationDate, lastAccessDate, encrypted, length });\n\treturn fileEntry;\n}\n\nasync function closeFile(zipWriter, comment, options) {\n\tconst writer = zipWriter.writer;\n\tconst files = zipWriter.files;\n\tlet offset = 0;\n\tlet directoryDataLength = 0;\n\tlet directoryOffset = zipWriter.offset;\n\tlet filesLength = files.size;\n\tfor (const [, fileEntry] of files) {\n\t\tdirectoryDataLength += 46 +\n\t\t\tfileEntry.rawFilename.length +\n\t\t\tfileEntry.rawComment.length +\n\t\t\tfileEntry.rawExtraFieldZip64.length +\n\t\t\tfileEntry.rawExtraFieldAES.length +\n\t\t\tfileEntry.rawExtraFieldExtendedTimestamp.length +\n\t\t\tfileEntry.rawExtraFieldNTFS.length +\n\t\t\tfileEntry.rawExtraField.length;\n\t}\n\tlet zip64 = options.zip64 || zipWriter.options.zip64 || false;\n\tif (directoryOffset >= MAX_32_BITS || directoryDataLength >= MAX_32_BITS || filesLength >= MAX_16_BITS) {\n\t\tif (options.zip64 === false || zipWriter.options.zip64 === false) {\n\t\t\tthrow new Error(ERR_UNSUPPORTED_FORMAT);\n\t\t} else {\n\t\t\tzip64 = true;\n\t\t}\n\t}\n\tconst directoryArray = new Uint8Array(directoryDataLength + (zip64 ? ZIP64_END_OF_CENTRAL_DIR_TOTAL_LENGTH : END_OF_CENTRAL_DIR_LENGTH));\n\tconst directoryView = getDataView(directoryArray);\n\tif (comment && comment.length) {\n\t\tif (comment.length <= MAX_16_BITS) {\n\t\t\tsetUint16(directoryView, offset + 20, comment.length);\n\t\t} else {\n\t\t\tthrow new Error(ERR_INVALID_COMMENT);\n\t\t}\n\t}\n\tfor (const [indexFileEntry, fileEntry] of Array.from(files.values()).entries()) {\n\t\tconst {\n\t\t\trawFilename,\n\t\t\trawExtraFieldZip64,\n\t\t\trawExtraFieldAES,\n\t\t\trawExtraField,\n\t\t\trawComment,\n\t\t\tversionMadeBy,\n\t\t\theaderArray,\n\t\t\tdirectory,\n\t\t\tzip64,\n\t\t\tmsDosCompatible,\n\t\t\tinternalFileAttribute,\n\t\t\texternalFileAttribute\n\t\t} = fileEntry;\n\t\tlet rawExtraFieldExtendedTimestamp;\n\t\tlet rawExtraFieldNTFS;\n\t\tif (fileEntry.extendedTimestamp) {\n\t\t\trawExtraFieldNTFS = fileEntry.rawExtraFieldNTFS;\n\t\t\trawExtraFieldExtendedTimestamp = new Uint8Array(9);\n\t\t\tconst extraFieldExtendedTimestampView = getDataView(rawExtraFieldExtendedTimestamp);\n\t\t\tsetUint16(extraFieldExtendedTimestampView, 0, EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP);\n\t\t\tsetUint16(extraFieldExtendedTimestampView, 2, rawExtraFieldExtendedTimestamp.length - 4);\n\t\t\tsetUint8(extraFieldExtendedTimestampView, 4, 0x1);\n\t\t\tsetUint32(extraFieldExtendedTimestampView, 5, Math.floor(fileEntry.lastModDate.getTime() / 1000));\n\t\t} else {\n\t\t\trawExtraFieldNTFS = rawExtraFieldExtendedTimestamp = new Uint8Array(0);\n\t\t}\n\t\tconst extraFieldLength = rawExtraFieldZip64.length + rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length + rawExtraFieldNTFS.length + rawExtraField.length;\n\t\tsetUint32(directoryView, offset, CENTRAL_FILE_HEADER_SIGNATURE);\n\t\tsetUint16(directoryView, offset + 4, versionMadeBy);\n\t\tarraySet(directoryArray, headerArray, offset + 6);\n\t\tsetUint16(directoryView, offset + 30, extraFieldLength);\n\t\tsetUint16(directoryView, offset + 32, rawComment.length);\n\t\tsetUint32(directoryView, offset + 34, internalFileAttribute);\n\t\tif (externalFileAttribute) {\n\t\t\tsetUint32(directoryView, offset + 38, externalFileAttribute);\n\t\t} else if (directory && msDosCompatible) {\n\t\t\tsetUint8(directoryView, offset + 38, FILE_ATTR_MSDOS_DIR_MASK);\n\t\t}\n\t\tif (zip64) {\n\t\t\tsetUint32(directoryView, offset + 42, MAX_32_BITS);\n\t\t} else {\n\t\t\tsetUint32(directoryView, offset + 42, fileEntry.offset);\n\t\t}\n\t\tarraySet(directoryArray, rawFilename, offset + 46);\n\t\tarraySet(directoryArray, rawExtraFieldZip64, offset + 46 + rawFilename.length);\n\t\tarraySet(directoryArray, rawExtraFieldAES, offset + 46 + rawFilename.length + rawExtraFieldZip64.length);\n\t\tarraySet(directoryArray, rawExtraFieldExtendedTimestamp, offset + 46 + rawFilename.length + rawExtraFieldZip64.length + rawExtraFieldAES.length);\n\t\tarraySet(directoryArray, rawExtraFieldNTFS, offset + 46 + rawFilename.length + rawExtraFieldZip64.length + rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length);\n\t\tarraySet(directoryArray, rawExtraField, offset + 46 + rawFilename.length + rawExtraFieldZip64.length + rawExtraFieldAES.length + rawExtraFieldExtendedTimestamp.length + rawExtraFieldNTFS.length);\n\t\tarraySet(directoryArray, rawComment, offset + 46 + rawFilename.length + extraFieldLength);\n\t\toffset += 46 + rawFilename.length + extraFieldLength + rawComment.length;\n\t\tif (options.onprogress) {\n\t\t\ttry {\n\t\t\t\toptions.onprogress(indexFileEntry + 1, files.size, new Entry(fileEntry));\n\t\t\t} catch (error) {\n\t\t\t\t// ignored\n\t\t\t}\n\t\t}\n\t}\n\tif (zip64) {\n\t\tsetUint32(directoryView, offset, ZIP64_END_OF_CENTRAL_DIR_SIGNATURE);\n\t\tsetBigUint64(directoryView, offset + 4, BigInt(44));\n\t\tsetUint16(directoryView, offset + 12, 45);\n\t\tsetUint16(directoryView, offset + 14, 45);\n\t\tsetBigUint64(directoryView, offset + 24, BigInt(filesLength));\n\t\tsetBigUint64(directoryView, offset + 32, BigInt(filesLength));\n\t\tsetBigUint64(directoryView, offset + 40, BigInt(directoryDataLength));\n\t\tsetBigUint64(directoryView, offset + 48, BigInt(directoryOffset));\n\t\tsetUint32(directoryView, offset + 56, ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE);\n\t\tsetBigUint64(directoryView, offset + 64, BigInt(directoryOffset) + BigInt(directoryDataLength));\n\t\tsetUint32(directoryView, offset + 72, ZIP64_TOTAL_NUMBER_OF_DISKS);\n\t\tfilesLength = MAX_16_BITS;\n\t\tdirectoryOffset = MAX_32_BITS;\n\t\tdirectoryDataLength = MAX_32_BITS;\n\t\toffset += 76;\n\t}\n\tsetUint32(directoryView, offset, END_OF_CENTRAL_DIR_SIGNATURE);\n\tsetUint16(directoryView, offset + 8, filesLength);\n\tsetUint16(directoryView, offset + 10, filesLength);\n\tsetUint32(directoryView, offset + 12, directoryDataLength);\n\tsetUint32(directoryView, offset + 16, directoryOffset);\n\tawait writer.writeUint8Array(directoryArray);\n\tif (comment && comment.length) {\n\t\tawait writer.writeUint8Array(comment);\n\t}\n}\n\nfunction sliceAsArrayBuffer(blob, start, end) {\n\tif (blob.arrayBuffer) {\n\t\tif (start || end) {\n\t\t\treturn blob.slice(start, end).arrayBuffer();\n\t\t} else {\n\t\t\treturn blob.arrayBuffer();\n\t\t}\n\t} else {\n\t\tconst fileReader = new FileReader();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfileReader.onload = event => resolve(event.target.result);\n\t\t\tfileReader.onerror = () => reject(fileReader.error);\n\t\t\tfileReader.readAsArrayBuffer(start || end ? blob.slice(start, end) : blob);\n\t\t});\n\t}\n}\n\nasync function writeBlob(writer, blob, start = 0) {\n\tconst blockSize = 512 * 1024 * 1024;\n\tawait writeSlice();\n\n\tasync function writeSlice() {\n\t\tif (start < blob.size) {\n\t\t\tconst arrayBuffer = await sliceAsArrayBuffer(blob, start, start + blockSize);\n\t\t\tawait writer.writeUint8Array(new Uint8Array(arrayBuffer));\n\t\t\tstart += blockSize;\n\t\t\tawait writeSlice();\n\t\t}\n\t}\n}\n\nfunction getTimeNTFS(date) {\n\tif (date) {\n\t\treturn ((BigInt(date.getTime()) + BigInt(11644473600000)) * BigInt(10000));\n\t}\n}\n\nfunction getOptionValue(zipWriter, options, name) {\n\treturn options[name] === undefined ? zipWriter.options[name] : options[name];\n}\n\nfunction getMaximumCompressedSize(uncompressedSize) {\n\treturn uncompressedSize + (5 * (Math.floor(uncompressedSize / 16383) + 1));\n}\n\nfunction setUint8(view, offset, value) {\n\tview.setUint8(offset, value);\n}\n\nfunction setUint16(view, offset, value) {\n\tview.setUint16(offset, value, true);\n}\n\nfunction setUint32(view, offset, value) {\n\tview.setUint32(offset, value, true);\n}\n\nfunction setBigUint64(view, offset, value) {\n\tview.setBigUint64(offset, value, true);\n}\n\nfunction arraySet(array, typedArray, offset) {\n\tarray.set(typedArray, offset);\n}\n\nfunction getDataView(array) {\n\treturn new DataView(array.buffer);\n}","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { configure } from \"./core/configuration.js\";\nimport configureWebWorker from \"./z-worker-inline.js\";\nimport getMimeType from \"./core/util/default-mime-type.js\";\nimport initShimAsyncCodec from \"./core/util/stream-codec-shim.js\";\nimport { terminateWorkers } from \"./core/codecs/codec-pool.js\";\n\nlet baseURL;\ntry {\n\tbaseURL = import.meta.url;\n} catch (error) {\n\t// ignored\n}\nconfigure({ baseURL });\nconfigureWebWorker(configure);\n\nexport * from \"./core/io.js\";\nexport * from \"./core/zip-reader.js\";\nexport * from \"./core/zip-writer.js\";\nexport * from \"./core/zip-fs-core.js\";\nexport {\n\tconfigure,\n\tgetMimeType,\n\tinitShimAsyncCodec,\n\tterminateWorkers\n};","/*\n Copyright (c) 2022 Gildas Lormeau. All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n\n 1. Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n\n 2. Redistributions in binary form must reproduce the above copyright \n notice, this list of conditions and the following disclaimer in \n the documentation and/or other materials provided with the distribution.\n\n 3. The names of the authors may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,\n INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,\n INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\n OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport Deflate from \"./lib/core/codecs/deflate.js\";\nimport Inflate from \"./lib/core/codecs/inflate.js\";\nimport { configure } from \"./lib/core/configuration.js\";\nimport getMimeType from \"./lib/core/util/mime-type.js\";\nimport { terminateWorkers } from \"./lib/core/codecs/codec-pool.js\";\n\nconfigure({ Deflate, Inflate });\n\nexport {\n\tfs,\n\tconfigure,\n\tinitShimAsyncCodec,\n\tZipReader,\n\tZipWriter,\n\tReader,\n\tWriter,\n\tTextReader,\n\tTextWriter,\n\tData64URIReader,\n\tData64URIWriter,\n\tBlobReader,\n\tBlobWriter,\n\tWritableStreamWriter,\n\tHttpReader,\n\tHttpRangeReader,\n\tUint8ArrayWriter,\n\tUint8ArrayReader,\n\tERR_HTTP_RANGE,\n\tERR_BAD_FORMAT,\n\tERR_EOCDR_NOT_FOUND,\n\tERR_EOCDR_ZIP64_NOT_FOUND,\n\tERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,\n\tERR_CENTRAL_DIRECTORY_NOT_FOUND,\n\tERR_LOCAL_FILE_HEADER_NOT_FOUND,\n\tERR_EXTRAFIELD_ZIP64_NOT_FOUND,\n\tERR_ENCRYPTED,\n\tERR_UNSUPPORTED_ENCRYPTION,\n\tERR_UNSUPPORTED_COMPRESSION,\n\tERR_INVALID_SIGNATURE,\n\tERR_INVALID_PASSWORD,\n\tERR_DUPLICATED_NAME,\n\tERR_INVALID_COMMENT,\n\tERR_INVALID_ENTRY_NAME,\n\tERR_INVALID_ENTRY_COMMENT,\n\tERR_INVALID_VERSION,\n\tERR_INVALID_EXTRAFIELD_TYPE,\n\tERR_INVALID_EXTRAFIELD_DATA,\n\tERR_INVALID_ENCRYPTION_STRENGTH,\n\tERR_UNSUPPORTED_FORMAT,\n\tERR_ABORT\n} from \"./lib/zip-fs.js\";\nexport { getMimeType, terminateWorkers };","export function hasGzipHeader(array) {\n    var head = array.slice(0, 2);\n    return head.length === 2 && head[0] === 0x1f && head[1] === 0x8b;\n}\nexport function hasZlibHeader(array) {\n    const head = array.slice(0, 2);\n    return head.length === 2 && head[0] === 0x78\n        && (head[1] === 0x01 || head[1] === 0x5e || head[1] === 0x9c || head[2] === 0xda);\n}\nexport function getBedrockHeader(array) {\n    const head = array.slice(0, 8);\n    const view = new DataView(head.buffer, head.byteOffset);\n    const version = view.getUint32(0, true);\n    const length = view.getUint32(4, true);\n    if (head.length === 8 && version > 0 && version < 100 && length === array.byteLength - 8) {\n        return version;\n    }\n    return undefined;\n}\nexport function encodeUTF8(str) {\n    var array = [], i, c;\n    for (i = 0; i < str.length; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            array.push(c);\n        }\n        else if (c < 0x800) {\n            array.push(0xC0 | c >> 6);\n            array.push(0x80 | c & 0x3F);\n        }\n        else if (c < 0x10000) {\n            array.push(0xE0 | c >> 12);\n            array.push(0x80 | (c >> 6) & 0x3F);\n            array.push(0x80 | c & 0x3F);\n        }\n        else {\n            array.push(0xF0 | (c >> 18) & 0x07);\n            array.push(0x80 | (c >> 12) & 0x3F);\n            array.push(0x80 | (c >> 6) & 0x3F);\n            array.push(0x80 | c & 0x3F);\n        }\n    }\n    return array;\n}\nexport function decodeUTF8(array) {\n    var codepoints = [], i;\n    for (i = 0; i < array.length; i++) {\n        if ((array[i] & 0x80) === 0) {\n            codepoints.push(array[i] & 0x7F);\n        }\n        else if (i + 1 < array.length &&\n            (array[i] & 0xE0) === 0xC0 &&\n            (array[i + 1] & 0xC0) === 0x80) {\n            codepoints.push(((array[i] & 0x1F) << 6) |\n                (array[i + 1] & 0x3F));\n        }\n        else if (i + 2 < array.length &&\n            (array[i] & 0xF0) === 0xE0 &&\n            (array[i + 1] & 0xC0) === 0x80 &&\n            (array[i + 2] & 0xC0) === 0x80) {\n            codepoints.push(((array[i] & 0x0F) << 12) |\n                ((array[i + 1] & 0x3F) << 6) |\n                (array[i + 2] & 0x3F));\n        }\n        else if (i + 3 < array.length &&\n            (array[i] & 0xF8) === 0xF0 &&\n            (array[i + 1] & 0xC0) === 0x80 &&\n            (array[i + 2] & 0xC0) === 0x80 &&\n            (array[i + 3] & 0xC0) === 0x80) {\n            codepoints.push(((array[i] & 0x07) << 18) |\n                ((array[i + 1] & 0x3F) << 12) |\n                ((array[i + 2] & 0x3F) << 6) |\n                (array[i + 3] & 0x3F));\n        }\n    }\n    return String.fromCharCode.apply(null, codepoints);\n}\n//# sourceMappingURL=Util.js.map","import { decodeUTF8 } from '../Util.js';\nexport class RawDataInput {\n    littleEndian;\n    offset;\n    array;\n    view;\n    constructor(input, options) {\n        this.littleEndian = options?.littleEndian ?? false;\n        this.offset = options?.offset ?? 0;\n        this.array = input instanceof Uint8Array ? input : new Uint8Array(input);\n        this.view = new DataView(this.array.buffer, this.array.byteOffset);\n    }\n    readNumber(type, size) {\n        const value = this.view[type](this.offset, this.littleEndian);\n        this.offset += size;\n        return value;\n    }\n    readByte = this.readNumber.bind(this, 'getInt8', 1);\n    readShort = this.readNumber.bind(this, 'getInt16', 2);\n    readInt = this.readNumber.bind(this, 'getInt32', 4);\n    readFloat = this.readNumber.bind(this, 'getFloat32', 4);\n    readDouble = this.readNumber.bind(this, 'getFloat64', 8);\n    readBytes(length) {\n        const bytes = this.array.slice(this.offset, this.offset + length);\n        this.offset += length;\n        return bytes;\n    }\n    readString() {\n        const length = this.readShort();\n        const bytes = this.readBytes(length);\n        return decodeUTF8(bytes);\n    }\n}\n//# sourceMappingURL=DataInput.js.map","import { encodeUTF8 } from '../Util.js';\nexport class RawDataOutput {\n    littleEndian;\n    offset;\n    buffer;\n    array;\n    view;\n    constructor(options) {\n        this.littleEndian = options?.littleEndian ?? false;\n        this.offset = options?.offset ?? 0;\n        this.buffer = new ArrayBuffer(options?.initialSize ?? 1024);\n        this.array = new Uint8Array(this.buffer);\n        this.view = new DataView(this.buffer);\n    }\n    accommodate(size) {\n        const requiredLength = this.offset + size;\n        if (this.buffer.byteLength >= requiredLength) {\n            return;\n        }\n        let newLength = this.buffer.byteLength;\n        while (newLength < requiredLength) {\n            newLength *= 2;\n        }\n        const newBuffer = new ArrayBuffer(newLength);\n        const newArray = new Uint8Array(newBuffer);\n        newArray.set(this.array);\n        if (this.offset > this.buffer.byteLength) {\n            newArray.fill(0, this.buffer.byteLength, this.offset);\n        }\n        this.buffer = newBuffer;\n        this.view = new DataView(newBuffer);\n        this.array = newArray;\n    }\n    writeNumber(type, size, value) {\n        this.accommodate(size);\n        this.view[type](this.offset, value, this.littleEndian);\n        this.offset += size;\n    }\n    writeByte = this.writeNumber.bind(this, 'setInt8', 1);\n    writeShort = this.writeNumber.bind(this, 'setInt16', 2);\n    writeInt = this.writeNumber.bind(this, 'setInt32', 4);\n    writeFloat = this.writeNumber.bind(this, 'setFloat32', 4);\n    writeDouble = this.writeNumber.bind(this, 'setFloat64', 8);\n    writeBytes(bytes) {\n        this.accommodate(bytes.length);\n        this.array.set(bytes, this.offset);\n        this.offset += bytes.length;\n    }\n    writeString(value) {\n        const bytes = encodeUTF8(value);\n        this.writeShort(bytes.length);\n        this.writeBytes(bytes);\n    }\n    getData() {\n        this.accommodate(0);\n        return this.array.slice(0, this.offset);\n    }\n}\n//# sourceMappingURL=DataOutput.js.map","export var Json;\n(function (Json) {\n    function readNumber(obj) {\n        return typeof obj === 'number' ? obj : undefined;\n    }\n    Json.readNumber = readNumber;\n    function readInt(obj) {\n        return typeof obj === 'number' ? Math.floor(obj) : undefined;\n    }\n    Json.readInt = readInt;\n    function readString(obj) {\n        return typeof obj === 'string' ? obj : undefined;\n    }\n    Json.readString = readString;\n    function readBoolean(obj) {\n        return typeof obj === 'boolean' ? obj : undefined;\n    }\n    Json.readBoolean = readBoolean;\n    function readObject(obj) {\n        return typeof obj === 'object' && obj !== null && !Array.isArray(obj)\n            ? obj\n            : undefined;\n    }\n    Json.readObject = readObject;\n    function readArray(obj, parser) {\n        if (!Array.isArray(obj))\n            return undefined;\n        if (!parser)\n            return obj;\n        return obj.map(el => parser(el));\n    }\n    Json.readArray = readArray;\n    function readPair(obj, parser) {\n        if (!Array.isArray(obj))\n            return undefined;\n        return [0, 1].map((i => parser(obj[i])));\n    }\n    Json.readPair = readPair;\n    function readMap(obj, parser) {\n        const root = readObject(obj) ?? {};\n        return Object.fromEntries(Object.entries(root).map(([k, v]) => [k, parser(v)]));\n    }\n    Json.readMap = readMap;\n    function compose(obj, parser, mapper) {\n        const result = parser(obj);\n        return result ? mapper(result) : undefined;\n    }\n    Json.compose = compose;\n    function readEnum(obj, values) {\n        if (typeof obj !== 'string')\n            return values[0];\n        if (values.includes(obj))\n            return obj;\n        return values[0];\n    }\n    Json.readEnum = readEnum;\n})(Json || (Json = {}));\n//# sourceMappingURL=Json.js.map","export class StringReader {\n    source;\n    cursor;\n    constructor(source) {\n        this.source = source;\n        this.cursor = 0;\n    }\n    get remainingLength() {\n        return this.source.length - this.cursor;\n    }\n    get totalLength() {\n        return this.source.length;\n    }\n    getRead(start = 0) {\n        return this.source.substring(start, this.cursor);\n    }\n    getRemaining() {\n        return this.source.substring(this.cursor);\n    }\n    canRead(length = 1) {\n        return this.cursor + length <= this.source.length;\n    }\n    peek(offset = 0) {\n        return this.source.charAt(this.cursor + offset);\n    }\n    read() {\n        return this.source.charAt(this.cursor++);\n    }\n    skip() {\n        this.cursor += 1;\n    }\n    skipWhitespace() {\n        while (this.canRead() && StringReader.isWhitespace(this.peek())) {\n            this.skip();\n        }\n    }\n    expect(c, skipWhitespace = false) {\n        if (skipWhitespace) {\n            this.skipWhitespace();\n        }\n        if (!this.canRead() || this.peek() !== c) {\n            throw this.createError(`Expected '${c}'`);\n        }\n        this.skip();\n    }\n    readInt() {\n        const start = this.cursor;\n        while (this.canRead() && StringReader.isAllowedInNumber(this.peek())) {\n            this.skip();\n        }\n        const number = this.getRead(start);\n        if (number.length === 0) {\n            throw this.createError('Expected integer');\n        }\n        try {\n            const value = Number(number);\n            if (isNaN(value) || !Number.isInteger(value)) {\n                throw new Error();\n            }\n            return value;\n        }\n        catch (e) {\n            this.cursor = start;\n            throw this.createError(`Invalid integer '${number}'`);\n        }\n    }\n    readFloat() {\n        const start = this.cursor;\n        while (this.canRead() && StringReader.isAllowedInNumber(this.peek())) {\n            this.skip();\n        }\n        const number = this.getRead(start);\n        if (number.length === 0) {\n            throw this.createError('Expected float');\n        }\n        try {\n            const value = Number(number);\n            if (isNaN(value)) {\n                throw new Error();\n            }\n            return value;\n        }\n        catch (e) {\n            this.cursor = start;\n            throw this.createError(`Invalid float '${number}'`);\n        }\n    }\n    readUnquotedString() {\n        const start = this.cursor;\n        while (this.canRead() && StringReader.isAllowedInUnquotedString(this.peek())) {\n            this.skip();\n        }\n        return this.getRead(start);\n    }\n    readQuotedString() {\n        if (!this.canRead()) {\n            return '';\n        }\n        const c = this.peek();\n        if (!StringReader.isQuotedStringStart(c)) {\n            throw this.createError('Expected quote to start a string');\n        }\n        this.skip();\n        return this.readStringUntil(c);\n    }\n    readString() {\n        if (!this.canRead()) {\n            return '';\n        }\n        const c = this.peek();\n        if (StringReader.isQuotedStringStart(c)) {\n            this.skip();\n            return this.readStringUntil(c);\n        }\n        return this.readUnquotedString();\n    }\n    readStringUntil(terminator) {\n        const result = [];\n        let escaped = false;\n        while (this.canRead()) {\n            const c = this.read();\n            if (escaped) {\n                if (c === terminator || c === '\\\\') {\n                    result.push(c);\n                    escaped = false;\n                }\n                else {\n                    this.cursor -= 1;\n                    throw this.createError(`Invalid escape sequence '${c}' in quoted string`);\n                }\n            }\n            else if (c === '\\\\') {\n                escaped = true;\n            }\n            else if (c === terminator) {\n                return result.join('');\n            }\n            else {\n                result.push(c);\n            }\n        }\n        throw this.createError('Unclosed quoted string');\n    }\n    readBoolean() {\n        const start = this.cursor;\n        const value = this.readUnquotedString();\n        if (value.length === 0) {\n            throw this.createError('Expected bool');\n        }\n        if (value === 'true') {\n            return true;\n        }\n        else if (value === 'false') {\n            return false;\n        }\n        else {\n            this.cursor = start;\n            throw this.createError(`Invalid bool, expected true or false but found '${value}'`);\n        }\n    }\n    static isAllowedInNumber(c) {\n        return (c >= '0' && c <= '9') || c === '.' || c === '-';\n    }\n    static isAllowedInUnquotedString(c) {\n        return (c >= '0' && c <= '9')\n            || (c >= 'A' && c <= 'Z')\n            || (c >= 'a' && c <= 'z')\n            || c === '_'\n            || c === '-'\n            || c === '.'\n            || c === '+';\n    }\n    static isQuotedStringStart(c) {\n        return c === \"'\" || c === '\"';\n    }\n    static isWhitespace(c) {\n        return c === ' ' || c === '\\t' || c === '\\n' || c === '\\r';\n    }\n    createError(message) {\n        const cursor = Math.min(this.source.length, this.cursor);\n        const context = (cursor > 10 ? '...' : '') + this.source.substring(Math.max(0, cursor - 10), cursor);\n        return new Error(`${message} at position ${this.cursor}: ${context}<--[HERE]`);\n    }\n}\n//# sourceMappingURL=StringReader.js.map","export function lazy(getter) {\n    let value = null;\n    return () => {\n        if (value == null) {\n            value = getter();\n        }\n        return value;\n    };\n}\nexport function computeIfAbsent(map, key, getter) {\n    const existing = map.get(key);\n    if (existing !== undefined) {\n        return existing;\n    }\n    const value = getter(key);\n    map.set(key, value);\n    return value;\n}\nexport function mutateWithDefault(map, key, initialValue, mutator) {\n    const existing = map.get(key);\n    const value = existing ?? initialValue;\n    mutator(value, key);\n    map.set(key, value);\n    return value;\n}\nexport function intToRgb(n) {\n    const r = (n >> 16) & 255;\n    const g = (n >> 8) & 255;\n    const b = n & 255;\n    return [r / 255, g / 255, b / 255];\n}\n//# sourceMappingURL=Util.js.map","\n/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED$1               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN$1             = 2;\n\n/*============================================================================*/\n\n\nfunction zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH$1    = 3;\nconst MAX_MATCH$1    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES$1       = 30;\n/* number of distance codes */\n\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\n\nconst MAX_BITS$1      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES$1 + 2) * 2);\nzero$1(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES$1 * 2);\nzero$1(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero$1(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\nzero$1(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES$1);\nzero$1(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES$1);\nzero$1(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) =>\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS$1; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES$1; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES$1; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nconst copy_block = (s, buf, len, header) =>\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  s.pending_buf.set(s.window.subarray(buf, buf + len), s.pending);\n  s.pending += len;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) =>\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) =>\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let lx = 0;         /* running index in l_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE$1;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) =>\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let black_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS$1; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init$1 = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block$1 = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align$1 = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nconst _tr_flush_block$1 = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN$1) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block$1(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally$1 = (s, dist, lc) =>\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //let out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n};\n\nvar _tr_init_1  = _tr_init$1;\nvar _tr_stored_block_1 = _tr_stored_block$1;\nvar _tr_flush_block_1  = _tr_flush_block$1;\nvar _tr_tally_1 = _tr_tally$1;\nvar _tr_align_1 = _tr_align$1;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants$2 = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_UNKNOWN,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants$2;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE = 42;\nconst EXTRA_STATE = 69;\nconst NAME_STATE = 73;\nconst COMMENT_STATE = 91;\nconst HCRC_STATE = 103;\nconst BUSY_STATE = 113;\nconst FINISH_STATE = 666;\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  let max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    const max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n};\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED$2; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH$2;\n  _tr_init(s);\n  return Z_OK$3;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK$3) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$2; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR$2; }\n  strm.state.gzhead = head;\n  return Z_OK$3;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR$2;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION$1) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n};\n\n\nconst deflate$2 = (strm, flush) => {\n\n  let beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK$1 || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n  }\n\n  s.strm = strm; /* just in case */\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;\n      let level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH$3) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {\n    let bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK$3;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH$1) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK$3;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH$3) { return Z_OK$3; }\n  if (s.wrap <= 0) { return Z_STREAM_END$3; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK$3;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2$1 = deflate$2;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1$2 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2$1,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate$1(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1$2.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$2) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1$2.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1$2.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$2) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1$2.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$2;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$2) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate$1(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip$1(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_2 = deflate$1;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar constants$1 = constants$2;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD$1 = 30;       /* got a data error -- remain here until reset */\nconst TYPE$1 = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD$1;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD$1;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE$1;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD$1;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n  let base_index = 0;\n//  let shoextra;    /* extra bits table to use */\n  let end;                    /* use base and extra for symbol > end */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n  let extra_index = 0;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES$1) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS$1) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,\n  Z_DEFLATED\n} = constants$2;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 1;       /* i: waiting for magic header */\nconst    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 3;       /* i: waiting for modification time (gzip) */\nconst    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 7;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 9;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 10;    /* i: waiting for dictionary check value */\nconst    DICT = 11;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 14;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 18;   /* i: waiting for code length code lengths */\nconst        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nconst            LEN = 21;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 22;    /* i: waiting for length extra bits */\nconst            DIST = 23;      /* i: waiting for distance code */\nconst            DISTEXT = 24;   /* i: waiting for distance extra bits */\nconst            MATCH = 25;     /* o: waiting for output space to copy string */\nconst            LIT = 26;       /* o: waiting for output space to write literal */\nconst    CHECK = 27;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 29;      /* finished check, done -- remain here until reset */\nconst    BAD = 30;       /* got a data error -- remain here until reset */\nconst    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$1;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$1) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate$2 = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$1;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT$1;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$1;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR$1;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH$1))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$1;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$1;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR$1;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$1;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2$1 = inflate$2;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\n*/\n\nvar inflate_1$2 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2$1,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate$1(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1$2.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1$2.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1$2.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1$2.inflateReset(strm);\n      status = inflate_1$2.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = inflate_1$2.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate$1(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1$1 = Inflate$1;\nvar inflate_2 = inflate$1;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip$1 = inflate$1;\nvar constants = constants$2;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1$1,\n\tinflate: inflate_2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip$1,\n\tconstants: constants\n};\n\nconst { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;\n\nconst { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;\n\n\n\nvar Deflate_1 = Deflate;\nvar deflate_1 = deflate;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar Inflate_1 = Inflate;\nvar inflate_1 = inflate;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip_1 = ungzip;\nvar constants_1 = constants$2;\n\nvar pako = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tInflate: Inflate_1,\n\tinflate: inflate_1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport { Deflate_1 as Deflate, Inflate_1 as Inflate, constants_1 as constants, pako as default, deflate_1 as deflate, deflateRaw_1 as deflateRaw, gzip_1 as gzip, inflate_1 as inflate, inflateRaw_1 as inflateRaw, ungzip_1 as ungzip };\n","export var NbtType;\n(function (NbtType) {\n    NbtType[NbtType[\"End\"] = 0] = \"End\";\n    NbtType[NbtType[\"Byte\"] = 1] = \"Byte\";\n    NbtType[NbtType[\"Short\"] = 2] = \"Short\";\n    NbtType[NbtType[\"Int\"] = 3] = \"Int\";\n    NbtType[NbtType[\"Long\"] = 4] = \"Long\";\n    NbtType[NbtType[\"Float\"] = 5] = \"Float\";\n    NbtType[NbtType[\"Double\"] = 6] = \"Double\";\n    NbtType[NbtType[\"ByteArray\"] = 7] = \"ByteArray\";\n    NbtType[NbtType[\"String\"] = 8] = \"String\";\n    NbtType[NbtType[\"List\"] = 9] = \"List\";\n    NbtType[NbtType[\"Compound\"] = 10] = \"Compound\";\n    NbtType[NbtType[\"IntArray\"] = 11] = \"IntArray\";\n    NbtType[NbtType[\"LongArray\"] = 12] = \"LongArray\";\n})(NbtType || (NbtType = {}));\n//# sourceMappingURL=NbtType.js.map","import { Json, StringReader } from '../../util/index.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtTag {\n    static FACTORIES = new Map();\n    static register(type, factory) {\n        const factoryType = factory.create().getId();\n        if (factoryType !== type) {\n            throw new Error(`Registered factory ${NbtType[factoryType]} does not match type ${NbtType[type]}`);\n        }\n        NbtTag.FACTORIES.set(type, factory);\n    }\n    isEnd() {\n        return this.getId() === NbtType.End;\n    }\n    isByte() {\n        return this.getId() === NbtType.Byte;\n    }\n    isShort() {\n        return this.getId() === NbtType.Short;\n    }\n    isInt() {\n        return this.getId() === NbtType.Int;\n    }\n    isLong() {\n        return this.getId() === NbtType.Long;\n    }\n    isFloat() {\n        return this.getId() === NbtType.Float;\n    }\n    isDouble() {\n        return this.getId() === NbtType.Double;\n    }\n    isByteArray() {\n        return this.getId() === NbtType.ByteArray;\n    }\n    isString() {\n        return this.getId() === NbtType.String;\n    }\n    isList() {\n        return this.getId() === NbtType.List;\n    }\n    isCompound() {\n        return this.getId() === NbtType.Compound;\n    }\n    isIntArray() {\n        return this.getId() === NbtType.IntArray;\n    }\n    isLongArray() {\n        return this.getId() === NbtType.LongArray;\n    }\n    isNumber() {\n        return this.isByte() || this.isShort() || this.isInt() || this.isLong() || this.isFloat() || this.isDouble();\n    }\n    isArray() {\n        return this.isByteArray() || this.isIntArray() || this.isLongArray();\n    }\n    isListOrArray() {\n        return this.isList() || this.isArray();\n    }\n    getAsNumber() {\n        return 0;\n    }\n    getAsString() {\n        return '';\n    }\n    toJsonWithId() {\n        return {\n            type: this.getId(),\n            value: this.toJson(),\n        };\n    }\n    static getFactory(id) {\n        const factory = this.FACTORIES.get(id);\n        if (!factory) {\n            throw new Error(`Invalid tag id ${id}`);\n        }\n        return factory;\n    }\n    static create(id) {\n        return this.getFactory(id).create();\n    }\n    static fromString(input) {\n        const reader = typeof input === 'string' ? new StringReader(input) : input;\n        return this.getFactory(NbtType.Compound).fromString(reader);\n    }\n    static fromJson(value, id = NbtType.Compound) {\n        return this.getFactory(id).fromJson(value);\n    }\n    static fromJsonWithId(value) {\n        const obj = Json.readObject(value) ?? {};\n        const id = Json.readInt(obj.type) ?? 0;\n        return NbtTag.fromJson(obj.value ?? {}, id);\n    }\n    static fromBytes(input, id = NbtType.Compound) {\n        return this.getFactory(id).fromBytes(input);\n    }\n}\n//# sourceMappingURL=NbtTag.js.map","import { Json } from '../../util/index.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtByte extends NbtTag {\n    static ZERO = new NbtByte(0);\n    static ONE = new NbtByte(1);\n    value;\n    constructor(value) {\n        super();\n        this.value = typeof value === 'number' ? value : (value ? 1 : 0);\n    }\n    getId() {\n        return NbtType.Byte;\n    }\n    getAsNumber() {\n        return this.value;\n    }\n    toString() {\n        return this.value.toFixed() + 'b';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeByte(this.value);\n    }\n    static create() {\n        return NbtByte.ZERO;\n    }\n    static fromJson(value) {\n        return new NbtByte(Json.readInt(value) ?? 0);\n    }\n    static fromBytes(input) {\n        const value = input.readByte();\n        return new NbtByte(value);\n    }\n}\nNbtTag.register(NbtType.Byte, NbtByte);\n//# sourceMappingURL=NbtByte.js.map","import { NbtTag } from './NbtTag.js';\nexport class NbtAbstractList extends NbtTag {\n    items;\n    constructor(items) {\n        super();\n        this.items = items;\n    }\n    getItems() {\n        return this.items.slice(0);\n    }\n    getAsTuple(length, mapper) {\n        return [...Array(length)].map((_, i) => mapper(this.items[i]));\n    }\n    get(index) {\n        index = Math.floor(index);\n        if (index < 0 || index >= this.items.length) {\n            return undefined;\n        }\n        return this.items[index];\n    }\n    get length() {\n        return this.items.length;\n    }\n    map(fn) {\n        return this.items.map(fn);\n    }\n    filter(fn) {\n        return this.items.filter(fn);\n    }\n    forEach(fn) {\n        this.items.forEach(fn);\n    }\n    set(index, tag) {\n        this.items[index] = tag;\n    }\n    add(tag) {\n        this.items.push(tag);\n    }\n    insert(index, tag) {\n        this.items.splice(index, 0, tag);\n    }\n    delete(index) {\n        this.items.splice(index, 1);\n    }\n    clear() {\n        this.items = [];\n    }\n}\n//# sourceMappingURL=NbtAbstractList.js.map","import { Json } from '../../util/index.js';\nimport { NbtAbstractList } from './NbtAbstractList.js';\nimport { NbtByte } from './NbtByte.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtByteArray extends NbtAbstractList {\n    constructor(items) {\n        super(Array.from(items ?? [], e => typeof e === 'number' ? new NbtByte(e) : e));\n    }\n    getId() {\n        return NbtType.ByteArray;\n    }\n    getType() {\n        return NbtType.Byte;\n    }\n    toString() {\n        const entries = this.items.map(e => e.getAsNumber().toFixed() + 'B');\n        return '[B;' + entries.join(',') + ']';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.items.map(e => e.getAsNumber());\n    }\n    toJson() {\n        return this.items.map(e => e.getAsNumber());\n    }\n    toBytes(output) {\n        output.writeInt(this.items.length);\n        output.writeBytes(this.items.map(e => e.getAsNumber()));\n    }\n    static create() {\n        return new NbtByteArray([]);\n    }\n    static fromJson(value) {\n        const items = Json.readArray(value, e => Json.readNumber(e) ?? 0) ?? [];\n        return new NbtByteArray(items);\n    }\n    static fromBytes(input) {\n        const length = input.readInt();\n        const items = input.readBytes(length);\n        return new NbtByteArray(items);\n    }\n}\nNbtTag.register(NbtType.ByteArray, NbtByteArray);\n//# sourceMappingURL=NbtByteArray.js.map","import { Json } from '../../util/index.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtFloat extends NbtTag {\n    value;\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    getId() {\n        return NbtType.Float;\n    }\n    getAsNumber() {\n        return this.value;\n    }\n    toString() {\n        return this.value.toString() + 'f';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeFloat(this.value);\n    }\n    static create() {\n        return new NbtFloat(0);\n    }\n    static fromJson(value) {\n        return new NbtFloat(Json.readNumber(value) ?? 0);\n    }\n    static fromBytes(input) {\n        const value = input.readFloat();\n        return new NbtFloat(value);\n    }\n}\nNbtTag.register(NbtType.Float, NbtFloat);\n//# sourceMappingURL=NbtFloat.js.map","import { Json } from '../../util/Json.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtInt extends NbtTag {\n    value;\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    getId() {\n        return NbtType.Int;\n    }\n    getAsNumber() {\n        return this.value;\n    }\n    toString() {\n        return this.value.toFixed();\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeInt(this.value);\n    }\n    static create() {\n        return new NbtInt(0);\n    }\n    static fromJson(value) {\n        return new NbtInt(Json.readInt(value) ?? 0);\n    }\n    static fromBytes(input) {\n        const value = input.readInt();\n        return new NbtInt(value);\n    }\n}\nNbtTag.register(NbtType.Int, NbtInt);\n//# sourceMappingURL=NbtInt.js.map","import { Json } from '../../util/index.js';\nimport { NbtAbstractList } from './NbtAbstractList.js';\nimport { NbtInt } from './NbtInt.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtIntArray extends NbtAbstractList {\n    constructor(items) {\n        super(Array.from(items ?? [], e => typeof e === 'number' ? new NbtInt(e) : e));\n    }\n    getId() {\n        return NbtType.IntArray;\n    }\n    getType() {\n        return NbtType.Int;\n    }\n    get length() {\n        return this.items.length;\n    }\n    toString() {\n        const entries = this.items.map(e => e.getAsNumber().toFixed());\n        return '[I;' + entries.join(',') + ']';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.items.map(e => e.getAsNumber());\n    }\n    toJson() {\n        return this.items.map(e => e.getAsNumber());\n    }\n    toBytes(output) {\n        output.writeInt(this.items.length);\n        for (const entry of this.items) {\n            output.writeInt(entry.getAsNumber());\n        }\n    }\n    static create() {\n        return new NbtIntArray();\n    }\n    static fromJson(value) {\n        const items = Json.readArray(value, e => Json.readNumber(e) ?? 0) ?? [];\n        return new NbtIntArray(items);\n    }\n    static fromBytes(input) {\n        const length = input.readInt();\n        const items = [];\n        for (let i = 0; i < length; i += 1) {\n            items.push(input.readInt());\n        }\n        return new NbtIntArray(items);\n    }\n}\nNbtTag.register(NbtType.IntArray, NbtIntArray);\n//# sourceMappingURL=NbtIntArray.js.map","import { Json } from '../../util/index.js';\nimport { NbtAbstractList } from './NbtAbstractList.js';\nimport { NbtCompound } from './NbtCompound.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtList extends NbtAbstractList {\n    type;\n    constructor(items, type) {\n        super(items ?? []);\n        this.type = this.items.length === 0 ? NbtType.End : (type ?? this.items[0].getId());\n    }\n    static make(factory, items) {\n        return new NbtList(items.map(v => new factory(v)));\n    }\n    getId() {\n        return NbtType.List;\n    }\n    getType() {\n        return this.type;\n    }\n    getNumber(index) {\n        const entry = this.get(index);\n        if (entry?.isNumber()) {\n            return entry.getAsNumber();\n        }\n        return 0;\n    }\n    getString(index) {\n        const entry = this.get(index);\n        if (entry?.isString()) {\n            return entry.getAsString();\n        }\n        return '';\n    }\n    getList(index, type) {\n        const entry = this.get(index);\n        if (entry?.isList() && entry.getType() === type) {\n            return entry;\n        }\n        return NbtList.create();\n    }\n    getCompound(index) {\n        const entry = this.get(index);\n        if (entry?.isCompound()) {\n            return entry;\n        }\n        return NbtCompound.create();\n    }\n    set(index, tag) {\n        this.updateType(tag);\n        super.set(index, tag);\n    }\n    add(tag) {\n        this.updateType(tag);\n        super.add(tag);\n    }\n    insert(index, tag) {\n        this.updateType(tag);\n        super.insert(index, tag);\n    }\n    updateType(tag) {\n        if (tag.getId() === NbtType.End) {\n            return;\n        }\n        else if (this.type === NbtType.End) {\n            this.type = tag.getId();\n        }\n        else if (this.type !== tag.getId()) {\n            throw new Error(`Trying to add tag of type ${NbtType[tag.getId()]} to list of ${NbtType[this.type]}`);\n        }\n    }\n    clear() {\n        super.clear();\n        this.type = NbtType.End;\n    }\n    toString() {\n        return '[' + this.items.map(i => i.toString()).join(',') + ']';\n    }\n    toPrettyString(indent = '  ', depth = 0) {\n        if (this.length === 0)\n            return '[]';\n        const i = indent.repeat(depth);\n        const ii = indent.repeat(depth + 1);\n        return '[\\n' + this.map(value => {\n            return ii + value.toPrettyString(indent, depth + 1);\n        }).join(',\\n') + '\\n' + i + ']';\n    }\n    toSimplifiedJson() {\n        return this.map(e => e.toSimplifiedJson());\n    }\n    toJson() {\n        return {\n            type: this.type,\n            items: this.items.map(e => e.toJson()),\n        };\n    }\n    toBytes(output) {\n        if (this.items.length === 0) {\n            this.type = NbtType.End;\n        }\n        else {\n            this.type = this.items[0].getId();\n        }\n        output.writeByte(this.type);\n        output.writeInt(this.items.length);\n        for (const tag of this.items) {\n            tag.toBytes(output);\n        }\n    }\n    static create() {\n        return new NbtList();\n    }\n    static fromJson(value) {\n        const obj = Json.readObject(value) ?? {};\n        const type = Json.readNumber(obj.type) ?? NbtType.Compound;\n        const items = (Json.readArray(obj.items) ?? [])\n            .flatMap(v => v !== undefined ? [NbtTag.fromJson(v, type)] : []);\n        return new NbtList(items, type);\n    }\n    static fromBytes(input) {\n        const type = input.readByte();\n        const length = input.readInt();\n        if (type === NbtType.End && length > 0) {\n            throw new Error(`Missing type on ListTag but length is ${length}`);\n        }\n        const items = [];\n        for (let i = 0; i < length; i += 1) {\n            items.push(NbtTag.fromBytes(input, type));\n        }\n        return new NbtList(items, type);\n    }\n}\nNbtTag.register(NbtType.List, NbtList);\n//# sourceMappingURL=NbtList.js.map","import { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtLong extends NbtTag {\n    static dataview = new DataView(new Uint8Array(8).buffer);\n    value;\n    constructor(value) {\n        super();\n        this.value = NbtLong.toPair(value);\n    }\n    static toPair(value) {\n        return Array.isArray(value) ? value : NbtLong.bigintToPair(value);\n    }\n    static bigintToPair(value) {\n        NbtLong.dataview.setBigInt64(0, value);\n        return [NbtLong.dataview.getInt32(0), NbtLong.dataview.getInt32(4)];\n    }\n    static pairToBigint(value) {\n        NbtLong.dataview.setInt32(0, Number(value[0]));\n        NbtLong.dataview.setInt32(4, Number(value[1]));\n        return NbtLong.dataview.getBigInt64(0);\n    }\n    static pairToString(value) {\n        return NbtLong.pairToBigint(value).toString();\n    }\n    static pairToNumber(value) {\n        return Number(NbtLong.pairToBigint(value));\n    }\n    getId() {\n        return NbtType.Long;\n    }\n    getAsNumber() {\n        return NbtLong.pairToNumber(this.value);\n    }\n    getAsPair() {\n        return this.value;\n    }\n    toBigInt() {\n        return NbtLong.pairToBigint(this.value);\n    }\n    toString() {\n        return NbtLong.pairToString(this.value) + 'L';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return NbtLong.pairToNumber(this.value);\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeInt(this.value[0]);\n        output.writeInt(this.value[1]);\n    }\n    static create() {\n        return new NbtLong([0, 0]);\n    }\n    static fromJson(value) {\n        return new NbtLong(Array.isArray(value) && value.length === 2\n            ? value.map(e => typeof e === 'number' ? e : 0)\n            : [0, 0]);\n    }\n    static fromBytes(input) {\n        const lo = input.readInt();\n        const hi = input.readInt();\n        return new NbtLong([lo, hi]);\n    }\n}\nNbtTag.register(NbtType.Long, NbtLong);\n//# sourceMappingURL=NbtLong.js.map","import { Json } from '../../util/index.js';\nimport { NbtAbstractList } from './NbtAbstractList.js';\nimport { NbtLong } from './NbtLong.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtLongArray extends NbtAbstractList {\n    constructor(items) {\n        super(Array.from(items ?? [], e => typeof e === 'bigint' || Array.isArray(e) ? new NbtLong(e) : e));\n    }\n    getId() {\n        return NbtType.LongArray;\n    }\n    getType() {\n        return NbtType.Long;\n    }\n    get length() {\n        return this.items.length;\n    }\n    toString() {\n        const entries = this.items.map(e => e.toString());\n        return '[I;' + entries.join(',') + ']';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.items.map(e => e.getAsPair());\n    }\n    toJson() {\n        return this.items.map(e => e.getAsPair());\n    }\n    toBytes(output) {\n        output.writeInt(this.items.length);\n        for (const entry of this.items) {\n            const [hi, lo] = entry.getAsPair();\n            output.writeInt(hi);\n            output.writeInt(lo);\n        }\n    }\n    static create() {\n        return new NbtLongArray();\n    }\n    static fromJson(value) {\n        const items = Json.readArray(value, e => Json.readPair(e, f => Json.readNumber(f) ?? 0) ?? [0, 0]) ?? [];\n        return new NbtLongArray(items);\n    }\n    static fromBytes(input) {\n        const length = input.readInt();\n        const items = [];\n        for (let i = 0; i < length; i += 1) {\n            items.push([input.readInt(), input.readInt()]);\n        }\n        return new NbtLongArray(items);\n    }\n}\nNbtTag.register(NbtType.LongArray, NbtLongArray);\n//# sourceMappingURL=NbtLongArray.js.map","import { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtShort extends NbtTag {\n    value;\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    getId() {\n        return NbtType.Short;\n    }\n    getAsNumber() {\n        return this.value;\n    }\n    toString() {\n        return this.value.toFixed() + 's';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeShort(this.value);\n    }\n    static create() {\n        return new NbtShort(0);\n    }\n    static fromJson(value) {\n        return new NbtShort(typeof value === 'number' ? Math.floor(value) : 0);\n    }\n    static fromBytes(input) {\n        const value = input.readShort();\n        return new NbtShort(value);\n    }\n}\nNbtTag.register(NbtType.Short, NbtShort);\n//# sourceMappingURL=NbtShort.js.map","import { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtString extends NbtTag {\n    static EMPTY = new NbtString('');\n    value;\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    getId() {\n        return NbtType.String;\n    }\n    getAsString() {\n        return this.value;\n    }\n    toString() {\n        return '\"' + this.value.replace(/(\\\\|\")/g, '\\\\$1') + '\"';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeString(this.value);\n    }\n    static create() {\n        return NbtString.EMPTY;\n    }\n    static fromJson(value) {\n        return new NbtString(typeof value === 'string' ? value : '');\n    }\n    static fromBytes(input) {\n        const value = input.readString();\n        return new NbtString(value);\n    }\n}\nNbtTag.register(NbtType.String, NbtString);\n//# sourceMappingURL=NbtString.js.map","import { StringReader } from '../util/index.js';\nimport { NbtDouble } from './index.js';\nimport { NbtByte } from './tags/NbtByte.js';\nimport { NbtByteArray } from './tags/NbtByteArray.js';\nimport { NbtCompound } from './tags/NbtCompound.js';\nimport { NbtFloat } from './tags/NbtFloat.js';\nimport { NbtInt } from './tags/NbtInt.js';\nimport { NbtIntArray } from './tags/NbtIntArray.js';\nimport { NbtList } from './tags/NbtList.js';\nimport { NbtLong } from './tags/NbtLong.js';\nimport { NbtLongArray } from './tags/NbtLongArray.js';\nimport { NbtShort } from './tags/NbtShort.js';\nimport { NbtString } from './tags/NbtString.js';\nimport { NbtType } from './tags/NbtType.js';\n/**\n * SNBT Parser\n */\nexport var NbtParser;\n(function (NbtParser) {\n    const DOUBLE_PATTERN_NOSUFFIX = new RegExp('^[-+]?(?:[0-9]+[.]|[0-9]*[.][0-9]+)(?:e[-+]?[0-9]+)?$', 'i');\n    const DOUBLE_PATTERN = new RegExp('^[-+]?(?:[0-9]+[.]?|[0-9]*[.][0-9]+)(?:e[-+]?[0-9]+)?d$', 'i');\n    const FLOAT_PATTERN = new RegExp('^[-+]?(?:[0-9]+[.]?|[0-9]*[.][0-9]+)(?:e[-+]?[0-9]+)?f$', 'i');\n    const BYTE_PATTERN = new RegExp('^[-+]?(?:0|[1-9][0-9]*)b$', 'i');\n    const LONG_PATTERN = new RegExp('^[-+]?(?:0|[1-9][0-9]*)l$', 'i');\n    const SHORT_PATTERN = new RegExp('^[-+]?(?:0|[1-9][0-9]*)s$', 'i');\n    const INT_PATTERN = new RegExp('^[-+]?(?:0|[1-9][0-9]*)$', 'i');\n    function readTag(reader) {\n        reader.skipWhitespace();\n        if (!reader.canRead()) {\n            throw reader.createError('Expected value');\n        }\n        const c = reader.peek();\n        if (c === '{') {\n            return readCompound(reader);\n        }\n        else if (c === '[') {\n            if (reader.canRead(3) && !StringReader.isQuotedStringStart(reader.peek(1)) && reader.peek(2) === ';') {\n                reader.expect('[', true);\n                const start = reader.cursor;\n                const d = reader.read();\n                reader.skip();\n                reader.skipWhitespace();\n                if (!reader.canRead()) {\n                    throw reader.createError('Expected value');\n                }\n                else if (d === 'B') {\n                    return readArray(reader, NbtByteArray, NbtType.ByteArray, NbtType.Byte);\n                }\n                else if (d === 'L') {\n                    return readArray(reader, NbtLongArray, NbtType.LongArray, NbtType.Long);\n                }\n                else if (d === 'I') {\n                    return readArray(reader, NbtIntArray, NbtType.IntArray, NbtType.Int);\n                }\n                else {\n                    reader.cursor = start;\n                    throw reader.createError(`Invalid array type '${d}'`);\n                }\n            }\n            else {\n                return readList(reader);\n            }\n        }\n        else {\n            reader.skipWhitespace();\n            const start = reader.cursor;\n            if (StringReader.isQuotedStringStart(reader.peek())) {\n                return new NbtString(reader.readQuotedString());\n            }\n            else {\n                const value = reader.readUnquotedString();\n                if (value.length === 0) {\n                    reader.cursor = start;\n                    throw reader.createError('Expected value');\n                }\n                try {\n                    if (FLOAT_PATTERN.test(value)) {\n                        const number = Number(value.substring(0, value.length - 1));\n                        return new NbtFloat(number);\n                    }\n                    else if (BYTE_PATTERN.test(value)) {\n                        const number = Number(value.substring(0, value.length - 1));\n                        return new NbtByte(Math.floor(number));\n                    }\n                    else if (LONG_PATTERN.test(value)) {\n                        const number = BigInt(value.substring(0, value.length - 1));\n                        return new NbtLong(number);\n                    }\n                    else if (SHORT_PATTERN.test(value)) {\n                        const number = Number(value.substring(0, value.length - 1));\n                        return new NbtShort(Math.floor(number));\n                    }\n                    else if (INT_PATTERN.test(value)) {\n                        const number = Number(value);\n                        return new NbtInt(Math.floor(number));\n                    }\n                    else if (DOUBLE_PATTERN.test(value)) {\n                        const number = Number(value.substring(0, value.length - 1));\n                        return new NbtDouble(number);\n                    }\n                    else if (DOUBLE_PATTERN_NOSUFFIX.test(value)) {\n                        const number = Number(value);\n                        return new NbtDouble(number);\n                    }\n                    else if (value.toLowerCase() === 'true') {\n                        return NbtByte.ONE;\n                    }\n                    else if (value.toLowerCase() === 'false') {\n                        return NbtByte.ZERO;\n                    }\n                }\n                catch (e) { }\n                return value.length === 0 ? NbtString.EMPTY : new NbtString(value);\n            }\n        }\n    }\n    NbtParser.readTag = readTag;\n    function readCompound(reader) {\n        reader.expect('{', true);\n        const properties = new Map();\n        reader.skipWhitespace();\n        while (reader.canRead() && reader.peek() !== '}') {\n            const start = reader.cursor;\n            reader.skipWhitespace();\n            if (!reader.canRead()) {\n                throw reader.createError('Expected key');\n            }\n            const key = reader.readString();\n            if (key.length === 0) {\n                reader.cursor = start;\n                throw reader.createError('Expected key');\n            }\n            reader.expect(':', true);\n            const value = readTag(reader);\n            properties.set(key, value);\n            if (!hasElementSeparator(reader)) {\n                break;\n            }\n            if (!reader.canRead()) {\n                throw reader.createError('Expected key');\n            }\n        }\n        reader.expect('}', true);\n        return new NbtCompound(properties);\n    }\n    function readList(reader) {\n        reader.expect('[', true);\n        reader.skipWhitespace();\n        if (!reader.canRead()) {\n            throw reader.createError('Expected value');\n        }\n        const items = [];\n        let type = NbtType.End;\n        while (reader.peek() !== ']') {\n            const start = reader.cursor;\n            const value = readTag(reader);\n            const valueId = value.getId();\n            if (type === NbtType.End) {\n                type = valueId;\n            }\n            else if (valueId !== type) {\n                reader.cursor = start;\n                throw reader.createError(`Can't insert ${NbtType[valueId]} into list of ${NbtType[type]}`);\n            }\n            items.push(value);\n            if (!hasElementSeparator(reader)) {\n                break;\n            }\n            if (!reader.canRead()) {\n                throw reader.createError('Expected value');\n            }\n        }\n        reader.expect(']', true);\n        return new NbtList(items, type);\n    }\n    function readArray(reader, factory, arrayId, childId) {\n        const data = [];\n        while (reader.peek() !== ']') {\n            const entry = readTag(reader);\n            if (entry.getId() !== childId) {\n                throw reader.createError(`Can't insert ${NbtType[entry.getId()]} into ${NbtType[arrayId]}`);\n            }\n            data.push((entry.isLong() ? entry.getAsPair() : entry.getAsNumber()));\n            if (!hasElementSeparator(reader)) {\n                break;\n            }\n            if (!reader.canRead()) {\n                throw reader.createError('Expected value');\n            }\n        }\n        reader.expect(']');\n        return new factory(data);\n    }\n    function hasElementSeparator(reader) {\n        reader.skipWhitespace();\n        if (reader.canRead() && reader.peek() === ',') {\n            reader.skip();\n            reader.skipWhitespace();\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n})(NbtParser || (NbtParser = {}));\n//# sourceMappingURL=NbtParser.js.map","import { Json, StringReader } from '../../util/index.js';\nimport { NbtParser } from '../NbtParser.js';\nimport { NbtByteArray } from './NbtByteArray.js';\nimport { NbtIntArray } from './NbtIntArray.js';\nimport { NbtList } from './NbtList.js';\nimport { NbtLongArray } from './NbtLongArray.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtCompound extends NbtTag {\n    properties;\n    constructor(properties) {\n        super();\n        this.properties = properties ?? new Map();\n    }\n    getId() {\n        return NbtType.Compound;\n    }\n    has(key) {\n        return this.properties.has(key);\n    }\n    hasNumber(key) {\n        return this.get(key)?.isNumber() ?? false;\n    }\n    hasString(key) {\n        return this.get(key)?.isString() ?? false;\n    }\n    hasList(key, type, length) {\n        const tag = this.get(key);\n        return (tag?.isList()\n            && (type === undefined || tag.getType() === type)\n            && (length === undefined || tag.length === length)) ?? false;\n    }\n    hasCompound(key) {\n        return this.get(key)?.isCompound() ?? false;\n    }\n    get(key) {\n        return this.properties.get(key);\n    }\n    getString(key) {\n        return this.get(key)?.getAsString() ?? '';\n    }\n    getNumber(key) {\n        return this.get(key)?.getAsNumber() ?? 0;\n    }\n    getBoolean(key) {\n        return this.getNumber(key) !== 0;\n    }\n    getList(key, type) {\n        const tag = this.get(key);\n        if (tag?.isList() && (type === undefined || tag.getType() === type)) {\n            return tag;\n        }\n        return NbtList.create();\n    }\n    getCompound(key) {\n        const tag = this.get(key);\n        if (tag?.isCompound()) {\n            return tag;\n        }\n        return NbtCompound.create();\n    }\n    getByteArray(key) {\n        const tag = this.get(key);\n        if (tag?.isByteArray()) {\n            return tag;\n        }\n        return NbtByteArray.create();\n    }\n    getIntArray(key) {\n        const tag = this.get(key);\n        if (tag?.isIntArray()) {\n            return tag;\n        }\n        return NbtIntArray.create();\n    }\n    getLongArray(key) {\n        const tag = this.get(key);\n        if (tag?.isLongArray()) {\n            return tag;\n        }\n        return NbtLongArray.create();\n    }\n    keys() {\n        return this.properties.keys();\n    }\n    get size() {\n        return this.properties.size;\n    }\n    map(fn) {\n        return Object.fromEntries([...this.properties.entries()]\n            .map(([key, value]) => fn(key, value, this)));\n    }\n    forEach(fn) {\n        [...this.properties.entries()]\n            .forEach(([key, value]) => fn(key, value, this));\n    }\n    set(key, value) {\n        this.properties.set(key, value);\n        return this;\n    }\n    delete(key) {\n        return this.properties.delete(key);\n    }\n    clear() {\n        this.properties.clear();\n        return this;\n    }\n    toString() {\n        const pairs = [];\n        for (const [key, tag] of this.properties.entries()) {\n            const needsQuotes = key.split('').some(c => !StringReader.isAllowedInUnquotedString(c));\n            pairs.push((needsQuotes ? JSON.stringify(key) : key) + ':' + tag.toString());\n        }\n        return '{' + pairs.join(',') + '}';\n    }\n    toPrettyString(indent = '  ', depth = 0) {\n        if (this.size === 0)\n            return '{}';\n        const i = indent.repeat(depth);\n        const ii = indent.repeat(depth + 1);\n        return '{\\n' + Object.values(this.map((key, value) => {\n            return [key, ii + key + ': ' + value.toPrettyString(indent, depth + 1)];\n        })).join(',\\n') + '\\n' + i + '}';\n    }\n    toSimplifiedJson() {\n        return this.map((key, value) => [key, value.toSimplifiedJson()]);\n    }\n    toJson() {\n        return this.map((key, value) => [key, {\n                type: value.getId(),\n                value: value.toJson(),\n            }]);\n    }\n    toBytes(output) {\n        for (const [key, tag] of this.properties.entries()) {\n            const id = tag.getId();\n            output.writeByte(id);\n            output.writeString(key);\n            tag.toBytes(output);\n        }\n        output.writeByte(NbtType.End);\n    }\n    static create() {\n        return new NbtCompound();\n    }\n    static fromString(reader) {\n        return NbtParser.readTag(reader);\n    }\n    static fromJson(value) {\n        const properties = Json.readMap(value, e => {\n            const { type, value } = Json.readObject(e) ?? {};\n            const id = Json.readNumber(type);\n            const tag = NbtTag.fromJson(value ?? {}, id);\n            return tag;\n        });\n        return new NbtCompound(new Map(Object.entries(properties)));\n    }\n    static fromBytes(input) {\n        const properties = new Map();\n        while (true) {\n            const id = input.readByte();\n            if (id === NbtType.End)\n                break;\n            const key = input.readString();\n            const value = NbtTag.fromBytes(input, id);\n            properties.set(key, value);\n        }\n        return new NbtCompound(properties);\n    }\n}\nNbtTag.register(NbtType.Compound, NbtCompound);\n//# sourceMappingURL=NbtCompound.js.map","import Pako from 'pako';\nimport { Json } from '../util/index.js';\nimport { NbtType } from './index.js';\nimport { RawDataInput, RawDataOutput } from './io/index.js';\nimport { NbtCompound } from './tags/NbtCompound.js';\nimport { getBedrockHeader, hasGzipHeader, hasZlibHeader } from './Util.js';\nexport class NbtFile {\n    name;\n    root;\n    compression;\n    littleEndian;\n    bedrockHeader;\n    static DEFAULT_NAME = '';\n    static DEFAULT_BEDROCK_HEADER = 4;\n    constructor(name, root, compression, littleEndian, bedrockHeader) {\n        this.name = name;\n        this.root = root;\n        this.compression = compression;\n        this.littleEndian = littleEndian;\n        this.bedrockHeader = bedrockHeader;\n    }\n    writeNamedTag(output) {\n        output.writeByte(NbtType.Compound);\n        output.writeString(this.name);\n        this.root.toBytes(output);\n    }\n    write() {\n        const littleEndian = this.littleEndian === true || this.bedrockHeader !== undefined;\n        const output = new RawDataOutput({ littleEndian, offset: this.bedrockHeader && 8 });\n        this.writeNamedTag(output);\n        if (this.bedrockHeader !== undefined) {\n            const end = output.offset;\n            output.offset = 0;\n            output.writeInt(this.bedrockHeader);\n            output.writeInt(end - 8);\n            output.offset = end;\n        }\n        const array = output.getData();\n        if (this.compression === 'gzip') {\n            return Pako.gzip(array);\n        }\n        else if (this.compression === 'zlib') {\n            return Pako.deflate(array);\n        }\n        return array;\n    }\n    static readNamedTag(input) {\n        if (input.readByte() !== NbtType.Compound) {\n            throw new Error('Top tag should be a compound');\n        }\n        return {\n            name: input.readString(),\n            root: NbtCompound.fromBytes(input),\n        };\n    }\n    static create(options = {}) {\n        const name = options.name ?? NbtFile.DEFAULT_NAME;\n        const root = NbtCompound.create();\n        const compression = options.compression ?? 'none';\n        const bedrockHeader = typeof options.bedrockHeader === 'boolean' ? NbtFile.DEFAULT_BEDROCK_HEADER : options.bedrockHeader;\n        const littleEndian = options.littleEndian ?? options.bedrockHeader !== undefined;\n        return new NbtFile(name, root, compression, littleEndian, bedrockHeader);\n    }\n    static read(array, options = {}) {\n        const bedrockHeader = typeof options.bedrockHeader !== 'number' ? undefined : getBedrockHeader(array);\n        const isGzipCompressed = options.compression === 'gzip' ||\n            (!bedrockHeader && options.compression === undefined && hasGzipHeader(array));\n        const isZlibCompressed = options.compression === 'zlib' ||\n            (!bedrockHeader && options.compression === undefined && hasZlibHeader(array));\n        const uncompressedData = (isZlibCompressed || isGzipCompressed) ? Pako.inflate(array) : array;\n        const littleEndian = options.littleEndian || bedrockHeader !== undefined;\n        const compression = isGzipCompressed ? 'gzip' : isZlibCompressed ? 'zlib' : 'none';\n        const input = new RawDataInput(uncompressedData, { littleEndian, offset: bedrockHeader && 8 });\n        const { name, root } = NbtFile.readNamedTag(input);\n        return new NbtFile(options.name ?? name, root, compression, littleEndian, bedrockHeader);\n    }\n    toJson() {\n        return {\n            name: this.name,\n            root: this.root.toJson(),\n            compression: this.compression,\n            littleEndian: this.littleEndian,\n            bedrockHeader: this.bedrockHeader ?? null,\n        };\n    }\n    static fromJson(value) {\n        const obj = Json.readObject(value) ?? {};\n        const name = Json.readString(obj.name) ?? '';\n        const root = NbtCompound.fromJson(obj.root ?? {});\n        const compression = (Json.readString(obj.compression) ?? 'none');\n        const littleEndian = Json.readBoolean(obj.littleEndian) ?? false;\n        const bedrockHeader = Json.readNumber(obj.bedrockHeader);\n        return new NbtFile(name, root, compression, littleEndian, bedrockHeader);\n    }\n}\n//# sourceMappingURL=NbtFile.js.map","import { Json } from '../util/index.js';\nimport { NbtFile } from './NbtFile.js';\nexport class NbtChunk {\n    x;\n    z;\n    compression;\n    timestamp;\n    raw;\n    file;\n    dirty;\n    constructor(x, z, compression, timestamp, raw) {\n        this.x = x;\n        this.z = z;\n        this.compression = compression;\n        this.timestamp = timestamp;\n        this.raw = raw;\n        this.dirty = false;\n    }\n    getCompression() {\n        switch (this.compression) {\n            case 1: return 'gzip';\n            case 2: return 'zlib';\n            case 3: return 'none';\n            default: throw new Error(`Invalid compression mode ${this.compression}`);\n        }\n    }\n    setCompression(compression) {\n        switch (compression) {\n            case 'gzip':\n                this.compression = 1;\n                break;\n            case 'zlib':\n                this.compression = 2;\n                break;\n            case 'none':\n                this.compression = 3;\n                break;\n            default: throw new Error(`Invalid compression mode ${compression}`);\n        }\n    }\n    getFile() {\n        if (this.file === undefined) {\n            this.file = NbtFile.read(this.raw, {\n                compression: this.getCompression(),\n            });\n        }\n        return this.file;\n    }\n    getRoot() {\n        return this.getFile().root;\n    }\n    setRoot(root) {\n        if (this.file === undefined) {\n            this.file = NbtFile.create({\n                compression: this.getCompression(),\n            });\n        }\n        this.file.root = root;\n        this.markDirty();\n    }\n    markDirty() {\n        this.dirty = true;\n    }\n    getRaw() {\n        if (this.file === undefined || this.dirty === false) {\n            return this.raw;\n        }\n        this.file.compression = this.getCompression();\n        const array = this.file.write();\n        this.raw = array;\n        this.dirty = false;\n        return array;\n    }\n    toJson() {\n        return {\n            x: this.x,\n            z: this.z,\n            compression: this.compression,\n            timestamp: this.timestamp,\n            size: this.raw.byteLength,\n        };\n    }\n    toRef(resolver) {\n        return new NbtChunk.Ref(this.x, this.z, this.compression, this.timestamp, this.raw.byteLength, resolver);\n    }\n    static create(x, z, file, timestamp) {\n        const chunk = new NbtChunk(x, z, 0, timestamp ?? 0, file.write());\n        chunk.setCompression(file.compression);\n        return chunk;\n    }\n    static fromJson(value, resolver) {\n        const obj = Json.readObject(value) ?? {};\n        const x = Json.readInt(obj.x) ?? 0;\n        const z = Json.readInt(obj.z) ?? 0;\n        const compression = Json.readNumber(obj.compression) ?? 2;\n        const timestamp = Json.readInt(obj.timestamp) ?? 0;\n        const size = Json.readInt(obj.size) ?? 0;\n        return new NbtChunk.Ref(x, z, compression, timestamp, size, resolver);\n    }\n}\n(function (NbtChunk) {\n    class Ref {\n        x;\n        z;\n        compression;\n        timestamp;\n        size;\n        resolver;\n        file;\n        constructor(x, z, compression, timestamp, size, resolver) {\n            this.x = x;\n            this.z = z;\n            this.compression = compression;\n            this.timestamp = timestamp;\n            this.size = size;\n            this.resolver = resolver;\n        }\n        getFile() {\n            if (this.file instanceof NbtFile) {\n                return this.file;\n            }\n            return undefined;\n        }\n        getRoot() {\n            if (this.file instanceof NbtFile) {\n                return this.file.root;\n            }\n            return undefined;\n        }\n        async getFileAsync() {\n            if (this.file) {\n                return this.file;\n            }\n            this.file = (async () => {\n                const file = await this.resolver(this.x, this.z);\n                this.file = file;\n                return file;\n            })();\n            return this.file;\n        }\n        async getRootAsync() {\n            const file = await this.getFileAsync();\n            return file.root;\n        }\n        isResolved() {\n            return this.file instanceof NbtFile;\n        }\n    }\n    NbtChunk.Ref = Ref;\n})(NbtChunk || (NbtChunk = {}));\n//# sourceMappingURL=NbtChunk.js.map","import { Json } from '../util/index.js';\nimport { NbtChunk } from './NbtChunk.js';\nclass NbtAbstractRegion {\n    chunks;\n    constructor(chunks) {\n        this.chunks = Array(32 * 32).fill(undefined);\n        for (const chunk of chunks) {\n            const index = NbtRegion.getIndex(chunk.x, chunk.z);\n            this.chunks[index] = chunk;\n        }\n    }\n    getChunkPositions() {\n        return this.chunks.flatMap(c => c ? [[c.x, c.z]] : []);\n    }\n    getChunk(index) {\n        if (index < 0 || index >= 32 * 32) {\n            return undefined;\n        }\n        return this.chunks[index];\n    }\n    findChunk(x, z) {\n        return this.getChunk(NbtRegion.getIndex(x, z));\n    }\n    getFirstChunk() {\n        return this.chunks.filter(c => c !== undefined)[0];\n    }\n    filter(predicate) {\n        return this.chunks.filter((c) => c !== undefined && predicate(c));\n    }\n    map(mapper) {\n        return this.chunks.flatMap(c => c !== undefined ? [mapper(c)] : []);\n    }\n}\nexport class NbtRegion extends NbtAbstractRegion {\n    constructor(chunks) {\n        super(chunks);\n    }\n    write() {\n        let totalSectors = 0;\n        for (const chunk of this.chunks) {\n            if (chunk === undefined)\n                continue;\n            totalSectors += Math.ceil(chunk.getRaw().length / 4096);\n        }\n        const array = new Uint8Array(8192 + totalSectors * 4096);\n        const dataView = new DataView(array.buffer);\n        let offset = 2;\n        for (const chunk of this.chunks) {\n            if (chunk === undefined)\n                continue;\n            const chunkData = chunk.getRaw();\n            const i = 4 * ((chunk.x & 31) + (chunk.z & 31) * 32);\n            const sectors = Math.ceil(chunkData.length / 4096);\n            dataView.setInt8(i, offset >> 16);\n            dataView.setInt16(i + 1, offset & 0xffff);\n            dataView.setInt8(i + 3, sectors);\n            dataView.setInt32(i + 4096, chunk.timestamp);\n            const j = offset * 4096;\n            dataView.setInt32(j, chunkData.length + 1);\n            dataView.setInt8(j + 4, chunk.compression);\n            array.set(chunkData, j + 5);\n            offset += sectors;\n        }\n        return array;\n    }\n    static read(array) {\n        const chunks = [];\n        for (let x = 0; x < 32; x += 1) {\n            for (let z = 0; z < 32; z += 1) {\n                const i = 4 * ((x & 31) + (z & 31) * 32);\n                const sectors = array[i + 3];\n                if (sectors === 0)\n                    continue;\n                const offset = (array[i] << 16) + (array[i + 1] << 8) + array[i + 2];\n                const timestamp = (array[i + 4096] << 24) + (array[i + 4097] << 16) + (array[i + 4098] << 8) + array[i + 4099];\n                const j = offset * 4096;\n                const length = (array[j] << 24) + (array[j + 1] << 16) + (array[j + 2] << 8) + array[j + 3];\n                const compression = array[j + 4];\n                const data = array.slice(j + 5, j + 4 + length);\n                chunks.push(new NbtChunk(x, z, compression, timestamp, data));\n            }\n        }\n        return new NbtRegion(chunks);\n    }\n    static getIndex(x, z) {\n        return (x & 31) + (z & 31) * 32;\n    }\n    toJson() {\n        return {\n            chunks: this.map(c => c.toJson()),\n        };\n    }\n    static fromJson(value, chunkResolver) {\n        const obj = Json.readObject(value) ?? {};\n        const chunks = Json.readArray(obj.chunks) ?? [];\n        const chunks2 = chunks.flatMap(c => c !== undefined ? [NbtChunk.fromJson(c, chunkResolver)] : []);\n        return new NbtRegion.Ref(chunks2);\n    }\n}\n(function (NbtRegion) {\n    class Ref extends NbtAbstractRegion {\n    }\n    NbtRegion.Ref = Ref;\n})(NbtRegion || (NbtRegion = {}));\n//# sourceMappingURL=NbtRegion.js.map","import { Json } from '../../util/index.js';\nimport { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtDouble extends NbtTag {\n    value;\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    getId() {\n        return NbtType.Double;\n    }\n    getAsNumber() {\n        return this.value;\n    }\n    toString() {\n        if (Number.isInteger(this.value)) {\n            return this.value.toFixed(1);\n        }\n        return this.value.toString();\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return this.value;\n    }\n    toJson() {\n        return this.value;\n    }\n    toBytes(output) {\n        output.writeDouble(this.value);\n    }\n    static create() {\n        return new NbtDouble(0);\n    }\n    static fromJson(value) {\n        return new NbtDouble(Json.readNumber(value) ?? 0);\n    }\n    static fromBytes(input) {\n        const value = input.readDouble();\n        return new NbtDouble(value);\n    }\n}\nNbtTag.register(NbtType.Double, NbtDouble);\n//# sourceMappingURL=NbtDouble.js.map","import { NbtTag } from './NbtTag.js';\nimport { NbtType } from './NbtType.js';\nexport class NbtEnd extends NbtTag {\n    static INSTANCE = new NbtEnd();\n    constructor() {\n        super();\n    }\n    getId() {\n        return NbtType.End;\n    }\n    toString() {\n        return 'END';\n    }\n    toPrettyString() {\n        return this.toString();\n    }\n    toSimplifiedJson() {\n        return null;\n    }\n    toJson() {\n        return null;\n    }\n    toBytes() {\n    }\n    static create() {\n        return NbtEnd.INSTANCE;\n    }\n    static fromJson() {\n        return NbtEnd.INSTANCE;\n    }\n    static fromBytes() {\n        return NbtEnd.INSTANCE;\n    }\n}\nNbtTag.register(NbtType.End, NbtEnd);\n//# sourceMappingURL=NbtEnd.js.map","export var Direction;\n(function (Direction) {\n    Direction[\"UP\"] = \"up\";\n    Direction[\"DOWN\"] = \"down\";\n    Direction[\"NORTH\"] = \"north\";\n    Direction[\"EAST\"] = \"east\";\n    Direction[\"SOUTH\"] = \"south\";\n    Direction[\"WEST\"] = \"west\";\n})(Direction || (Direction = {}));\nconst directionNormals = {\n    [Direction.UP]: [0, 1, 0],\n    [Direction.DOWN]: [0, -1, 0],\n    [Direction.NORTH]: [0, 0, -1],\n    [Direction.EAST]: [1, 0, 0],\n    [Direction.SOUTH]: [0, 0, 1],\n    [Direction.WEST]: [-1, 0, 0],\n};\n(function (Direction) {\n    Direction.ALL = [Direction.UP, Direction.DOWN, Direction.NORTH, Direction.EAST, Direction.SOUTH, Direction.WEST];\n    function normal(dir) {\n        return directionNormals[dir];\n    }\n    Direction.normal = normal;\n})(Direction || (Direction = {}));\n//# sourceMappingURL=Direction.js.map","import { NbtInt, NbtList } from '../nbt/index.js';\nimport { Json } from '../util/index.js';\nimport { Direction } from './Direction.js';\nexport var BlockPos;\n(function (BlockPos) {\n    function create(x, y, z) {\n        return [x, y, z];\n    }\n    BlockPos.create = create;\n    BlockPos.ZERO = BlockPos.create(0, 0, 0);\n    function offset(pos, dx, dy, dz) {\n        return [pos[0] + dx, pos[1] + dy, pos[2] + dz];\n    }\n    BlockPos.offset = offset;\n    function subtract(pos, other) {\n        return [pos[0] - other[0], pos[1] - other[1], pos[2] - other[2]];\n    }\n    BlockPos.subtract = subtract;\n    function add(pos, other) {\n        return [pos[0] + other[0], pos[1] + other[1], pos[2] + other[2]];\n    }\n    BlockPos.add = add;\n    function towards(pos, dir) {\n        return BlockPos.offset(pos, ...Direction.normal(dir));\n    }\n    BlockPos.towards = towards;\n    function equals(a, b) {\n        if (a === b)\n            return true;\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n    }\n    BlockPos.equals = equals;\n    function magnitude(pos) {\n        return pos[0] * pos[0] + pos[1] * pos[1] + pos[2] * pos[2];\n    }\n    BlockPos.magnitude = magnitude;\n    function toNbt(pos) {\n        return new NbtList(pos.map(e => new NbtInt(e)));\n    }\n    BlockPos.toNbt = toNbt;\n    function fromNbt(nbt) {\n        return nbt.getAsTuple(3, e => e?.isInt() ? e.getAsNumber() : 0);\n    }\n    BlockPos.fromNbt = fromNbt;\n    function fromJson(obj) {\n        const array = Json.readArray(obj, (e) => Json.readInt(e) ?? 0) ?? [0, 0, 0];\n        return create(array[0], array[1], array[2]);\n    }\n    BlockPos.fromJson = fromJson;\n})(BlockPos || (BlockPos = {}));\n//# sourceMappingURL=BlockPos.js.map","export class Identifier {\n    namespace;\n    path;\n    static DEFAULT_NAMESPACE = 'minecraft';\n    static SEPARATOR = ':';\n    constructor(namespace, path) {\n        this.namespace = namespace;\n        this.path = path;\n        if (!namespace.match(/^[a-z0-9._-]*$/)) {\n            throw new Error(`Non [a-z0-9._-] character in namespace of ${namespace}${Identifier.SEPARATOR}${path}`);\n        }\n        if (!path.match(/^[a-z0-9/._-]*$/)) {\n            throw new Error(`Non [a-z0-9/._-] character in path of ${namespace}${Identifier.SEPARATOR}${path}`);\n        }\n    }\n    equals(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof Identifier)) {\n            return false;\n        }\n        return this.namespace === other.namespace && this.path === other.path;\n    }\n    toString() {\n        return this.namespace + Identifier.SEPARATOR + this.path;\n    }\n    withPrefix(prefix) {\n        return new Identifier(this.namespace, prefix + this.path);\n    }\n    static create(path) {\n        return new Identifier(this.DEFAULT_NAMESPACE, path);\n    }\n    static parse(id) {\n        const sep = id.indexOf(this.SEPARATOR);\n        if (sep >= 0) {\n            const namespace = sep >= 1 ? id.substring(0, sep) : this.DEFAULT_NAMESPACE;\n            const path = id.substring(sep + 1);\n            return new Identifier(namespace, path);\n        }\n        return new Identifier(this.DEFAULT_NAMESPACE, id);\n    }\n}\n//# sourceMappingURL=Identifier.js.map","import { Json } from '../util/index.js';\nimport { Identifier } from './Identifier.js';\nexport class BlockState {\n    properties;\n    static AIR = new BlockState(Identifier.create('air'));\n    static STONE = new BlockState(Identifier.create('stone'));\n    static WATER = new BlockState(Identifier.create('water'), { level: '0' });\n    static LAVA = new BlockState(Identifier.create('lava'), { level: '0' });\n    name;\n    constructor(name, properties = {}) {\n        this.properties = properties;\n        this.name = typeof name === 'string' ? Identifier.parse(name) : name;\n    }\n    getName() {\n        return this.name;\n    }\n    getProperties() {\n        return this.properties;\n    }\n    getProperty(key) {\n        return this.properties[key];\n    }\n    isFluid() {\n        return this.is(BlockState.WATER) || this.is(BlockState.LAVA);\n    }\n    equals(other) {\n        if (!this.name.equals(other.name)) {\n            return false;\n        }\n        return Object.keys(this.properties).every(p => {\n            return other.properties[p] === this.properties[p];\n        });\n    }\n    is(other) {\n        return this.name.equals(other.name);\n    }\n    toString() {\n        if (Object.keys(this.properties).length === 0) {\n            return this.name.toString();\n        }\n        return `${this.name.toString()}[${Object.entries(this.properties).map(([k, v]) => k + '=' + v).join(',')}]`;\n    }\n    static fromNbt(nbt) {\n        const name = Identifier.parse(nbt.getString('Name'));\n        const properties = nbt.getCompound('Properties')\n            .map((key, value) => [key, value.getAsString()]);\n        return new BlockState(name, properties);\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const name = Identifier.parse(Json.readString(root.Name) ?? BlockState.STONE.name.toString());\n        const properties = Json.readMap(root.Properties, p => Json.readString(p) ?? '');\n        return new BlockState(name, properties);\n    }\n}\n//# sourceMappingURL=BlockState.js.map","export class PalettedContainer {\n    size;\n    defaultValue;\n    storage;\n    palette;\n    constructor(size, defaultValue) {\n        this.size = size;\n        this.defaultValue = defaultValue;\n        this.storage = Array(size).fill(0);\n        this.palette = [defaultValue];\n    }\n    index(x, y, z) {\n        return (x << 8) + (y << 4) + z;\n    }\n    get(x, y, z) {\n        const id = this.storage[this.index(x, y, z)];\n        return this.palette[id];\n    }\n    set(x, y, z, value) {\n        let id = this.palette.findIndex(b => b.equals(value));\n        if (id === -1) {\n            id = this.palette.length;\n            this.palette.push(value);\n        }\n        this.storage[this.index(x, y, z)] = id;\n    }\n}\n//# sourceMappingURL=PalettedContainer.js.map","import { BlockState } from './BlockState.js';\nimport { PalettedContainer } from './PalettedContainer.js';\nexport class ChunkSection {\n    minY;\n    static WIDTH = 16;\n    static SIZE = ChunkSection.WIDTH * ChunkSection.WIDTH * ChunkSection.WIDTH;\n    states;\n    constructor(minY) {\n        this.minY = minY;\n        this.states = new PalettedContainer(ChunkSection.SIZE, BlockState.AIR);\n    }\n    get minBlockY() {\n        return this.minY << 4;\n    }\n    getBlockState(x, y, z) {\n        return this.states.get(x, y, z);\n    }\n    setBlockState(x, y, z, state) {\n        this.states.set(x, y, z, state);\n    }\n}\n//# sourceMappingURL=ChunkSection.js.map","import { BlockState } from './BlockState.js';\nimport { ChunkSection } from './ChunkSection.js';\nexport class Chunk {\n    minY;\n    height;\n    pos;\n    sections;\n    constructor(minY, height, pos) {\n        this.minY = minY;\n        this.height = height;\n        this.pos = pos;\n        this.sections = Array(this.sectionsCount).fill(null);\n    }\n    get maxY() {\n        return this.minY + this.height;\n    }\n    get minSection() {\n        return this.minY >> 4;\n    }\n    get maxSection() {\n        return ((this.maxY - 1) >> 4) + 1;\n    }\n    get sectionsCount() {\n        return this.maxSection - this.minSection;\n    }\n    getSectionIndex(y) {\n        return (y >> 4) - this.minSection;\n    }\n    getBlockState(pos) {\n        const [x, y, z] = pos;\n        const section = this.sections[this.getSectionIndex(y)];\n        return section?.getBlockState(x & 0xF, y & 0xF, z & 0xF) ?? BlockState.AIR;\n    }\n    setBlockState(pos, state) {\n        const [x, y, z] = pos;\n        const sectionIndex = this.getSectionIndex(y);\n        let section = this.sections[sectionIndex];\n        if (section === null) {\n            if (state.equals(BlockState.AIR))\n                return;\n            section = this.getOrCreateSection(sectionIndex);\n        }\n        section.setBlockState(x & 0xF, y & 0xF, z & 0xF, state);\n    }\n    getOrCreateSection(index) {\n        if (this.sections[index] == null) {\n            this.sections[index] = new ChunkSection(this.minSection + index);\n        }\n        return this.sections[index];\n    }\n}\n//# sourceMappingURL=Chunk.js.map","export var ChunkPos;\n(function (ChunkPos) {\n    function create(x, z) {\n        return [x, z];\n    }\n    ChunkPos.create = create;\n    function fromBlockPos(blockPos) {\n        return [blockPos[0] >> 4, blockPos[2] >> 4];\n    }\n    ChunkPos.fromBlockPos = fromBlockPos;\n    function fromLong(long) {\n        return [Number(long) & 0xFFFFFFFF, Number(long >> BigInt(32))];\n    }\n    ChunkPos.fromLong = fromLong;\n    function toLong(chunkPos) {\n        return asLong(chunkPos[0], chunkPos[1]);\n    }\n    ChunkPos.toLong = toLong;\n    function asLong(x, z) {\n        return BigInt(x & 0xFFFFFFFF) | BigInt(z & 0xFFFFFFFF) << BigInt(32);\n    }\n    ChunkPos.asLong = asLong;\n    function minBlockX(chunkPos) {\n        return chunkPos[0] << 4;\n    }\n    ChunkPos.minBlockX = minBlockX;\n    function minBlockZ(chunkPos) {\n        return chunkPos[1] << 4;\n    }\n    ChunkPos.minBlockZ = minBlockZ;\n    function maxBlockX(chunkPos) {\n        return (chunkPos[0] << 4) + 15;\n    }\n    ChunkPos.maxBlockX = maxBlockX;\n    function maxBlockZ(chunkPos) {\n        return (chunkPos[1] << 4) + 15;\n    }\n    ChunkPos.maxBlockZ = maxBlockZ;\n})(ChunkPos || (ChunkPos = {}));\n//# sourceMappingURL=ChunkPos.js.map","import { Identifier } from './Identifier.js';\nexport var Holder;\n(function (Holder) {\n    function parser(registry, directParser) {\n        return (obj) => {\n            if (typeof obj === 'string') {\n                return reference(registry, Identifier.parse(obj));\n            }\n            else {\n                return direct(directParser(obj));\n            }\n        };\n    }\n    Holder.parser = parser;\n    function direct(value, id) {\n        return {\n            value: () => value,\n            key: () => id,\n        };\n    }\n    Holder.direct = direct;\n    function reference(registry, id, required = true) {\n        if (required) {\n            return {\n                value: () => registry.getOrThrow(id),\n                key: () => id,\n            };\n        }\n        else {\n            return {\n                value: () => registry.get(id),\n                key: () => id,\n            };\n        }\n    }\n    Holder.reference = reference;\n})(Holder || (Holder = {}));\n//# sourceMappingURL=Holder.js.map","import { Json } from '../util/index.js';\nimport { Holder } from './Holder.js';\nimport { Identifier } from './Identifier.js';\nexport class HolderSet {\n    entries;\n    constructor(entries) {\n        this.entries = entries;\n    }\n    static parser(registry, valueParser) {\n        const defaultedValueParser = valueParser ?? ((obj) => Holder.reference(registry, Identifier.parse(Json.readString(obj) ?? '')));\n        return (obj) => {\n            if (typeof obj === 'string') {\n                if (obj.startsWith('#')) {\n                    return Holder.reference(registry.getTagRegistry(), Identifier.parse(obj.substring(1)));\n                }\n                else {\n                    return Holder.direct(new HolderSet([]));\n                }\n            }\n            else {\n                return Holder.direct(new HolderSet(Json.readArray(obj, defaultedValueParser) ?? []) ?? []);\n            }\n        };\n    }\n    static fromJson(registry, obj, id) {\n        const root = Json.readObject(obj) ?? {};\n        const replace = Json.readBoolean(root.replace) ?? false;\n        const entries = Json.readArray(root.values, (obj) => {\n            var required = true;\n            var id = '';\n            if (typeof obj === 'string') {\n                id = obj;\n            }\n            else {\n                const entry = Json.readObject(obj) ?? {};\n                required = Json.readBoolean(entry.required) ?? false;\n                id = Json.readString(entry.id) ?? '';\n            }\n            if (id.startsWith('#')) {\n                return Holder.reference(registry.getTagRegistry(), Identifier.parse(id.substring(1)), required);\n            }\n            else {\n                return Holder.reference(registry, Identifier.parse(id), required);\n            }\n        }) ?? [];\n        if (id && !replace && registry.getTagRegistry().has(id)) {\n            entries?.push(Holder.direct(registry.getTagRegistry().get(id)));\n        }\n        return new HolderSet(entries);\n    }\n    *getEntries() {\n        for (const entry of this.entries) {\n            const value = entry.value();\n            if (value === undefined) {\n                continue;\n            }\n            if (value instanceof HolderSet) {\n                yield* value.getEntries();\n            }\n            else {\n                yield entry;\n            }\n        }\n    }\n}\n//# sourceMappingURL=HolderSet.js.map","import { Holder } from './Holder.js';\nimport { Identifier } from './Identifier.js';\nexport class Registry {\n    key;\n    parser;\n    static REGISTRY = new Registry(Identifier.create('root'));\n    storage = new Map();\n    builtin = new Map();\n    tags = undefined;\n    constructor(key, parser) {\n        this.key = key;\n        this.parser = parser;\n    }\n    static createAndRegister(name, parser) {\n        const registry = new Registry(Identifier.create(name), parser);\n        Registry.REGISTRY.register(registry.key, registry);\n        return registry;\n    }\n    register(id, value, builtin) {\n        this.storage.set(id.toString(), value);\n        if (builtin) {\n            this.builtin.set(id.toString(), value);\n        }\n        return Holder.reference(this, id);\n    }\n    delete(id) {\n        const deleted = this.storage.delete(id.toString());\n        this.builtin.delete(id.toString());\n        return deleted;\n    }\n    keys() {\n        return [...this.storage.keys()].map(e => Identifier.parse(e));\n    }\n    has(id) {\n        return this.storage.has(id.toString());\n    }\n    get(id) {\n        var value = this.storage.get(id.toString());\n        if (value instanceof Function) {\n            value = value();\n            this.storage.set(id.toString(), value);\n        }\n        return value;\n    }\n    getOrThrow(id) {\n        const value = this.get(id);\n        if (value === undefined) {\n            throw new Error(`Missing key in ${this.key.toString()}: ${id.toString()}`);\n        }\n        return value;\n    }\n    parse(obj) {\n        if (!this.parser) {\n            throw new Error(`No parser exists for ${this.key.toString()}`);\n        }\n        return this.parser(obj);\n    }\n    clear() {\n        this.storage.clear();\n        for (const [key, value] of this.builtin.entries()) {\n            this.storage.set(key, value);\n        }\n        if (this.tags) {\n            this.tags.clear();\n        }\n        return this;\n    }\n    assign(other) {\n        if (!this.key.equals(other.key)) {\n            throw new Error(`Cannot assign registry of type ${other.key.toString()} to registry of type ${this.key.toString()}`);\n        }\n        for (const key of other.keys()) {\n            this.storage.set(key.toString(), other.getOrThrow(key));\n        }\n        return this;\n    }\n    cloneEmpty() {\n        return new Registry(this.key, this.parser);\n    }\n    forEach(fn) {\n        for (const [key, value] of this.storage.entries()) {\n            fn(Identifier.parse(key), value instanceof Function ? value() : value, this);\n        }\n    }\n    map(fn) {\n        return [...this.storage.entries()].map(([key, value]) => {\n            return fn(Identifier.parse(key), value instanceof Function ? value() : value, this);\n        });\n    }\n    getTagRegistry() {\n        if (this.tags === undefined) {\n            this.tags = new Registry(new Identifier(this.key.namespace, `tags/${this.key.path}`));\n        }\n        return this.tags;\n    }\n}\n//# sourceMappingURL=Registry.js.map","import { Identifier } from '../Identifier.js';\nimport { Registry } from '../Registry.js';\nconst registry = new Registry(Identifier.create('attribute'));\nRegistry.REGISTRY.register(registry.key, registry);\nexport var Attribute;\n(function (Attribute) {\n    Attribute.REGISTRY = registry;\n})(Attribute || (Attribute = {}));\nfunction register(id, defaultValue, minValue, maxValue) {\n    const attribute = {\n        id: Identifier.create(id),\n        defaultValue,\n        minValue,\n        maxValue,\n    };\n    registry.register(attribute.id, attribute, true);\n    return attribute;\n}\nexport var Attributes;\n(function (Attributes) {\n    Attributes.MAX_HEALTH = register('generic.max_health', 20, 1, 1024);\n    Attributes.FOLLOW_RANGE = register('generic.follow_range', 32, 0, 2048);\n    Attributes.KNOCKBACK_RESISTANCE = register('generic.knockback_resistance', 0, 0, 1);\n    Attributes.MOVEMENT_SPEED = register('generic.movement_speed', 0.7, 0, 1024);\n    Attributes.FLYING_SPEED = register('generic.flying_speed', 0.4, 0, 1024);\n    Attributes.ATTACK_DAMAGE = register('generic.attack_damage', 2, 0, 2048);\n    Attributes.ATTACK_KNOCKBACK = register('generic.attack_knockback', 0, 0, 5);\n    Attributes.ATTACK_SPEED = register('generic.attack_speed', 4, 0, 1024);\n    Attributes.ARMOR = register('generic.armor', 0, 0, 30);\n    Attributes.ARMOR_TOUGHNESS = register('generic.armor_toughness', 0, 0, 20);\n    Attributes.LUCK = register('generic.luck', 0, -1024, 1024);\n    Attributes.SPAWN_REINFORCEMENTS = register('zombie.spawn_reinforcements', 0, 0, 1);\n    Attributes.JUMP_STRENGTH = register('generic.jump_strength', 0.7, 0, 2);\n})(Attributes || (Attributes = {}));\n//# sourceMappingURL=Attribute.js.map","export var AttributeModifierOperation;\n(function (AttributeModifierOperation) {\n    AttributeModifierOperation[AttributeModifierOperation[\"addition\"] = 0] = \"addition\";\n    AttributeModifierOperation[AttributeModifierOperation[\"multiply_base\"] = 1] = \"multiply_base\";\n    AttributeModifierOperation[AttributeModifierOperation[\"multiply_total\"] = 2] = \"multiply_total\";\n})(AttributeModifierOperation || (AttributeModifierOperation = {}));\n//# sourceMappingURL=AttributeModifier.js.map","import { intToRgb } from '../../util/index.js';\nimport { Identifier } from '../Identifier.js';\nimport { Registry } from '../Registry.js';\nimport { Attributes } from './Attribute.js';\nimport { AttributeModifierOperation } from './AttributeModifier.js';\nconst registry = new Registry(Identifier.create('mob_effect'));\nRegistry.REGISTRY.register(registry.key, registry);\nconst idMap = new Map();\nexport var MobEffect;\n(function (MobEffect) {\n    MobEffect.REGISTRY = registry;\n    function fromId(n) {\n        return idMap.get(n);\n    }\n    MobEffect.fromId = fromId;\n})(MobEffect || (MobEffect = {}));\nfunction register(n, id, category, color, modifiers = new Map()) {\n    const mobEffect = {\n        index: n,\n        id: Identifier.create(id),\n        category,\n        color: typeof color === 'number' ? intToRgb(color) : color,\n        modifiers,\n    };\n    idMap.set(n, mobEffect);\n    registry.register(mobEffect.id, mobEffect, true);\n    return mobEffect;\n}\nexport var MobEffects;\n(function (MobEffects) {\n    MobEffects.SPEED = register(1, 'speed', 'beneficial', 8171462, new Map([\n        [Attributes.MOVEMENT_SPEED, { amount: 0.2, operation: AttributeModifierOperation.multiply_total }],\n    ]));\n    MobEffects.SLOWNESS = register(2, 'slowness', 'harmful', 5926017, new Map([\n        [Attributes.MOVEMENT_SPEED, { amount: -0.15, operation: AttributeModifierOperation.multiply_total }],\n    ]));\n    MobEffects.HASTE = register(3, 'haste', 'beneficial', 14270531, new Map([\n        [Attributes.ATTACK_SPEED, { amount: 0.1, operation: AttributeModifierOperation.multiply_total }],\n    ]));\n    MobEffects.MINING_FATIGUE = register(4, 'mining_fatigue', 'harmful', 4866583, new Map([\n        [Attributes.ATTACK_SPEED, { amount: -0.1, operation: AttributeModifierOperation.multiply_total }],\n    ]));\n    MobEffects.STRENGTH = register(5, 'strength', 'beneficial', 9643043, new Map([\n        [Attributes.ATTACK_DAMAGE, { amount: 3, operation: AttributeModifierOperation.addition }],\n    ]));\n    MobEffects.INSTANT_HEALTH = register(6, 'instant_health', 'beneficial', 16262179);\n    MobEffects.INSTANT_DAMAGE = register(7, 'instant_damage', 'harmful', 4393481);\n    MobEffects.JUMP_BOOST = register(8, 'jump_boost', 'beneficial', 2293580);\n    MobEffects.NAUSEA = register(9, 'nausea', 'harmful', 5578058);\n    MobEffects.REGENERATION = register(10, 'regeneration', 'beneficial', 13458603);\n    MobEffects.RESISTANCE = register(11, 'resistance', 'beneficial', 10044730);\n    MobEffects.FIRE_RESISTANCE = register(12, 'fire_resistance', 'beneficial', 14981690);\n    MobEffects.WATER_BREATHING = register(13, 'water_breathing', 'beneficial', 3035801);\n    MobEffects.INVISIBILITY = register(14, 'invisibility', 'beneficial', 8356754);\n    MobEffects.BLINDNESS = register(15, 'blindness', 'harmful', 2039587);\n    MobEffects.NIGHT_VISION = register(16, 'night_vision', 'beneficial', 2039713);\n    MobEffects.HUNGER = register(17, 'hunger', 'harmful', 5797459);\n    MobEffects.WEAKNESS = register(18, 'weakness', 'harmful', 4738376, new Map([\n        [Attributes.ATTACK_DAMAGE, { amount: -4, operation: AttributeModifierOperation.addition }],\n    ]));\n    MobEffects.POISON = register(19, 'poison', 'harmful', 5149489);\n    MobEffects.WITHER = register(20, 'wither', 'harmful', 3484199);\n    MobEffects.HEALTH_BOOST = register(21, 'health_boost', 'beneficial', 16284963, new Map([\n        [Attributes.MAX_HEALTH, { amount: 4, operation: AttributeModifierOperation.addition }],\n    ]));\n    MobEffects.ABSORPTION = register(22, 'absorption', 'beneficial', 2445989);\n    MobEffects.SATURATION = register(23, 'saturation', 'beneficial', 16262179);\n    MobEffects.GLOWING = register(24, 'glowing', 'neutral', 9740385);\n    MobEffects.LEVITATION = register(25, 'levitation', 'harmful', 13565951);\n    MobEffects.LUCK = register(26, 'luck', 'beneficial', 3381504, new Map([\n        [Attributes.LUCK, { amount: 1, operation: AttributeModifierOperation.addition }],\n    ]));\n    MobEffects.UNLUCK = register(27, 'unluck', 'harmful', 12624973, new Map([\n        [Attributes.LUCK, { amount: -1, operation: AttributeModifierOperation.addition }],\n    ]));\n    MobEffects.SLOW_FALLING = register(28, 'slow_falling', 'beneficial', 16773073);\n    MobEffects.CONDUIT_POWER = register(29, 'conduit_power', 'beneficial', 1950417);\n    MobEffects.DOLPHINS_GRACE = register(30, 'dolphins_grace', 'beneficial', 8954814);\n    MobEffects.BAD_OMEN = register(31, 'bad_omen', 'neutral', 745784);\n    MobEffects.HERO_OF_THE_VILLAGE = register(32, 'hero_of_the_village', 'beneficial', 4521796);\n    MobEffects.DARKNESS = register(33, 'darkness', 'harmful', 2696993);\n})(MobEffects || (MobEffects = {}));\n//# sourceMappingURL=MobEffect.js.map","import { intToRgb } from '../../util/index.js';\nimport { MobEffect } from './MobEffect.js';\nexport var MobEffectInstance;\n(function (MobEffectInstance) {\n    function create(effect, duration = 0, amplifier = 0, ambient = false, visible = true, showIcon) {\n        return {\n            effect,\n            duration,\n            amplifier,\n            ambient,\n            visible,\n            showIcon: showIcon ?? visible,\n        };\n    }\n    MobEffectInstance.create = create;\n    function fromNbt(tag) {\n        const id = tag.getNumber('Id');\n        const effect = MobEffect.fromId(id);\n        if (effect === undefined)\n            return undefined;\n        const amplifier = tag.getNumber('Amplifier');\n        const duration = tag.getNumber('Duration');\n        const ambient = tag.getBoolean('Ambient');\n        const visible = !tag.has('ShowParticles') || tag.getBoolean('ShowParticles');\n        const showIcon = tag.has('ShowIcon') ? visible : tag.getBoolean('ShowIcon');\n        return { effect, duration, amplifier, ambient, visible, showIcon };\n    }\n    MobEffectInstance.fromNbt = fromNbt;\n    function getColor(effects) {\n        let [r, g, b] = [0, 0, 0];\n        let total = 0;\n        for (const effect of effects) {\n            const amplifier = effect.amplifier + 1;\n            const color = effect.effect.color;\n            if (color === undefined)\n                continue;\n            r += amplifier * color[0];\n            g += amplifier * color[1];\n            b += amplifier * color[2];\n            total += amplifier;\n        }\n        if (total === 0) {\n            return intToRgb(0);\n        }\n        r = r / total;\n        g = g / total;\n        b = b / total;\n        return [r, g, b];\n    }\n    MobEffectInstance.getColor = getColor;\n    function formatDuration(effect) {\n        const ticks = Math.floor(effect.duration);\n        let seconds = Math.floor(ticks / 20);\n        let minutes = Math.floor(seconds / 60);\n        seconds %= 60;\n        const hours = Math.floor(minutes / 60);\n        minutes %= 60;\n        return `${hours > 0 ? `${hours}:` : ''}${minutes.toFixed().padStart(2, '0')}:${seconds.toFixed().padStart(2, '0')}`;\n    }\n    MobEffectInstance.formatDuration = formatDuration;\n})(MobEffectInstance || (MobEffectInstance = {}));\n//# sourceMappingURL=MobEffectInstance.js.map","import { Identifier } from '../Identifier.js';\nimport { Registry } from '../Registry.js';\nimport { MobEffects } from './MobEffect.js';\nimport { MobEffectInstance } from './MobEffectInstance.js';\nconst slotIndices = {\n    mainhand: 0,\n    offhand: 1,\n    feet: 0,\n    legs: 1,\n    chest: 2,\n    head: 3,\n};\nconst registry = new Registry(Identifier.create('item'));\nRegistry.REGISTRY.register(registry.key, registry);\nexport var Item;\n(function (Item) {\n    Item.REGISTRY = registry;\n    function get(arg) {\n        const id = typeof arg === 'string' ? Identifier.parse(arg) : arg;\n        const item = registry.get(id);\n        return item ?? { id, rarity: 'common', stack: 64 };\n    }\n    Item.get = get;\n})(Item || (Item = {}));\nfunction register(id, props) {\n    const item = {\n        id: Identifier.create(id),\n        rarity: 'common',\n        stack: 64,\n        ...props,\n        ...(props?.vanishable || props?.wearable) ? { vanishable: true } : {},\n    };\n    registry.register(item.id, item, true);\n    return item;\n}\nfunction spawnEgg(entityType, background, highlight) {\n    return {\n        spawnEgg: {\n            entityType,\n            background,\n            highlight,\n        },\n    };\n}\nfunction food(nutrition, saturationModifier, props) {\n    return {\n        food: {\n            nutrition,\n            saturationModifier,\n            isMeat: false,\n            canAlwaysEat: false,\n            fastFood: false,\n            effects: [],\n            ...props,\n        },\n    };\n}\nconst armorMaterials = {\n    leather: [5, [1, 2, 3, 1], 15, 0, 0],\n    chainmail: [15, [1, 4, 5, 2], 12, 0, 0],\n    iron: [15, [2, 5, 6, 2], 12, 0, 0],\n    gold: [7, [1, 3, 5, 2], 25, 0, 0],\n    diamond: [33, [3, 6, 8, 3], 9, 2, 0],\n    turtle: [25, [2, 5, 6, 2], 9, 0, 0],\n    netherite: [37, [3, 6, 8, 3], 15, 3, 0.1],\n};\nfunction armor(slot, material) {\n    const [durabilityMul, slotDefense, enchantmentValue, toughness, knockbackResistance] = armorMaterials[material];\n    const slotIndex = slotIndices[slot];\n    return {\n        stack: 1,\n        durability: [13, 15, 16, 11][slotIndex] * durabilityMul,\n        enchantmentValue,\n        ...material === 'netherite' ? { fireResistant: true } : {},\n        wearable: true,\n        armor: {\n            slot,\n            material,\n            defense: slotDefense[slotIndex],\n            toughness,\n            knockbackResistance,\n        },\n    };\n}\nconst itemTiers = {\n    wood: [0, 59, 2, 0, 15],\n    stone: [1, 131, 4, 1, 5],\n    iron: [2, 250, 6, 2, 14],\n    diamond: [3, 1561, 8, 3, 10],\n    gold: [0, 32, 12, 0, 22],\n    netherite: [4, 2031, 9, 4, 15],\n};\nfunction tiered(tier, type) {\n    const [level, uses, speed, damage, enchantmentValue] = itemTiers[tier];\n    return {\n        durability: uses,\n        enchantmentValue,\n        ...tier === 'netherite' ? { fireResistant: true } : {},\n        tiered: {\n            tier,\n            level,\n            speed,\n            damage,\n            isWeapon: type === 'weapon',\n            isDigger: type === 'digger' || type === 'axe',\n            isAxe: type === 'axe',\n        },\n    };\n}\nexport var Items;\n(function (Items) {\n    Items.AIR = register('air');\n    Items.CARVED_PUMPKIN = register('carved_pumpkin', { wearable: true });\n    Items.SADDLE = register('saddle', { stack: 1 });\n    Items.MINECART = register('minecart', { stack: 1 });\n    Items.CHEST_MINECART = register('chest_minecart', { stack: 1 });\n    Items.FURNACE_MINECART = register('furnace_minecart', { stack: 1 });\n    Items.TNT_MINECART = register('tnt_minecart', { stack: 1 });\n    Items.HOPPER_MINECART = register('hopper_minecart', { stack: 1 });\n    Items.CARROT_ON_A_STICK = register('carrot_on_a_stick', { stack: 1, durability: 25 });\n    Items.WARPED_FUNGUS_ON_A_STICK = register('warped_fungus_on_a_stick', { stack: 1, durability: 100 });\n    Items.ELYTRA = register('elytra', { rarity: 'uncommon', stack: 1, durability: 432, wearable: true });\n    Items.OAK_BOAT = register('oak_boat', { stack: 1 });\n    Items.OAK_CHEST_BOAT = register('oak_chest_boat', { stack: 1 });\n    Items.SPRUCE_BOAT = register('spruce_boat', { stack: 1 });\n    Items.SPRUCE_CHEST_BOAT = register('spruce_chest_boat', { stack: 1 });\n    Items.BIRCH_BOAT = register('birch_boat', { stack: 1 });\n    Items.BIRCH_CHEST_BOAT = register('birch_chest_boat', { stack: 1 });\n    Items.JUNGLE_BOAT = register('jungle_boat', { stack: 1 });\n    Items.JUNGLE_CHEST_BOAT = register('jungle_chest_boat', { stack: 1 });\n    Items.ACACIA_BOAT = register('acacia_boat', { stack: 1 });\n    Items.ACACIA_CHEST_BOAT = register('acacia_chest_boat', { stack: 1 });\n    Items.DARK_OAK_BOAT = register('dark_oak_boat', { stack: 1 });\n    Items.DARK_OAK_CHEST_BOAT = register('dark_oak_chest_boat', { stack: 1 });\n    Items.MANGROVE_BOAT = register('mangrove_boat', { stack: 1 });\n    Items.MANGROVE_CHEST_BOAT = register('mangrove_chest_boat', { stack: 1 });\n    Items.BAMBOO_RAFT = register('bamboo_raft', { stack: 1 });\n    Items.BAMBOO_CHEST_RAFT = register('bamboo_chest_raft', { stack: 1 });\n    Items.STRUCTURE_BLOCK = register('structure_block', { rarity: 'epic' });\n    Items.JIGSAW = register('jigsaw', { rarity: 'epic' });\n    Items.TURTLE_HELMET = register('turtle_helmet', armor('head', 'turtle'));\n    Items.FLINT_AND_STEEL = register('flint_and_steel', { stack: 1, durability: 64 });\n    Items.APPLE = register('apple', food(4, 0.3));\n    Items.BOW = register('bow', { stack: 1, durability: 384, enchantmentValue: 1 });\n    Items.NETHERITE_INGOT = register('netherite_ingot', { fireResistant: true });\n    Items.NETHERITE_SCRAP = register('netherite_scrap', { fireResistant: true });\n    Items.WOODEN_SWORD = register('wooden_sword', tiered('wood', 'weapon'));\n    Items.WOODEN_SHOVEL = register('wooden_shovel', tiered('wood', 'digger'));\n    Items.WOODEN_PICKAXE = register('wooden_pickaxe', tiered('wood', 'digger'));\n    Items.WOODEN_AXE = register('wooden_axe', tiered('wood', 'axe'));\n    Items.WOODEN_HOE = register('wooden_hoe', tiered('wood', 'digger'));\n    Items.STONE_SWORD = register('stone_sword', tiered('stone', 'weapon'));\n    Items.STONE_SHOVEL = register('stone_shovel', tiered('stone', 'digger'));\n    Items.STONE_PICKAXE = register('stone_pickaxe', tiered('stone', 'digger'));\n    Items.STONE_AXE = register('stone_axe', tiered('stone', 'axe'));\n    Items.STONE_HOE = register('stone_hoe', tiered('stone', 'digger'));\n    Items.GOLDEN_SWORD = register('golden_sword', tiered('gold', 'weapon'));\n    Items.GOLDEN_SHOVEL = register('golden_shovel', tiered('gold', 'digger'));\n    Items.GOLDEN_PICKAXE = register('golden_pickaxe', tiered('gold', 'digger'));\n    Items.GOLDEN_AXE = register('golden_axe', tiered('gold', 'axe'));\n    Items.GOLDEN_HOE = register('golden_hoe', tiered('gold', 'digger'));\n    Items.IRON_SWORD = register('iron_sword', tiered('iron', 'weapon'));\n    Items.IRON_SHOVEL = register('iron_shovel', tiered('iron', 'digger'));\n    Items.IRON_PICKAXE = register('iron_pickaxe', tiered('iron', 'digger'));\n    Items.IRON_AXE = register('iron_axe', tiered('iron', 'axe'));\n    Items.IRON_HOE = register('iron_hoe', tiered('iron', 'digger'));\n    Items.DIAMOND_SWORD = register('diamond_sword', tiered('diamond', 'weapon'));\n    Items.DIAMOND_SHOVEL = register('diamond_shovel', tiered('diamond', 'digger'));\n    Items.DIAMOND_PICKAXE = register('diamond_pickaxe', tiered('diamond', 'digger'));\n    Items.DIAMOND_AXE = register('diamond_axe', tiered('diamond', 'axe'));\n    Items.DIAMOND_HOE = register('diamond_hoe', tiered('diamond', 'digger'));\n    Items.NETHERITE_SWORD = register('netherite_sword', tiered('netherite', 'weapon'));\n    Items.NETHERITE_SHOVEL = register('netherite_shovel', tiered('netherite', 'digger'));\n    Items.NETHERITE_PICKAXE = register('netherite_pickaxe', tiered('netherite', 'digger'));\n    Items.NETHERITE_AXE = register('netherite_axe', tiered('netherite', 'axe'));\n    Items.NETHERITE_HOE = register('netherite_hoe', tiered('netherite', 'digger'));\n    Items.MUSHROOM_STEW = register('mushroom_stew', { stack: 1, ...food(6, 0.6) });\n    Items.BREAD = register('bread', food(5, 0.6));\n    Items.LEATHER_HELMET = register('leather_helmet', armor('head', 'leather'));\n    Items.LEATHER_CHESTPLATE = register('leather_chestplate', armor('chest', 'leather'));\n    Items.LEATHER_LEGGINGS = register('leather_leggings', armor('legs', 'leather'));\n    Items.LEATHER_BOOTS = register('leather_boots', armor('feet', 'leather'));\n    Items.CHAINMAIL_HELMET = register('chainmail_helmet', armor('head', 'chainmail'));\n    Items.CHAINMAIL_CHESTPLATE = register('chainmail_chestplate', armor('chest', 'chainmail'));\n    Items.CHAINMAIL_LEGGINGS = register('chainmail_leggings', armor('legs', 'chainmail'));\n    Items.CHAINMAIL_BOOTS = register('chainmail_boots', armor('feet', 'chainmail'));\n    Items.IRON_HELMET = register('iron_helmet', armor('head', 'iron'));\n    Items.IRON_CHESTPLATE = register('iron_chestplate', armor('chest', 'iron'));\n    Items.IRON_LEGGINGS = register('iron_leggings', armor('legs', 'iron'));\n    Items.IRON_BOOTS = register('iron_boots', armor('feet', 'iron'));\n    Items.DIAMOND_HELMET = register('diamond_helmet', armor('head', 'diamond'));\n    Items.DIAMOND_CHESTPLATE = register('diamond_chestplate', armor('chest', 'diamond'));\n    Items.DIAMOND_LEGGINGS = register('diamond_leggings', armor('legs', 'diamond'));\n    Items.DIAMOND_BOOTS = register('diamond_boots', armor('feet', 'diamond'));\n    Items.GOLDEN_HELMET = register('golden_helmet', armor('head', 'gold'));\n    Items.GOLDEN_CHESTPLATE = register('golden_chestplate', armor('chest', 'gold'));\n    Items.GOLDEN_LEGGINGS = register('golden_leggings', armor('legs', 'gold'));\n    Items.GOLDEN_BOOTS = register('golden_boots', armor('feet', 'gold'));\n    Items.NETHERITE_HELMET = register('netherite_helmet', armor('head', 'netherite'));\n    Items.NETHERITE_CHESTPLATE = register('netherite_chestplate', armor('chest', 'netherite'));\n    Items.NETHERITE_LEGGINGS = register('netherite_leggings', armor('legs', 'netherite'));\n    Items.NETHERITE_BOOTS = register('netherite_boots', armor('feet', 'netherite'));\n    Items.PORKCHOP = register('porkchop', food(3, 0.3, { isMeat: true }));\n    Items.COOKED_PORKCHOP = register('cooked_porkchop', food(8, 0.8, { isMeat: true }));\n    Items.GOLDEN_APPLE = register('golden_apple', { rarity: 'rare', ...food(4, 1.2, { canAlwaysEat: true, effects: [\n                [MobEffectInstance.create(MobEffects.REGENERATION, 100, 1), 1],\n                [MobEffectInstance.create(MobEffects.ABSORPTION, 2400, 0), 1],\n            ] }) });\n    Items.ENCHANTED_GOLDEN_APPLE = register('enchanted_golden_apple', { rarity: 'epic', ...food(4, 1.2, { canAlwaysEat: true, effects: [\n                [MobEffectInstance.create(MobEffects.REGENERATION, 400, 1), 1],\n                [MobEffectInstance.create(MobEffects.RESISTANCE, 6000, 0), 1],\n                [MobEffectInstance.create(MobEffects.FIRE_RESISTANCE, 6000, 0), 1],\n                [MobEffectInstance.create(MobEffects.ABSORPTION, 2400, 3), 1],\n            ] }) });\n    Items.OAK_SIGN = register('oak_sign', { stack: 16 });\n    Items.SPRUCE_SIGN = register('spruce_sign', { stack: 16 });\n    Items.BIRCH_SIGN = register('birch_sign', { stack: 16 });\n    Items.JUNGLE_SIGN = register('jungle_sign', { stack: 16 });\n    Items.ACACIA_SIGN = register('acacia_sign', { stack: 16 });\n    Items.DARK_OAK_SIGN = register('dark_oak_sign', { stack: 16 });\n    Items.MANGROVE_SIGN = register('mangrove_sign', { stack: 16 });\n    Items.BAMBOO_SIGN = register('bamboo_sign', { stack: 16 });\n    Items.CRIMSON_SIGN = register('crimson_sign', { stack: 16 });\n    Items.WARPED_SIGN = register('warped_sign', { stack: 16 });\n    Items.OAK_HANGING_SIGN = register('oak_hanging_sign', { stack: 16 });\n    Items.SPRUCE_HANGING_SIGN = register('spruce_hanging_sign', { stack: 16 });\n    Items.BIRCH_HANGING_SIGN = register('birch_hanging_sign', { stack: 16 });\n    Items.JUNGLE_HANGING_SIGN = register('jungle_hanging_sign', { stack: 16 });\n    Items.ACACIA_HANGING_SIGN = register('acacia_hanging_sign', { stack: 16 });\n    Items.DARK_OAK_HANGING_SIGN = register('dark_oak_hanging_sign', { stack: 16 });\n    Items.MANGROVE_HANGING_SIGN = register('mangrove_hanging_sign', { stack: 16 });\n    Items.BAMBOO_HANGING_SIGN = register('bamboo_hanging_sign', { stack: 16 });\n    Items.CRIMSON_HANGING_SIGN = register('crimson_hanging_sign', { stack: 16 });\n    Items.WARPED_HANGING_SIGN = register('warped_hanging_sign', { stack: 16 });\n    Items.BUCKET = register('bucket', { stack: 16 });\n    Items.WATER_BUCKET = register('water_bucket', { stack: 1, craftRemainder: Items.BUCKET });\n    Items.LAVA_BUCKET = register('lava_bucket', { stack: 1, craftRemainder: Items.BUCKET });\n    Items.POWDER_SNOW_BUCKET = register('powder_snow_bucket', { stack: 1 });\n    Items.SNOWBALL = register('snowball', { stack: 16 });\n    Items.MILK_BUCKET = register('milk_bucket', { stack: 1, craftRemainder: Items.BUCKET });\n    Items.PUFFERFISH_BUCKET = register('pufferfish_bucket', { stack: 1 });\n    Items.SALMON_BUCKET = register('salmon_bucket', { stack: 1 });\n    Items.COD_BUCKET = register('cod_bucket', { stack: 1 });\n    Items.TROPICAL_FISH_BUCKET = register('tropical_fish_bucket', { stack: 1 });\n    Items.AXOLOTL_BUCKET = register('axolotl_bucket', { stack: 1 });\n    Items.TADPOLE_BUCKET = register('tadpole_bucket', { stack: 1 });\n    Items.BOOK = register('book', { enchantmentValue: 1 });\n    Items.EGG = register('egg', { stack: 16 });\n    Items.COMPASS = register('compass', { vanishable: true });\n    Items.BUNDLE = register('bundle', { stack: 1 });\n    Items.FISHING_ROD = register('fishing_rod', { stack: 1, durability: 64, enchantmentValue: 1 });\n    Items.SPYGLASS = register('spyglass', { stack: 1 });\n    Items.COD = register('cod', food(2, 0.1));\n    Items.SALMON = register('salmon', food(2, 0.1));\n    Items.TROPICAL_FISH = register('tropical_fish', food(1, 0.1));\n    Items.PUFFERFISH = register('pufferfish', food(1, 0.1, { effects: [\n            [MobEffectInstance.create(MobEffects.POISON, 1200, 1), 1],\n            [MobEffectInstance.create(MobEffects.HUNGER, 300, 2), 1],\n            [MobEffectInstance.create(MobEffects.NAUSEA, 300, 0), 1],\n        ] }));\n    Items.COOKED_COD = register('cooked_cod', food(5, 0.6));\n    Items.COOKED_SALMON = register('cooked_salmon', food(6, 0.8));\n    Items.CAKE = register('cake', { stack: 1 });\n    Items.WHITE_BED = register('white_bed', { stack: 1 });\n    Items.ORANGE_BED = register('orange_bed', { stack: 1 });\n    Items.MAGENTA_BED = register('magenta_bed', { stack: 1 });\n    Items.LIGHT_BLUE_BED = register('light_blue_bed', { stack: 1 });\n    Items.YELLOW_BED = register('yellow_bed', { stack: 1 });\n    Items.LIME_BED = register('lime_bed', { stack: 1 });\n    Items.PINK_BED = register('pink_bed', { stack: 1 });\n    Items.GRAY_BED = register('gray_bed', { stack: 1 });\n    Items.LIGHT_GRAY_BED = register('light_gray_bed', { stack: 1 });\n    Items.CYAN_BED = register('cyan_bed', { stack: 1 });\n    Items.PURPLE_BED = register('purple_bed', { stack: 1 });\n    Items.BLUE_BED = register('blue_bed', { stack: 1 });\n    Items.BROWN_BED = register('brown_bed', { stack: 1 });\n    Items.GREEN_BED = register('green_bed', { stack: 1 });\n    Items.RED_BED = register('red_bed', { stack: 1 });\n    Items.BLACK_BED = register('black_bed', { stack: 1 });\n    Items.COOKIE = register('cookie', food(2, 0.1));\n    Items.SHEARS = register('shears', { stack: 1, durability: 238 });\n    Items.MELON_SLICE = register('melon_slice', food(2, 0.3));\n    Items.DRIED_KELP = register('dried_kelp', food(1, 0.3, { fastFood: true }));\n    Items.BEEF = register('beef', food(3, 0.3, { isMeat: true }));\n    Items.COOKED_BEEF = register('cooked_beef', food(8, 0.8, { isMeat: true }));\n    Items.CHICKEN = register('chicken', food(2, 0.3, { isMeat: true, effects: [\n            [MobEffectInstance.create(MobEffects.HUNGER, 600, 0), 0.3],\n        ] }));\n    Items.COOKED_CHICKEN = register('cooked_chicken', food(6, 0.6, { isMeat: true }));\n    Items.ROTTEN_FLESH = register('rotten_flesh', food(4, 0.1, { isMeat: true, effects: [\n            [MobEffectInstance.create(MobEffects.HUNGER, 600, 0), 0.8],\n        ] }));\n    Items.ENDER_PEARL = register('ender_pearl', { stack: 16 });\n    Items.POTION = register('potion', { stack: 1 });\n    Items.GLASS_BOTTLE = register('glass_bottle');\n    Items.SPIDER_EYE = register('spider_eye', food(2, 0.8, { effects: [\n            [MobEffectInstance.create(MobEffects.POISON, 100, 0), 1],\n        ] }));\n    Items.ALLAY_SPAWN_EGG = register('allay_spawn_egg', spawnEgg('allay', 56063, 44543));\n    Items.AXOLOTL_SPAWN_EGG = register('axolotl_spawn_egg', spawnEgg('axolotl', 16499171, 10890612));\n    Items.BAT_SPAWN_EGG = register('bat_spawn_egg', spawnEgg('bat', 4996656, 986895));\n    Items.BEE_SPAWN_EGG = register('bee_spawn_egg', spawnEgg('bee', 15582019, 4400155));\n    Items.BLAZE_SPAWN_EGG = register('blaze_spawn_egg', spawnEgg('blaze', 16167425, 16775294));\n    Items.CAT_SPAWN_EGG = register('cat_spawn_egg', spawnEgg('cat', 15714446, 9794134));\n    Items.CAMEL_SPAWN_EGG = register('camel_spawn_egg', spawnEgg('camel', 16565097, 13341495));\n    Items.CAVE_SPIDER_SPAWN_EGG = register('cave_spider_spawn_egg', spawnEgg('cave_spider', 803406, 11013646));\n    Items.CHICKEN_SPAWN_EGG = register('chicken_spawn_egg', spawnEgg('chicken', 10592673, 16711680));\n    Items.COD_SPAWN_EGG = register('cod_spawn_egg', spawnEgg('cod', 12691306, 15058059));\n    Items.COW_SPAWN_EGG = register('cow_spawn_egg', spawnEgg('cow', 4470310, 10592673));\n    Items.CREEPER_SPAWN_EGG = register('creeper_spawn_egg', spawnEgg('creeper', 894731, 0));\n    Items.DOLPHIN_SPAWN_EGG = register('dolphin_spawn_egg', spawnEgg('dolphin', 2243405, 16382457));\n    Items.DONKEY_SPAWN_EGG = register('donkey_spawn_egg', spawnEgg('donkey', 5457209, 8811878));\n    Items.DROWNED_SPAWN_EGG = register('drowned_spawn_egg', spawnEgg('drowned', 9433559, 7969893));\n    Items.ELDER_GUARDIAN_SPAWN_EGG = register('elder_guardian_spawn_egg', spawnEgg('elder_guardian', 13552826, 7632531));\n    Items.ENDER_DRAGON_SPAWN_EGG = register('ender_dragon_spawn_egg', spawnEgg('ender_dragon', 1842204, 14711290));\n    Items.ENDERMAN_SPAWN_EGG = register('enderman_spawn_egg', spawnEgg('enderman', 1447446, 0));\n    Items.ENDERMITE_SPAWN_EGG = register('endermite_spawn_egg', spawnEgg('endermite', 1447446, 7237230));\n    Items.EVOKER_SPAWN_EGG = register('evoker_spawn_egg', spawnEgg('evoker', 9804699, 1973274));\n    Items.FOX_SPAWN_EGG = register('fox_spawn_egg', spawnEgg('fox', 14005919, 13396256));\n    Items.FROG_SPAWN_EGG = register('frog_spawn_egg', spawnEgg('frog', 13661252, 16762748));\n    Items.GHAST_SPAWN_EGG = register('ghast_spawn_egg', spawnEgg('ghast', 16382457, 12369084));\n    Items.GLOW_SQUID_SPAWN_EGG = register('glow_squid_spawn_egg', spawnEgg('glow_squid', 611926, 8778172));\n    Items.GOAT_SPAWN_EGG = register('goat_spawn_egg', spawnEgg('goat', 10851452, 5589310));\n    Items.GUARDIAN_SPAWN_EGG = register('guardian_spawn_egg', spawnEgg('guardian', 5931634, 15826224));\n    Items.HOGLIN_SPAWN_EGG = register('hoglin_spawn_egg', spawnEgg('hoglin', 13004373, 6251620));\n    Items.HORSE_SPAWN_EGG = register('horse_spawn_egg', spawnEgg('horse', 12623485, 15656192));\n    Items.HUSK_SPAWN_EGG = register('husk_spawn_egg', spawnEgg('husk', 7958625, 15125652));\n    Items.IRON_GOLEM_SPAWN_EGG = register('iron_golem_spawn_egg', spawnEgg('iron_golem', 14405058, 7643954));\n    Items.LLAMA_SPAWN_EGG = register('llama_spawn_egg', spawnEgg('llama', 12623485, 10051392));\n    Items.MAGMA_CUBE_SPAWN_EGG = register('magma_cube_spawn_egg', spawnEgg('magma_cube', 3407872, 16579584));\n    Items.MOOSHROOM_SPAWN_EGG = register('mooshroom_spawn_egg', spawnEgg('mooshroom', 10489616, 12040119));\n    Items.MULE_SPAWN_EGG = register('mule_spawn_egg', spawnEgg('mule', 1769984, 5321501));\n    Items.OCELOT_SPAWN_EGG = register('ocelot_spawn_egg', spawnEgg('ocelot', 15720061, 5653556));\n    Items.PANDA_SPAWN_EGG = register('panda_spawn_egg', spawnEgg('panda', 15198183, 1776418));\n    Items.PARROT_SPAWN_EGG = register('parrot_spawn_egg', spawnEgg('parrot', 894731, 16711680));\n    Items.PHANTOM_SPAWN_EGG = register('phantom_spawn_egg', spawnEgg('phantom', 4411786, 8978176));\n    Items.PIG_SPAWN_EGG = register('pig_spawn_egg', spawnEgg('pig', 15771042, 14377823));\n    Items.PIGLIN_SPAWN_EGG = register('piglin_spawn_egg', spawnEgg('piglin', 10051392, 16380836));\n    Items.PIGLIN_BRUTE_SPAWN_EGG = register('piglin_brute_spawn_egg', spawnEgg('piglin_brute', 5843472, 16380836));\n    Items.PILLAGER_SPAWN_EGG = register('pillager_spawn_egg', spawnEgg('pillager', 5451574, 9804699));\n    Items.POLAR_BEAR_SPAWN_EGG = register('polar_bear_spawn_egg', spawnEgg('polar_bear', 15658718, 14014157));\n    Items.PUFFERFISH_SPAWN_EGG = register('pufferfish_spawn_egg', spawnEgg('pufferfish', 16167425, 3654642));\n    Items.RABBIT_SPAWN_EGG = register('rabbit_spawn_egg', spawnEgg('rabbit', 10051392, 7555121));\n    Items.RAVAGER_SPAWN_EGG = register('ravager_spawn_egg', spawnEgg('ravager', 7697520, 5984329));\n    Items.SALMON_SPAWN_EGG = register('salmon_spawn_egg', spawnEgg('salmon', 10489616, 951412));\n    Items.SHEEP_SPAWN_EGG = register('sheep_spawn_egg', spawnEgg('sheep', 15198183, 16758197));\n    Items.SHULKER_SPAWN_EGG = register('shulker_spawn_egg', spawnEgg('shulker', 9725844, 5060690));\n    Items.SILVERFISH_SPAWN_EGG = register('silverfish_spawn_egg', spawnEgg('silverfish', 7237230, 3158064));\n    Items.SKELETON_SPAWN_EGG = register('skeleton_spawn_egg', spawnEgg('skeleton', 12698049, 4802889));\n    Items.SKELETON_HORSE_SPAWN_EGG = register('skeleton_horse_spawn_egg', spawnEgg('skeleton_horse', 6842447, 15066584));\n    Items.SLIME_SPAWN_EGG = register('slime_spawn_egg', spawnEgg('slime', 5349438, 8306542));\n    Items.SNOW_GOLEM_SPAWN_EGG = register('snow_golem_spawn_egg', spawnEgg('snow_golem', 14283506, 8496292));\n    Items.SPIDER_SPAWN_EGG = register('spider_spawn_egg', spawnEgg('spider', 3419431, 11013646));\n    Items.SQUID_SPAWN_EGG = register('squid_spawn_egg', spawnEgg('squid', 2243405, 7375001));\n    Items.STRAY_SPAWN_EGG = register('stray_spawn_egg', spawnEgg('stray', 6387319, 14543594));\n    Items.STRIDER_SPAWN_EGG = register('strider_spawn_egg', spawnEgg('strider', 10236982, 5065037));\n    Items.TADPOLE_SPAWN_EGG = register('tadpole_spawn_egg', spawnEgg('tadpole', 7164733, 1444352));\n    Items.TRADER_LLAMA_SPAWN_EGG = register('trader_llama_spawn_egg', spawnEgg('trader_llama', 15377456, 4547222));\n    Items.TROPICAL_FISH_SPAWN_EGG = register('tropical_fish_spawn_egg', spawnEgg('tropical_fish', 15690005, 16775663));\n    Items.TURTLE_SPAWN_EGG = register('turtle_spawn_egg', spawnEgg('turtle', 15198183, 44975));\n    Items.VEX_SPAWN_EGG = register('vex_spawn_egg', spawnEgg('vex', 8032420, 15265265));\n    Items.VILLAGER_SPAWN_EGG = register('villager_spawn_egg', spawnEgg('villager', 5651507, 12422002));\n    Items.VINDICATOR_SPAWN_EGG = register('vindicator_spawn_egg', spawnEgg('vindicator', 9804699, 2580065));\n    Items.WANDERING_TRADER_SPAWN_EGG = register('wandering_trader_spawn_egg', spawnEgg('wandering_trader', 4547222, 15377456));\n    Items.WARDEN_SPAWN_EGG = register('warden_spawn_egg', spawnEgg('warden', 1001033, 3790560));\n    Items.WITCH_SPAWN_EGG = register('witch_spawn_egg', spawnEgg('witch', 3407872, 5349438));\n    Items.WITHER_SPAWN_EGG = register('wither_spawn_egg', spawnEgg('wither', 1315860, 5075616));\n    Items.WITHER_SKELETON_SPAWN_EGG = register('wither_skeleton_spawn_egg', spawnEgg('wither_skeleton', 1315860, 4672845));\n    Items.WOLF_SPAWN_EGG = register('wolf_spawn_egg', spawnEgg('wolf', 14144467, 13545366));\n    Items.ZOGLIN_SPAWN_EGG = register('zoglin_spawn_egg', spawnEgg('zoglin', 13004373, 15132390));\n    Items.ZOMBIE_SPAWN_EGG = register('zombie_spawn_egg', spawnEgg('zombie', 44975, 7969893));\n    Items.ZOMBIE_HORSE_SPAWN_EGG = register('zombie_horse_spawn_egg', spawnEgg('zombie_horse', 3232308, 9945732));\n    Items.ZOMBIE_VILLAGER_SPAWN_EGG = register('zombie_villager_spawn_egg', spawnEgg('zombie_villager', 5651507, 7969893));\n    Items.ZOMBIFIED_PIGLIN_SPAWN_EGG = register('zombified_piglin_spawn_egg', spawnEgg('zombified_piglin', 15373203, 5009705));\n    Items.EXPERIENCE_BOTTLE = register('experience_bottle', { rarity: 'uncommon' });\n    Items.WRITABLE_BOOK = register('writable_book', { stack: 1 });\n    Items.WRITTEN_BOOK = register('written_book', { stack: 16 });\n    Items.CARROT = register('carrot', food(3, 0.6));\n    Items.POTATO = register('potato', food(1, 0.3));\n    Items.BAKED_POTATO = register('baked_potato', food(5, 0.6));\n    Items.POISONOUS_POTATO = register('poisonous_potato', food(2, 0.3, { effects: [\n            [MobEffectInstance.create(MobEffects.POISON, 100, 0), 0.6],\n        ] }));\n    Items.GOLDEN_CARROT = register('golden_carrot', food(6, 1.2));\n    Items.SKELETON_SKULL = register('skeleton_skull', { rarity: 'uncommon', wearable: true });\n    Items.WITHER_SKELETON_SKULL = register('wither_skeleton_skull', { rarity: 'uncommon', wearable: true });\n    Items.PLAYER_HEAD = register('player_head', { rarity: 'uncommon', wearable: true });\n    Items.ZOMBIE_HEAD = register('zombie_head', { rarity: 'uncommon', wearable: true });\n    Items.CREEPER_HEAD = register('creeper_head', { rarity: 'uncommon', wearable: true });\n    Items.DRAGON_HEAD = register('dragon_head', { rarity: 'uncommon', wearable: true });\n    Items.PIGLIN_HEAD = register('piglin_head', { rarity: 'uncommon', wearable: true });\n    Items.NETHER_STAR = register('nether_star', { rarity: 'uncommon' });\n    Items.PUMPKIN_PIE = register('pumpkin_pie', food(8, 0.3));\n    Items.ENCHANTED_BOOK = register('enchanted_book', { rarity: 'uncommon', stack: 1 });\n    Items.RABBIT = register('rabbit', food(3, 0.3, { isMeat: true }));\n    Items.COOKED_RABBIT = register('cooked_rabbit', food(5, 0.6, { isMeat: true }));\n    Items.RABBIT_STEW = register('rabbit_stew', { stack: 1, ...food(10, 0.6) });\n    Items.ARMOR_STAND = register('armor_stand', { stack: 16 });\n    Items.IRON_HORSE_ARMOR = register('iron_horse_armor', { stack: 1 });\n    Items.GOLDEN_HORSE_ARMOR = register('golden_horse_armor', { stack: 1 });\n    Items.DIAMOND_HORSE_ARMOR = register('diamond_horse_armor', { stack: 1 });\n    Items.LEATHER_HORSE_ARMOR = register('leather_horse_armor', { stack: 1 });\n    Items.COMMAND_BLOCK_MINECART = register('command_block_minecart', { rarity: 'epic', stack: 1 });\n    Items.MUTTON = register('mutton', food(2, 0.3, { isMeat: true }));\n    Items.COOKED_MUTTON = register('cooked_mutton', food(6, 0.8, { isMeat: true }));\n    Items.WHITE_BANNER = register('white_banner', { stack: 16 });\n    Items.ORANGE_BANNER = register('orange_banner', { stack: 16 });\n    Items.MAGENTA_BANNER = register('magenta_banner', { stack: 16 });\n    Items.LIGHT_BLUE_BANNER = register('light_blue_banner', { stack: 16 });\n    Items.YELLOW_BANNER = register('yellow_banner', { stack: 16 });\n    Items.LIME_BANNER = register('lime_banner', { stack: 16 });\n    Items.PINK_BANNER = register('pink_banner', { stack: 16 });\n    Items.GRAY_BANNER = register('gray_banner', { stack: 16 });\n    Items.LIGHT_GRAY_BANNER = register('light_gray_banner', { stack: 16 });\n    Items.CYAN_BANNER = register('cyan_banner', { stack: 16 });\n    Items.PURPLE_BANNER = register('purple_banner', { stack: 16 });\n    Items.BLUE_BANNER = register('blue_banner', { stack: 16 });\n    Items.BROWN_BANNER = register('brown_banner', { stack: 16 });\n    Items.GREEN_BANNER = register('green_banner', { stack: 16 });\n    Items.RED_BANNER = register('red_banner', { stack: 16 });\n    Items.BLACK_BANNER = register('black_banner', { stack: 16 });\n    Items.END_CRYSTAL = register('end_crystal', { rarity: 'rare' });\n    Items.CHORUS_FRUIT = register('chorus_fruit', food(4, 0.3, { canAlwaysEat: true }));\n    Items.BEETROOT = register('beetroot', food(1, 0.6));\n    Items.BEETROOT_SOUP = register('beetroot_soup', { stack: 1, ...food(6, 0.6) });\n    Items.DRAGON_BREATH = register('dragon_breath', { rarity: 'uncommon', craftRemainder: Items.GLASS_BOTTLE });\n    Items.SPLASH_POTION = register('splash_potion', { stack: 1 });\n    Items.LINGERING_POTION = register('lingering_potion', { stack: 1 });\n    Items.SHIELD = register('shield', { stack: 1, durability: 336 });\n    Items.TOTEM_OF_UNDYING = register('totem_of_undying', { rarity: 'uncommon', stack: 1 });\n    Items.KNOWLEDGE_BOOK = register('knowledge_book', { rarity: 'epic', stack: 1 });\n    Items.DEBUG_STICK = register('debug_stick', { rarity: 'epic', stack: 1 });\n    Items.MUSIC_DISC_13 = register('music_disc_13', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_CAT = register('music_disc_cat', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_BLOCKS = register('music_disc_blocks', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_CHIRP = register('music_disc_chirp', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_FAR = register('music_disc_far', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_MALL = register('music_disc_mall', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_MELLOHI = register('music_disc_mellohi', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_STAL = register('music_disc_stal', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_STRAD = register('music_disc_strad', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_WARD = register('music_disc_ward', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_11 = register('music_disc_11', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_WAIT = register('music_disc_wait', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_OTHERSIDE = register('music_disc_otherside', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_5 = register('music_disc_5', { rarity: 'rare', stack: 1 });\n    Items.MUSIC_DISC_PIGSTEP = register('music_disc_pigstep', { rarity: 'rare', stack: 1 });\n    Items.TRIDENT = register('trident', { stack: 1, durability: 250, enchantmentValue: 1 });\n    Items.HEART_OF_THE_SEA = register('heart_of_the_sea', { rarity: 'uncommon' });\n    Items.CROSSBOW = register('crossbow', { stack: 1, durability: 465, enchantmentValue: 1 });\n    Items.SUSPICIOUS_STEW = register('suspicious_stew', { stack: 1, ...food(6, 0.6, { canAlwaysEat: true }) });\n    Items.FLOWER_BANNER_PATTERN = register('flower_banner_pattern', { stack: 1 });\n    Items.CREEPER_BANNER_PATTERN = register('creeper_banner_pattern', { rarity: 'uncommon', stack: 1 });\n    Items.SKULL_BANNER_PATTERN = register('skull_banner_pattern', { rarity: 'uncommon', stack: 1 });\n    Items.MOJANG_BANNER_PATTERN = register('mojang_banner_pattern', { rarity: 'epic', stack: 1 });\n    Items.GLOBE_BANNER_PATTERN = register('globe_banner_pattern', { stack: 1 });\n    Items.PIGLIN_BANNER_PATTERN = register('piglin_banner_pattern', { stack: 1 });\n    Items.GOAT_HORN = register('goat_horn', { stack: 1 });\n    Items.SWEET_BERRIES = register('sweet_berries', food(2, 0.1));\n    Items.GLOW_BERRIES = register('glow_berries', food(2, 0.1));\n    Items.HONEY_BOTTLE = register('honey_bottle', { stack: 16, craftRemainder: Items.GLASS_BOTTLE, ...food(6, 0.1) });\n})(Items || (Items = {}));\n//# sourceMappingURL=Item.js.map","import { NbtCompound } from '../nbt/index.js';\nimport { Identifier } from './Identifier.js';\nimport { Item } from './world/Item.js';\nexport class ItemStack {\n    id;\n    count;\n    tag;\n    item;\n    constructor(id, count, tag = new NbtCompound()) {\n        this.id = id;\n        this.count = count;\n        this.tag = tag;\n    }\n    getItem() {\n        if (this.item === undefined) {\n            this.item = Item.get(this.id);\n        }\n        return this.item;\n    }\n    clone() {\n        const tag = NbtCompound.fromJson(this.tag.toJson());\n        return new ItemStack(this.id, this.count, tag);\n    }\n    is(other) {\n        if (typeof other === 'string') {\n            return this.id.equals(Identifier.parse(other));\n        }\n        if (other instanceof Identifier) {\n            return this.id.equals(other);\n        }\n        return this.id.equals(other.id);\n    }\n    equals(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof ItemStack)) {\n            return false;\n        }\n        return this.id.equals(other.id)\n            && this.count === other.count\n            && this.tag.toString() == other.tag.toString();\n    }\n    toString() {\n        return this.id.toString() + (this.tag.size > 0 ? this.tag.toString() : '') + (this.count > 1 ? ` ${this.count}` : '');\n    }\n}\n//# sourceMappingURL=ItemStack.js.map","export var Rotation;\n(function (Rotation) {\n    Rotation[\"NONE\"] = \"none\";\n    Rotation[\"CLOCKWISE_90\"] = \"clockwise_90\";\n    Rotation[\"CLOCKWISE_180\"] = \"180\";\n    Rotation[\"COUNTERCLOCKWISE_90\"] = \"counterclockwise_90\";\n})(Rotation || (Rotation = {}));\n(function (Rotation) {\n    function getRandom(random) {\n        return [Rotation.NONE, Rotation.CLOCKWISE_90, Rotation.CLOCKWISE_180, Rotation.COUNTERCLOCKWISE_90][random.nextInt(4)];\n    }\n    Rotation.getRandom = getRandom;\n})(Rotation || (Rotation = {}));\n//# sourceMappingURL=Rotation.js.map","import { NbtType } from '../nbt/index.js';\nimport { BlockPos } from './BlockPos.js';\nimport { BlockState } from './BlockState.js';\nimport { Registry } from './Registry.js';\nimport { Rotation } from './Rotation.js';\nexport class Structure {\n    size;\n    palette;\n    blocks;\n    static REGISTRY = Registry.createAndRegister('structures');\n    static EMPTY = new Structure(BlockPos.ZERO);\n    blocksMap = [];\n    constructor(size, palette = [], blocks = []) {\n        this.size = size;\n        this.palette = palette;\n        this.blocks = blocks;\n        blocks.forEach(block => {\n            if (!this.isInside(block.pos)) {\n                throw new Error(`Found block at ${block.pos} which is outside the structure bounds ${this.size}`);\n            }\n            this.blocksMap[block.pos[0] * size[1] * size[2] + block.pos[1] * size[2] + block.pos[2]] = block;\n        });\n    }\n    getSize() {\n        return this.size;\n    }\n    addBlock(pos, name, properties, nbt) {\n        if (!this.isInside(pos)) {\n            throw new Error(`Cannot add block at ${pos} outside the structure bounds ${this.size}`);\n        }\n        const blockState = new BlockState(name, properties);\n        let state = this.palette.findIndex(b => b.equals(blockState));\n        if (state === -1) {\n            state = this.palette.length;\n            this.palette.push(blockState);\n        }\n        this.blocks.push({ pos, state, nbt });\n        this.blocksMap[pos[0] * this.size[1] * this.size[2] + pos[1] * this.size[2] + pos[2]] = { pos, state, nbt };\n        return this;\n    }\n    getBlocks() {\n        return this.blocks.map(b => this.toPlacedBlock(b));\n    }\n    getBlock(pos) {\n        if (!this.isInside(pos))\n            return null;\n        const block = this.blocksMap[pos[0] * this.size[1] * this.size[2] + pos[1] * this.size[2] + pos[2]];\n        if (!block)\n            return null;\n        return this.toPlacedBlock(block);\n    }\n    toPlacedBlock(block) {\n        const state = this.palette[block.state];\n        if (!state) {\n            throw new Error(`Block at ${block.pos.join(' ')} in structure references invalid palette index ${block.state}`);\n        }\n        return {\n            pos: block.pos,\n            state: state,\n            nbt: block.nbt,\n        };\n    }\n    isInside(pos) {\n        return pos[0] >= 0 && pos[0] < this.size[0]\n            && pos[1] >= 0 && pos[1] < this.size[1]\n            && pos[2] >= 0 && pos[2] < this.size[2];\n    }\n    static fromNbt(nbt) {\n        const size = BlockPos.fromNbt(nbt.getList('size'));\n        const palette = nbt.getList('palette', NbtType.Compound).map(tag => BlockState.fromNbt(tag));\n        const blocks = nbt.getList('blocks', NbtType.Compound).map(tag => {\n            const pos = BlockPos.fromNbt(tag.getList('pos'));\n            const state = tag.getNumber('state');\n            const nbt = tag.getCompound('nbt');\n            return { pos, state, nbt: nbt.size > 0 ? nbt : undefined };\n        });\n        return new Structure(size, palette, blocks);\n    }\n    static transform(pos, rotation, pivot) {\n        switch (rotation) {\n            case Rotation.COUNTERCLOCKWISE_90:\n                return BlockPos.create(pivot[0] - pivot[2] + pos[2], pos[1], pivot[0] + pivot[2] - pos[0]);\n            case Rotation.CLOCKWISE_90:\n                return BlockPos.create(pivot[0] + pivot[2] - pos[2], pos[1], pivot[2] - pivot[0] + pos[0]);\n            case Rotation.CLOCKWISE_180:\n                return BlockPos.create(pivot[0] + pivot[0] - pos[0], pos[1], pivot[2] + pivot[2] - pos[2]);\n            default:\n                return pos;\n        }\n    }\n}\n//# sourceMappingURL=Structure.js.map","import { Identifier } from '../Identifier.js';\nimport { Registry } from '../Registry.js';\nconst registry = new Registry(Identifier.create('enchantment'));\nRegistry.REGISTRY.register(registry.key, registry);\nexport var Enchantment;\n(function (Enchantment) {\n    Enchantment.REGISTRY = registry;\n    function isCompatible(a, b) {\n        return a !== b && a._isCompatible(b) && b._isCompatible(a);\n    }\n    Enchantment.isCompatible = isCompatible;\n    function canEnchant(item, ench) {\n        return ench._canEnchant(item, () => ENCHANTMENT_CATEGORIES.get(ench.category)?.(item.getItem()) ?? false);\n    }\n    Enchantment.canEnchant = canEnchant;\n})(Enchantment || (Enchantment = {}));\nfunction register(id, rarity, category, props) {\n    const enchantment = {\n        id: Identifier.create(id),\n        rarity,\n        category,\n        isDiscoverable: true,\n        isTradeable: true,\n        isTreasure: false,\n        isCurse: false,\n        minLevel: 1,\n        maxLevel: 1,\n        minCost(lvl) { return 1 + lvl * 10; },\n        maxCost(lvl) { return this.minCost(lvl) + 5; },\n        _isCompatible() { return true; },\n        _canEnchant(_, next) { return next(); },\n        ...props,\n    };\n    registry.register(enchantment.id, enchantment, true);\n    return enchantment;\n}\nexport var Enchantments;\n(function (Enchantments) {\n    Enchantments.PROTECTION = register('protection', 'common', 'armor', {\n        maxLevel: 4,\n        minCost: lvl => 1 + (lvl - 1) * 11,\n        maxCost: lvl => 1 + (lvl - 1) * 11 + 11,\n        _isCompatible: other => !PROTECTION_ENCHANTS.has(other),\n    });\n    Enchantments.FIRE_PROTECTION = register('fire_protection', 'uncommon', 'armor', {\n        maxLevel: 4,\n        minCost: lvl => 10 + (lvl - 1) * 8,\n        maxCost: lvl => 10 + (lvl - 1) * 8 + 8,\n        _isCompatible: other => !PROTECTION_ENCHANTS.has(other),\n    });\n    Enchantments.FEATHER_FALLING = register('feather_falling', 'uncommon', 'armor_feet', {\n        maxLevel: 4,\n        minCost: lvl => 5 + (lvl - 1) * 6,\n        maxCost: lvl => 5 + (lvl - 1) * 6 + 6,\n    });\n    Enchantments.BLAST_PROTECTION = register('blast_protection', 'rare', 'armor', {\n        maxLevel: 4,\n        minCost: lvl => 5 + (lvl - 1) * 8,\n        maxCost: lvl => 5 + (lvl - 1) * 8 + 8,\n        _isCompatible: other => !PROTECTION_ENCHANTS.has(other),\n    });\n    Enchantments.PROJECTILE_PROTECTION = register('projectile_protection', 'uncommon', 'armor', {\n        maxLevel: 4,\n        minCost: lvl => 3 + (lvl - 1) * 6,\n        maxCost: lvl => 3 + (lvl - 1) * 6 + 6,\n        _isCompatible: other => !PROTECTION_ENCHANTS.has(other),\n    });\n    Enchantments.RESPIRATION = register('respiration', 'rare', 'armor_head', {\n        maxLevel: 3,\n        minCost: lvl => 10 * lvl,\n        maxCost: lvl => 10 * lvl + 30,\n    });\n    Enchantments.AQUA_AFFINITY = register('aqua_affinity', 'rare', 'armor_head', {\n        minCost: () => 1,\n        maxCost: () => 40,\n    });\n    Enchantments.THORNS = register('thorns', 'very_rare', 'armor_chest', {\n        maxLevel: 3,\n        minCost: lvl => 10 + 20 * (lvl - 1),\n        maxCost: lvl => 10 + 20 * (lvl - 1) + 50,\n    });\n    Enchantments.DEPTH_STRIDER = register('depth_strider', 'rare', 'armor_feet', {\n        maxLevel: 3,\n        minCost: lvl => 10 * lvl,\n        maxCost: lvl => 10 * lvl + 15,\n        _isCompatible: other => other !== Enchantments.FROST_WALKER,\n    });\n    Enchantments.FROST_WALKER = register('frost_walker', 'rare', 'armor_feet', {\n        isTreasure: true,\n        maxLevel: 2,\n        minCost: lvl => 10 * lvl,\n        maxCost: lvl => 10 * lvl + 15,\n        _isCompatible: other => other !== Enchantments.DEPTH_STRIDER,\n    });\n    Enchantments.BINDING_CURSE = register('binding_curse', 'very_rare', 'wearable', {\n        isTreasure: true,\n        isCurse: true,\n        minCost: () => 25,\n        maxCost: () => 50,\n    });\n    Enchantments.SOUL_SPEED = register('soul_speed', 'very_rare', 'armor_feet', {\n        isDiscoverable: false,\n        isTradeable: false,\n        isTreasure: true,\n        maxLevel: 3,\n        minCost: lvl => 10 * lvl,\n        maxCost: lvl => 10 * lvl + 15,\n    });\n    Enchantments.SWIFT_SNEAK = register('swift_sneak', 'very_rare', 'armor_legs', {\n        isDiscoverable: false,\n        isTradeable: false,\n        isTreasure: true,\n        maxLevel: 3,\n        minCost: lvl => 25 * lvl,\n        maxCost: lvl => 25 * lvl + 50,\n    });\n    Enchantments.SHARPNESS = register('sharpness', 'common', 'weapon', {\n        maxLevel: 5,\n        minCost: lvl => 1 + (lvl - 1) * 11,\n        maxCost: lvl => 1 + (lvl - 1) * 11 + 20,\n        _isCompatible: other => !DAMAGE_ENCHANTS.has(other),\n        _canEnchant: (item, next) => item.getItem().tiered?.isAxe || next(),\n    });\n    Enchantments.SMITE = register('smite', 'common', 'weapon', {\n        maxLevel: 5,\n        minCost: lvl => 5 + (lvl - 1) * 8,\n        maxCost: lvl => 5 + (lvl - 1) * 8 + 20,\n        _isCompatible: other => !DAMAGE_ENCHANTS.has(other),\n        _canEnchant: (item, next) => item.getItem().tiered?.isAxe || next(),\n    });\n    Enchantments.BANE_OF_ARTHROPODS = register('bane_of_arthropods', 'common', 'weapon', {\n        maxLevel: 5,\n        minCost: lvl => 5 + (lvl - 1) * 8,\n        maxCost: lvl => 5 + (lvl - 1) * 8 + 20,\n        _isCompatible: other => !DAMAGE_ENCHANTS.has(other),\n        _canEnchant: (item, next) => item.getItem().tiered?.isAxe || next(),\n    });\n    Enchantments.KNOCKBACK = register('knockback', 'uncommon', 'weapon', {\n        maxLevel: 2,\n        minCost: lvl => 5 + 20 * (lvl - 1),\n        maxCost: lvl => 1 + lvl * 10 + 50,\n    });\n    Enchantments.FIRE_ASPECT = register('fire_aspect', 'rare', 'weapon', {\n        maxLevel: 2,\n        minCost: lvl => 5 + 20 * (lvl - 1),\n        maxCost: lvl => 1 + lvl * 10 + 50,\n    });\n    Enchantments.LOOTING = register('looting', 'rare', 'weapon', {\n        maxLevel: 3,\n        minCost: lvl => 15 + (lvl - 1) * 9,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _isCompatible: other => other !== Enchantments.SILK_TOUCH,\n    });\n    Enchantments.SWEEPING = register('sweeping', 'rare', 'weapon', {\n        maxLevel: 3,\n        minCost: lvl => 5 + (lvl - 1) * 9,\n        maxCost: lvl => 5 + (lvl - 1) * 9 + 15,\n    });\n    Enchantments.EFFICIENCY = register('efficiency', 'common', 'digger', {\n        maxLevel: 5,\n        minCost: lvl => 1 + 10 * (lvl - 1),\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _canEnchant: (item, next) => item.is('shears') || next(),\n    });\n    Enchantments.SILK_TOUCH = register('silk_touch', 'very_rare', 'digger', {\n        minCost: () => 15,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _isCompatible: other => other !== Enchantments.FORTUNE,\n    });\n    Enchantments.UNBREAKING = register('unbreaking', 'uncommon', 'breakable', {\n        maxLevel: 3,\n        minCost: lvl => 5 + (lvl - 1) * 8,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _canEnchant: (item, next) => next() && !item.tag.getBoolean('Unbreakable'),\n    });\n    Enchantments.FORTUNE = register('fortune', 'rare', 'digger', {\n        maxLevel: 3,\n        minCost: lvl => 15 + (lvl - 1) * 9,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _isCompatible: other => other !== Enchantments.SILK_TOUCH,\n    });\n    Enchantments.POWER = register('power', 'common', 'bow', {\n        maxLevel: 5,\n        minCost: lvl => 1 + (lvl - 1) * 10,\n        maxCost: lvl => 1 + (lvl - 1) * 10 + 15,\n    });\n    Enchantments.PUNCH = register('punch', 'rare', 'bow', {\n        maxLevel: 2,\n        minCost: lvl => 12 + (lvl - 1) * 20,\n        maxCost: lvl => 12 + (lvl - 1) * 20 + 25,\n    });\n    Enchantments.FLAME = register('flame', 'rare', 'bow', {\n        minCost: () => 20,\n        maxCost: () => 50,\n    });\n    Enchantments.INFINITY = register('infinity', 'very_rare', 'bow', {\n        minCost: () => 20,\n        maxCost: () => 50,\n        _isCompatible: other => other !== Enchantments.MENDING,\n    });\n    Enchantments.LUCK_OF_THE_SEA = register('luck_of_the_sea', 'rare', 'fishing_rod', {\n        maxLevel: 3,\n        minCost: lvl => 15 + (lvl - 1) * 9,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n        _isCompatible: other => other !== Enchantments.SILK_TOUCH,\n    });\n    Enchantments.LURE = register('lure', 'rare', 'fishing_rod', {\n        maxLevel: 3,\n        minCost: lvl => 15 + (lvl - 1) * 9,\n        maxCost: lvl => 1 + lvl * 10 + 50,\n    });\n    Enchantments.LOYALTY = register('loyalty', 'uncommon', 'trident', {\n        maxLevel: 3,\n        minCost: lvl => 5 + lvl * 7,\n        maxCost: () => 50,\n    });\n    Enchantments.IMPALING = register('impaling', 'rare', 'trident', {\n        maxLevel: 5,\n        minCost: lvl => 1 + (lvl - 1) * 8,\n        maxCost: lvl => 1 + (lvl - 1) * 8 + 20,\n    });\n    Enchantments.RIPTIDE = register('riptide', 'rare', 'trident', {\n        maxLevel: 3,\n        minCost: lvl => 5 + lvl * 7,\n        maxCost: () => 50,\n        _isCompatible: other => other !== Enchantments.RIPTIDE && other !== Enchantments.CHANNELING,\n    });\n    Enchantments.CHANNELING = register('channeling', 'very_rare', 'trident', {\n        minCost: () => 25,\n        maxCost: () => 50,\n    });\n    Enchantments.MULTISHOT = register('multishot', 'rare', 'crossbow', {\n        minCost: () => 20,\n        maxCost: () => 50,\n        _isCompatible: other => other !== Enchantments.PIERCING,\n    });\n    Enchantments.QUICK_CHARGE = register('quick_charge', 'uncommon', 'crossbow', {\n        maxLevel: 3,\n        minCost: lvl => 12 + (lvl - 1) * 20,\n        maxCost: () => 50,\n    });\n    Enchantments.PIERCING = register('piercing', 'common', 'crossbow', {\n        maxLevel: 4,\n        minCost: lvl => 1 + (lvl - 1) * 10,\n        maxCost: () => 50,\n        _isCompatible: other => other !== Enchantments.MULTISHOT,\n    });\n    Enchantments.MENDING = register('mending', 'rare', 'breakable', {\n        isTreasure: true,\n        minCost: lvl => lvl * 25,\n        maxCost: lvl => lvl * 25 + 50,\n    });\n    Enchantments.VANISHING_CURSE = register('vanishing_curse', 'very_rare', 'vanishable', {\n        isTreasure: true,\n        isCurse: true,\n        minCost: () => 25,\n        maxCost: () => 50,\n    });\n    const PROTECTION_ENCHANTS = new Set([Enchantments.PROTECTION, Enchantments.FIRE_PROTECTION, Enchantments.BLAST_PROTECTION, Enchantments.PROJECTILE_PROTECTION]);\n    const DAMAGE_ENCHANTS = new Set([Enchantments.SHARPNESS, Enchantments.SMITE, Enchantments.BANE_OF_ARTHROPODS]);\n})(Enchantments || (Enchantments = {}));\nconst ENCHANTMENT_CATEGORIES = new Map(Object.entries({\n    armor: item => item.armor !== undefined,\n    armor_feet: item => item.armor?.slot === 'feet',\n    armor_legs: item => item.armor?.slot === 'legs',\n    armor_chest: item => item.armor?.slot === 'chest',\n    armor_head: item => item.armor?.slot === 'head',\n    weapon: item => item.tiered?.isWeapon === true,\n    digger: item => item.tiered?.isDigger === true,\n    fishing_rod: item => item.id.path === 'fishing_rod',\n    trident: item => item.id.path === 'trident',\n    breakable: item => item.durability !== undefined,\n    bow: item => item.id.path === 'bow',\n    wearable: item => item.wearable === true,\n    crossbow: item => item.id.path === 'crossbow',\n    vanishable: item => item.vanishable === true,\n}));\n//# sourceMappingURL=Enchantment.js.map","import { NbtCompound, NbtType } from '../../nbt/index.js';\nimport { intToRgb } from '../../util/index.js';\nimport { Identifier } from '../Identifier.js';\nimport { ItemStack } from '../ItemStack.js';\nimport { Registry } from '../Registry.js';\nimport { MobEffects } from './MobEffect.js';\nimport { MobEffectInstance } from './MobEffectInstance.js';\nconst registry = new Registry(Identifier.create('potion'));\nRegistry.REGISTRY.register(registry.key, registry);\nexport var Potion;\n(function (Potion) {\n    Potion.REGISTRY = registry;\n    function fromNbt(potion) {\n        const tag = potion instanceof ItemStack ? potion.tag : potion;\n        const name = tag.getString('Potion');\n        return registry.get(Identifier.parse(name)) ?? Potions.EMPTY;\n    }\n    Potion.fromNbt = fromNbt;\n    function getAllEffects(arg) {\n        const potion = (arg instanceof ItemStack || arg instanceof NbtCompound) ? fromNbt(arg) : arg;\n        const result = [];\n        result.push(...potion.effects);\n        if (potion instanceof ItemStack || potion instanceof NbtCompound) {\n            const tag = potion instanceof ItemStack ? potion.tag : potion;\n            tag.getList('CustomPotionEffects', NbtType.Compound).forEach(e => {\n                const effect = MobEffectInstance.fromNbt(e);\n                if (effect !== undefined) {\n                    result.push(effect);\n                }\n            });\n        }\n        return result;\n    }\n    Potion.getAllEffects = getAllEffects;\n    function getAllAttributeModifiers(arg) {\n        const potion = (arg instanceof ItemStack || arg instanceof NbtCompound) ? fromNbt(arg) : arg;\n        return potion.effects.flatMap(e => Array.from(e.effect.modifiers.entries()));\n    }\n    Potion.getAllAttributeModifiers = getAllAttributeModifiers;\n    function getColor(arg) {\n        if (arg === Potions.EMPTY) {\n            return intToRgb(16253176);\n        }\n        if (arg instanceof ItemStack || arg instanceof NbtCompound) {\n            const tag = arg instanceof ItemStack ? arg.tag : arg;\n            if (tag.hasNumber('CustomPotionColor')) {\n                return intToRgb(tag.getNumber('CustomPotionColor'));\n            }\n        }\n        const effects = getAllEffects(arg);\n        return MobEffectInstance.getColor(effects);\n    }\n    Potion.getColor = getColor;\n})(Potion || (Potion = {}));\nfunction register(id, ...effects) {\n    let name = id;\n    if (name.startsWith('long_')) {\n        name = name.slice('long_'.length);\n    }\n    if (name.startsWith('strong_')) {\n        name = name.slice('strong_'.length);\n    }\n    const potion = {\n        id: Identifier.create(id),\n        name,\n        effects,\n    };\n    registry.register(potion.id, potion, true);\n    return potion;\n}\nexport var Potions;\n(function (Potions) {\n    Potions.EMPTY = register('empty');\n    Potions.WATER = register('water');\n    Potions.MUNDANE = register('mundane');\n    Potions.THICK = register('thick');\n    Potions.AWKWARD = register('awkward');\n    Potions.NIGHT_VISION = register('night_vision', MobEffectInstance.create(MobEffects.NIGHT_VISION, 3600));\n    Potions.LONG_NIGHT_VISION = register('long_night_vision', MobEffectInstance.create(MobEffects.NIGHT_VISION, 9600));\n    Potions.INVISIBILITY = register('invisibility', MobEffectInstance.create(MobEffects.INVISIBILITY, 3600));\n    Potions.LONG_INVISIBILITY = register('long_invisibility', MobEffectInstance.create(MobEffects.INVISIBILITY, 9600));\n    Potions.LEAPING = register('leaping', MobEffectInstance.create(MobEffects.JUMP_BOOST, 3600));\n    Potions.LONG_LEAPING = register('long_leaping', MobEffectInstance.create(MobEffects.JUMP_BOOST, 9600));\n    Potions.STRONG_LEAPING = register('strong_leaping', MobEffectInstance.create(MobEffects.JUMP_BOOST, 1800, 1));\n    Potions.FIRE_RESISTANCE = register('fire_resistance', MobEffectInstance.create(MobEffects.FIRE_RESISTANCE, 3600));\n    Potions.LONG_FIRE_RESISTANCE = register('long_fire_resistance', MobEffectInstance.create(MobEffects.FIRE_RESISTANCE, 9600));\n    Potions.SWIFTNESS = register('swiftness', MobEffectInstance.create(MobEffects.SPEED, 3600));\n    Potions.LONG_SWIFTNESS = register('long_swiftness', MobEffectInstance.create(MobEffects.SPEED, 9600));\n    Potions.STRONG_SWIFTNESS = register('strong_swiftness', MobEffectInstance.create(MobEffects.SPEED, 1800, 1));\n    Potions.SLOWNESS = register('slowness', MobEffectInstance.create(MobEffects.SLOWNESS, 1800));\n    Potions.LONG_SLOWNESS = register('long_slowness', MobEffectInstance.create(MobEffects.SLOWNESS, 4800));\n    Potions.STRONG_SLOWNESS = register('strong_slowness', MobEffectInstance.create(MobEffects.SLOWNESS, 400, 3));\n    Potions.TURTLE_MASTER = register('turtle_master', MobEffectInstance.create(MobEffects.SLOWNESS, 400, 3), MobEffectInstance.create(MobEffects.RESISTANCE, 400, 2));\n    Potions.LONG_TURTLE_MASTER = register('long_turtle_master', MobEffectInstance.create(MobEffects.SLOWNESS, 800, 3), MobEffectInstance.create(MobEffects.RESISTANCE, 800, 2));\n    Potions.STRONG_TURTLE_MASTER = register('strong_turtle_master', MobEffectInstance.create(MobEffects.SLOWNESS, 400, 5), MobEffectInstance.create(MobEffects.RESISTANCE, 400, 3));\n    Potions.WATER_BREATHING = register('water_breathing', MobEffectInstance.create(MobEffects.WATER_BREATHING, 3600));\n    Potions.LONG_WATER_BREATHING = register('long_water_breathing', MobEffectInstance.create(MobEffects.WATER_BREATHING, 9600));\n    Potions.HEALING = register('healing', MobEffectInstance.create(MobEffects.INSTANT_HEALTH, 1));\n    Potions.STRONG_HEALING = register('strong_healing', MobEffectInstance.create(MobEffects.INSTANT_HEALTH, 1, 1));\n    Potions.HARMING = register('harming', MobEffectInstance.create(MobEffects.INSTANT_DAMAGE, 1));\n    Potions.STRONG_HARMING = register('strong_harming', MobEffectInstance.create(MobEffects.INSTANT_DAMAGE, 1, 1));\n    Potions.POISON = register('poison', MobEffectInstance.create(MobEffects.POISON, 900));\n    Potions.LONG_POISON = register('long_poison', MobEffectInstance.create(MobEffects.POISON, 1800));\n    Potions.STRONG_POISON = register('strong_poison', MobEffectInstance.create(MobEffects.POISON, 432, 1));\n    Potions.REGENERATION = register('regeneration', MobEffectInstance.create(MobEffects.REGENERATION, 900));\n    Potions.LONG_REGENERATION = register('long_regeneration', MobEffectInstance.create(MobEffects.REGENERATION, 1800));\n    Potions.STRONG_REGENERATION = register('strong_regeneration', MobEffectInstance.create(MobEffects.REGENERATION, 450, 1));\n    Potions.STRENGTH = register('strength', MobEffectInstance.create(MobEffects.STRENGTH, 3600));\n    Potions.LONG_STRENGTH = register('long_strength', MobEffectInstance.create(MobEffects.STRENGTH, 9600));\n    Potions.STRONG_STRENGTH = register('strong_strength', MobEffectInstance.create(MobEffects.STRENGTH, 1800, 1));\n    Potions.WEAKNESS = register('weakness', MobEffectInstance.create(MobEffects.WEAKNESS, 1800));\n    Potions.LONG_WEAKNESS = register('long_weakness', MobEffectInstance.create(MobEffects.WEAKNESS, 4800));\n    Potions.LUCK = register('luck', MobEffectInstance.create(MobEffects.LUCK, 6000));\n    Potions.SLOW_FALLING = register('slow_falling', MobEffectInstance.create(MobEffects.SLOW_FALLING, 1800));\n    Potions.LONG_SLOW_FALLING = register('long_slow_falling', MobEffectInstance.create(MobEffects.SLOW_FALLING, 4800));\n})(Potions || (Potions = {}));\n//# sourceMappingURL=Potion.js.map","export function square(x) {\n    return x * x;\n}\nexport function clamp(x, min, max) {\n    return Math.max(min, Math.min(max, x));\n}\nexport function lerp(a, b, c) {\n    return b + a * (c - b);\n}\nexport function lerp2(a, b, c, d, e, f) {\n    return lerp(b, lerp(a, c, d), lerp(a, e, f));\n}\nexport function lerp3(a, b, c, d, e, f, g, h, i, j, k) {\n    return lerp(c, lerp2(a, b, d, e, f, g), lerp2(a, b, h, i, j, k));\n}\nexport function lazyLerp(a, b, c) {\n    if (a === 0)\n        return b();\n    if (a === 1)\n        return c();\n    return b() + a * (c() - b());\n}\nexport function lazyLerp2(a, b, c, d, e, f) {\n    return lazyLerp(b, () => lazyLerp(a, c, d), () => lazyLerp(a, e, f));\n}\nexport function lazyLerp3(a, b, c, d, e, f, g, h, i, j, k) {\n    return lazyLerp(c, () => lazyLerp2(a, b, d, e, f, g), () => lazyLerp2(a, b, h, i, j, k));\n}\nexport function clampedLerp(a, b, c) {\n    if (c < 0) {\n        return a;\n    }\n    else if (c > 1) {\n        return b;\n    }\n    else {\n        return lerp(c, a, b);\n    }\n}\nexport function inverseLerp(a, b, c) {\n    return (a - b) / (c - b);\n}\nexport function smoothstep(x) {\n    return x * x * x * (x * (x * 6 - 15) + 10);\n}\nexport function map(a, b, c, d, e) {\n    return lerp(inverseLerp(a, b, c), d, e);\n}\nexport function clampedMap(a, b, c, d, e) {\n    return clampedLerp(d, e, inverseLerp(a, b, c));\n}\nexport function binarySearch(n, n2, predicate) {\n    let n3 = n2 - n;\n    while (n3 > 0) {\n        const n4 = Math.floor(n3 / 2);\n        const n5 = n + n4;\n        if (predicate(n5)) {\n            n3 = n4;\n            continue;\n        }\n        n = n5 + 1;\n        n3 -= n4 + 1;\n    }\n    return n;\n}\nexport function getSeed(x, y, z) {\n    let seed = BigInt(x * 3129871) ^ BigInt(z) * BigInt(116129781) ^ BigInt(y);\n    seed = seed * seed * BigInt(42317861) + seed * BigInt(11);\n    return seed >> BigInt(16);\n}\nexport function longfromBytes(a, b, c, d, e, f, g, h) {\n    return BigInt(a) << BigInt(56)\n        | BigInt(b) << BigInt(48)\n        | BigInt(c) << BigInt(40)\n        | BigInt(d) << BigInt(32)\n        | BigInt(e) << BigInt(24)\n        | BigInt(f) << BigInt(16)\n        | BigInt(g) << BigInt(8)\n        | BigInt(h);\n}\nexport function isPowerOfTwo(x) {\n    return (x & (x - 1)) === 0;\n}\nexport function upperPowerOfTwo(x) {\n    x -= 1;\n    x |= x >> 1;\n    x |= x >> 2;\n    x |= x >> 4;\n    x |= x >> 8;\n    x |= x >> 18;\n    x |= x >> 32;\n    return x + 1;\n}\nexport function randomBetweenInclusive(random, min, max) {\n    return random.nextInt(max - min + 1) + min;\n}\nexport function nextInt(random, min, max) {\n    return min >= max ? min : random.nextInt(max - min + 1) + min;\n}\nexport function shuffle(array, random) {\n    for (var i = array.length; i > 1; i--) {\n        const switchIndex = random.nextInt(i);\n        const tmp = array[switchIndex];\n        array[switchIndex] = array[i - 1];\n        array[i - 1] = tmp;\n    }\n}\n//# sourceMappingURL=Util.js.map","import { Json } from '../util/index.js';\nimport { binarySearch, lerp } from './Util.js';\nexport var MinMaxNumberFunction;\n(function (MinMaxNumberFunction) {\n    function is(obj) {\n        return typeof obj === 'object' && obj !== null && 'minValue' in obj && 'maxValue' in obj;\n    }\n    MinMaxNumberFunction.is = is;\n})(MinMaxNumberFunction || (MinMaxNumberFunction = {}));\nexport var CubicSpline;\n(function (CubicSpline) {\n    function fromJson(obj, extractor) {\n        if (typeof obj === 'number') {\n            return new Constant(obj);\n        }\n        const root = Json.readObject(obj) ?? {};\n        const spline = new MultiPoint(extractor(root.coordinate));\n        const points = Json.readArray(root.points, e => Json.readObject(e) ?? {}) ?? [];\n        if (points.length === 0) {\n            return new Constant(0);\n        }\n        for (const point of points) {\n            const location = Json.readNumber(point.location) ?? 0;\n            const value = fromJson(point.value, extractor);\n            const derivative = Json.readNumber(point.derivative) ?? 0;\n            spline.addPoint(location, value, derivative);\n        }\n        return spline;\n    }\n    CubicSpline.fromJson = fromJson;\n    class Constant {\n        value;\n        constructor(value) {\n            this.value = value;\n        }\n        compute() {\n            return this.value;\n        }\n        min() {\n            return this.value;\n        }\n        max() {\n            return this.value;\n        }\n        mapAll() {\n            return this;\n        }\n        calculateMinMax() { }\n    }\n    CubicSpline.Constant = Constant;\n    class MultiPoint {\n        coordinate;\n        locations;\n        values;\n        derivatives;\n        calculatedMin = Number.NEGATIVE_INFINITY;\n        calculatedMax = Number.POSITIVE_INFINITY;\n        constructor(coordinate, locations = [], values = [], derivatives = []) {\n            this.coordinate = coordinate;\n            this.locations = locations;\n            this.values = values;\n            this.derivatives = derivatives;\n        }\n        compute(c) {\n            const coordinate = this.coordinate.compute(c);\n            const i = binarySearch(0, this.locations.length, n => coordinate < this.locations[n]) - 1;\n            const n = this.locations.length - 1;\n            if (i < 0) {\n                return this.values[0].compute(c) + this.derivatives[0] * (coordinate - this.locations[0]); //TODO: us linear extend for this \n            }\n            if (i === n) {\n                return this.values[n].compute(c) + this.derivatives[n] * (coordinate - this.locations[n]); //TODO: us linear extend for this \n            }\n            const loc0 = this.locations[i];\n            const loc1 = this.locations[i + 1];\n            const der0 = this.derivatives[i];\n            const der1 = this.derivatives[i + 1];\n            const f = (coordinate - loc0) / (loc1 - loc0);\n            const val0 = this.values[i].compute(c);\n            const val1 = this.values[i + 1].compute(c);\n            const f8 = der0 * (loc1 - loc0) - (val1 - val0);\n            const f9 = -der1 * (loc1 - loc0) + (val1 - val0);\n            const f10 = lerp(f, val0, val1) + f * (1.0 - f) * lerp(f, f8, f9);\n            return f10;\n        }\n        min() {\n            return this.calculatedMin;\n        }\n        max() {\n            return this.calculatedMax;\n        }\n        mapAll(visitor) {\n            return new MultiPoint(visitor(this.coordinate), this.locations, this.values.map(v => v.mapAll(visitor)), this.derivatives);\n        }\n        addPoint(location, value, derivative = 0) {\n            this.locations.push(location);\n            this.values.push(typeof value === 'number'\n                ? new CubicSpline.Constant(value)\n                : value);\n            this.derivatives.push(derivative);\n            return this;\n        }\n        calculateMinMax() {\n            if (!MinMaxNumberFunction.is(this.coordinate)) {\n                return;\n            }\n            const lastIdx = this.locations.length - 1;\n            var splineMin = Number.POSITIVE_INFINITY;\n            var splineMax = Number.NEGATIVE_INFINITY;\n            const coordinateMin = this.coordinate.minValue();\n            const coordinateMax = this.coordinate.maxValue();\n            for (const innerSpline of this.values) {\n                innerSpline.calculateMinMax();\n            }\n            if (coordinateMin < this.locations[0]) {\n                const minExtend = MultiPoint.linearExtend(coordinateMin, this.locations, (this.values[0]).min(), this.derivatives, 0);\n                const maxExtend = MultiPoint.linearExtend(coordinateMin, this.locations, (this.values[0]).max(), this.derivatives, 0);\n                splineMin = Math.min(splineMin, Math.min(minExtend, maxExtend));\n                splineMax = Math.max(splineMax, Math.max(minExtend, maxExtend));\n            }\n            if (coordinateMax > this.locations[lastIdx]) {\n                const minExtend = MultiPoint.linearExtend(coordinateMax, this.locations, (this.values[lastIdx]).min(), this.derivatives, lastIdx);\n                const maxExtend = MultiPoint.linearExtend(coordinateMax, this.locations, (this.values[lastIdx]).max(), this.derivatives, lastIdx);\n                splineMin = Math.min(splineMin, Math.min(minExtend, maxExtend));\n                splineMax = Math.max(splineMax, Math.max(minExtend, maxExtend));\n            }\n            for (const innerSpline of this.values) {\n                splineMin = Math.min(splineMin, innerSpline.min());\n                splineMax = Math.max(splineMax, innerSpline.max());\n            }\n            for (var i = 0; i < lastIdx; ++i) {\n                const locationLeft = this.locations[i];\n                const locationRight = this.locations[i + 1];\n                const locationDelta = locationRight - locationLeft;\n                const splineLeft = this.values[i];\n                const splineRight = this.values[i + 1];\n                const minLeft = splineLeft.min();\n                const maxLeft = splineLeft.max();\n                const minRight = splineRight.min();\n                const maxRight = splineRight.max();\n                const derivativeLeft = this.derivatives[i];\n                const derivativeRight = this.derivatives[i + 1];\n                if (derivativeLeft !== 0.0 || derivativeRight !== 0.0) {\n                    const maxValueDeltaLeft = derivativeLeft * locationDelta;\n                    const maxValueDeltaRight = derivativeRight * locationDelta;\n                    const minValue = Math.min(minLeft, minRight);\n                    const maxValue = Math.max(maxLeft, maxRight);\n                    const minDeltaLeft = maxValueDeltaLeft - maxRight + minLeft;\n                    const maxDeltaLeft = maxValueDeltaLeft - minRight + maxLeft;\n                    const minDeltaRight = -maxValueDeltaRight + minRight - maxLeft;\n                    const maxDeltaRight = -maxValueDeltaRight + maxRight - minLeft;\n                    const minDelta = Math.min(minDeltaLeft, minDeltaRight);\n                    const maxDelta = Math.max(maxDeltaLeft, maxDeltaRight);\n                    splineMin = Math.min(splineMin, minValue + 0.25 * minDelta);\n                    splineMax = Math.max(splineMax, maxValue + 0.25 * maxDelta);\n                }\n            }\n            this.calculatedMin = splineMin;\n            this.calculatedMax = splineMax;\n        }\n        static linearExtend(location, locations, value, derivatives, useIndex) {\n            const derivative = derivatives[useIndex];\n            return derivative == 0.0 ? value : value + derivative * (location - locations[useIndex]);\n        }\n    }\n    CubicSpline.MultiPoint = MultiPoint;\n})(CubicSpline || (CubicSpline = {}));\n//# sourceMappingURL=CubicSpline.js.map","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import { mat3 } from 'gl-matrix';\nexport class Matrix3 {\n    data;\n    constructor(data) {\n        this.data = data ?? mat3.create();\n    }\n    static fromMatrix4(source) {\n        return new Matrix3(mat3.fromMat4(mat3.create(), source.data));\n    }\n    static fromQuat(source) {\n        return new Matrix3(mat3.fromQuat(mat3.create(), source));\n    }\n    clone() {\n        return new Matrix3(mat3.clone(this.data));\n    }\n    copy(other) {\n        mat3.copy(this.data, other.data);\n        return this;\n    }\n    translate(a) {\n        mat3.translate(this.data, this.data, Array.isArray(a) ? a : [a.x, a.y]);\n        return this;\n    }\n    scale(a) {\n        if (typeof a === 'number') {\n            mat3.multiplyScalar(this.data, this.data, a);\n        }\n        else {\n            mat3.scale(this.data, this.data, Array.isArray(a) ? a : [a.x, a.y]);\n        }\n        return this;\n    }\n    add(other) {\n        mat3.add(this.data, this.data, other.data);\n        return this;\n    }\n    sub(other) {\n        mat3.sub(this.data, this.data, other.data);\n        return this;\n    }\n    mul(other) {\n        mat3.mul(this.data, this.data, other.data);\n        return this;\n    }\n    transpose() {\n        mat3.transpose(this.data, this.data);\n        return this;\n    }\n    invert() {\n        mat3.invert(this.data, this.data);\n        return this;\n    }\n    get m00() { return this.data[0]; }\n    get m01() { return this.data[1]; }\n    get m02() { return this.data[2]; }\n    get m10() { return this.data[3]; }\n    get m11() { return this.data[4]; }\n    get m12() { return this.data[5]; }\n    get m20() { return this.data[6]; }\n    get m21() { return this.data[7]; }\n    get m22() { return this.data[8]; }\n    set m00(x) { this.data[0] = x; }\n    set m01(x) { this.data[1] = x; }\n    set m02(x) { this.data[2] = x; }\n    set m10(x) { this.data[3] = x; }\n    set m11(x) { this.data[4] = x; }\n    set m12(x) { this.data[5] = x; }\n    set m20(x) { this.data[6] = x; }\n    set m21(x) { this.data[7] = x; }\n    set m22(x) { this.data[8] = x; }\n    toString() {\n        return mat3.str(this.data);\n    }\n}\n//# sourceMappingURL=Matrix3.js.map","export class Vector {\n    x;\n    y;\n    z;\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n    distance(other) {\n        return this.sub(other).length();\n    }\n    distanceSquared(other) {\n        return this.sub(other).lengthSquared();\n    }\n    abs() {\n        return new Vector(Math.abs(this.x), Math.abs(this.y), Math.abs(this.z));\n    }\n    add(other) {\n        return new Vector(this.x + other.x, this.y + other.y, this.z + other.z);\n    }\n    sub(other) {\n        return new Vector(this.x - other.x, this.y - other.y, this.z - other.z);\n    }\n    mul(other) {\n        return new Vector(this.x * other.x, this.y * other.y, this.z * other.z);\n    }\n    div(other) {\n        return new Vector(this.x / other.x, this.y / other.y, this.z / other.z);\n    }\n    scale(n) {\n        return new Vector(this.x * n, this.y * n, this.z * n);\n    }\n    dot(other) {\n        return this.x * other.x + this.y * other.y + this.z * other.z;\n    }\n    cross(other) {\n        const x = this.y * other.z - this.z * other.y;\n        const y = this.z * other.x - this.x * other.z;\n        const z = this.x * other.y - this.y * other.x;\n        return new Vector(x, y, z);\n    }\n    normalize() {\n        if (this.x == 0 && this.y == 0 && this.z == 0) {\n            return this;\n        }\n        const r = 1 / this.length();\n        return new Vector(this.x * r, this.y * r, this.z * r);\n    }\n    components() {\n        return [this.x, this.y, this.z];\n    }\n    toString() {\n        return `[${this.x} ${this.y} ${this.z}]`;\n    }\n}\n//# sourceMappingURL=Vector.js.map","import { mat4, vec3 } from 'gl-matrix';\nimport { Vector } from './Vector.js';\nexport class Matrix4 {\n    data;\n    constructor(data) {\n        this.data = data ?? mat4.create();\n    }\n    static fromQuat(source) {\n        return new Matrix4(mat4.fromQuat(mat4.create(), source));\n    }\n    clone() {\n        return new Matrix4(mat4.clone(this.data));\n    }\n    translate(a) {\n        mat4.translate(this.data, this.data, Array.isArray(a) ? a : a.components());\n        return this;\n    }\n    scale(a) {\n        if (typeof a === 'number') {\n            mat4.multiplyScalar(this.data, this.data, a);\n        }\n        else {\n            mat4.scale(this.data, this.data, Array.isArray(a) ? a : a.components());\n        }\n        return this;\n    }\n    add(other) {\n        mat4.add(this.data, this.data, other.data);\n        return this;\n    }\n    sub(other) {\n        mat4.sub(this.data, this.data, other.data);\n        return this;\n    }\n    mul(other) {\n        mat4.mul(this.data, this.data, other.data);\n        return this;\n    }\n    transpose() {\n        mat4.transpose(this.data, this.data);\n        return this;\n    }\n    invert() {\n        mat4.invert(this.data, this.data);\n        return this;\n    }\n    affine() {\n        return this.scale(1 / this.m33);\n    }\n    get m00() { return this.data[0]; }\n    get m01() { return this.data[1]; }\n    get m02() { return this.data[2]; }\n    get m03() { return this.data[3]; }\n    get m10() { return this.data[4]; }\n    get m11() { return this.data[5]; }\n    get m12() { return this.data[6]; }\n    get m13() { return this.data[7]; }\n    get m20() { return this.data[8]; }\n    get m21() { return this.data[9]; }\n    get m22() { return this.data[10]; }\n    get m23() { return this.data[11]; }\n    get m30() { return this.data[12]; }\n    get m31() { return this.data[13]; }\n    get m32() { return this.data[14]; }\n    get m33() { return this.data[15]; }\n    set m00(x) { this.data[0] = x; }\n    set m01(x) { this.data[1] = x; }\n    set m02(x) { this.data[2] = x; }\n    set m03(x) { this.data[3] = x; }\n    set m10(x) { this.data[4] = x; }\n    set m11(x) { this.data[5] = x; }\n    set m12(x) { this.data[6] = x; }\n    set m13(x) { this.data[7] = x; }\n    set m20(x) { this.data[8] = x; }\n    set m21(x) { this.data[9] = x; }\n    set m22(x) { this.data[10] = x; }\n    set m23(x) { this.data[11] = x; }\n    set m30(x) { this.data[12] = x; }\n    set m31(x) { this.data[13] = x; }\n    set m32(x) { this.data[14] = x; }\n    set m33(x) { this.data[15] = x; }\n    getTranslation() {\n        const [x, y, z] = mat4.getTranslation(vec3.create(), this.data);\n        return new Vector(x, y, z);\n    }\n    toString() {\n        return mat4.str(this.data);\n    }\n}\n//# sourceMappingURL=Matrix4.js.map","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","import md5 from 'md5';\nimport { getSeed, longfromBytes } from '../Util.js';\nexport class LegacyRandom {\n    static MODULUS_BITS = 48;\n    static MODULUS_MASK = BigInt('281474976710655');\n    static MULTIPLIER = BigInt('25214903917');\n    static INCREMENT = BigInt('11');\n    static FLOAT_MULTIPLIER = 1 / Math.pow(2, 24);\n    static DOUBLE_MULTIPLIER = 1 / Math.pow(2, 30);\n    seed = BigInt(0);\n    constructor(seed) {\n        this.setSeed(seed);\n    }\n    static fromLargeFeatureSeed(worldSeed, x, z) {\n        const random = new LegacyRandom(worldSeed);\n        const a = random.nextLong();\n        const b = random.nextLong();\n        const seed = BigInt(x) * a ^ BigInt(z) * b ^ worldSeed;\n        random.setSeed(seed);\n        return random;\n    }\n    static fromLargeFeatureWithSalt(worldSeed, x, z, salt) {\n        const seed = BigInt(x) * BigInt('341873128712') + BigInt(z) * BigInt('132897987541') + worldSeed + BigInt(salt);\n        return new LegacyRandom(seed);\n    }\n    fork() {\n        return new LegacyRandom(this.nextLong());\n    }\n    forkPositional() {\n        return new LegacyPositionalRandom(this.nextLong());\n    }\n    setSeed(seed) {\n        this.seed = (seed ^ LegacyRandom.MULTIPLIER) & LegacyRandom.MODULUS_MASK;\n    }\n    advance() {\n        this.seed = this.seed * LegacyRandom.MULTIPLIER + LegacyRandom.INCREMENT & LegacyRandom.MODULUS_MASK;\n    }\n    consume(count) {\n        for (let i = 0; i < count; i += 1) {\n            this.advance();\n        }\n    }\n    next(bits) {\n        this.advance();\n        const out = Number(this.seed >> BigInt(LegacyRandom.MODULUS_BITS - bits));\n        return out > 2147483647 ? out - 4294967296 : out;\n    }\n    nextInt(max) {\n        if (max === undefined) {\n            return this.next(32);\n        }\n        if ((max & max - 1) == 0) { // If max is a power of two\n            return Number(BigInt(max) * BigInt(this.next(31)) >> BigInt(31));\n        }\n        let a, b;\n        while ((a = this.next(31)) - (b = a % max) + (max - 1) < 0) { }\n        return b;\n    }\n    nextLong() {\n        return (BigInt(this.next(32)) << BigInt(32)) + BigInt(this.next(32));\n    }\n    nextFloat() {\n        return this.next(24) * LegacyRandom.FLOAT_MULTIPLIER;\n    }\n    nextDouble() {\n        const a = this.next(30);\n        this.advance();\n        return a * LegacyRandom.DOUBLE_MULTIPLIER;\n    }\n}\nexport class LegacyPositionalRandom {\n    seed;\n    constructor(seed) {\n        this.seed = seed;\n    }\n    at(x, y, z) {\n        const seed = getSeed(x, y, z);\n        return new LegacyRandom(seed ^ this.seed);\n    }\n    fromHashOf(name) {\n        const hash = md5(name, { asBytes: true });\n        const seed = longfromBytes(hash[0], hash[1], hash[2], hash[3], hash[4], hash[5], hash[6], hash[7]);\n        return new LegacyRandom(seed ^ this.seed);\n    }\n    seedKey() {\n        return [this.seed, BigInt(0)];\n    }\n}\n//# sourceMappingURL=LegacyRandom.js.map","import md5 from 'md5';\nimport { getSeed, longfromBytes } from '../Util.js';\nexport class XoroshiroRandom {\n    static SILVER_RATIO_64 = BigInt('7640891576956012809');\n    static GOLDEN_RATIO_64 = BigInt('-7046029254386353131');\n    static FLOAT_MULTIPLIER = 1 / Math.pow(2, 24);\n    static DOUBLE_MULTIPLIER = 1.1102230246251565E-16;\n    static BIGINT_1 = BigInt(1);\n    static BIGINT_17 = BigInt(17);\n    static BIGINT_21 = BigInt(21);\n    static BIGINT_27 = BigInt(27);\n    static BIGINT_28 = BigInt(28);\n    static BIGINT_30 = BigInt(30);\n    static BIGINT_31 = BigInt(31);\n    static BIGINT_32 = BigInt(32);\n    static BIGINT_49 = BigInt(49);\n    static BIGINT_64 = BigInt(64);\n    static STAFFORD_1 = BigInt('-4658895280553007687');\n    static STAFFORD_2 = BigInt('-7723592293110705685');\n    static MAX_ULONG = BigInt('0xFFFFFFFFFFFFFFFF');\n    static POW2_60 = BigInt('0x10000000000000000');\n    static POW2_63 = BigInt('0x8000000000000000');\n    static MAX_UINT = BigInt(0xFFFFFFFF);\n    seed = [BigInt(0), BigInt(0)];\n    constructor(seed) {\n        this.seed = seed;\n    }\n    static create(seed) {\n        return new XoroshiroRandom(XoroshiroRandom.upgradeSeedTo128bit(seed));\n    }\n    static mixStafford13(value) {\n        value = ((value ^ value >> XoroshiroRandom.BIGINT_30) * XoroshiroRandom.STAFFORD_1) & XoroshiroRandom.MAX_ULONG;\n        value = ((value ^ value >> XoroshiroRandom.BIGINT_27) * XoroshiroRandom.STAFFORD_2) & XoroshiroRandom.MAX_ULONG;\n        return (value ^ value >> XoroshiroRandom.BIGINT_31) & XoroshiroRandom.MAX_ULONG;\n    }\n    static upgradeSeedTo128bit(seed) {\n        if (seed < 0) {\n            seed += XoroshiroRandom.POW2_60;\n        }\n        const seedLo = seed ^ XoroshiroRandom.SILVER_RATIO_64;\n        const seedHi = (seedLo + XoroshiroRandom.GOLDEN_RATIO_64) & XoroshiroRandom.MAX_ULONG;\n        return [XoroshiroRandom.mixStafford13(seedLo), XoroshiroRandom.mixStafford13(seedHi)];\n    }\n    static rotateLeft(value, shift) {\n        return (value << shift) & (XoroshiroRandom.MAX_ULONG) | (value >> (XoroshiroRandom.BIGINT_64 - shift));\n    }\n    setSeed(seed) {\n        this.seed = XoroshiroRandom.upgradeSeedTo128bit(seed);\n    }\n    fork() {\n        return new XoroshiroRandom([this.next(), this.next()]);\n    }\n    forkPositional() {\n        return new XoroshiroPositionalRandom(this.next(), this.next());\n    }\n    next() {\n        const seedLo = this.seed[0];\n        let seedHi = this.seed[1];\n        const value = (XoroshiroRandom.rotateLeft((seedLo + seedHi) & XoroshiroRandom.MAX_ULONG, XoroshiroRandom.BIGINT_17) + seedLo) & XoroshiroRandom.MAX_ULONG;\n        seedHi ^= seedLo;\n        this.seed = [\n            XoroshiroRandom.rotateLeft(seedLo, XoroshiroRandom.BIGINT_49) ^ seedHi ^ ((seedHi << XoroshiroRandom.BIGINT_21) & XoroshiroRandom.MAX_ULONG),\n            XoroshiroRandom.rotateLeft(seedHi, XoroshiroRandom.BIGINT_28),\n        ];\n        return value;\n    }\n    nextLong() {\n        let value = this.next();\n        if (value > XoroshiroRandom.POW2_63)\n            value -= XoroshiroRandom.POW2_60;\n        return value;\n    }\n    consume(count) {\n        let seedLo = this.seed[0];\n        let seedHi = this.seed[1];\n        for (let i = 0; i < count; i += 1) {\n            seedHi ^= seedLo;\n            seedLo = XoroshiroRandom.rotateLeft(seedLo, XoroshiroRandom.BIGINT_49) ^ seedHi ^ seedHi << XoroshiroRandom.BIGINT_21;\n            seedHi = XoroshiroRandom.rotateLeft(seedHi, XoroshiroRandom.BIGINT_28);\n        }\n        this.seed = [seedLo, seedHi];\n    }\n    nextBits(bits) {\n        return this.next() >> (BigInt(64 - bits));\n    }\n    nextInt(max) {\n        let value = this.next() & XoroshiroRandom.MAX_UINT;\n        if (!max) {\n            let result = Number(value);\n            if (result >= 0x80000000) {\n                result -= 0x100000000;\n            }\n            return result;\n        }\n        else {\n            const maxBigint = BigInt(max);\n            let product = value * maxBigint;\n            let productLo = product & XoroshiroRandom.MAX_UINT;\n            if (productLo < maxBigint) {\n                const newMax = ((~maxBigint & XoroshiroRandom.MAX_UINT) + XoroshiroRandom.BIGINT_1) % maxBigint;\n                while (productLo < newMax) {\n                    value = this.next() & XoroshiroRandom.MAX_UINT;\n                    product = value * maxBigint;\n                    productLo = product & XoroshiroRandom.MAX_UINT;\n                }\n            }\n            const productHi = product >> XoroshiroRandom.BIGINT_32;\n            return Number(productHi);\n        }\n    }\n    nextFloat() {\n        return Number(this.nextBits(24)) * XoroshiroRandom.FLOAT_MULTIPLIER;\n    }\n    nextDouble() {\n        return Number(this.nextBits(53)) * XoroshiroRandom.DOUBLE_MULTIPLIER;\n    }\n    parityConfigString() {\n        return 'seedLo: ' + this.seed[0] + ', seedHi: ' + this.seed[1];\n    }\n}\nexport class XoroshiroPositionalRandom {\n    seedLo;\n    seedHi;\n    constructor(seedLo, seedHi) {\n        this.seedLo = seedLo;\n        this.seedHi = seedHi;\n    }\n    at(x, y, z) {\n        const positionSeed = getSeed(x, y, z);\n        const seedLo = positionSeed ^ this.seedLo;\n        return new XoroshiroRandom([seedLo, this.seedHi]);\n    }\n    fromHashOf(name) {\n        const hash = md5(name, { asBytes: true });\n        const lo = longfromBytes(hash[0], hash[1], hash[2], hash[3], hash[4], hash[5], hash[6], hash[7]);\n        const hi = longfromBytes(hash[8], hash[9], hash[10], hash[11], hash[12], hash[13], hash[14], hash[15]);\n        return new XoroshiroRandom([lo ^ this.seedLo, hi ^ this.seedHi]);\n    }\n    seedKey() {\n        return [this.seedLo, this.seedHi];\n    }\n}\n//# sourceMappingURL=XoroshiroRandom.js.map","export class SimplexNoise {\n    static GRADIENT = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, 1], [0, 1, -1], [0, -1, -1], [1, 1, 0], [0, -1, 1], [-1, 1, 0], [0, -1, -1]];\n    static F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n    static G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n    p;\n    xo;\n    yo;\n    zo;\n    constructor(random) {\n        this.xo = random.nextDouble() * 256;\n        this.yo = random.nextDouble() * 256;\n        this.zo = random.nextDouble() * 256;\n        this.p = Array(256);\n        for (let i = 0; i < 256; i += 1) {\n            this.p[i] = i;\n        }\n        for (let i = 0; i < 256; i += 1) {\n            const j = random.nextInt(256 - i);\n            const b = this.p[i];\n            this.p[i] = this.p[i + j];\n            this.p[i + j] = b;\n        }\n    }\n    sample2D(d, d2) {\n        let d3;\n        let n3;\n        let d4;\n        const d6 = (d + d2) * SimplexNoise.F2;\n        const n4 = Math.floor(d + d6);\n        const d7 = n4 - (d3 = (n4 + (n3 = Math.floor(d2 + d6))) * SimplexNoise.G2);\n        const d8 = d - d7;\n        let a;\n        let b;\n        if (d8 > (d4 = d2 - (n3 - d3))) {\n            a = 1;\n            b = 0;\n        }\n        else {\n            a = 0;\n            b = 1;\n        }\n        const d9 = d8 - a + SimplexNoise.G2;\n        const d10 = d4 - b + SimplexNoise.G2;\n        const d11 = d8 - 1.0 + 2.0 * SimplexNoise.G2;\n        const d12 = d4 - 1.0 + 2.0 * SimplexNoise.G2;\n        const n5 = n4 & 0xFF;\n        const n6 = n3 & 0xFF;\n        const n7 = this.P(n5 + this.P(n6)) % 12;\n        const n8 = this.P(n5 + a + this.P(n6 + b)) % 12;\n        const n9 = this.P(n5 + 1 + this.P(n6 + 1)) % 12;\n        const d13 = this.getCornerNoise3D(n7, d8, d4, 0.0, 0.5);\n        const d14 = this.getCornerNoise3D(n8, d9, d10, 0.0, 0.5);\n        const d15 = this.getCornerNoise3D(n9, d11, d12, 0.0, 0.5);\n        return 70.0 * (d13 + d14 + d15);\n    }\n    sample(x, y, z) {\n        const d5 = (x + y + z) * 0.3333333333333333;\n        const x2 = Math.floor(x + d5);\n        const y2 = Math.floor(y + d5);\n        const z2 = Math.floor(z + d5);\n        const d7 = (x2 + y2 + z2) * 0.16666666666666666;\n        const x3 = x - (x2 - d7);\n        const y3 = y - (y2 - d7);\n        const z3 = z - (z2 - d7);\n        let a;\n        let b;\n        let c;\n        let d;\n        let e;\n        let f;\n        if (x3 >= y3) {\n            if (y3 >= z3) {\n                a = 1;\n                b = 0;\n                c = 0;\n                d = 1;\n                e = 1;\n                f = 0;\n            }\n            else if (x3 >= z3) {\n                a = 1;\n                b = 0;\n                c = 0;\n                d = 1;\n                e = 0;\n                f = 1;\n            }\n            else {\n                a = 0;\n                b = 0;\n                c = 1;\n                d = 1;\n                e = 0;\n                f = 1;\n            }\n        }\n        else if (y3 < z3) {\n            a = 0;\n            b = 0;\n            c = 1;\n            d = 0;\n            e = 1;\n            f = 1;\n        }\n        else if (x3 < z3) {\n            a = 0;\n            b = 1;\n            c = 0;\n            d = 0;\n            e = 1;\n            f = 1;\n        }\n        else {\n            a = 0;\n            b = 1;\n            c = 0;\n            d = 1;\n            e = 1;\n            f = 0;\n        }\n        const x4 = x3 - a + 0.16666666666666666;\n        const y4 = y3 - b + 0.16666666666666666;\n        const z4 = z3 - c + 0.16666666666666666;\n        const x5 = x3 - d + 0.3333333333333333;\n        const y5 = y3 - e + 0.3333333333333333;\n        const z5 = z3 - f + 0.3333333333333333;\n        const x6 = x3 - 0.5;\n        const y6 = y3 - 0.5;\n        const z6 = z3 - 0.5;\n        const x7 = x2 & 0xFF;\n        const y7 = y2 & 0xFF;\n        const z7 = z2 & 0xFF;\n        const g = this.P(x7 + this.P(y7 + this.P(z7))) % 12;\n        const h = this.P(x7 + a + this.P(y7 + b + this.P(z7 + c))) % 12;\n        const i = this.P(x7 + d + this.P(y7 + e + this.P(z7 + f))) % 12;\n        const j = this.P(x7 + 1 + this.P(y7 + 1 + this.P(z7 + 1))) % 12;\n        const k = this.getCornerNoise3D(g, x3, y3, z3, 0.6);\n        const l = this.getCornerNoise3D(h, x4, y4, z4, 0.6);\n        const m = this.getCornerNoise3D(i, x5, y5, z5, 0.6);\n        const n = this.getCornerNoise3D(j, x6, y6, z6, 0.6);\n        return 32.0 * (k + l + m + n);\n    }\n    P(i) {\n        return this.p[i & 0xFF];\n    }\n    getCornerNoise3D(i, a, b, c, d) {\n        let f;\n        let e = d - a * a - b * b - c * c;\n        if (e < 0.0) {\n            f = 0.0;\n        }\n        else {\n            e *= e;\n            f = e * e * SimplexNoise.gradDot(i, a, b, c);\n        }\n        return f;\n    }\n    static gradDot(a, b, c, d) {\n        const grad = SimplexNoise.GRADIENT[a & 15];\n        return grad[0] * b + grad[1] * c + grad[2] * d;\n    }\n}\n//# sourceMappingURL=SimplexNoise.js.map","import { lerp3, smoothstep } from '../Util.js';\nimport { SimplexNoise } from './SimplexNoise.js';\nexport class ImprovedNoise {\n    p;\n    xo;\n    yo;\n    zo;\n    constructor(random) {\n        this.xo = random.nextDouble() * 256;\n        this.yo = random.nextDouble() * 256;\n        this.zo = random.nextDouble() * 256;\n        this.p = Array(256);\n        for (let i = 0; i < 256; i += 1) {\n            this.p[i] = i > 127 ? i - 256 : i;\n        }\n        for (let i = 0; i < 256; i += 1) {\n            const j = random.nextInt(256 - i);\n            const b = this.p[i];\n            this.p[i] = this.p[i + j];\n            this.p[i + j] = b;\n        }\n    }\n    sample(x, y, z, yScale = 0, yLimit = 0) {\n        const x2 = x + this.xo;\n        const y2 = y + this.yo;\n        const z2 = z + this.zo;\n        const x3 = Math.floor(x2);\n        const y3 = Math.floor(y2);\n        const z3 = Math.floor(z2);\n        const x4 = x2 - x3;\n        const y4 = y2 - y3;\n        const z4 = z2 - z3;\n        let y6 = 0;\n        if (yScale !== 0) {\n            const t = yLimit >= 0 && yLimit < y4 ? yLimit : y4;\n            y6 = Math.floor(t / yScale + 1e-7) * yScale;\n        }\n        return this.sampleAndLerp(x3, y3, z3, x4, y4 - y6, z4, y4);\n    }\n    sampleAndLerp(a, b, c, d, e, f, g) {\n        const h = this.P(a);\n        const i = this.P(a + 1);\n        const j = this.P(h + b);\n        const k = this.P(h + b + 1);\n        const l = this.P(i + b);\n        const m = this.P(i + b + 1);\n        const n = SimplexNoise.gradDot(this.P(j + c), d, e, f);\n        const o = SimplexNoise.gradDot(this.P(l + c), d - 1.0, e, f);\n        const p = SimplexNoise.gradDot(this.P(k + c), d, e - 1.0, f);\n        const q = SimplexNoise.gradDot(this.P(m + c), d - 1.0, e - 1.0, f);\n        const r = SimplexNoise.gradDot(this.P(j + c + 1), d, e, f - 1.0);\n        const s = SimplexNoise.gradDot(this.P(l + c + 1), d - 1.0, e, f - 1.0);\n        const t = SimplexNoise.gradDot(this.P(k + c + 1), d, e - 1.0, f - 1.0);\n        const u = SimplexNoise.gradDot(this.P(m + c + 1), d - 1.0, e - 1.0, f - 1.0);\n        const v = smoothstep(d);\n        const w = smoothstep(g);\n        const x = smoothstep(f);\n        return lerp3(v, w, x, n, o, p, q, r, s, t, u);\n    }\n    P(i) {\n        return this.p[i & 0xFF] & 0xFF;\n    }\n}\n//# sourceMappingURL=ImprovedNoise.js.map","import { XoroshiroRandom } from '../random/index.js';\nimport { ImprovedNoise } from './ImprovedNoise.js';\nexport class PerlinNoise {\n    noiseLevels;\n    amplitudes;\n    lowestFreqInputFactor;\n    lowestFreqValueFactor;\n    maxValue;\n    constructor(random, firstOctave, amplitudes) {\n        if (random instanceof XoroshiroRandom) {\n            const forkedRandom = random.forkPositional();\n            this.noiseLevels = Array(amplitudes.length);\n            for (let i = 0; i < amplitudes.length; i++) {\n                if (amplitudes[i] !== 0.0) {\n                    const octave = firstOctave + i;\n                    this.noiseLevels[i] = new ImprovedNoise(forkedRandom.fromHashOf('octave_' + octave));\n                }\n            }\n        }\n        else {\n            if (1 - firstOctave < amplitudes.length) {\n                throw new Error('Positive octaves are not allowed when using LegacyRandom');\n            }\n            this.noiseLevels = Array(amplitudes.length);\n            for (let i = -firstOctave; i >= 0; i -= 1) {\n                if (i < amplitudes.length && amplitudes[i] !== 0) {\n                    this.noiseLevels[i] = new ImprovedNoise(random);\n                }\n                else {\n                    random.consume(262);\n                }\n            }\n        }\n        this.amplitudes = amplitudes;\n        this.lowestFreqInputFactor = Math.pow(2, firstOctave);\n        this.lowestFreqValueFactor = Math.pow(2, (amplitudes.length - 1)) / (Math.pow(2, amplitudes.length) - 1);\n        this.maxValue = this.edgeValue(2);\n    }\n    sample(x, y, z, yScale = 0, yLimit = 0, fixY = false) {\n        let value = 0;\n        let inputF = this.lowestFreqInputFactor;\n        let valueF = this.lowestFreqValueFactor;\n        for (let i = 0; i < this.noiseLevels.length; i += 1) {\n            const noise = this.noiseLevels[i];\n            if (noise) {\n                value += this.amplitudes[i] * valueF * noise.sample(PerlinNoise.wrap(x * inputF), fixY ? -noise.yo : PerlinNoise.wrap(y * inputF), PerlinNoise.wrap(z * inputF), yScale * inputF, yLimit * inputF);\n            }\n            inputF *= 2;\n            valueF /= 2;\n        }\n        return value;\n    }\n    getOctaveNoise(i) {\n        return this.noiseLevels[this.noiseLevels.length - 1 - i];\n    }\n    edgeValue(x) {\n        let value = 0;\n        let valueF = this.lowestFreqValueFactor;\n        for (let i = 0; i < this.noiseLevels.length; i += 1) {\n            if (this.noiseLevels[i]) {\n                value += this.amplitudes[i] * x * valueF;\n            }\n            valueF /= 2;\n        }\n        return value;\n    }\n    static wrap(value) {\n        return value - Math.floor(value / 3.3554432E7 + 0.5) * 3.3554432E7;\n    }\n}\n//# sourceMappingURL=PerlinNoise.js.map","import { clampedLerp } from '../Util.js';\nimport { PerlinNoise } from './PerlinNoise.js';\nexport class BlendedNoise {\n    xzScale;\n    yScale;\n    xzFactor;\n    yFactor;\n    smearScaleMultiplier;\n    minLimitNoise;\n    maxLimitNoise;\n    mainNoise;\n    xzMultiplier;\n    yMultiplier;\n    maxValue;\n    constructor(random, xzScale, yScale, xzFactor, yFactor, smearScaleMultiplier) {\n        this.xzScale = xzScale;\n        this.yScale = yScale;\n        this.xzFactor = xzFactor;\n        this.yFactor = yFactor;\n        this.smearScaleMultiplier = smearScaleMultiplier;\n        this.minLimitNoise = new PerlinNoise(random, -15, [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]);\n        this.maxLimitNoise = new PerlinNoise(random, -15, [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]);\n        this.mainNoise = new PerlinNoise(random, -7, [1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0]);\n        this.xzMultiplier = 684.412 * xzScale;\n        this.yMultiplier = 684.412 * yScale;\n        this.maxValue = this.minLimitNoise.edgeValue(this.yScale + 2); //TODO\n    }\n    sample(x, y, z) {\n        const scaledX = x * this.xzMultiplier;\n        const scaledY = y * this.yMultiplier;\n        const scaledZ = z * this.xzMultiplier;\n        const factoredX = scaledX / this.xzFactor;\n        const factoredY = scaledY / this.yFactor;\n        const factoredZ = scaledZ / this.xzFactor;\n        const smear = this.yMultiplier * this.smearScaleMultiplier;\n        const factoredSmear = smear / this.yFactor;\n        let noise;\n        let value = 0;\n        let factor = 1;\n        for (let i = 0; i < 8; i += 1) {\n            noise = this.mainNoise.getOctaveNoise(i);\n            if (noise) {\n                const xx = PerlinNoise.wrap(factoredX * factor);\n                const yy = PerlinNoise.wrap(factoredY * factor);\n                const zz = PerlinNoise.wrap(factoredZ * factor);\n                value += noise.sample(xx, yy, zz, factoredSmear * factor, factoredY * factor) / factor;\n            }\n            factor /= 2;\n        }\n        value = (value / 10 + 1) / 2;\n        factor = 1;\n        let min = 0;\n        let max = 0;\n        for (let i = 0; i < 16; i += 1) {\n            const xx = PerlinNoise.wrap(scaledX * factor);\n            const yy = PerlinNoise.wrap(scaledY * factor);\n            const zz = PerlinNoise.wrap(scaledZ * factor);\n            const smearsmear = smear * factor;\n            if (value < 1 && (noise = this.minLimitNoise.getOctaveNoise(i))) {\n                min += noise.sample(xx, yy, zz, smearsmear, scaledY * factor) / factor;\n            }\n            if (value > 0 && (noise = this.maxLimitNoise.getOctaveNoise(i))) {\n                max += noise.sample(xx, yy, zz, smearsmear, scaledY * factor) / factor;\n            }\n            factor /= 2;\n        }\n        return clampedLerp(min / 512, max / 512, value) / 128;\n    }\n}\n//# sourceMappingURL=BlendedNoise.js.map","import { Json } from '../../util/index.js';\nimport { PerlinNoise } from './PerlinNoise.js';\nexport class NormalNoise {\n    static INPUT_FACTOR = 1.0181268882175227;\n    valueFactor;\n    first;\n    second;\n    maxValue;\n    constructor(random, { firstOctave, amplitudes }) {\n        this.first = new PerlinNoise(random, firstOctave, amplitudes);\n        this.second = new PerlinNoise(random, firstOctave, amplitudes);\n        let min = +Infinity;\n        let max = -Infinity;\n        for (let i = 0; i < amplitudes.length; i += 1) {\n            if (amplitudes[i] !== 0) {\n                min = Math.min(min, i);\n                max = Math.max(max, i);\n            }\n        }\n        const expectedDeviation = 0.1 * (1 + 1 / (max - min + 1));\n        this.valueFactor = (1 / 6) / expectedDeviation;\n        this.maxValue = (this.first.maxValue + this.second.maxValue) * this.valueFactor;\n    }\n    sample(x, y, z) {\n        const x2 = x * NormalNoise.INPUT_FACTOR;\n        const y2 = y * NormalNoise.INPUT_FACTOR;\n        const z2 = z * NormalNoise.INPUT_FACTOR;\n        return (this.first.sample(x, y, z) + this.second.sample(x2, y2, z2)) * this.valueFactor;\n    }\n}\nexport var NoiseParameters;\n(function (NoiseParameters) {\n    function create(firstOctave, amplitudes) {\n        return { firstOctave, amplitudes };\n    }\n    NoiseParameters.create = create;\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        return {\n            firstOctave: Json.readInt(root.firstOctave) ?? 0,\n            amplitudes: Json.readArray(root.amplitudes, e => Json.readNumber(e) ?? 0) ?? [],\n        };\n    }\n    NoiseParameters.fromJson = fromJson;\n})(NoiseParameters || (NoiseParameters = {}));\n//# sourceMappingURL=NormalNoise.js.map","import { SimplexNoise } from './SimplexNoise.js';\nexport class PerlinSimplexNoise {\n    noiseLevels;\n    highestFreqInputFactor;\n    highestFreqValueFactor;\n    constructor(random, octaves) {\n        const lastOctave = octaves[octaves.length - 1];\n        const negFirstOctave = -octaves[0];\n        const range = negFirstOctave + lastOctave + 1;\n        const octavesSet = new Set(octaves);\n        const noise = new SimplexNoise(random);\n        this.noiseLevels = Array(range);\n        if (lastOctave >= 0 && lastOctave < range && octavesSet.has(0)) {\n            this.noiseLevels[lastOctave] = noise;\n        }\n        for (let i = lastOctave + 1; i < range; i += 1) {\n            if (i >= 0 && octavesSet.has(lastOctave - i)) {\n                this.noiseLevels[i] = new SimplexNoise(random);\n            }\n            else {\n                random.consume(262);\n            }\n        }\n        if (lastOctave > 0) {\n            throw new Error('Positive octaves are not allowed');\n        }\n        this.highestFreqInputFactor = Math.pow(2, lastOctave);\n        this.highestFreqValueFactor = 1 / (Math.pow(2, range) - 1);\n    }\n    sample(x, y, useOffsets) {\n        let value = 0;\n        let inputF = this.highestFreqInputFactor;\n        let valueF = this.highestFreqValueFactor;\n        for (let i = 0; i < this.noiseLevels.length; i += 1) {\n            const noise = this.noiseLevels[i];\n            if (noise) {\n                value += valueF * noise.sample2D(x * inputF + (useOffsets ? noise.xo : 0), y * inputF + (useOffsets ? noise.yo : 0));\n            }\n            inputF /= 2;\n            valueF *= 2;\n        }\n        return value;\n    }\n}\n//# sourceMappingURL=PerlinSimplexNoise.js.map","import { clamp } from '../math/index.js';\nimport { intToRgb } from '../util/index.js';\nconst grass = [124 / 255, 189 / 255, 107 / 255];\nconst spruce = intToRgb(6396257);\nconst birch = intToRgb(8431445);\nconst foliage = intToRgb(4764952);\nconst water = intToRgb(4159204);\nconst attached_stem = intToRgb(8431445);\nconst lily_pad = intToRgb(2129968);\nconst redstone = (power) => {\n    const a = power / 15;\n    const r = a * 0.6 + (a > 0 ? 0.4 : 0.3);\n    const g = clamp(a * a * 0.7 - 0.5, 0, 1);\n    const b = clamp(a * a * 0.6 - 0.7, 0, 1);\n    return [r, g, b];\n};\nconst stem = (age) => {\n    return [age / 8, 1 - age / 32, age * 64];\n};\nexport const BlockColors = {\n    large_fern: () => grass,\n    tall_grass: () => grass,\n    grass_block: () => grass,\n    fern: () => grass,\n    grass: () => grass,\n    potted_fern: () => grass,\n    spruce_leaves: () => spruce,\n    birch_leaves: () => birch,\n    oak_leaves: () => foliage,\n    jungle_leaves: () => foliage,\n    acacia_leaves: () => foliage,\n    dark_oak_leaves: () => foliage,\n    vine: () => foliage,\n    mangrove_leaves: () => foliage,\n    water: () => water,\n    bubble_column: () => water,\n    cauldron: () => water,\n    water_cauldron: () => water,\n    redstone_wire: (props) => redstone(parseInt(props['power'] ?? '0')),\n    sugar_cane: () => grass,\n    attached_melon_stem: () => attached_stem,\n    attached_pumpkin_stem: () => attached_stem,\n    melon_stem: (props) => stem(parseInt(props['age'] ?? '0')),\n    pumpkin_stem: (props) => stem(parseInt(props['age'] ?? '0')),\n    lily_pad: () => lily_pad,\n};\n//# sourceMappingURL=BlockColors.js.map","export var Cull;\n(function (Cull) {\n    function rotate(cull, x, y) {\n        let { up, down, north, east, south, west } = cull;\n        switch (y) {\n            case 90:\n                [north, east, south, west] = [east, south, west, north];\n                break;\n            case 180:\n                [north, east, south, west] = [south, west, north, east];\n                break;\n            case 270:\n                [north, east, south, west] = [west, north, east, south];\n        }\n        switch (x) {\n            case 90:\n                [up, north, down, south] = [north, down, south, up];\n                break;\n            case 180:\n                [up, north, down, south] = [down, south, up, north];\n                break;\n            case 270:\n                [up, north, down, south] = [south, up, north, down];\n        }\n        return { up, down, north, east, south, west };\n    }\n    Cull.rotate = rotate;\n    function none() {\n        return Object.create(null);\n    }\n    Cull.none = none;\n})(Cull || (Cull = {}));\n//# sourceMappingURL=Cull.js.map","import { vec3 } from 'gl-matrix';\nimport { Vector } from '../math/index.js';\nexport class Vertex {\n    pos;\n    color;\n    texture;\n    normal;\n    blockPos;\n    static VEC = vec3.create();\n    constructor(pos, color, texture, normal, blockPos) {\n        this.pos = pos;\n        this.color = color;\n        this.texture = texture;\n        this.normal = normal;\n        this.blockPos = blockPos;\n    }\n    transform(transformation) {\n        Vertex.VEC[0] = this.pos.x;\n        Vertex.VEC[1] = this.pos.y;\n        Vertex.VEC[2] = this.pos.z;\n        vec3.transformMat4(Vertex.VEC, Vertex.VEC, transformation);\n        this.pos = new Vector(Vertex.VEC[0], Vertex.VEC[1], Vertex.VEC[2]);\n        return this;\n    }\n    static fromPos(pos) {\n        return new Vertex(pos, [0, 0, 0], [0, 0], undefined, undefined);\n    }\n}\n//# sourceMappingURL=Vertex.js.map","import { Vertex } from './Vertex.js';\nexport class Line {\n    v1;\n    v2;\n    constructor(v1, v2) {\n        this.v1 = v1;\n        this.v2 = v2;\n    }\n    vertices() {\n        return [this.v1, this.v2];\n    }\n    forEach(fn) {\n        fn(this.v1);\n        fn(this.v2);\n        return this;\n    }\n    transform(transformation) {\n        this.forEach(v => v.transform(transformation));\n        return this;\n    }\n    setColor(color) {\n        this.forEach(v => v.color = color);\n        return this;\n    }\n    toString() {\n        return `Line(${this.v1.pos.toString()}, ${this.v2.pos.toString()})`;\n    }\n    static fromPoints(p1, p2) {\n        return new Line(Vertex.fromPos(p1), Vertex.fromPos(p2));\n    }\n}\n//# sourceMappingURL=Line.js.map","import { Vector } from '../index.js';\nimport { Line } from './Line.js';\nimport { Vertex } from './Vertex.js';\nexport class Mesh {\n    quads;\n    lines;\n    posBuffer;\n    colorBuffer;\n    textureBuffer;\n    normalBuffer;\n    blockPosBuffer;\n    indexBuffer;\n    linePosBuffer;\n    lineColorBuffer;\n    constructor(quads = [], lines = []) {\n        this.quads = quads;\n        this.lines = lines;\n    }\n    clear() {\n        this.quads = [];\n        this.lines = [];\n        return this;\n    }\n    isEmpty() {\n        return this.quads.length === 0 && this.lines.length === 0;\n    }\n    quadVertices() {\n        return this.quads.length * 4;\n    }\n    quadIndices() {\n        return this.quads.length * 6;\n    }\n    lineVertices() {\n        return this.lines.length * 2;\n    }\n    merge(other) {\n        this.quads = this.quads.concat(other.quads);\n        this.lines = this.lines.concat(other.lines);\n        return this;\n    }\n    addLine(x1, y1, z1, x2, y2, z2, color) {\n        const line = new Line(Vertex.fromPos(new Vector(x1, y1, z1)), Vertex.fromPos(new Vector(x2, y2, z2))).setColor(color);\n        this.lines.push(line);\n        return this;\n    }\n    addLineCube(x1, y1, z1, x2, y2, z2, color) {\n        this.addLine(x1, y1, z1, x1, y1, z2, color);\n        this.addLine(x2, y1, z1, x2, y1, z2, color);\n        this.addLine(x1, y1, z1, x2, y1, z1, color);\n        this.addLine(x1, y1, z2, x2, y1, z2, color);\n        this.addLine(x1, y1, z1, x1, y2, z1, color);\n        this.addLine(x2, y1, z1, x2, y2, z1, color);\n        this.addLine(x1, y1, z2, x1, y2, z2, color);\n        this.addLine(x2, y1, z2, x2, y2, z2, color);\n        this.addLine(x1, y2, z1, x1, y2, z2, color);\n        this.addLine(x2, y2, z1, x2, y2, z2, color);\n        this.addLine(x1, y2, z1, x2, y2, z1, color);\n        this.addLine(x1, y2, z2, x2, y2, z2, color);\n        return this;\n    }\n    transform(transformation) {\n        for (const quad of this.quads) {\n            quad.transform(transformation);\n        }\n        return this;\n    }\n    rebuild(gl, options) {\n        const rebuildBuffer = (buffer, type, data) => {\n            if (!buffer) {\n                buffer = gl.createBuffer() ?? undefined;\n            }\n            if (!buffer) {\n                throw new Error('Cannot create new buffer');\n            }\n            gl.bindBuffer(type, buffer);\n            gl.bufferData(type, data, gl.DYNAMIC_DRAW);\n            return buffer;\n        };\n        const rebuildBufferV = (array, buffer, mapper) => {\n            if (array.length === 0) {\n                if (buffer)\n                    gl.deleteBuffer(buffer);\n                return undefined;\n            }\n            const data = array.flatMap(e => e.vertices().flatMap(v => {\n                const data = mapper(v);\n                if (!data)\n                    throw new Error('Missing vertex component');\n                return data;\n            }));\n            return rebuildBuffer(buffer, gl.ARRAY_BUFFER, new Float32Array(data));\n        };\n        if (options.pos) {\n            this.posBuffer = rebuildBufferV(this.quads, this.posBuffer, v => v.pos.components());\n            this.linePosBuffer = rebuildBufferV(this.lines, this.linePosBuffer, v => v.pos.components());\n        }\n        if (options.color) {\n            this.colorBuffer = rebuildBufferV(this.quads, this.colorBuffer, v => v.color);\n            this.lineColorBuffer = rebuildBufferV(this.lines, this.lineColorBuffer, v => v.color);\n        }\n        if (options.texture) {\n            this.textureBuffer = rebuildBufferV(this.quads, this.textureBuffer, v => v.texture);\n        }\n        if (options.normal) {\n            this.normalBuffer = rebuildBufferV(this.quads, this.normalBuffer, v => v.normal?.components());\n        }\n        if (options.blockPos) {\n            this.blockPosBuffer = rebuildBufferV(this.quads, this.blockPosBuffer, v => v.blockPos?.components());\n        }\n        if (this.quads.length === 0) {\n            if (this.indexBuffer)\n                gl.deleteBuffer(this.indexBuffer);\n            this.indexBuffer = undefined;\n        }\n        else {\n            this.indexBuffer = rebuildBuffer(this.indexBuffer, gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.quads.flatMap((_, i) => [4 * i, 4 * i + 1, 4 * i + 2, i * 4, 4 * i + 2, 4 * i + 3], true)));\n        }\n        return this;\n    }\n}\n//# sourceMappingURL=Mesh.js.map","import { glMatrix, mat4 } from 'gl-matrix';\nimport { Identifier } from '../core/index.js';\nimport { BlockColors } from './BlockColors.js';\nimport { Cull } from './Cull.js';\nimport { Mesh } from './Mesh.js';\nexport class BlockDefinition {\n    id;\n    variants;\n    multipart;\n    constructor(id, variants, multipart) {\n        this.id = id;\n        this.variants = variants;\n        this.multipart = multipart;\n        this.variants = variants;\n    }\n    getModelVariants(props) {\n        if (this.variants) {\n            const matches = Object.keys(this.variants).filter(v => this.matchesVariant(v, props));\n            if (matches.length === 0)\n                return [];\n            const variant = this.variants[matches[0]];\n            return [Array.isArray(variant) ? variant[0] : variant];\n        }\n        else if (this.multipart) {\n            const matches = this.multipart.filter(p => p.when ? this.matchesCase(p.when, props) : true);\n            return matches.map(p => Array.isArray(p.apply) ? p.apply[0] : p.apply);\n        }\n        return [];\n    }\n    getMesh(name, props, textureUVProvider, blockModelProvider, cull) {\n        const variants = this.getModelVariants(props);\n        const mesh = new Mesh();\n        for (const variant of variants) {\n            const newCull = Cull.rotate(cull, variant.x ?? 0, variant.y ?? 0);\n            const blockModel = blockModelProvider.getBlockModel(Identifier.parse(variant.model));\n            if (!blockModel) {\n                throw new Error(`Cannot find block model ${variant.model}`);\n            }\n            const tint = BlockColors[name.path]?.(props);\n            const variantMesh = blockModel.getMesh(textureUVProvider, newCull, tint);\n            if (variant.x || variant.y) {\n                const t = mat4.create();\n                mat4.identity(t);\n                mat4.translate(t, t, [8, 8, 8]);\n                mat4.rotateY(t, t, -glMatrix.toRadian(variant.y ?? 0));\n                mat4.rotateX(t, t, -glMatrix.toRadian(variant.x ?? 0));\n                mat4.translate(t, t, [-8, -8, -8]);\n                variantMesh.transform(t);\n            }\n            mesh.merge(variantMesh);\n        }\n        const t = mat4.create();\n        mat4.identity(t);\n        mat4.scale(t, t, [0.0625, 0.0625, 0.0625]);\n        return mesh.transform(t);\n    }\n    matchesVariant(variant, props) {\n        return variant.split(',').every(p => {\n            const [k, v] = p.split('=');\n            return props[k] === v;\n        });\n    }\n    matchesCase(condition, props) {\n        if (Array.isArray(condition.OR)) {\n            return condition.OR.some(c => this.matchesCase(c, props));\n        }\n        const states = condition;\n        return Object.keys(states).every(k => {\n            const values = states[k].split('|');\n            return values.includes(props[k]);\n        });\n    }\n    static fromJson(id, data) {\n        return new BlockDefinition(Identifier.parse(id), data.variants, data.multipart);\n    }\n}\n//# sourceMappingURL=BlockDefinition.js.map","import { Vertex } from './Vertex.js';\nexport class Quad {\n    v1;\n    v2;\n    v3;\n    v4;\n    constructor(v1, v2, v3, v4) {\n        this.v1 = v1;\n        this.v2 = v2;\n        this.v3 = v3;\n        this.v4 = v4;\n    }\n    vertices() {\n        return [this.v1, this.v2, this.v3, this.v4];\n    }\n    forEach(fn) {\n        fn(this.v1);\n        fn(this.v2);\n        fn(this.v3);\n        fn(this.v4);\n        return this;\n    }\n    transform(transformation) {\n        this.forEach(v => v.transform(transformation));\n        return this;\n    }\n    normal() {\n        const e1 = this.v2.pos.sub(this.v1.pos);\n        const e2 = this.v3.pos.sub(this.v1.pos);\n        return e1.cross(e2).normalize();\n    }\n    reverse() {\n        [this.v1, this.v2, this.v3, this.v4] = [this.v4, this.v3, this.v2, this.v1];\n        return this;\n    }\n    setColor(color) {\n        this.forEach(v => v.color = color);\n        return this;\n    }\n    setTexture(texture) {\n        this.v1.texture = [texture[0], texture[1]];\n        this.v2.texture = [texture[2], texture[3]];\n        this.v3.texture = [texture[4], texture[5]];\n        this.v4.texture = [texture[6], texture[7]];\n        return this;\n    }\n    toString() {\n        return `Quad(${this.v1.pos.toString()}, ${this.v2.pos.toString()}, ${this.v3.pos.toString()}, ${this.v4.pos.toString()})`;\n    }\n    static fromPoints(p1, p2, p3, p4) {\n        return new Quad(Vertex.fromPos(p1), Vertex.fromPos(p2), Vertex.fromPos(p3), Vertex.fromPos(p4));\n    }\n}\n//# sourceMappingURL=Quad.js.map","import { glMatrix, mat4, vec3 } from 'gl-matrix';\nimport { Identifier } from '../core/index.js';\nimport { Vector } from '../math/index.js';\nimport { Cull } from './Cull.js';\nimport { Mesh } from './Mesh.js';\nimport { Quad } from './Quad.js';\nconst faceRotations = {\n    0: [0, 3, 2, 3, 2, 1, 0, 1],\n    90: [2, 3, 2, 1, 0, 1, 0, 3],\n    180: [2, 1, 0, 1, 0, 3, 2, 3],\n    270: [0, 1, 0, 3, 2, 3, 2, 1],\n};\nconst rotationAxis = {\n    x: [1, 0, 0],\n    y: [0, 1, 0],\n    z: [0, 0, 1],\n};\nconst SQRT2 = 1.41421356237;\nconst rescaleAxis = {\n    x: [1, SQRT2, SQRT2],\n    y: [SQRT2, 1, SQRT2],\n    z: [SQRT2, SQRT2, 1],\n};\nexport class BlockModel {\n    id;\n    parent;\n    textures;\n    elements;\n    display;\n    guiLight;\n    static BUILTIN_GENERATED = Identifier.create('builtin/generated');\n    static GENERATED_LAYERS = ['layer0', 'layer1', 'layer2', 'layer3', 'layer4'];\n    generationMarker = false;\n    constructor(id, parent, textures, elements, display, guiLight) {\n        this.id = id;\n        this.parent = parent;\n        this.textures = textures;\n        this.elements = elements;\n        this.display = display;\n        this.guiLight = guiLight;\n    }\n    getDisplayMesh(display, uvProvider, tint) {\n        const mesh = this.getMesh(uvProvider, Cull.none(), tint);\n        const transform = this.display?.[display];\n        const t = mat4.create();\n        mat4.identity(t);\n        mat4.translate(t, t, [8, 8, 8]);\n        if (transform?.translation) {\n            mat4.translate(t, t, transform.translation);\n        }\n        if (transform?.rotation) {\n            mat4.rotateX(t, t, transform.rotation[0] * Math.PI / 180);\n            mat4.rotateY(t, t, transform.rotation[1] * Math.PI / 180);\n            mat4.rotateZ(t, t, -transform.rotation[2] * Math.PI / 180);\n        }\n        if (transform?.scale) {\n            mat4.scale(t, t, transform.scale);\n        }\n        mat4.translate(t, t, [-8, -8, -8]);\n        mesh.transform(t);\n        return mesh;\n    }\n    getMesh(uvProvider, cull, tint) {\n        const mesh = new Mesh();\n        const getTint = (index) => {\n            if (tint === undefined)\n                return [1, 1, 1];\n            if (index === undefined || index < 0)\n                return [1, 1, 1];\n            if (typeof tint === 'function')\n                return tint(index);\n            return tint;\n        };\n        for (const e of this.elements ?? []) {\n            mesh.merge(this.getElementMesh(e, uvProvider, cull, getTint));\n        }\n        return mesh;\n    }\n    getElementMesh(e, uvProvider, cull, getTint) {\n        const mesh = new Mesh();\n        const [x0, y0, z0] = e.from;\n        const [x1, y1, z1] = e.to;\n        const addFace = (face, uv, pos) => {\n            const quad = Quad.fromPoints(new Vector(pos[0], pos[1], pos[2]), new Vector(pos[3], pos[4], pos[5]), new Vector(pos[6], pos[7], pos[8]), new Vector(pos[9], pos[10], pos[11]));\n            const tint = getTint(face.tintindex);\n            quad.setColor(tint);\n            const [u0, v0, u1, v1] = uvProvider.getTextureUV(this.getTexture(face.texture));\n            const du = (u1 - u0) / 16;\n            const dv = (v1 - v0) / 16;\n            const duu = du / 16;\n            const dvv = dv / 16;\n            uv[0] = (face.uv?.[0] ?? uv[0]) * du + duu;\n            uv[1] = (face.uv?.[1] ?? uv[1]) * dv + dvv;\n            uv[2] = (face.uv?.[2] ?? uv[2]) * du - duu;\n            uv[3] = (face.uv?.[3] ?? uv[3]) * dv - dvv;\n            const r = faceRotations[face.rotation ?? 0];\n            quad.setTexture([\n                u0 + uv[r[0]], v0 + uv[r[1]],\n                u0 + uv[r[2]], v0 + uv[r[3]],\n                u0 + uv[r[4]], v0 + uv[r[5]],\n                u0 + uv[r[6]], v0 + uv[r[7]]\n            ]);\n            mesh.quads.push(quad);\n        };\n        if (e.faces?.up?.texture && (!e.faces.up.cullface || !cull[e.faces.up.cullface])) {\n            addFace(e.faces.up, [x0, 16 - z1, x1, 16 - z0], [x0, y1, z1, x1, y1, z1, x1, y1, z0, x0, y1, z0]);\n        }\n        if (e.faces?.down?.texture && (!e.faces.down.cullface || !cull[e.faces.down.cullface])) {\n            addFace(e.faces.down, [16 - z1, 16 - x1, 16 - z0, 16 - x0], [x0, y0, z0, x1, y0, z0, x1, y0, z1, x0, y0, z1]);\n        }\n        if (e.faces?.south?.texture && (!e.faces.south.cullface || !cull[e.faces.south.cullface])) {\n            addFace(e.faces.south, [x0, 16 - y1, x1, 16 - y0], [x0, y0, z1, x1, y0, z1, x1, y1, z1, x0, y1, z1]);\n        }\n        if (e.faces?.north?.texture && (!e.faces.north.cullface || !cull[e.faces.north.cullface])) {\n            addFace(e.faces.north, [16 - x1, 16 - y1, 16 - x0, 16 - y0], [x1, y0, z0, x0, y0, z0, x0, y1, z0, x1, y1, z0]);\n        }\n        if (e.faces?.east?.texture && (!e.faces.east.cullface || !cull[e.faces.east.cullface])) {\n            addFace(e.faces.east, [16 - z1, 16 - y1, 16 - z0, 16 - y0], [x1, y0, z1, x1, y0, z0, x1, y1, z0, x1, y1, z1]);\n        }\n        if (e.faces?.west?.texture && (!e.faces.west.cullface || !cull[e.faces.west.cullface])) {\n            addFace(e.faces.west, [z0, 16 - y1, z1, 16 - y0], [x0, y0, z0, x0, y0, z1, x0, y1, z1, x0, y1, z0]);\n        }\n        const t = mat4.create();\n        mat4.identity(t);\n        if (e.rotation) {\n            const origin = vec3.fromValues(...e.rotation.origin);\n            mat4.translate(t, t, origin);\n            mat4.rotate(t, t, glMatrix.toRadian(e.rotation.angle), rotationAxis[e.rotation.axis]);\n            if (e.rotation.rescale) {\n                mat4.scale(t, t, rescaleAxis[e.rotation.axis]);\n            }\n            vec3.negate(origin, origin);\n            mat4.translate(t, t, origin);\n        }\n        return mesh.transform(t);\n    }\n    getTexture(textureRef) {\n        while (textureRef.startsWith('#')) {\n            textureRef = this.textures?.[textureRef.slice(1)] ?? '';\n        }\n        return Identifier.parse(textureRef);\n    }\n    flatten(accessor) {\n        if (!this.parent) {\n            return;\n        }\n        if (this.parent.equals(BlockModel.BUILTIN_GENERATED)) {\n            this.generationMarker = true;\n            return;\n        }\n        const parent = this.getParent(accessor);\n        if (!parent) {\n            console.warn(`parent ${this.parent} does not exist!`);\n            this.parent = undefined;\n            return;\n        }\n        parent.flatten(accessor);\n        if (!this.elements) {\n            this.elements = parent.elements;\n        }\n        if (!this.textures) {\n            this.textures = {};\n        }\n        Object.keys(parent.textures ?? {}).forEach(t => {\n            if (!this.textures[t]) {\n                this.textures[t] = parent.textures[t];\n            }\n        });\n        if (!this.display) {\n            this.display = {};\n        }\n        Object.keys(parent.display ?? {}).forEach(k => {\n            const l = k;\n            if (!this.display[l]) {\n                this.display[l] = parent.display[l];\n            }\n            else {\n                Object.keys(parent.display[l] ?? {}).forEach(m => {\n                    const n = m;\n                    if (!this.display[l][n]) {\n                        this.display[l][n] = parent.display[l][n];\n                    }\n                });\n            }\n        });\n        if (!this.guiLight) {\n            this.guiLight = parent.guiLight;\n        }\n        if (parent.generationMarker) {\n            this.generationMarker = true;\n        }\n        if (this.generationMarker && (this.elements?.length ?? 0) === 0) {\n            for (let i = 0; i < BlockModel.GENERATED_LAYERS.length; i += 1) {\n                const layer = BlockModel.GENERATED_LAYERS[i];\n                if (!Object.hasOwn(this.textures, layer)) {\n                    break;\n                }\n                if (!this.elements) {\n                    this.elements = [];\n                }\n                this.elements.push({\n                    from: [0, 0, 0],\n                    to: [16, 16, 0],\n                    faces: { south: { texture: `#${layer}`, tintindex: i } },\n                });\n            }\n        }\n        this.parent = undefined;\n    }\n    getParent(accessor) {\n        if (!this.parent)\n            return null;\n        return accessor.getBlockModel(this.parent);\n    }\n    static fromJson(id, data) {\n        const parent = data.parent === undefined ? undefined : Identifier.parse(data.parent);\n        return new BlockModel(Identifier.parse(id), parent, data.textures, data.elements, data.display);\n    }\n}\n//# sourceMappingURL=BlockModel.js.map","import { Direction, Identifier } from '../core/index.js';\nimport { BlockDefinition } from './BlockDefinition.js';\nimport { BlockModel } from './BlockModel.js';\nfunction dummy(id, uvProvider, cull, model) {\n    const definition = new BlockDefinition(id, { '': { model: 'dummy' } }, undefined);\n    const modelProvider = { getBlockModel: () => model };\n    model.flatten(modelProvider);\n    return definition.getMesh(id, {}, uvProvider, modelProvider, cull);\n}\nfunction liquidRenderer(type, level, uvProvider, cull, tintindex) {\n    const y = cull['up'] ? 16 : [14.2, 12.5, 10.5, 9, 7, 5.3, 3.7, 1.9, 16, 16, 16, 16, 16, 16, 16, 16][level];\n    const id = Identifier.create(type);\n    return dummy(id, uvProvider, cull, new BlockModel(id, undefined, {\n        still: `block/${type}_still`,\n        flow: `block/${type}_flow`,\n    }, [{\n            from: [0, 0, 0],\n            to: [16, y, 16],\n            faces: {\n                up: { texture: '#still', tintindex, cullface: Direction.UP },\n                down: { texture: '#still', tintindex, cullface: Direction.DOWN },\n                north: { texture: '#flow', tintindex, cullface: Direction.NORTH },\n                east: { texture: '#flow', tintindex, cullface: Direction.EAST },\n                south: { texture: '#flow', tintindex, cullface: Direction.SOUTH },\n                west: { texture: '#flow', tintindex, cullface: Direction.WEST },\n            },\n        }]));\n}\nfunction chestRenderer(facing, type, uvProvider) {\n    const id = Identifier.create('chest');\n    return dummy(id, uvProvider, {}, new BlockModel(id, undefined, {\n        0: 'block/chest',\n    }, [{\n            from: [1, 0, 1],\n            to: [15, 14, 15],\n            faces: {\n                up: { texture: '#0' },\n                down: { texture: '#0' },\n                north: { texture: '#0' },\n                east: { texture: '#0' },\n                south: { texture: '#0' },\n                west: { texture: '#0' },\n            },\n        }]));\n}\nexport const SpecialRenderer = {\n    'minecraft:water': (props, uvProvider, cull) => liquidRenderer('water', parseInt(props.level), uvProvider, cull, 0),\n    'minecraft:lava': (props, uvProvider, cull) => liquidRenderer('lava', parseInt(props.level), uvProvider, cull),\n    'minecraft:chest': (props, uvProvider) => chestRenderer(props.facing || 'south', props.type || 'single', uvProvider),\n};\nexport const SpecialRenderers = new Set(Object.keys(SpecialRenderer));\n//# sourceMappingURL=SpecialRenderer.js.map","import { mat4, vec3 } from 'gl-matrix';\nimport { BlockPos, Direction, Vector } from '../index.js';\nimport { Mesh } from './Mesh.js';\nimport { SpecialRenderer, SpecialRenderers } from './SpecialRenderer.js';\nexport class ChunkBuilder {\n    gl;\n    structure;\n    resources;\n    chunks = [];\n    chunkSize;\n    constructor(gl, structure, resources, chunkSize = 16) {\n        this.gl = gl;\n        this.structure = structure;\n        this.resources = resources;\n        this.chunkSize = typeof chunkSize === 'number' ? [chunkSize, chunkSize, chunkSize] : chunkSize;\n        this.updateStructureBuffers();\n    }\n    setStructure(structure) {\n        this.structure = structure;\n        this.updateStructureBuffers();\n    }\n    updateStructureBuffers(chunkPositions) {\n        if (!chunkPositions) {\n            this.chunks.forEach(x => x.forEach(y => y.forEach(chunk => {\n                chunk.clear();\n            })));\n        }\n        else {\n            chunkPositions.forEach(chunkPos => {\n                this.getChunk(chunkPos).clear();\n            });\n        }\n        for (const b of this.structure.getBlocks()) {\n            const blockName = b.state.getName();\n            const blockProps = b.state.getProperties();\n            const defaultProps = this.resources.getDefaultBlockProperties(blockName) ?? {};\n            Object.entries(defaultProps).forEach(([k, v]) => {\n                if (!blockProps[k])\n                    blockProps[k] = v;\n            });\n            const chunkPos = [Math.floor(b.pos[0] / this.chunkSize[0]), Math.floor(b.pos[1] / this.chunkSize[1]), Math.floor(b.pos[2] / this.chunkSize[2])];\n            if (chunkPositions && !chunkPositions.some(pos => vec3.equals(pos, chunkPos)))\n                continue;\n            const chunk = this.getChunk(chunkPos);\n            try {\n                const blockDefinition = this.resources.getBlockDefinition(blockName);\n                const cull = {\n                    up: this.needsCull(b, Direction.UP),\n                    down: this.needsCull(b, Direction.DOWN),\n                    west: this.needsCull(b, Direction.WEST),\n                    east: this.needsCull(b, Direction.EAST),\n                    north: this.needsCull(b, Direction.NORTH),\n                    south: this.needsCull(b, Direction.SOUTH),\n                };\n                const mesh = new Mesh();\n                if (blockDefinition) {\n                    mesh.merge(blockDefinition.getMesh(blockName, blockProps, this.resources, this.resources, cull));\n                }\n                if (SpecialRenderers.has(blockName.toString())) {\n                    mesh.merge(SpecialRenderer[blockName.toString()](blockProps, this.resources, cull));\n                }\n                if (!mesh.isEmpty()) {\n                    this.finishChunkMesh(mesh, b.pos);\n                    chunk.merge(mesh);\n                }\n            }\n            catch (e) {\n                console.error(`Error rendering block ${blockName}`, e);\n            }\n        }\n        if (!chunkPositions) {\n            this.chunks.forEach(x => x.forEach(y => y.forEach(chunk => {\n                chunk.rebuild(this.gl, { pos: true, color: true, texture: true, normal: true, blockPos: true });\n            })));\n        }\n        else {\n            chunkPositions.forEach(chunkPos => {\n                this.getChunk(chunkPos).rebuild(this.gl, { pos: true, color: true, texture: true, normal: true, blockPos: true });\n            });\n        }\n    }\n    getMeshes() {\n        return this.chunks.flatMap(x => x.flatMap(y => y.flatMap(chunk => chunk ?? [])));\n    }\n    needsCull(block, dir) {\n        const neighbor = this.structure.getBlock(BlockPos.towards(block.pos, dir))?.state;\n        if (!neighbor)\n            return false;\n        if (this.resources.getBlockFlags(neighbor.getName())?.opaque) {\n            return !(dir === Direction.UP && block.state.isFluid());\n        }\n        else {\n            return block.state.isFluid() && neighbor.isFluid();\n        }\n    }\n    finishChunkMesh(mesh, pos) {\n        const t = mat4.create();\n        mat4.translate(t, t, pos);\n        mesh.transform(t);\n        for (const q of mesh.quads) {\n            const normal = q.normal();\n            q.forEach(v => v.normal = normal);\n            q.forEach(v => v.blockPos = new Vector(pos[0], pos[1], pos[2]));\n        }\n    }\n    getChunk(chunkPos) {\n        const x = Math.abs(chunkPos[0]) * 2 + (chunkPos[0] < 0 ? 1 : 0);\n        const y = Math.abs(chunkPos[1]) * 2 + (chunkPos[1] < 0 ? 1 : 0);\n        const z = Math.abs(chunkPos[2]) * 2 + (chunkPos[2] < 0 ? 1 : 0);\n        if (!this.chunks[x])\n            this.chunks[x] = [];\n        if (!this.chunks[x][y])\n            this.chunks[x][y] = [];\n        if (!this.chunks[x][y][z])\n            this.chunks[x][y][z] = new Mesh();\n        return this.chunks[x][y][z];\n    }\n}\n//# sourceMappingURL=ChunkBuilder.js.map","import { Identifier } from '../core/index.js';\nimport { Potion } from '../core/world/Potion.js';\nimport { intToRgb } from '../util/index.js';\nimport { BlockColors } from './BlockColors.js';\nconst ItemColors = new Map();\nexport function getItemColor(item) {\n    if (item.id.namespace !== Identifier.DEFAULT_NAMESPACE)\n        return [1, 1, 1];\n    const tint = ItemColors.get(item.id.path);\n    return tint ? tint(item) : [1, 1, 1];\n}\nfunction register(items, fn) {\n    for (const item of items) {\n        ItemColors.set(item, fn);\n    }\n}\nregister([\n    'leather_helmet',\n    'leather_chestplate',\n    'leather_leggings',\n    'leather_boots',\n    'leather_horse_armor',\n], ({ tag }) => {\n    const display = tag.getCompound('display');\n    const color = intToRgb(display.hasNumber('color') ? display.getNumber('color') : 10511680);\n    return (index) => index > 0 ? [1, 1, 1] : color;\n});\nconst grass = [124 / 255, 189 / 255, 107 / 255];\nregister([\n    'tall_grass',\n    'large_fern',\n], () => grass);\nregister([\n    'firework_star',\n], ({ tag }) => {\n    const color = (() => {\n        const explosion = tag.getCompound('Explosion');\n        const colors = explosion.get('Colors');\n        if (!colors?.isIntArray() || colors.length === 0) {\n            return intToRgb(9079434);\n        }\n        if (colors.length === 1) {\n            return intToRgb(colors.get(0).getAsNumber());\n        }\n        let [r, g, b] = [0, 0, 0];\n        for (const color of colors.getItems()) {\n            r += (color.getAsNumber() & 0xFF0000) >> 16;\n            g += (color.getAsNumber() & 0xFF00) >> 8;\n            b += (color.getAsNumber() & 0xFF) >> 0;\n        }\n        r /= colors.length;\n        g /= colors.length;\n        b /= colors.length;\n        return [r, g, b];\n    })();\n    return (index) => index !== 1 ? [1, 1, 1] : color;\n});\nregister([\n    'potion',\n    'splash_potion',\n    'lingering_potion',\n], ({ tag }) => {\n    const color = Potion.getColor(tag);\n    return (index) => index > 0 ? [1, 1, 1] : color;\n});\nconst SpawnEggs = [\n    ['allay', 56063, 44543],\n    ['axolotl', 16499171, 10890612],\n    ['bat', 4996656, 986895],\n    ['bee', 15582019, 4400155],\n    ['blaze', 16167425, 16775294],\n    ['cat', 15714446, 9794134],\n    ['camel', 16565097, 13341495],\n    ['cave_spider', 803406, 11013646],\n    ['chicken', 10592673, 16711680],\n    ['cod', 12691306, 15058059],\n    ['cow', 4470310, 10592673],\n    ['creeper', 894731, 0],\n    ['dolphin', 2243405, 16382457],\n    ['donkey', 5457209, 8811878],\n    ['drowned', 9433559, 7969893],\n    ['elder_guardian', 13552826, 7632531],\n    ['ender_dragon', 1842204, 14711290],\n    ['enderman', 1447446, 0],\n    ['endermite', 1447446, 7237230],\n    ['evoker', 9804699, 1973274],\n    ['fox', 14005919, 13396256],\n    ['frog', 13661252, 16762748],\n    ['ghast', 16382457, 12369084],\n    ['glow_squid', 611926, 8778172],\n    ['goat', 10851452, 5589310],\n    ['guardian', 5931634, 15826224],\n    ['hoglin', 13004373, 6251620],\n    ['horse', 12623485, 15656192],\n    ['husk', 7958625, 15125652],\n    ['iron_golem', 14405058, 7643954],\n    ['llama', 12623485, 10051392],\n    ['magma_cube', 3407872, 16579584],\n    ['mooshroom', 10489616, 12040119],\n    ['mule', 1769984, 5321501],\n    ['ocelot', 15720061, 5653556],\n    ['panda', 15198183, 1776418],\n    ['parrot', 894731, 16711680],\n    ['phantom', 4411786, 8978176],\n    ['pig', 15771042, 14377823],\n    ['piglin', 10051392, 16380836],\n    ['piglin_brute', 5843472, 16380836],\n    ['pillager', 5451574, 9804699],\n    ['polar_bear', 15658718, 14014157],\n    ['pufferfish', 16167425, 3654642],\n    ['rabbit', 10051392, 7555121],\n    ['ravager', 7697520, 5984329],\n    ['salmon', 10489616, 951412],\n    ['sheep', 15198183, 16758197],\n    ['shulker', 9725844, 5060690],\n    ['silverfish', 7237230, 3158064],\n    ['skeleton', 12698049, 4802889],\n    ['skeleton_horse', 6842447, 15066584],\n    ['slime', 5349438, 8306542],\n    ['snow_golem', 14283506, 8496292],\n    ['spider', 3419431, 11013646],\n    ['squid', 2243405, 7375001],\n    ['stray', 6387319, 14543594],\n    ['strider', 10236982, 5065037],\n    ['tadpole', 7164733, 1444352],\n    ['trader_llama', 15377456, 4547222],\n    ['tropical_fish', 15690005, 16775663],\n    ['turtle', 15198183, 44975],\n    ['vex', 8032420, 15265265],\n    ['villager', 5651507, 12422002],\n    ['vindicator', 9804699, 2580065],\n    ['wandering_trader', 4547222, 15377456],\n    ['warden', 1001033, 3790560],\n    ['witch', 3407872, 5349438],\n    ['wither', 1315860, 5075616],\n    ['wither_skeleton', 1315860, 4672845],\n    ['wolf', 14144467, 13545366],\n    ['zoglin', 13004373, 15132390],\n    ['zombie', 44975, 7969893],\n    ['zombie_horse', 3232308, 9945732],\n    ['zombie_villager', 5651507, 7969893],\n    ['zombified_piglin', 15373203, 5009705],\n];\nfor (const egg of SpawnEggs) {\n    register([`${egg[0]}_spawn_egg`], () => {\n        return (index) => intToRgb(index === 0 ? egg[1] : egg[2]);\n    });\n}\nfor (const id of [\n    'grass_block',\n    'grass',\n    'fern',\n    'vine',\n    'oak_leaves',\n    'spruce_leaves',\n    'birch_leaves',\n    'jungle_leaves',\n    'acacia_leaves',\n    'dark_oak_leaves',\n    'lily_pad',\n]) {\n    const color = BlockColors[id]({});\n    register([id], () => color);\n}\nregister([\n    'mangrove_leaves',\n], () => intToRgb(9619016));\nregister([\n    'tipped_arrow',\n], ({ tag }) => {\n    const color = Potion.getColor(tag);\n    return (index) => index === 0 ? color : [1, 1, 1];\n});\nregister([\n    'filled_map',\n], ({ tag }) => {\n    const display = tag.getCompound('display');\n    const color = intToRgb(display.hasNumber('MapColor')\n        ? (0xFF000000 | display.getNumber('MapColor') & 16777215)\n        : -12173266);\n    return (index) => index === 0 ? [1, 1, 1] : color;\n});\n//# sourceMappingURL=ItemColors.js.map","export class ShaderProgram {\n    gl;\n    program;\n    constructor(gl, vsSource, fsSource) {\n        this.gl = gl;\n        this.program = this.initShaderProgram(vsSource, fsSource);\n    }\n    getProgram() {\n        return this.program;\n    }\n    initShaderProgram(vsSource, fsSource) {\n        const vertexShader = this.loadShader(this.gl.VERTEX_SHADER, vsSource);\n        const fragmentShader = this.loadShader(this.gl.FRAGMENT_SHADER, fsSource);\n        const shaderProgram = this.gl.createProgram();\n        this.gl.attachShader(shaderProgram, vertexShader);\n        this.gl.attachShader(shaderProgram, fragmentShader);\n        this.gl.linkProgram(shaderProgram);\n        if (!this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS)) {\n            throw new Error(`Unable to link shader program: ${this.gl.getProgramInfoLog(shaderProgram)}`);\n        }\n        return shaderProgram;\n    }\n    loadShader(type, source) {\n        const shader = this.gl.createShader(type);\n        this.gl.shaderSource(shader, source);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            const error = new Error(`Compiling ${type === this.gl.VERTEX_SHADER ? 'vertex' : 'fragment'} shader: ${this.gl.getShaderInfoLog(shader)}`);\n            this.gl.deleteShader(shader);\n            throw error;\n        }\n        return shader;\n    }\n}\n//# sourceMappingURL=ShaderProgram.js.map","import { mat4 } from 'gl-matrix';\nimport { ShaderProgram } from './ShaderProgram.js';\nconst vsSource = `\n  attribute vec4 vertPos;\n  attribute vec2 texCoord;\n  attribute vec3 vertColor;\n  attribute vec3 normal;\n\n  uniform mat4 mView;\n  uniform mat4 mProj;\n\n  varying highp vec2 vTexCoord;\n  varying highp vec3 vTintColor;\n  varying highp float vLighting;\n\n  void main(void) {\n    gl_Position = mProj * mView * vertPos;\n    vTexCoord = texCoord;\n    vTintColor = vertColor;\n    vLighting = normal.y * 0.2 + abs(normal.z) * 0.1 + 0.8;\n  }\n`;\nconst fsSource = `\n  precision highp float;\n  varying highp vec2 vTexCoord;\n  varying highp vec3 vTintColor;\n  varying highp float vLighting;\n\n  uniform sampler2D sampler;\n\n  void main(void) {\n\t\tvec4 texColor = texture2D(sampler, vTexCoord);\n\t\tif(texColor.a < 0.01) discard;\n\t\tgl_FragColor = vec4(texColor.xyz * vTintColor * vLighting, texColor.a);\n  }\n`;\nexport class Renderer {\n    gl;\n    shaderProgram;\n    projMatrix;\n    activeShader;\n    constructor(gl) {\n        this.gl = gl;\n        this.shaderProgram = new ShaderProgram(gl, vsSource, fsSource).getProgram();\n        this.activeShader = this.shaderProgram;\n        this.projMatrix = this.getPerspective();\n        this.initialize();\n    }\n    setViewport(x, y, width, height) {\n        this.gl.viewport(x, y, width, height);\n        this.projMatrix = this.getPerspective();\n    }\n    getPerspective() {\n        const fieldOfView = 70 * Math.PI / 180;\n        const aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\n        const projMatrix = mat4.create();\n        mat4.perspective(projMatrix, fieldOfView, aspect, 0.1, 500.0);\n        return projMatrix;\n    }\n    initialize() {\n        this.gl.enable(this.gl.DEPTH_TEST);\n        this.gl.depthFunc(this.gl.LEQUAL);\n        this.gl.enable(this.gl.BLEND);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.CULL_FACE);\n        this.gl.cullFace(this.gl.BACK);\n    }\n    setShader(shader) {\n        this.gl.useProgram(shader);\n        this.activeShader = shader;\n    }\n    setVertexAttr(name, size, buffer) {\n        if (buffer === undefined)\n            throw new Error(`Expected buffer for ${name}`);\n        const location = this.gl.getAttribLocation(this.activeShader, name);\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n        this.gl.vertexAttribPointer(location, size, this.gl.FLOAT, false, 0, 0);\n        this.gl.enableVertexAttribArray(location);\n    }\n    setUniform(name, value) {\n        const location = this.gl.getUniformLocation(this.activeShader, name);\n        this.gl.uniformMatrix4fv(location, false, value);\n    }\n    setTexture(texture) {\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    }\n    createAtlasTexture(image) {\n        const texture = this.gl.createTexture();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, image);\n        this.gl.generateMipmap(this.gl.TEXTURE_2D);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n        return texture;\n    }\n    prepareDraw(viewMatrix) {\n        this.setUniform('mView', viewMatrix);\n        this.setUniform('mProj', this.projMatrix);\n    }\n    drawMesh(mesh, options) {\n        if (mesh.quadVertices() > 0) {\n            if (options.pos)\n                this.setVertexAttr('vertPos', 3, mesh.posBuffer);\n            if (options.color)\n                this.setVertexAttr('vertColor', 3, mesh.colorBuffer);\n            if (options.texture)\n                this.setVertexAttr('texCoord', 2, mesh.textureBuffer);\n            if (options.normal)\n                this.setVertexAttr('normal', 3, mesh.normalBuffer);\n            if (options.blockPos)\n                this.setVertexAttr('blockPos', 3, mesh.blockPosBuffer);\n            if (!mesh.indexBuffer)\n                throw new Error('Expected index buffer');\n            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, mesh.indexBuffer);\n            this.gl.drawElements(this.gl.TRIANGLES, mesh.quadIndices(), this.gl.UNSIGNED_SHORT, 0);\n        }\n        if (mesh.lineVertices() > 0) {\n            if (options.pos)\n                this.setVertexAttr('vertPos', 3, mesh.linePosBuffer);\n            if (options.color)\n                this.setVertexAttr('vertColor', 3, mesh.lineColorBuffer);\n            this.gl.drawArrays(this.gl.LINES, 0, mesh.lineVertices());\n        }\n    }\n}\n//# sourceMappingURL=Renderer.js.map","import { mat4 } from 'gl-matrix';\nimport { Identifier } from '../core/index.js';\nimport { ItemStack } from '../core/ItemStack.js';\nimport { getItemColor } from './ItemColors.js';\nimport { Renderer } from './Renderer.js';\nexport class ItemRenderer extends Renderer {\n    resources;\n    item;\n    mesh;\n    tint;\n    atlasTexture;\n    constructor(gl, item, resources, options) {\n        super(gl);\n        this.resources = resources;\n        this.item = item instanceof ItemStack ? item : new ItemStack(item, 1);\n        this.mesh = this.getItemMesh();\n        this.tint = options?.tint;\n        this.atlasTexture = this.createAtlasTexture(this.resources.getTextureAtlas());\n    }\n    setItem(item) {\n        this.item = item instanceof ItemStack ? item : new ItemStack(item, 1);\n        this.mesh = this.getItemMesh();\n    }\n    getItemMesh() {\n        const model = this.resources.getBlockModel(this.item.id.withPrefix('item/'));\n        if (!model) {\n            throw new Error(`Item model for ${this.item.toString()} does not exist`);\n        }\n        let tint = this.tint;\n        if (!tint && this.item.id.namespace === Identifier.DEFAULT_NAMESPACE) {\n            tint = getItemColor(this.item);\n        }\n        const mesh = model.getDisplayMesh('gui', this.resources, tint);\n        mesh.quads.forEach(q => {\n            const normal = q.normal();\n            q.forEach(v => v.normal = normal);\n        });\n        mesh.rebuild(this.gl, { pos: true, color: true, texture: true, normal: true });\n        return mesh;\n    }\n    getPerspective() {\n        const projMatrix = mat4.create();\n        mat4.ortho(projMatrix, 0, 16, 0, 16, 0.1, 500.0);\n        return projMatrix;\n    }\n    drawItem() {\n        const view = mat4.create();\n        mat4.translate(view, view, [0, 0, -32]);\n        this.setShader(this.shaderProgram);\n        this.setTexture(this.atlasTexture);\n        this.prepareDraw(view);\n        this.drawMesh(this.mesh, { pos: true, color: true, texture: true, normal: true });\n    }\n}\n//# sourceMappingURL=ItemRenderer.js.map","import { mat4 } from 'gl-matrix';\nimport { BlockState } from '../core/index.js';\nimport { ChunkBuilder } from './ChunkBuilder.js';\nimport { Mesh } from './Mesh.js';\nimport { Renderer } from './Renderer.js';\nimport { ShaderProgram } from './ShaderProgram.js';\nconst vsColor = `\n  attribute vec4 vertPos;\n  attribute vec3 blockPos;\n\n  uniform mat4 mView;\n  uniform mat4 mProj;\n\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_Position = mProj * mView * vertPos;\n    vColor = blockPos / 256.0;\n  }\n`;\nconst fsColor = `\n  precision highp float;\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_FragColor = vec4(vColor, 1.0);\n  }\n`;\nconst vsGrid = `\n  attribute vec4 vertPos;\n  attribute vec3 vertColor;\n\n  uniform mat4 mView;\n  uniform mat4 mProj;\n\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_Position = mProj * mView * vertPos;\n    vColor = vertColor;\n  }\n`;\nconst fsGrid = `\n  precision highp float;\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_FragColor = vec4(vColor, 1.0);\n  }\n`;\nexport class StructureRenderer extends Renderer {\n    structure;\n    resources;\n    gridShaderProgram;\n    colorShaderProgram;\n    gridMesh = new Mesh();\n    outlineMesh = new Mesh();\n    invisibleBlocksMesh = new Mesh();\n    atlasTexture;\n    useInvisibleBlocks;\n    chunkBuilder;\n    constructor(gl, structure, resources, options) {\n        super(gl);\n        this.structure = structure;\n        this.resources = resources;\n        const chunkSize = options?.chunkSize ?? 16;\n        this.chunkBuilder = new ChunkBuilder(gl, structure, resources, chunkSize);\n        if (options?.facesPerBuffer) {\n            console.warn('[deepslate renderer warning]: facesPerBuffer option has been removed in favor of chunkSize');\n        }\n        this.useInvisibleBlocks = options?.useInvisibleBlockBuffer ?? true;\n        this.gridShaderProgram = new ShaderProgram(gl, vsGrid, fsGrid).getProgram();\n        this.colorShaderProgram = new ShaderProgram(gl, vsColor, fsColor).getProgram();\n        this.gridMesh = this.getGridMesh();\n        this.outlineMesh = this.getOutlineMesh();\n        this.invisibleBlocksMesh = this.getInvisibleBlocksMesh();\n        this.atlasTexture = this.createAtlasTexture(this.resources.getTextureAtlas());\n    }\n    setStructure(structure) {\n        this.structure = structure;\n        this.chunkBuilder.setStructure(structure);\n        this.gridMesh = this.getGridMesh();\n        this.invisibleBlocksMesh = this.getInvisibleBlocksMesh();\n    }\n    updateStructureBuffers(chunkPositions) {\n        this.chunkBuilder.updateStructureBuffers(chunkPositions);\n    }\n    getGridMesh() {\n        const [X, Y, Z] = this.structure.getSize();\n        const mesh = new Mesh();\n        mesh.addLine(0, 0, 0, X, 0, 0, [1, 0, 0]);\n        mesh.addLine(0, 0, 0, 0, 0, Z, [0, 0, 1]);\n        const c = [0.8, 0.8, 0.8];\n        mesh.addLine(0, 0, 0, 0, Y, 0, c);\n        mesh.addLine(X, 0, 0, X, Y, 0, c);\n        mesh.addLine(0, 0, Z, 0, Y, Z, c);\n        mesh.addLine(X, 0, Z, X, Y, Z, c);\n        mesh.addLine(0, Y, 0, 0, Y, Z, c);\n        mesh.addLine(X, Y, 0, X, Y, Z, c);\n        mesh.addLine(0, Y, 0, X, Y, 0, c);\n        mesh.addLine(0, Y, Z, X, Y, Z, c);\n        for (let x = 1; x <= X; x += 1)\n            mesh.addLine(x, 0, 0, x, 0, Z, c);\n        for (let z = 1; z <= Z; z += 1)\n            mesh.addLine(0, 0, z, X, 0, z, c);\n        return mesh.rebuild(this.gl, { pos: true, color: true });\n    }\n    getOutlineMesh() {\n        return new Mesh()\n            .addLineCube(0, 0, 0, 1, 1, 1, [1, 1, 1])\n            .rebuild(this.gl, { pos: true, color: true });\n    }\n    getInvisibleBlocksMesh() {\n        const mesh = new Mesh();\n        if (!this.useInvisibleBlocks) {\n            return mesh;\n        }\n        const size = this.structure.getSize();\n        for (let x = 0; x < size[0]; x += 1) {\n            for (let y = 0; y < size[1]; y += 1) {\n                for (let z = 0; z < size[2]; z += 1) {\n                    const block = this.structure.getBlock([x, y, z]);\n                    if (block === undefined)\n                        continue;\n                    if (block === null) {\n                        mesh.addLineCube(x + 0.4375, y + 0.4375, z + 0.4375, x + 0.5625, y + 0.5625, z + 0.5625, [1, 0.25, 0.25]);\n                    }\n                    else if (block.state.is(BlockState.AIR)) {\n                        mesh.addLineCube(x + 0.375, y + 0.375, z + 0.375, x + 0.625, y + 0.625, z + 0.625, [0.5, 0.5, 1]);\n                    }\n                    else if (block.state.is(new BlockState('cave_air'))) {\n                        mesh.addLineCube(x + 0.375, y + 0.375, z + 0.375, x + 0.625, y + 0.625, z + 0.625, [0.5, 1, 0.5]);\n                    }\n                }\n            }\n        }\n        return mesh.rebuild(this.gl, { pos: true, color: true });\n    }\n    drawGrid(viewMatrix) {\n        this.setShader(this.gridShaderProgram);\n        this.prepareDraw(viewMatrix);\n        this.drawMesh(this.gridMesh, { pos: true, color: true });\n    }\n    drawInvisibleBlocks(viewMatrix) {\n        if (!this.useInvisibleBlocks) {\n            return;\n        }\n        this.setShader(this.gridShaderProgram);\n        this.prepareDraw(viewMatrix);\n        this.drawMesh(this.invisibleBlocksMesh, { pos: true, color: true });\n    }\n    drawStructure(viewMatrix) {\n        this.setShader(this.shaderProgram);\n        this.setTexture(this.atlasTexture);\n        this.prepareDraw(viewMatrix);\n        this.chunkBuilder.getMeshes().forEach(mesh => {\n            this.drawMesh(mesh, { pos: true, color: true, texture: true, normal: true });\n        });\n    }\n    drawColoredStructure(viewMatrix) {\n        this.setShader(this.colorShaderProgram);\n        this.prepareDraw(viewMatrix);\n        this.chunkBuilder.getMeshes().forEach(mesh => {\n            this.drawMesh(mesh, { pos: true, color: true, normal: true, blockPos: true });\n        });\n    }\n    drawOutline(viewMatrix, pos) {\n        this.setShader(this.gridShaderProgram);\n        const translatedMatrix = mat4.create();\n        mat4.copy(translatedMatrix, viewMatrix);\n        mat4.translate(translatedMatrix, translatedMatrix, pos);\n        this.prepareDraw(translatedMatrix);\n        this.drawMesh(this.outlineMesh, { pos: true, color: true });\n    }\n}\n//# sourceMappingURL=StructureRenderer.js.map","import { isPowerOfTwo, upperPowerOfTwo } from '../math/index.js';\nexport class TextureAtlas {\n    img;\n    idMap;\n    part;\n    constructor(img, idMap) {\n        this.img = img;\n        this.idMap = idMap;\n        if (!isPowerOfTwo(img.width) || !isPowerOfTwo(img.height)) {\n            throw new Error(`Expected texture atlas dimensions to be powers of two, got ${img.width}x${img.height}.`);\n        }\n        this.part = 16 / img.width;\n    }\n    getTextureAtlas() {\n        return this.img;\n    }\n    getTextureUV(id) {\n        return this.idMap[id.toString()] ?? [0, 0, this.part, this.part];\n    }\n    static async fromBlobs(textures) {\n        const initialWidth = Math.sqrt(Object.keys(textures).length + 1);\n        const width = upperPowerOfTwo(initialWidth);\n        const pixelWidth = width * 16;\n        const part = 1 / width;\n        const canvas = document.createElement('canvas');\n        canvas.width = pixelWidth;\n        canvas.height = pixelWidth;\n        const ctx = canvas.getContext('2d');\n        this.drawInvalidTexture(ctx);\n        const idMap = {};\n        let index = 1;\n        await Promise.all(Object.keys(textures).map(async (id) => {\n            const u = (index % width);\n            const v = Math.floor(index / width);\n            index += 1;\n            idMap[id] = [part * u, part * v, part * u + part, part * v + part];\n            const img = await createImageBitmap(textures[id]);\n            ctx.drawImage(img, 0, 0, 16, 16, 16 * u, 16 * v, 16, 16);\n        }));\n        return new TextureAtlas(ctx.getImageData(0, 0, pixelWidth, pixelWidth), idMap);\n    }\n    static empty() {\n        const canvas = document.createElement('canvas');\n        canvas.width = 16;\n        canvas.height = 16;\n        const ctx = canvas.getContext('2d');\n        TextureAtlas.drawInvalidTexture(ctx);\n        return new TextureAtlas(ctx.getImageData(0, 0, 16, 16), {});\n    }\n    static drawInvalidTexture(ctx) {\n        ctx.fillStyle = 'black';\n        ctx.fillRect(0, 0, 16, 16);\n        ctx.fillStyle = 'magenta';\n        ctx.fillRect(0, 0, 8, 8);\n        ctx.fillRect(8, 8, 8, 8);\n    }\n}\n//# sourceMappingURL=TextureAtlas.js.map","import { Vector } from '../math/index.js';\nimport { mutateWithDefault } from '../util/index.js';\nimport { Mesh } from './Mesh.js';\nimport { Quad } from './Quad.js';\nimport { Renderer } from './Renderer.js';\nimport { ShaderProgram } from './ShaderProgram.js';\nconst vsVoxel = `\n  attribute vec4 vertPos;\n  attribute vec3 vertColor;\n\n  uniform mat4 mView;\n  uniform mat4 mProj;\n\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_Position = mProj * mView * vertPos;\n    vColor = vertColor;\n  }\n`;\nconst fsVoxel = `\n  precision highp float;\n  varying highp vec3 vColor;\n\n  void main(void) {\n    gl_FragColor = vec4(vColor, 1.0);\n  }\n`;\nexport class VoxelRenderer extends Renderer {\n    voxelShaderProgram;\n    voxels = [];\n    quads = [];\n    meshes = [];\n    constructor(gl) {\n        super(gl);\n        this.voxelShaderProgram = new ShaderProgram(gl, vsVoxel, fsVoxel).getProgram();\n    }\n    setVoxels(voxels) {\n        this.voxels = voxels;\n        this.quads = this.getQuads();\n        this.meshes = this.getMeshes();\n    }\n    getQuads() {\n        const lookup = new Map();\n        for (const v of this.voxels) {\n            mutateWithDefault(lookup, v.x, new Map(), m => {\n                mutateWithDefault(m, v.y, new Set(), n => {\n                    n.add(v.z);\n                });\n            });\n        }\n        const quads = [];\n        for (const v of this.voxels) {\n            if (!lookup.get(v.x + 1)?.get(v.y)?.has(v.z)) {\n                quads.push(Quad.fromPoints(new Vector(v.x + 1, v.y, v.z), new Vector(v.x + 1, v.y + 1, v.z), new Vector(v.x + 1, v.y + 1, v.z + 1), new Vector(v.x + 1, v.y, v.z + 1)).setColor(v.color));\n            }\n            if (!lookup.get(v.x - 1)?.get(v.y)?.has(v.z)) {\n                quads.push(Quad.fromPoints(new Vector(v.x, v.y, v.z + 1), new Vector(v.x, v.y + 1, v.z + 1), new Vector(v.x, v.y + 1, v.z), new Vector(v.x, v.y, v.z)).setColor(v.color));\n            }\n            if (!lookup.get(v.x)?.get(v.y + 1)?.has(v.z)) {\n                quads.push(Quad.fromPoints(new Vector(v.x, v.y + 1, v.z + 1), new Vector(v.x + 1, v.y + 1, v.z + 1), new Vector(v.x + 1, v.y + 1, v.z), new Vector(v.x, v.y + 1, v.z)).setColor(v.color));\n            }\n            if (!lookup.get(v.x)?.get(v.y - 1)?.has(v.z)) {\n                quads.push(Quad.fromPoints(new Vector(v.x, v.y, v.z), new Vector(v.x + 1, v.y, v.z), new Vector(v.x + 1, v.y, v.z + 1), new Vector(v.x, v.y, v.z + 1)).setColor(v.color));\n            }\n            if (!lookup.get(v.x)?.get(v.y)?.has(v.z + 1)) {\n                quads.push(Quad.fromPoints(new Vector(v.x, v.y, v.z + 1), new Vector(v.x + 1, v.y, v.z + 1), new Vector(v.x + 1, v.y + 1, v.z + 1), new Vector(v.x, v.y + 1, v.z + 1)).setColor(v.color));\n            }\n            if (!lookup.get(v.x)?.get(v.y)?.has(v.z - 1)) {\n                quads.push(Quad.fromPoints(new Vector(v.x, v.y + 1, v.z), new Vector(v.x + 1, v.y + 1, v.z), new Vector(v.x + 1, v.y, v.z), new Vector(v.x, v.y, v.z)).setColor(v.color));\n            }\n        }\n        console.debug(`Converted ${this.voxels.length} voxels into ${quads.length} quads!`);\n        return quads;\n    }\n    getMeshes() {\n        const meshes = [];\n        let mesh = new Mesh();\n        for (const quad of this.quads) {\n            const normal = quad.normal();\n            const light = (normal.y * 0.25 + Math.abs(normal.z) * 0.125 + 0.75) / 256;\n            quad.forEach(v => v.color = [v.color[0] * light, v.color[1] * light, v.color[2] * light]);\n            mesh.quads.push(quad);\n            if (mesh.quadVertices() > 65000) {\n                meshes.push(mesh);\n                mesh = new Mesh();\n            }\n        }\n        if (!mesh.isEmpty()) {\n            meshes.push(mesh);\n        }\n        for (const mesh of meshes) {\n            mesh.rebuild(this.gl, { pos: true, color: true });\n        }\n        return meshes;\n    }\n    draw(viewMatrix) {\n        console.debug(`Drawing ${this.meshes.length} meshes...`);\n        this.setShader(this.voxelShaderProgram);\n        this.prepareDraw(viewMatrix);\n        if (this.meshes.length === 0) {\n            this.gl.clearColor(0, 0, 0, 0);\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n            return;\n        }\n        for (const mesh of this.meshes) {\n            this.drawMesh(mesh, { pos: true, color: true });\n        }\n    }\n}\n//# sourceMappingURL=VoxelRenderer.js.map","import { Holder } from '../core/index.js';\nimport { NormalNoise } from '../math/index.js';\nimport { Json } from '../util/index.js';\nimport { DensityFunction } from './DensityFunction.js';\nimport { WorldgenRegistries } from './WorldgenRegistries.js';\nexport var NoiseRouter;\n(function (NoiseRouter) {\n    const fieldParser = (obj) => new DensityFunction.HolderHolder(Holder.parser(WorldgenRegistries.DENSITY_FUNCTION, DensityFunction.fromJson)(obj));\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        return {\n            barrier: fieldParser(root.barrier),\n            fluidLevelFloodedness: fieldParser(root.fluid_level_floodedness),\n            fluidLevelSpread: fieldParser(root.fluid_level_spread),\n            lava: fieldParser(root.lava),\n            temperature: fieldParser(root.temperature),\n            vegetation: fieldParser(root.vegetation),\n            continents: fieldParser(root.continents),\n            erosion: fieldParser(root.erosion),\n            depth: fieldParser(root.depth),\n            ridges: fieldParser(root.ridges),\n            initialDensityWithoutJaggedness: fieldParser(root.initial_density_without_jaggedness),\n            finalDensity: fieldParser(root.final_density),\n            veinToggle: fieldParser(root.vein_toggle),\n            veinRidged: fieldParser(root.vein_ridged),\n            veinGap: fieldParser(root.vein_gap),\n        };\n    }\n    NoiseRouter.fromJson = fromJson;\n    function create(router) {\n        return {\n            barrier: DensityFunction.Constant.ZERO,\n            fluidLevelFloodedness: DensityFunction.Constant.ZERO,\n            fluidLevelSpread: DensityFunction.Constant.ZERO,\n            lava: DensityFunction.Constant.ZERO,\n            temperature: DensityFunction.Constant.ZERO,\n            vegetation: DensityFunction.Constant.ZERO,\n            continents: DensityFunction.Constant.ZERO,\n            erosion: DensityFunction.Constant.ZERO,\n            depth: DensityFunction.Constant.ZERO,\n            ridges: DensityFunction.Constant.ZERO,\n            initialDensityWithoutJaggedness: DensityFunction.Constant.ZERO,\n            finalDensity: DensityFunction.Constant.ZERO,\n            veinToggle: DensityFunction.Constant.ZERO,\n            veinRidged: DensityFunction.Constant.ZERO,\n            veinGap: DensityFunction.Constant.ZERO,\n            ...router,\n        };\n    }\n    NoiseRouter.create = create;\n    function mapAll(router, visitor) {\n        return {\n            barrier: router.barrier.mapAll(visitor),\n            fluidLevelFloodedness: router.fluidLevelFloodedness.mapAll(visitor),\n            fluidLevelSpread: router.fluidLevelSpread.mapAll(visitor),\n            lava: router.lava.mapAll(visitor),\n            temperature: router.temperature.mapAll(visitor),\n            vegetation: router.vegetation.mapAll(visitor),\n            continents: router.continents.mapAll(visitor),\n            erosion: router.erosion.mapAll(visitor),\n            depth: router.depth.mapAll(visitor),\n            ridges: router.ridges.mapAll(visitor),\n            initialDensityWithoutJaggedness: router.initialDensityWithoutJaggedness.mapAll(visitor),\n            finalDensity: router.finalDensity.mapAll(visitor),\n            veinToggle: router.veinToggle.mapAll(visitor),\n            veinRidged: router.veinRidged.mapAll(visitor),\n            veinGap: router.veinGap.mapAll(visitor),\n        };\n    }\n    NoiseRouter.mapAll = mapAll;\n    const noiseCache = new Map();\n    function instantiate(random, noise) {\n        const key = noise.key()?.toString();\n        if (!key) {\n            throw new Error('Cannot instantiate noise from direct holder');\n        }\n        const randomKey = random.seedKey();\n        const cached = noiseCache.get(key);\n        if (cached && cached[0] === randomKey[0] && cached[1] === randomKey[1]) {\n            return cached[2];\n        }\n        const result = new NormalNoise(random.fromHashOf(key), noise.value());\n        noiseCache.set(key, [randomKey[0], randomKey[1], result]);\n        return result;\n    }\n    NoiseRouter.instantiate = instantiate;\n})(NoiseRouter || (NoiseRouter = {}));\n//# sourceMappingURL=NoiseRouter.js.map","import { clampedLerp } from '../math/index.js';\nimport { Json } from '../util/index.js';\nexport var NoiseSettings;\n(function (NoiseSettings) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        return {\n            minY: Json.readInt(root.min_y) ?? 0,\n            height: Json.readInt(root.height) ?? 256,\n            xzSize: Json.readInt(root.size_horizontal) ?? 1,\n            ySize: Json.readInt(root.size_vertical) ?? 1,\n        };\n    }\n    NoiseSettings.fromJson = fromJson;\n    function create(settings) {\n        return {\n            minY: 0,\n            height: 256,\n            xzSize: 1,\n            ySize: 1,\n            ...settings,\n        };\n    }\n    NoiseSettings.create = create;\n    function cellHeight(settings) {\n        return settings.ySize << 2;\n    }\n    NoiseSettings.cellHeight = cellHeight;\n    function cellWidth(settings) {\n        return settings.xzSize << 2;\n    }\n    NoiseSettings.cellWidth = cellWidth;\n    function cellCountY(settings) {\n        return settings.height / cellHeight(settings);\n    }\n    NoiseSettings.cellCountY = cellCountY;\n    function minCellY(settings) {\n        return Math.floor(settings.minY / cellHeight(settings));\n    }\n    NoiseSettings.minCellY = minCellY;\n})(NoiseSettings || (NoiseSettings = {}));\nexport var NoiseSlideSettings;\n(function (NoiseSlideSettings) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        return {\n            target: Json.readNumber(root.target) ?? 0,\n            size: Json.readInt(root.size) ?? 0,\n            offset: Json.readInt(root.offset) ?? 0,\n        };\n    }\n    NoiseSlideSettings.fromJson = fromJson;\n    function apply(slide, density, y) {\n        if (slide.size <= 0)\n            return density;\n        const t = (y - slide.offset) / slide.size;\n        return clampedLerp(slide.target, density, t);\n    }\n    NoiseSlideSettings.apply = apply;\n})(NoiseSlideSettings || (NoiseSlideSettings = {}));\n//# sourceMappingURL=NoiseSettings.js.map","import { Json } from '../util/index.js';\nexport var VerticalAnchor;\n(function (VerticalAnchor) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        if (root.absolute !== undefined) {\n            return absolute(Json.readNumber(root.absolute) ?? 0);\n        }\n        else if (root.above_bottom !== undefined) {\n            return aboveBottom(Json.readNumber(root.above_bottom) ?? 0);\n        }\n        else if (root.below_top !== undefined) {\n            return belowTop(Json.readNumber(root.below_top) ?? 0);\n        }\n        return () => 0;\n    }\n    VerticalAnchor.fromJson = fromJson;\n    function absolute(value) {\n        return () => value;\n    }\n    VerticalAnchor.absolute = absolute;\n    function aboveBottom(value) {\n        return context => context.minY + value;\n    }\n    VerticalAnchor.aboveBottom = aboveBottom;\n    function belowTop(value) {\n        return context => context.minY + context.height - 1 - value;\n    }\n    VerticalAnchor.belowTop = belowTop;\n})(VerticalAnchor || (VerticalAnchor = {}));\n//# sourceMappingURL=VerticalAnchor.js.map","import { BlockPos, BlockState, ChunkPos } from '../core/index.js';\nimport { lerp2, map, XoroshiroRandom } from '../math/index.js';\nimport { computeIfAbsent, Json, lazy } from '../util/index.js';\nimport { NoiseRouter } from './NoiseRouter.js';\nimport { VerticalAnchor } from './VerticalAnchor.js';\nimport { WorldgenRegistries } from './WorldgenRegistries.js';\nexport class SurfaceSystem {\n    rule;\n    defaultBlock;\n    surfaceNoise;\n    surfaceSecondaryNoise;\n    random;\n    positionalRandoms;\n    constructor(rule, defaultBlock, seed) {\n        this.rule = rule;\n        this.defaultBlock = defaultBlock;\n        this.random = XoroshiroRandom.create(seed).forkPositional();\n        this.surfaceNoise = NoiseRouter.instantiate(this.random, WorldgenRegistries.SURFACE_NOISE);\n        this.surfaceSecondaryNoise = NoiseRouter.instantiate(this.random, WorldgenRegistries.SURFACE_SECONDARY_NOISE);\n        this.positionalRandoms = new Map();\n    }\n    buildSurface(chunk, noiseChunk, worldgenContext, getBiome) {\n        const minX = ChunkPos.minBlockX(chunk.pos);\n        const minZ = ChunkPos.minBlockZ(chunk.pos);\n        const surfaceContext = new SurfaceContext(this, chunk, noiseChunk, worldgenContext, getBiome);\n        const ruleWithContext = this.rule(surfaceContext);\n        for (let x = 0; x < 16; x += 1) {\n            const worldX = minX + x;\n            for (let z = 0; z < 1; z += 1) {\n                const worldZ = minZ + z;\n                surfaceContext.updateXZ(worldX, worldZ);\n                let stoneDepthAbove = 0;\n                let waterHeight = Number.MIN_SAFE_INTEGER;\n                let stoneDepthOffset = Number.MAX_SAFE_INTEGER;\n                for (let y = chunk.maxY; y >= chunk.minY; y -= 1) {\n                    const worldPos = BlockPos.create(worldX, y, worldZ);\n                    const oldState = chunk.getBlockState(worldPos);\n                    if (oldState.equals(BlockState.AIR)) {\n                        stoneDepthAbove = 0;\n                        waterHeight = Number.MIN_SAFE_INTEGER;\n                        continue;\n                    }\n                    if (oldState.isFluid()) {\n                        if (waterHeight === Number.MIN_SAFE_INTEGER) {\n                            waterHeight = y + 1;\n                        }\n                        continue;\n                    }\n                    if (stoneDepthOffset >= y) {\n                        stoneDepthOffset = Number.MIN_SAFE_INTEGER;\n                        for (let i = y - 1; i >= chunk.minY; i -= 1) {\n                            const state = chunk.getBlockState(BlockPos.create(worldX, i, worldZ));\n                            if (state.equals(BlockState.AIR) || state.isFluid()) {\n                                stoneDepthOffset = i + 1;\n                                break;\n                            }\n                        }\n                    }\n                    stoneDepthAbove += 1;\n                    const stoneDepthBelow = y - stoneDepthOffset + 1;\n                    if (!oldState.equals(this.defaultBlock)) {\n                        continue;\n                    }\n                    surfaceContext.updateY(stoneDepthAbove, stoneDepthBelow, waterHeight, y);\n                    const newState = ruleWithContext(worldX, y, worldZ);\n                    if (newState) {\n                        chunk.setBlockState(worldPos, newState);\n                    }\n                }\n            }\n        }\n    }\n    getSurfaceDepth(x, z) {\n        const noise = this.surfaceNoise.sample(x, 0, z);\n        const offset = this.random.at(x, 0, z).nextDouble() * 0.25;\n        return noise * 2.75 + 3 + offset;\n    }\n    getSurfaceSecondary(x, z) {\n        return this.surfaceSecondaryNoise.sample(x, 0, z);\n    }\n    getRandom(name) {\n        return computeIfAbsent(this.positionalRandoms, name, () => {\n            return this.random.fromHashOf(name);\n        });\n    }\n}\nexport class SurfaceContext {\n    system;\n    chunk;\n    noiseChunk;\n    context;\n    getBiome;\n    blockX = 0;\n    blockY = 0;\n    blockZ = 0;\n    stoneDepthAbove = 0;\n    stoneDepthBelow = 0;\n    surfaceDepth = 0;\n    waterHeight = 0;\n    biome = () => '';\n    surfaceSecondary = () => 0;\n    minSurfaceLevel = () => 0;\n    constructor(system, chunk, noiseChunk, context, getBiome) {\n        this.system = system;\n        this.chunk = chunk;\n        this.noiseChunk = noiseChunk;\n        this.context = context;\n        this.getBiome = getBiome;\n    }\n    updateXZ(x, z) {\n        this.blockX = x;\n        this.blockZ = z;\n        this.surfaceDepth = this.system.getSurfaceDepth(x, z);\n        this.surfaceSecondary = lazy(() => this.system.getSurfaceSecondary(x, z));\n        this.minSurfaceLevel = lazy(() => this.calculateMinSurfaceLevel(x, z));\n    }\n    updateY(stoneDepthAbove, stoneDepthBelow, waterHeight, y) {\n        this.blockY = y;\n        this.stoneDepthAbove = stoneDepthAbove;\n        this.stoneDepthBelow = stoneDepthBelow;\n        this.waterHeight = waterHeight;\n        this.biome = lazy(() => this.getBiome(BlockPos.create(this.blockX, this.blockY, this.blockZ)));\n    }\n    calculateMinSurfaceLevel(x, z) {\n        const cellX = x >> 4;\n        const cellZ = z >> 4;\n        const level00 = this.noiseChunk.getPreliminarySurfaceLevel(cellX << 4, cellZ << 4);\n        const level10 = this.noiseChunk.getPreliminarySurfaceLevel((cellX + 1) << 4, cellZ << 4);\n        const level01 = this.noiseChunk.getPreliminarySurfaceLevel(cellX << 4, (cellZ + 1) << 4);\n        const level11 = this.noiseChunk.getPreliminarySurfaceLevel((cellX + 1) << 4, (cellZ + 1) << 4);\n        const level = Math.floor(lerp2((x & 0xF) / 16, (z & 0xF) / 16, level00, level10, level01, level11));\n        return level + this.surfaceDepth - 8;\n    }\n}\nexport var SurfaceRule;\n(function (SurfaceRule) {\n    SurfaceRule.NOOP = () => () => undefined;\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        switch (type) {\n            case 'block': return block(BlockState.fromJson(root.result_state));\n            case 'sequence': return sequence(Json.readArray(root.sequence, SurfaceRule.fromJson) ?? []);\n            case 'condition': return condition(SurfaceCondition.fromJson(root.if_true), SurfaceRule.fromJson(root.then_run));\n        }\n        return SurfaceRule.NOOP;\n    }\n    SurfaceRule.fromJson = fromJson;\n    function block(state) {\n        return () => () => state;\n    }\n    SurfaceRule.block = block;\n    function sequence(rules) {\n        return context => {\n            const rulesWithContext = rules.map(rule => rule(context));\n            return (x, y, z) => {\n                for (const rule of rulesWithContext) {\n                    const result = rule(x, y, z);\n                    if (result)\n                        return result;\n                }\n                return undefined;\n            };\n        };\n    }\n    SurfaceRule.sequence = sequence;\n    function condition(ifTrue, thenRun) {\n        return context => (x, y, z) => {\n            if (ifTrue(context)) {\n                return thenRun(context)(x, y, z);\n            }\n            return undefined;\n        };\n    }\n    SurfaceRule.condition = condition;\n})(SurfaceRule || (SurfaceRule = {}));\nexport var SurfaceCondition;\n(function (SurfaceCondition) {\n    SurfaceCondition.FALSE = () => false;\n    SurfaceCondition.TRUE = () => true;\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        switch (type) {\n            case 'above_preliminary_surface': return abovePreliminarySurface();\n            case 'biome': return biome(Json.readArray(root.biome_is, e => Json.readString(e) ?? '') ?? []);\n            case 'not': return not(SurfaceCondition.fromJson(root.invert));\n            case 'stone_depth': return stoneDepth(Json.readInt(root.offset) ?? 0, Json.readBoolean(root.add_surface_depth) ?? false, Json.readInt(root.secondary_depth_range) ?? 0, Json.readString(root.surface_type) === 'ceiling');\n            case 'vertical_gradient': return verticalGradient(Json.readString(root.random_name) ?? '', VerticalAnchor.fromJson(root.true_at_and_below), VerticalAnchor.fromJson(root.false_at_and_above));\n            case 'water': return water(Json.readInt(root.offset) ?? 0, Json.readInt(root.surface_depth_multiplier) ?? 0, Json.readBoolean(root.add_surface_depth) ?? false);\n            case 'y_above': return yAbove(VerticalAnchor.fromJson(root.anchor), Json.readInt(root.surface_depth_multiplier) ?? 0, Json.readBoolean(root.add_surface_depth) ?? false);\n        }\n        return SurfaceCondition.FALSE;\n    }\n    SurfaceCondition.fromJson = fromJson;\n    function abovePreliminarySurface() {\n        return context => context.blockY >= context.minSurfaceLevel();\n    }\n    SurfaceCondition.abovePreliminarySurface = abovePreliminarySurface;\n    function biome(biomes) {\n        const biomeSet = new Set(biomes);\n        return context => biomeSet.has(context.biome());\n    }\n    SurfaceCondition.biome = biome;\n    function not(invert) {\n        return context => !invert(context);\n    }\n    SurfaceCondition.not = not;\n    function stoneDepth(offset, addSurfaceDepth, secondaryDepthRange, ceiling) {\n        return context => {\n            const depth = ceiling ? context.stoneDepthBelow : context.stoneDepthAbove;\n            const surfaceDepth = addSurfaceDepth ? context.surfaceDepth : 0;\n            const secondaryDepth = secondaryDepthRange === 0 ? 0 : map(context.surfaceSecondary(), -1, 1, 0, secondaryDepthRange);\n            return depth <= 1 + offset + surfaceDepth + secondaryDepth;\n        };\n    }\n    SurfaceCondition.stoneDepth = stoneDepth;\n    function verticalGradient(randomName, trueAtAndBelow, falseAtAndAbove) {\n        return context => {\n            const trueAtAndBelowY = trueAtAndBelow(context.context);\n            const falseAtAndAboveY = falseAtAndAbove(context.context);\n            if (context.blockY <= trueAtAndBelowY) {\n                return true;\n            }\n            if (context.blockY >= falseAtAndAboveY) {\n                return false;\n            }\n            const random = context.system.getRandom(randomName);\n            const chance = map(context.blockY, trueAtAndBelowY, falseAtAndAboveY, 1, 0);\n            return random.nextFloat() < chance;\n        };\n    }\n    SurfaceCondition.verticalGradient = verticalGradient;\n    function water(offset, surfaceDepthMultiplier, addStoneDepth) {\n        return context => {\n            if (context.waterHeight === Number.MIN_SAFE_INTEGER) {\n                return true;\n            }\n            const stoneDepth = addStoneDepth ? context.stoneDepthAbove : 0;\n            return context.blockY + stoneDepth >= context.waterHeight + offset + context.surfaceDepth * surfaceDepthMultiplier;\n        };\n    }\n    SurfaceCondition.water = water;\n    function yAbove(anchor, surfaceDepthMultiplier, addStoneDepth) {\n        return context => {\n            const stoneDepth = addStoneDepth ? context.stoneDepthAbove : 0;\n            return context.blockY + stoneDepth >= anchor(context.context) + context.surfaceDepth * surfaceDepthMultiplier;\n        };\n    }\n    SurfaceCondition.yAbove = yAbove;\n})(SurfaceCondition || (SurfaceCondition = {}));\n//# sourceMappingURL=SurfaceSystem.js.map","import { BlockState } from '../core/index.js';\nimport { Json } from '../util/index.js';\nimport { NoiseRouter } from './NoiseRouter.js';\nimport { NoiseSettings } from './NoiseSettings.js';\nimport { SurfaceRule } from './SurfaceSystem.js';\nexport var NoiseGeneratorSettings;\n(function (NoiseGeneratorSettings) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        return {\n            surfaceRule: SurfaceRule.fromJson(root.surface_rule),\n            noise: NoiseSettings.fromJson(root.noise),\n            defaultBlock: BlockState.fromJson(root.default_block),\n            defaultFluid: BlockState.fromJson(root.default_fluid),\n            noiseRouter: NoiseRouter.fromJson(root.noise_router),\n            seaLevel: Json.readInt(root.sea_level) ?? 0,\n            disableMobGeneration: Json.readBoolean(root.disable_mob_generation) ?? false,\n            aquifersEnabled: Json.readBoolean(root.aquifers_enabled) ?? false,\n            oreVeinsEnabled: Json.readBoolean(root.ore_veins_enabled) ?? false,\n            legacyRandomSource: Json.readBoolean(root.legacy_random_source) ?? false,\n        };\n    }\n    NoiseGeneratorSettings.fromJson = fromJson;\n    function create(settings) {\n        return {\n            surfaceRule: SurfaceRule.NOOP,\n            noise: NoiseSettings.create({}),\n            defaultBlock: BlockState.STONE,\n            defaultFluid: BlockState.WATER,\n            noiseRouter: NoiseRouter.create({}),\n            seaLevel: 0,\n            disableMobGeneration: false,\n            aquifersEnabled: false,\n            oreVeinsEnabled: false,\n            legacyRandomSource: false,\n            ...settings,\n        };\n    }\n    NoiseGeneratorSettings.create = create;\n})(NoiseGeneratorSettings || (NoiseGeneratorSettings = {}));\n//# sourceMappingURL=NoiseGeneratorSettings.js.map","import { Identifier, Registry } from '../core/index.js';\nimport { NoiseParameters } from '../math/index.js';\nimport { DensityFunction } from './DensityFunction.js';\nimport { NoiseGeneratorSettings } from './NoiseGeneratorSettings.js';\nexport var WorldgenRegistries;\n(function (WorldgenRegistries) {\n    WorldgenRegistries.NOISE = Registry.createAndRegister('worldgen/noise', NoiseParameters.fromJson);\n    WorldgenRegistries.DENSITY_FUNCTION = Registry.createAndRegister('worldgen/density_function', obj => DensityFunction.fromJson(obj));\n    WorldgenRegistries.NOISE_SETTINGS = Registry.createAndRegister('worldgen/noise_settings', NoiseGeneratorSettings.fromJson);\n    WorldgenRegistries.BIOME = Registry.createAndRegister('worldgen/biome');\n    WorldgenRegistries.SURFACE_NOISE = createNoise('surface', -6, [1, 1, 1]);\n    WorldgenRegistries.SURFACE_SECONDARY_NOISE = createNoise('surface_secondary', -6, [1, 1, 0, 1]);\n    function createNoise(name, firstOctave, amplitudes) {\n        return WorldgenRegistries.NOISE.register(Identifier.create(name), NoiseParameters.create(firstOctave, amplitudes), true);\n    }\n})(WorldgenRegistries || (WorldgenRegistries = {}));\n//# sourceMappingURL=WorldgenRegistries.js.map","import { Holder, Identifier } from '../core/index.js';\nimport { clamp, clampedMap, CubicSpline, lazyLerp3, LegacyRandom, NoiseParameters, SimplexNoise } from '../math/index.js';\nimport { computeIfAbsent, Json } from '../util/index.js';\nimport { WorldgenRegistries } from './WorldgenRegistries.js';\nexport class DensityFunction {\n    minValue() {\n        return -this.maxValue();\n    }\n    mapAll(visitor) {\n        return visitor.map(this);\n    }\n}\n(function (DensityFunction) {\n    function context(x, y, z) {\n        return {\n            x,\n            y,\n            z,\n        };\n    }\n    DensityFunction.context = context;\n    class Transformer extends DensityFunction {\n        input;\n        constructor(input) {\n            super();\n            this.input = input;\n        }\n        compute(context) {\n            return this.transform(context, this.input.compute(context));\n        }\n    }\n    const NoiseParser = Holder.parser(WorldgenRegistries.NOISE, NoiseParameters.fromJson);\n    function fromJson(obj, inputParser = fromJson) {\n        if (typeof obj === 'string') {\n            return new HolderHolder(Holder.reference(WorldgenRegistries.DENSITY_FUNCTION, Identifier.parse(obj)));\n        }\n        if (typeof obj === 'number') {\n            return new Constant(obj);\n        }\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        switch (type) {\n            case 'blend_alpha': return new ConstantMinMax(1, 0, 1);\n            case 'blend_offset': return new ConstantMinMax(0, -Infinity, Infinity);\n            case 'beardifier': return new ConstantMinMax(0, -Infinity, Infinity);\n            case 'old_blended_noise': return new OldBlendedNoise(Json.readNumber(root.xz_scale) ?? 1, Json.readNumber(root.y_scale) ?? 1, Json.readNumber(root.xz_factor) ?? 80, Json.readNumber(root.y_factor) ?? 160, Json.readNumber(root.smear_scale_multiplier) ?? 8);\n            case 'flat_cache': return new FlatCache(inputParser(root.argument));\n            case 'interpolated': return new Interpolated(inputParser(root.argument));\n            case 'cache_2d': return new Cache2D(inputParser(root.argument));\n            case 'cache_once': return new CacheOnce(inputParser(root.argument));\n            case 'cache_all_in_cell': return new CacheAllInCell(inputParser(root.argument));\n            case 'noise': return new Noise(Json.readNumber(root.xz_scale) ?? 1, Json.readNumber(root.y_scale) ?? 1, NoiseParser(root.noise));\n            case 'end_islands': return new EndIslands();\n            case 'weird_scaled_sampler': return new WeirdScaledSampler(inputParser(root.input), Json.readEnum(root.rarity_value_mapper, RarityValueMapper), NoiseParser(root.noise));\n            case 'shifted_noise': return new ShiftedNoise(inputParser(root.shift_x), inputParser(root.shift_y), inputParser(root.shift_z), Json.readNumber(root.xz_scale) ?? 1, Json.readNumber(root.y_scale) ?? 1, NoiseParser(root.noise));\n            case 'range_choice': return new RangeChoice(inputParser(root.input), Json.readNumber(root.min_inclusive) ?? 0, Json.readNumber(root.max_exclusive) ?? 1, inputParser(root.when_in_range), inputParser(root.when_out_of_range));\n            case 'shift_a': return new ShiftA(NoiseParser(root.argument));\n            case 'shift_b': return new ShiftB(NoiseParser(root.argument));\n            case 'shift': return new Shift(NoiseParser(root.argument));\n            case 'blend_density': return new BlendDensity(inputParser(root.argument));\n            case 'clamp': return new Clamp(inputParser(root.input), Json.readNumber(root.min) ?? 0, Json.readNumber(root.max) ?? 1);\n            case 'abs':\n            case 'square':\n            case 'cube':\n            case 'half_negative':\n            case 'quarter_negative':\n            case 'squeeze':\n                return new Mapped(type, inputParser(root.argument));\n            case 'add':\n            case 'mul':\n            case 'min':\n            case 'max': return new Ap2(Json.readEnum(type, Ap2Type), inputParser(root.argument1), inputParser(root.argument2));\n            case 'spline': return new Spline(CubicSpline.fromJson(root.spline, inputParser));\n            case 'constant': return new Constant(Json.readNumber(root.argument) ?? 0);\n            case 'y_clamped_gradient': return new YClampedGradient(Json.readInt(root.from_y) ?? -4064, Json.readInt(root.to_y) ?? 4062, Json.readNumber(root.from_value) ?? -4064, Json.readNumber(root.to_value) ?? 4062);\n        }\n        return Constant.ZERO;\n    }\n    DensityFunction.fromJson = fromJson;\n    class Constant extends DensityFunction {\n        value;\n        static ZERO = new Constant(0);\n        static ONE = new Constant(1);\n        constructor(value) {\n            super();\n            this.value = value;\n        }\n        compute() {\n            return this.value;\n        }\n        minValue() {\n            return this.value;\n        }\n        maxValue() {\n            return this.value;\n        }\n    }\n    DensityFunction.Constant = Constant;\n    class HolderHolder extends DensityFunction {\n        holder;\n        constructor(holder) {\n            super();\n            this.holder = holder;\n        }\n        compute(context) {\n            return this.holder.value().compute(context);\n        }\n        minValue() {\n            return this.holder.value().minValue();\n        }\n        maxValue() {\n            return this.holder.value().maxValue();\n        }\n    }\n    DensityFunction.HolderHolder = HolderHolder;\n    class ConstantMinMax extends DensityFunction.Constant {\n        min;\n        max;\n        constructor(value, min, max) {\n            super(value);\n            this.min = min;\n            this.max = max;\n        }\n        minValue() {\n            return this.min;\n        }\n        maxValue() {\n            return this.max;\n        }\n    }\n    DensityFunction.ConstantMinMax = ConstantMinMax;\n    class OldBlendedNoise extends DensityFunction {\n        xzScale;\n        yScale;\n        xzFactor;\n        yFactor;\n        smearScaleMultiplier;\n        blendedNoise;\n        constructor(xzScale, yScale, xzFactor, yFactor, smearScaleMultiplier, blendedNoise) {\n            super();\n            this.xzScale = xzScale;\n            this.yScale = yScale;\n            this.xzFactor = xzFactor;\n            this.yFactor = yFactor;\n            this.smearScaleMultiplier = smearScaleMultiplier;\n            this.blendedNoise = blendedNoise;\n        }\n        compute(context) {\n            return this.blendedNoise?.sample(context.x, context.y, context.z) ?? 0;\n        }\n        maxValue() {\n            return this.blendedNoise?.maxValue ?? 0;\n        }\n    }\n    DensityFunction.OldBlendedNoise = OldBlendedNoise;\n    class Wrapper extends DensityFunction {\n        wrapped;\n        constructor(wrapped) {\n            super();\n            this.wrapped = wrapped;\n        }\n        minValue() {\n            return this.wrapped.minValue();\n        }\n        maxValue() {\n            return this.wrapped.maxValue();\n        }\n    }\n    class FlatCache extends Wrapper {\n        lastQuartX;\n        lastQuartZ;\n        lastValue = 0;\n        constructor(wrapped) {\n            super(wrapped);\n        }\n        compute(context) {\n            const quartX = context.x >> 2;\n            const quartZ = context.z >> 2;\n            if (this.lastQuartX !== quartX || this.lastQuartZ !== quartZ) {\n                this.lastValue = this.wrapped.compute(DensityFunction.context(quartX << 2, 0, quartZ << 2));\n                this.lastQuartX = quartX;\n                this.lastQuartZ = quartZ;\n            }\n            return this.lastValue;\n        }\n        mapAll(visitor) {\n            return visitor.map(new FlatCache(this.wrapped.mapAll(visitor)));\n        }\n    }\n    DensityFunction.FlatCache = FlatCache;\n    class CacheAllInCell extends Wrapper {\n        constructor(wrapped) {\n            super(wrapped);\n        }\n        compute(context) {\n            return this.wrapped.compute(context);\n        }\n        mapAll(visitor) {\n            return visitor.map(new CacheAllInCell(this.wrapped.mapAll(visitor)));\n        }\n    }\n    DensityFunction.CacheAllInCell = CacheAllInCell;\n    class Cache2D extends Wrapper {\n        lastBlockX;\n        lastBlockZ;\n        lastValue = 0;\n        constructor(wrapped) {\n            super(wrapped);\n        }\n        compute(context) {\n            const blockX = context.x;\n            const blockZ = context.z;\n            if (this.lastBlockX !== blockX || this.lastBlockZ !== blockZ) {\n                this.lastValue = this.wrapped.compute(context);\n                this.lastBlockX = blockX;\n                this.lastBlockZ = blockZ;\n            }\n            return this.lastValue;\n        }\n        mapAll(visitor) {\n            return visitor.map(new Cache2D(this.wrapped.mapAll(visitor)));\n        }\n    }\n    DensityFunction.Cache2D = Cache2D;\n    class CacheOnce extends Wrapper {\n        lastBlockX;\n        lastBlockY;\n        lastBlockZ;\n        lastValue = 0;\n        constructor(wrapped) {\n            super(wrapped);\n        }\n        compute(context) {\n            const blockX = context.x;\n            const blockY = context.y;\n            const blockZ = context.z;\n            if (this.lastBlockX !== blockX || this.lastBlockY !== blockY || this.lastBlockZ !== blockZ) {\n                this.lastValue = this.wrapped.compute(context);\n                this.lastBlockX = blockX;\n                this.lastBlockY = blockY;\n                this.lastBlockZ = blockZ;\n            }\n            return this.lastValue;\n        }\n        mapAll(visitor) {\n            return visitor.map(new CacheOnce(this.wrapped.mapAll(visitor)));\n        }\n    }\n    DensityFunction.CacheOnce = CacheOnce;\n    class Interpolated extends Wrapper {\n        cellWidth;\n        cellHeight;\n        values;\n        constructor(wrapped, cellWidth = 4, cellHeight = 4) {\n            super(wrapped);\n            this.cellWidth = cellWidth;\n            this.cellHeight = cellHeight;\n            this.values = new Map();\n        }\n        compute({ x: blockX, y: blockY, z: blockZ }) {\n            const w = this.cellWidth;\n            const h = this.cellHeight;\n            const x = ((blockX % w + w) % w) / w;\n            const y = ((blockY % h + h) % h) / h;\n            const z = ((blockZ % w + w) % w) / w;\n            const firstX = Math.floor(blockX / w) * w;\n            const firstY = Math.floor(blockY / h) * h;\n            const firstZ = Math.floor(blockZ / w) * w;\n            const noise000 = () => this.computeCorner(firstX, firstY, firstZ);\n            const noise001 = () => this.computeCorner(firstX, firstY, firstZ + w);\n            const noise010 = () => this.computeCorner(firstX, firstY + h, firstZ);\n            const noise011 = () => this.computeCorner(firstX, firstY + h, firstZ + w);\n            const noise100 = () => this.computeCorner(firstX + w, firstY, firstZ);\n            const noise101 = () => this.computeCorner(firstX + w, firstY, firstZ + w);\n            const noise110 = () => this.computeCorner(firstX + w, firstY + h, firstZ);\n            const noise111 = () => this.computeCorner(firstX + w, firstY + h, firstZ + w);\n            return lazyLerp3(x, y, z, noise000, noise100, noise010, noise110, noise001, noise101, noise011, noise111);\n        }\n        computeCorner(x, y, z) {\n            return computeIfAbsent(this.values, `${x} ${y} ${z}`, () => {\n                return this.wrapped.compute(DensityFunction.context(x, y, z));\n            });\n        }\n        mapAll(visitor) {\n            return visitor.map(new Interpolated(this.wrapped.mapAll(visitor)));\n        }\n        withCellSize(cellWidth, cellHeight) {\n            return new Interpolated(this.wrapped, cellWidth, cellHeight);\n        }\n    }\n    DensityFunction.Interpolated = Interpolated;\n    class Noise extends DensityFunction {\n        xzScale;\n        yScale;\n        noiseData;\n        noise;\n        constructor(xzScale, yScale, noiseData, noise) {\n            super();\n            this.xzScale = xzScale;\n            this.yScale = yScale;\n            this.noiseData = noiseData;\n            this.noise = noise;\n        }\n        compute(context) {\n            return this.noise?.sample(context.x * this.xzScale, context.y * this.yScale, context.z * this.xzScale) ?? 0;\n        }\n        maxValue() {\n            return this.noise?.maxValue ?? 2;\n        }\n    }\n    DensityFunction.Noise = Noise;\n    class EndIslands extends DensityFunction {\n        islandNoise;\n        constructor(seed) {\n            super();\n            const random = new LegacyRandom(seed ?? BigInt(0));\n            random.consume(17292);\n            this.islandNoise = new SimplexNoise(random);\n        }\n        getHeightValue(x, z) {\n            const x0 = Math.floor(x / 2);\n            const z0 = Math.floor(z / 2);\n            const x1 = x % 2;\n            const z1 = z % 2;\n            let f = clamp(100 - Math.sqrt(x * x + z * z), -100, 80);\n            for (let i = -12; i <= 12; i += 1) {\n                for (let j = -12; j <= 12; j += 1) {\n                    const x2 = x0 + i;\n                    const z2 = z0 + j;\n                    if (x2 * x2 + z2 * z2 <= 4096 || this.islandNoise.sample2D(x2, z2) >= -0.9) {\n                        continue;\n                    }\n                    const f1 = (Math.abs(x2) * 3439 + Math.abs(z2) * 147) % 13 + 9;\n                    const x3 = x1 + i * 2;\n                    const z3 = z1 + j * 2;\n                    const f2 = 100 - Math.sqrt(x3 * x3 + z3 * z3) * f1;\n                    const f3 = clamp(f2, -100, 80);\n                    f = Math.max(f, f3);\n                }\n            }\n            return f;\n        }\n        compute({ x, y, z }) {\n            return (this.getHeightValue(Math.floor(x / 8), Math.floor(z / 8)) - 8) / 128;\n        }\n        minValue() {\n            return -0.84375;\n        }\n        maxValue() {\n            return 0.5625;\n        }\n    }\n    DensityFunction.EndIslands = EndIslands;\n    const RarityValueMapper = ['type_1', 'type_2'];\n    class WeirdScaledSampler extends Transformer {\n        rarityValueMapper;\n        noiseData;\n        noise;\n        static ValueMapper = {\n            type_1: WeirdScaledSampler.rarityValueMapper1,\n            type_2: WeirdScaledSampler.rarityValueMapper2,\n        };\n        mapper;\n        constructor(input, rarityValueMapper, noiseData, noise) {\n            super(input);\n            this.rarityValueMapper = rarityValueMapper;\n            this.noiseData = noiseData;\n            this.noise = noise;\n            this.mapper = WeirdScaledSampler.ValueMapper[this.rarityValueMapper];\n        }\n        transform(context, density) {\n            if (!this.noise) {\n                return 0;\n            }\n            const rarity = this.mapper(density);\n            return rarity * Math.abs(this.noise.sample(context.x / rarity, context.y / rarity, context.z / rarity));\n        }\n        mapAll(visitor) {\n            return visitor.map(new WeirdScaledSampler(this.input.mapAll(visitor), this.rarityValueMapper, this.noiseData, this.noise));\n        }\n        minValue() {\n            return 0;\n        }\n        maxValue() {\n            return this.rarityValueMapper === 'type_1' ? 2 : 3;\n        }\n        static rarityValueMapper1(value) {\n            if (value < -0.5) {\n                return 0.75;\n            }\n            else if (value < 0) {\n                return 1;\n            }\n            else if (value < 0.5) {\n                return 1.5;\n            }\n            else {\n                return 2;\n            }\n        }\n        static rarityValueMapper2(value) {\n            if (value < -0.75) {\n                return 0.5;\n            }\n            else if (value < -0.5) {\n                return 0.75;\n            }\n            else if (value < 0.5) {\n                return 1;\n            }\n            else if (value < 0.75) {\n                return 2;\n            }\n            else {\n                return 3;\n            }\n        }\n    }\n    DensityFunction.WeirdScaledSampler = WeirdScaledSampler;\n    class ShiftedNoise extends Noise {\n        shiftX;\n        shiftY;\n        shiftZ;\n        constructor(shiftX, shiftY, shiftZ, xzScale, yScale, noiseData, noise) {\n            super(xzScale, yScale, noiseData, noise);\n            this.shiftX = shiftX;\n            this.shiftY = shiftY;\n            this.shiftZ = shiftZ;\n        }\n        compute(context) {\n            const xx = context.x * this.xzScale + this.shiftX.compute(context);\n            const yy = context.y * this.yScale + this.shiftY.compute(context);\n            const zz = context.z * this.xzScale + this.shiftZ.compute(context);\n            return this.noise?.sample(xx, yy, zz) ?? 0;\n        }\n        mapAll(visitor) {\n            return visitor.map(new ShiftedNoise(this.shiftX.mapAll(visitor), this.shiftY.mapAll(visitor), this.shiftZ.mapAll(visitor), this.xzScale, this.yScale, this.noiseData, this.noise));\n        }\n    }\n    DensityFunction.ShiftedNoise = ShiftedNoise;\n    class RangeChoice extends DensityFunction {\n        input;\n        minInclusive;\n        maxExclusive;\n        whenInRange;\n        whenOutOfRange;\n        constructor(input, minInclusive, maxExclusive, whenInRange, whenOutOfRange) {\n            super();\n            this.input = input;\n            this.minInclusive = minInclusive;\n            this.maxExclusive = maxExclusive;\n            this.whenInRange = whenInRange;\n            this.whenOutOfRange = whenOutOfRange;\n        }\n        compute(context) {\n            const x = this.input.compute(context);\n            return (this.minInclusive <= x && x < this.maxExclusive)\n                ? this.whenInRange.compute(context)\n                : this.whenOutOfRange.compute(context);\n        }\n        mapAll(visitor) {\n            return visitor.map(new RangeChoice(this.input.mapAll(visitor), this.minInclusive, this.maxExclusive, this.whenInRange.mapAll(visitor), this.whenOutOfRange.mapAll(visitor)));\n        }\n        minValue() {\n            return Math.min(this.whenInRange.minValue(), this.whenOutOfRange.minValue());\n        }\n        maxValue() {\n            return Math.max(this.whenInRange.maxValue(), this.whenOutOfRange.maxValue());\n        }\n    }\n    DensityFunction.RangeChoice = RangeChoice;\n    class ShiftNoise extends DensityFunction {\n        noiseData;\n        offsetNoise;\n        constructor(noiseData, offsetNoise) {\n            super();\n            this.noiseData = noiseData;\n            this.offsetNoise = offsetNoise;\n        }\n        compute(context) {\n            return this.offsetNoise?.sample(context.x * 0.25, context.y * 0.25, context.z * 0.25) ?? 0;\n        }\n        maxValue() {\n            return (this.offsetNoise?.maxValue ?? 2) * 4;\n        }\n    }\n    DensityFunction.ShiftNoise = ShiftNoise;\n    class ShiftA extends ShiftNoise {\n        constructor(noiseData, offsetNoise) {\n            super(noiseData, offsetNoise);\n        }\n        compute(context) {\n            return super.compute(DensityFunction.context(context.x, 0, context.z));\n        }\n        withNewNoise(newNoise) {\n            return new ShiftA(this.noiseData, newNoise);\n        }\n    }\n    DensityFunction.ShiftA = ShiftA;\n    class ShiftB extends ShiftNoise {\n        constructor(noiseData, offsetNoise) {\n            super(noiseData, offsetNoise);\n        }\n        compute(context) {\n            return super.compute(DensityFunction.context(context.z, context.x, 0));\n        }\n        withNewNoise(newNoise) {\n            return new ShiftB(this.noiseData, newNoise);\n        }\n    }\n    DensityFunction.ShiftB = ShiftB;\n    class Shift extends ShiftNoise {\n        constructor(noiseData, offsetNoise) {\n            super(noiseData, offsetNoise);\n        }\n        withNewNoise(newNoise) {\n            return new Shift(this.noiseData, newNoise);\n        }\n    }\n    DensityFunction.Shift = Shift;\n    class BlendDensity extends Transformer {\n        constructor(input) {\n            super(input);\n        }\n        transform(context, density) {\n            return density; // blender not supported\n        }\n        mapAll(visitor) {\n            return visitor.map(new BlendDensity(this.input.mapAll(visitor)));\n        }\n        minValue() {\n            return -Infinity;\n        }\n        maxValue() {\n            return Infinity;\n        }\n    }\n    DensityFunction.BlendDensity = BlendDensity;\n    class Clamp extends Transformer {\n        min;\n        max;\n        constructor(input, min, max) {\n            super(input);\n            this.min = min;\n            this.max = max;\n        }\n        transform(context, density) {\n            return clamp(density, this.min, this.max);\n        }\n        mapAll(visitor) {\n            return visitor.map(new Clamp(this.input.mapAll(visitor), this.min, this.max));\n        }\n        minValue() {\n            return this.min;\n        }\n        maxValue() {\n            return this.max;\n        }\n    }\n    DensityFunction.Clamp = Clamp;\n    const MappedType = ['abs', 'square', 'cube', 'half_negative', 'quarter_negative', 'squeeze'];\n    class Mapped extends Transformer {\n        type;\n        min;\n        max;\n        static MappedTypes = {\n            abs: d => Math.abs(d),\n            square: d => d * d,\n            cube: d => d * d * d,\n            half_negative: d => d > 0 ? d : d * 0.5,\n            quarter_negative: d => d > 0 ? d : d * 0.25,\n            squeeze: d => {\n                const c = clamp(d, -1, 1);\n                return c / 2 - c * c * c / 24;\n            },\n        };\n        transformer;\n        constructor(type, input, min, max) {\n            super(input);\n            this.type = type;\n            this.min = min;\n            this.max = max;\n            this.transformer = Mapped.MappedTypes[this.type];\n        }\n        transform(context, density) {\n            return this.transformer(density);\n        }\n        mapAll(visitor) {\n            return visitor.map(new Mapped(this.type, this.input.mapAll(visitor)));\n        }\n        minValue() {\n            return this.min ?? -Infinity;\n        }\n        maxValue() {\n            return this.max ?? Infinity;\n        }\n        withMinMax() {\n            const minInput = this.input.minValue();\n            let min = this.transformer(minInput);\n            let max = this.transformer(this.input.maxValue());\n            if (this.type === 'abs' || this.type === 'square') {\n                max = Math.max(min, max);\n                min = Math.max(0, minInput);\n            }\n            return new Mapped(this.type, this.input, min, max);\n        }\n    }\n    DensityFunction.Mapped = Mapped;\n    const Ap2Type = ['add', 'mul', 'min', 'max'];\n    class Ap2 extends DensityFunction {\n        type;\n        argument1;\n        argument2;\n        min;\n        max;\n        constructor(type, argument1, argument2, min, max) {\n            super();\n            this.type = type;\n            this.argument1 = argument1;\n            this.argument2 = argument2;\n            this.min = min;\n            this.max = max;\n        }\n        compute(context) {\n            const a = this.argument1.compute(context);\n            switch (this.type) {\n                case 'add': return a + this.argument2.compute(context);\n                case 'mul': return a === 0 ? 0 : a * this.argument2.compute(context);\n                case 'min': return a < this.argument2.minValue() ? a : Math.min(a, this.argument2.compute(context));\n                case 'max': return a > this.argument2.maxValue() ? a : Math.max(a, this.argument2.compute(context));\n            }\n        }\n        mapAll(visitor) {\n            return visitor.map(new Ap2(this.type, this.argument1.mapAll(visitor), this.argument2.mapAll(visitor)));\n        }\n        minValue() {\n            return this.min ?? -Infinity;\n        }\n        maxValue() {\n            return this.max ?? Infinity;\n        }\n        withMinMax() {\n            const min1 = this.argument1.minValue();\n            const min2 = this.argument2.minValue();\n            const max1 = this.argument1.maxValue();\n            const max2 = this.argument2.maxValue();\n            if ((this.type === 'min' || this.type === 'max') && (min1 >= max2 || min2 >= max1)) {\n                console.warn(`Creating a ${this.type} function between two non-overlapping inputs`);\n            }\n            let min, max;\n            switch (this.type) {\n                case 'add':\n                    min = min1 + min2;\n                    max = max1 + max2;\n                    break;\n                case 'mul':\n                    min = min1 > 0 && min2 > 0 ? (min1 * min2) || 0\n                        : max1 < 0 && max2 < 0 ? (max1 * max2) || 0\n                            : Math.min((min1 * max2) || 0, (min2 * max1) || 0);\n                    max = min1 > 0 && min2 > 0 ? (max1 * max2) || 0\n                        : max1 < 0 && max2 < 0 ? (min1 * min2) || 0\n                            : Math.max((min1 * min2) || 0, (max1 * max2) || 0);\n                    break;\n                case 'min':\n                    min = Math.min(min1, min2);\n                    max = Math.min(max1, max2);\n                    break;\n                case 'max':\n                    min = Math.max(min1, min2);\n                    max = Math.max(max1, max2);\n                    break;\n            }\n            return new Ap2(this.type, this.argument1, this.argument2, min, max);\n        }\n    }\n    DensityFunction.Ap2 = Ap2;\n    class Spline extends DensityFunction {\n        spline;\n        constructor(spline) {\n            super();\n            this.spline = spline;\n        }\n        compute(context) {\n            return this.spline.compute(context);\n        }\n        mapAll(visitor) {\n            const newCubicSpline = this.spline.mapAll((fn) => {\n                if (fn instanceof DensityFunction) {\n                    return fn.mapAll(visitor);\n                }\n                return fn;\n            });\n            newCubicSpline.calculateMinMax();\n            return visitor.map(new Spline(newCubicSpline));\n        }\n        minValue() {\n            return this.spline.min();\n        }\n        maxValue() {\n            return this.spline.max();\n        }\n    }\n    DensityFunction.Spline = Spline;\n    class YClampedGradient extends DensityFunction {\n        fromY;\n        toY;\n        fromValue;\n        toValue;\n        constructor(fromY, toY, fromValue, toValue) {\n            super();\n            this.fromY = fromY;\n            this.toY = toY;\n            this.fromValue = fromValue;\n            this.toValue = toValue;\n        }\n        compute(context) {\n            return clampedMap(context.y, this.fromY, this.toY, this.fromValue, this.toValue);\n        }\n        minValue() {\n            return Math.min(this.fromValue, this.toValue);\n        }\n        maxValue() {\n            return Math.max(this.fromValue, this.toValue);\n        }\n    }\n    DensityFunction.YClampedGradient = YClampedGradient;\n})(DensityFunction || (DensityFunction = {}));\n//# sourceMappingURL=DensityFunction.js.map","import { BlockPos, BlockState, ChunkPos } from '../core/index.js';\nimport { clamp, clampedMap, map } from '../math/index.js';\nimport { lazy } from '../util/index.js';\nimport { DensityFunction } from './DensityFunction.js';\nexport class FluidStatus {\n    level;\n    type;\n    constructor(level, type) {\n        this.level = level;\n        this.type = type;\n    }\n    at(level) {\n        return level < this.level ? this.type : BlockState.AIR;\n    }\n}\nexport var Aquifer;\n(function (Aquifer) {\n    function createDisabled(fluidPicker) {\n        return {\n            compute({ x, y, z }, density) {\n                if (density > 0) {\n                    return undefined;\n                }\n                return fluidPicker(x, y, z).at(y);\n            },\n        };\n    }\n    Aquifer.createDisabled = createDisabled;\n})(Aquifer || (Aquifer = {}));\nexport class NoiseAquifer {\n    noiseChunk;\n    router;\n    random;\n    globalFluidPicker;\n    static X_SPACING = 16;\n    static Y_SPACING = 12;\n    static Z_SPACING = 16;\n    static SURFACE_SAMPLING = [[-2, -1], [-1, -1], [0, -1], [1, -1], [-3, 0], [-2, 0], [-1, 0], [0, 0], [1, 0], [-2, 1], [-1, 1], [0, 1], [1, 1]];\n    minGridX;\n    minGridY;\n    minGridZ;\n    gridSizeX;\n    gridSizeZ;\n    gridSize;\n    aquiferCache;\n    aquiferLocationCache;\n    constructor(noiseChunk, chunkPos, router, random, minY, height, globalFluidPicker) {\n        this.noiseChunk = noiseChunk;\n        this.router = router;\n        this.random = random;\n        this.globalFluidPicker = globalFluidPicker;\n        this.minGridX = this.gridX(ChunkPos.minBlockX(chunkPos)) - 1;\n        this.gridSizeX = this.gridX(ChunkPos.maxBlockX(chunkPos)) + 1 - this.minGridX + 1;\n        this.minGridY = this.gridY(minY) - 1;\n        this.minGridZ = this.gridZ(ChunkPos.minBlockZ(chunkPos)) - 1;\n        this.gridSizeZ = this.gridZ(ChunkPos.maxBlockZ(chunkPos)) + 1 - this.minGridZ + 1;\n        const gridSizeY = this.gridY(minY + height) + 1 - this.minGridY + 1;\n        this.gridSize = this.gridSizeX * gridSizeY * this.gridSizeZ;\n        this.aquiferCache = Array(this.gridSize).fill(undefined);\n        this.aquiferLocationCache = Array(this.gridSize).fill(BlockPos.ZERO);\n    }\n    compute({ x, y, z }, density) {\n        if (density <= 0) {\n            if (this.globalFluidPicker(x, y, z).at(y).is(BlockState.LAVA)) {\n                return BlockState.LAVA;\n            }\n            else {\n                const gridX = this.gridX(x - 5);\n                const gridY = this.gridY(y + 1);\n                const gridZ = this.gridZ(z - 5);\n                let mag1 = Number.MAX_SAFE_INTEGER;\n                let mag2 = Number.MAX_SAFE_INTEGER;\n                let mag3 = Number.MAX_SAFE_INTEGER;\n                let loc1 = BlockPos.ZERO;\n                let loc2 = BlockPos.ZERO;\n                let loc3 = BlockPos.ZERO;\n                for (let xOffset = 0; xOffset <= 1; xOffset += 1) {\n                    for (let yOffset = -1; yOffset <= 1; yOffset += 1) {\n                        for (let zOffset = 0; zOffset <= 1; zOffset += 1) {\n                            const location = this.getLocation(gridX + xOffset, gridY + yOffset, gridZ + zOffset);\n                            const magnitude = BlockPos.magnitude(location);\n                            if (mag1 >= magnitude) {\n                                loc3 = loc2;\n                                loc2 = loc1;\n                                loc1 = location;\n                                mag3 = mag2;\n                                mag2 = mag1;\n                                mag1 = magnitude;\n                            }\n                            else if (mag2 >= magnitude) {\n                                loc3 = loc2;\n                                loc2 = location;\n                                mag3 = mag2;\n                                mag2 = magnitude;\n                            }\n                            else if (mag3 >= magnitude) {\n                                loc3 = location;\n                                mag3 = magnitude;\n                            }\n                        }\n                    }\n                }\n                const status1 = this.getStatus(loc1);\n                const status2 = this.getStatus(loc2);\n                const status3 = this.getStatus(loc3);\n                const similarity12 = NoiseAquifer.similarity(mag1, mag2);\n                const similarity13 = NoiseAquifer.similarity(mag1, mag3);\n                const similarity23 = NoiseAquifer.similarity(mag2, mag3);\n                let pressure;\n                if (status1.at(y).is(BlockState.WATER) && this.globalFluidPicker(x, y - 1, z).at(y - 1).is(BlockState.LAVA)) {\n                    pressure = 1;\n                }\n                else if (similarity12 > -1) {\n                    const barrier = lazy(() => this.router.barrier.compute(DensityFunction.context(x, y * 0.5, z)));\n                    const pressure12 = this.calculatePressure(y, status1, status2, barrier);\n                    const pressure13 = this.calculatePressure(y, status1, status3, barrier);\n                    const pressure23 = this.calculatePressure(y, status2, status3, barrier);\n                    const n = Math.max(pressure12, pressure13 * Math.max(0, similarity13), pressure23 * Math.max(similarity23));\n                    pressure = Math.max(0, 2 * Math.max(0, similarity12) * n);\n                }\n                else {\n                    pressure = 0;\n                }\n                if (density + pressure <= 0) {\n                    return status1.at(y);\n                }\n            }\n        }\n        return undefined;\n    }\n    static similarity(a, b) {\n        return 1 - Math.abs(b - a) / 25;\n    }\n    calculatePressure(y, status1, status2, barrier) {\n        const fluid1 = status1.at(y);\n        const fluid2 = status2.at(y);\n        if ((fluid1.is(BlockState.LAVA) && fluid2.is(BlockState.WATER)) || (fluid1.is(BlockState.WATER) && fluid2.is(BlockState.LAVA))) {\n            return 1;\n        }\n        const levelDiff = Math.abs(status1.level - status2.level);\n        if (levelDiff === 0) {\n            return 0;\n        }\n        const levelAvg = (status1.level + status2.level) / 2;\n        const levelAvgDiff = y + 0.5 - levelAvg;\n        const p = levelDiff / 2 - Math.abs(levelAvgDiff);\n        const pressure = levelAvgDiff > 0\n            ? p > 0 ? p / 1.5 : p / 2.5\n            : p > -3 ? (p + 3) / 3 : (p + 3) / 10;\n        if (pressure < -2 || pressure > 2) {\n            return pressure;\n        }\n        return pressure + barrier();\n    }\n    getStatus(location) {\n        const [x, y, z] = location;\n        const index = this.getIndex(this.gridX(x), this.gridY(y), this.gridZ(z));\n        const cachedStatus = this.aquiferCache[index];\n        if (cachedStatus !== undefined) {\n            return cachedStatus;\n        }\n        const status = this.computeStatus(x, y, z);\n        this.aquiferCache[index] = status;\n        return status;\n    }\n    computeStatus(x, y, z) {\n        const globalStatus = this.globalFluidPicker(x, y, z);\n        let minPreliminarySurface = Number.MAX_SAFE_INTEGER;\n        let isAquifer = false;\n        for (const [xOffset, zOffset] of NoiseAquifer.SURFACE_SAMPLING) {\n            const blockX = x + (zOffset << 4);\n            const blockZ = z + (zOffset << 4);\n            const preliminarySurface = this.noiseChunk.getPreliminarySurfaceLevel(blockX, blockZ);\n            minPreliminarySurface = Math.min(minPreliminarySurface, preliminarySurface);\n            const noOffset = xOffset === 0 && zOffset === 0;\n            if (noOffset && y - 12 > preliminarySurface + 8) {\n                return globalStatus;\n            }\n            if ((noOffset || y + 12 > preliminarySurface + 8)) {\n                const newStatus = this.globalFluidPicker(blockX, preliminarySurface + 8, blockZ);\n                if (!newStatus.at(preliminarySurface + 8).is(BlockState.AIR)) {\n                    if (noOffset) {\n                        return newStatus;\n                    }\n                    else {\n                        isAquifer = true;\n                    }\n                }\n            }\n        }\n        const allowedFloodedness = isAquifer ? clampedMap(minPreliminarySurface + 8 - y, 0, 64, 1, 0) : 0;\n        const floodedness = clamp(this.router.fluidLevelFloodedness.compute(DensityFunction.context(x, y * 0.67, z)), -1, 1);\n        if (floodedness > map(allowedFloodedness, 1, 0, -0.3, 0.8)) {\n            return globalStatus;\n        }\n        if (floodedness <= map(allowedFloodedness, 1, 0, -0.8, 0.4)) {\n            return new FluidStatus(Number.MIN_SAFE_INTEGER, globalStatus.type);\n        }\n        const gridY = Math.floor(y / 40);\n        const spread = this.router.fluidLevelSpread.compute(DensityFunction.context(Math.floor(x / 16), gridY, Math.floor(z / 16)));\n        const level = gridY * 40 + 20 + Math.floor(spread / 3) * 3;\n        const statusLevel = Math.min(minPreliminarySurface, level);\n        const fluid = this.getFluidType(x, y, z, globalStatus.type, level);\n        return new FluidStatus(statusLevel, fluid);\n    }\n    getFluidType(x, y, z, global, level) {\n        if (level <= -10) {\n            const lava = this.router.lava.compute(DensityFunction.context(Math.floor(x / 64), Math.floor(y / 40), Math.floor(z / 64)));\n            if (Math.abs(lava) > 0.3) {\n                return BlockState.LAVA;\n            }\n        }\n        return global;\n    }\n    getLocation(x, y, z) {\n        const index = this.getIndex(x, y, z);\n        const cachedLocation = this.aquiferLocationCache[index];\n        if (BlockPos.equals(cachedLocation, BlockPos.ZERO)) {\n            return cachedLocation;\n        }\n        const random = this.random.at(x, y, z);\n        const location = BlockPos.create(x * NoiseAquifer.X_SPACING + random.nextInt(10), y * NoiseAquifer.Y_SPACING + random.nextInt(9), z * NoiseAquifer.Z_SPACING + random.nextInt(10));\n        this.aquiferLocationCache[index] = location;\n        return location;\n    }\n    getIndex(x, y, z) {\n        const gridX = x - this.minGridX;\n        const gridY = y - this.minGridY;\n        const gridZ = z - this.minGridZ;\n        const index = (gridY * this.gridSizeZ + gridZ) * this.gridSizeX + gridX;\n        if (index < 0 || index >= this.gridSize) {\n            throw new Error(`Invalid aquifer index at ${x} ${y} ${z}: 0 <= ${index} < ${this.gridSize}`);\n        }\n        return index;\n    }\n    gridX(x) {\n        return Math.floor(x / NoiseAquifer.X_SPACING);\n    }\n    gridY(y) {\n        return Math.floor(y / NoiseAquifer.Y_SPACING);\n    }\n    gridZ(z) {\n        return Math.floor(z / NoiseAquifer.Z_SPACING);\n    }\n}\n//# sourceMappingURL=Aquifer.js.map","import { Identifier } from '../../core/index.js';\nimport { Json } from '../../util/index.js';\nexport class CheckerboardBiomeSource {\n    shift;\n    biomes;\n    n;\n    constructor(shift, biomes) {\n        this.shift = shift;\n        this.biomes = biomes;\n        if (biomes.length === 0) {\n            throw new Error('Cannot create checkerboard biome source without biomes');\n        }\n        this.n = biomes.length;\n    }\n    getBiome(x, y, z) {\n        const i = (((x >> this.shift) + (z >> this.shift)) % this.n + this.n) % this.n;\n        return Identifier.parse(this.biomes[i].toString());\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const scale = Json.readInt(root.scale) ?? 2;\n        let biomes;\n        if (typeof root.biomes === 'string') {\n            biomes = [Identifier.parse(root.biomes)];\n        }\n        else {\n            biomes = Json.readArray(root.biomes, (b) => Identifier.parse(Json.readString(b) ?? '')) ?? [];\n        }\n        return new CheckerboardBiomeSource(scale + 2, biomes);\n    }\n}\n//# sourceMappingURL=CheckerboardBiomeSource.js.map","import { Identifier } from '../../core/index.js';\nimport { Json } from '../../util/index.js';\nexport class FixedBiomeSource {\n    biome;\n    constructor(biome) {\n        this.biome = biome;\n    }\n    getBiome() {\n        return this.biome;\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const biome = Identifier.parse(Json.readString(root.biome) ?? 'plains');\n        return new FixedBiomeSource(biome);\n    }\n}\n//# sourceMappingURL=FixedBiomeSource.js.map","import { square } from '../../math/index.js';\nimport { Json } from '../../util/index.js';\nimport { DensityFunction } from '../DensityFunction.js';\nexport var Climate;\n(function (Climate) {\n    const PARAMETER_SPACE = 7;\n    function target(temperature, humidity, continentalness, erosion, depth, weirdness) {\n        return new TargetPoint(temperature, humidity, continentalness, erosion, depth, weirdness);\n    }\n    Climate.target = target;\n    function parameters(temperature, humidity, continentalness, erosion, depth, weirdness, offset) {\n        return new ParamPoint(param(temperature), param(humidity), param(continentalness), param(erosion), param(depth), param(weirdness), offset);\n    }\n    Climate.parameters = parameters;\n    function param(value, max) {\n        if (typeof value === 'number') {\n            return new Param(value, max ?? value);\n        }\n        return value;\n    }\n    Climate.param = param;\n    class Param {\n        min;\n        max;\n        constructor(min, max) {\n            this.min = min;\n            this.max = max;\n        }\n        distance(param) {\n            const diffMax = (typeof param === 'number' ? param : param.min) - this.max;\n            const diffMin = this.min - (typeof param === 'number' ? param : param.max);\n            if (diffMax > 0) {\n                return diffMax;\n            }\n            return Math.max(diffMin, 0);\n        }\n        union(param) {\n            return new Param(Math.min(this.min, param.min), Math.max(this.max, param.max));\n        }\n        static fromJson(obj) {\n            if (typeof obj === 'number')\n                return new Param(obj, obj);\n            const [min, max] = Json.readArray(obj, e => Json.readNumber(e)) ?? [];\n            return new Param(min ?? 0, max ?? 0);\n        }\n    }\n    Climate.Param = Param;\n    class ParamPoint {\n        temperature;\n        humidity;\n        continentalness;\n        erosion;\n        depth;\n        weirdness;\n        offset;\n        constructor(temperature, humidity, continentalness, erosion, depth, weirdness, offset) {\n            this.temperature = temperature;\n            this.humidity = humidity;\n            this.continentalness = continentalness;\n            this.erosion = erosion;\n            this.depth = depth;\n            this.weirdness = weirdness;\n            this.offset = offset;\n        }\n        fittness(point) {\n            return square(this.temperature.distance(point.temperature))\n                + square(this.humidity.distance(point.humidity))\n                + square(this.continentalness.distance(point.continentalness))\n                + square(this.erosion.distance(point.erosion))\n                + square(this.depth.distance(point.depth))\n                + square(this.weirdness.distance(point.weirdness))\n                + square(this.offset - point.offset);\n        }\n        space() {\n            return [this.temperature, this.humidity, this.continentalness, this.erosion, this.depth, this.weirdness, new Param(this.offset, this.offset)];\n        }\n        static fromJson(obj) {\n            const root = Json.readObject(obj) ?? {};\n            return new ParamPoint(Param.fromJson(root.temperature), Param.fromJson(root.humidity), Param.fromJson(root.continentalness), Param.fromJson(root.erosion), Param.fromJson(root.depth), Param.fromJson(root.weirdness), Json.readNumber(root.offset) ?? 0);\n        }\n    }\n    Climate.ParamPoint = ParamPoint;\n    class TargetPoint {\n        temperature;\n        humidity;\n        continentalness;\n        erosion;\n        depth;\n        weirdness;\n        constructor(temperature, humidity, continentalness, erosion, depth, weirdness) {\n            this.temperature = temperature;\n            this.humidity = humidity;\n            this.continentalness = continentalness;\n            this.erosion = erosion;\n            this.depth = depth;\n            this.weirdness = weirdness;\n        }\n        get offset() {\n            return 0;\n        }\n        toArray() {\n            return [this.temperature, this.humidity, this.continentalness, this.erosion, this.depth, this.weirdness, this.offset];\n        }\n    }\n    Climate.TargetPoint = TargetPoint;\n    class Parameters {\n        things;\n        index;\n        constructor(things) {\n            this.things = things;\n            this.index = new RTree(things);\n        }\n        find(target) {\n            return this.index.search(target, (node, values) => node.distance(values));\n        }\n    }\n    Climate.Parameters = Parameters;\n    class Sampler {\n        temperature;\n        humidity;\n        continentalness;\n        erosion;\n        depth;\n        weirdness;\n        constructor(temperature, humidity, continentalness, erosion, depth, weirdness) {\n            this.temperature = temperature;\n            this.humidity = humidity;\n            this.continentalness = continentalness;\n            this.erosion = erosion;\n            this.depth = depth;\n            this.weirdness = weirdness;\n        }\n        static fromRouter(router) {\n            return new Climate.Sampler(router.temperature, router.vegetation, router.continents, router.erosion, router.depth, router.ridges);\n        }\n        sample(x, y, z) {\n            const context = DensityFunction.context(x << 2, y << 2, z << 2);\n            return Climate.target(this.temperature.compute(context), this.humidity.compute(context), this.continentalness.compute(context), this.erosion.compute(context), this.depth.compute(context), this.weirdness.compute(context));\n        }\n    }\n    Climate.Sampler = Sampler;\n    class RTree {\n        static CHILDREN_PER_NODE = 10;\n        root;\n        last_leaf = null;\n        constructor(points) {\n            if (points.length === 0) {\n                throw new Error('At least one point is required to build search tree');\n            }\n            this.root = RTree.build(points.map(([point, thing]) => new RLeaf(point, thing)));\n        }\n        static build(nodes) {\n            if (nodes.length === 1) {\n                return nodes[0];\n            }\n            if (nodes.length <= RTree.CHILDREN_PER_NODE) {\n                const sortedNodes = nodes\n                    .map(node => {\n                    let key = 0.0;\n                    for (let i = 0; i < PARAMETER_SPACE; i += 1) {\n                        const param = node.space[i];\n                        key += Math.abs((param.min + param.max) / 2.0);\n                    }\n                    return { key, node };\n                })\n                    .sort((a, b) => a.key - b.key)\n                    .map(({ node }) => node);\n                return new RSubTree(sortedNodes);\n            }\n            let f = Infinity;\n            let n3 = -1;\n            let result = [];\n            for (let n2 = 0; n2 < PARAMETER_SPACE; ++n2) {\n                nodes = RTree.sort(nodes, n2, false);\n                result = RTree.bucketize(nodes);\n                let f2 = 0.0;\n                for (const subTree2 of result) {\n                    f2 += RTree.area(subTree2.space);\n                }\n                if (!(f > f2))\n                    continue;\n                f = f2;\n                n3 = n2;\n            }\n            nodes = RTree.sort(nodes, n3, false);\n            result = RTree.bucketize(nodes);\n            result = RTree.sort(result, n3, true);\n            return new RSubTree(result.map(subTree => RTree.build(subTree.children)));\n        }\n        static sort(nodes, i, abs) {\n            return nodes\n                .map(node => {\n                const param = node.space[i];\n                const f = (param.min + param.max) / 2;\n                const key = abs ? Math.abs(f) : f;\n                return { key, node };\n            })\n                .sort((a, b) => a.key - b.key)\n                .map(({ node }) => node);\n        }\n        static bucketize(nodes) {\n            const arrayList = [];\n            let arrayList2 = [];\n            const n = Math.pow(10.0, Math.floor(Math.log(nodes.length - 0.01) / Math.log(10.0)));\n            for (const node of nodes) {\n                arrayList2.push(node);\n                if (arrayList2.length < n)\n                    continue;\n                arrayList.push(new RSubTree(arrayList2));\n                arrayList2 = [];\n            }\n            if (arrayList2.length !== 0) {\n                arrayList.push(new RSubTree(arrayList2));\n            }\n            return arrayList;\n        }\n        static area(params) {\n            let f = 0.0;\n            for (const param of params) {\n                f += Math.abs(param.max - param.min);\n            }\n            return f;\n        }\n        search(target, distance) {\n            const leaf = this.root.search(target.toArray(), this.last_leaf, distance);\n            this.last_leaf = leaf;\n            return leaf.thing();\n        }\n    }\n    Climate.RTree = RTree;\n    class RNode {\n        space;\n        constructor(space) {\n            this.space = space;\n        }\n        distance(values) {\n            let result = 0;\n            for (let i = 0; i < PARAMETER_SPACE; i += 1) {\n                result += square(this.space[i].distance(values[i]));\n            }\n            return result;\n        }\n    }\n    Climate.RNode = RNode;\n    class RSubTree extends RNode {\n        children;\n        constructor(children) {\n            super(RSubTree.buildSpace(children));\n            this.children = children;\n        }\n        static buildSpace(nodes) {\n            let space = [...Array(PARAMETER_SPACE)].map(() => new Param(Infinity, -Infinity));\n            for (const node of nodes) {\n                space = [...Array(PARAMETER_SPACE)].map((_, i) => space[i].union(node.space[i]));\n            }\n            return space;\n        }\n        search(values, closest_leaf, distance) {\n            let dist = closest_leaf ? distance(closest_leaf, values) : Infinity;\n            let leaf = closest_leaf;\n            for (const node of this.children) {\n                const d1 = distance(node, values);\n                if (dist <= d1)\n                    continue;\n                const leaf2 = node.search(values, leaf, distance);\n                if (leaf2 === null)\n                    continue;\n                const d2 = node == leaf2 ? d1 : distance(leaf2, values);\n                if (d2 === 0)\n                    return leaf2;\n                if (dist <= d2)\n                    continue;\n                dist = d2;\n                leaf = leaf2;\n            }\n            return leaf;\n        }\n    }\n    Climate.RSubTree = RSubTree;\n    class RLeaf extends RNode {\n        thing;\n        constructor(point, thing) {\n            super(point.space());\n            this.thing = thing;\n        }\n        search() {\n            return this;\n        }\n    }\n    Climate.RLeaf = RLeaf;\n})(Climate || (Climate = {}));\n//# sourceMappingURL=Climate.js.map","import { Identifier } from '../../core/index.js';\nimport { Json } from '../../util/index.js';\nimport { Climate } from './Climate.js';\nexport class MultiNoiseBiomeSource {\n    parameters;\n    constructor(entries) {\n        this.parameters = new Climate.Parameters(entries);\n    }\n    getBiome(x, y, z, climateSampler) {\n        const target = climateSampler.sample(x, y, z);\n        return this.parameters.find(target);\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const biomes = Json.readArray(root.biomes, b => (b => ({\n            biome: Identifier.parse(Json.readString(b.biome) ?? 'plains'),\n            parameters: Climate.ParamPoint.fromJson(b.parameters),\n        }))(Json.readObject(b) ?? {})) ?? [];\n        const entries = biomes.map(b => [b.parameters, () => b.biome]);\n        return new MultiNoiseBiomeSource(entries);\n    }\n}\n//# sourceMappingURL=MultiNoiseBiomeSource.js.map","import { Identifier } from '../../core/index.js';\nimport { DensityFunction } from '../DensityFunction.js';\nexport class TheEndBiomeSource {\n    static END = Identifier.create('the_end');\n    static HIGHLANDS = Identifier.create('end_highlands');\n    static MIDLANDS = Identifier.create('end_midlands');\n    static ISLANDS = Identifier.create('small_end_islands');\n    static BARRENS = Identifier.create('end_barrens');\n    getBiome(x, y, z, climateSampler) {\n        const blockX = x << 2;\n        const blockY = y << 2;\n        const blockZ = z << 2;\n        const sectionX = blockX >> 4;\n        const sectionZ = blockZ >> 4;\n        if (sectionX * sectionX + sectionZ * sectionZ <= 4096) {\n            return TheEndBiomeSource.END;\n        }\n        const context = DensityFunction.context((sectionX * 2 + 1) * 8, blockY, (sectionZ * 2 + 1) * 8);\n        const erosion = climateSampler.erosion.compute(context);\n        if (erosion > 0.25) {\n            return TheEndBiomeSource.HIGHLANDS;\n        }\n        else if (erosion >= -0.0625) {\n            return TheEndBiomeSource.MIDLANDS;\n        }\n        else if (erosion >= -0.21875) {\n            return TheEndBiomeSource.BARRENS;\n        }\n        else {\n            return TheEndBiomeSource.ISLANDS;\n        }\n    }\n    static fromJson(obj) {\n        return new TheEndBiomeSource();\n    }\n}\n//# sourceMappingURL=TheEndBiomeSource.js.map","import { BlockPos, Identifier } from '../../core/index.js';\nimport { Json } from '../../util/index.js';\nimport { CheckerboardBiomeSource } from './CheckerboardBiomeSource.js';\nimport { FixedBiomeSource } from './FixedBiomeSource.js';\nimport { MultiNoiseBiomeSource } from './MultiNoiseBiomeSource.js';\nimport { TheEndBiomeSource } from './TheEndBiomeSource.js';\nexport var BiomeSource;\n(function (BiomeSource) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        switch (type) {\n            case 'fixed': return FixedBiomeSource.fromJson(obj);\n            case 'checkerboard': return CheckerboardBiomeSource.fromJson(obj);\n            case 'multi_noise': return MultiNoiseBiomeSource.fromJson(obj);\n            case 'the_end': return TheEndBiomeSource.fromJson(obj);\n            default: return new FixedBiomeSource(Identifier.create('plains'));\n        }\n    }\n    BiomeSource.fromJson = fromJson;\n    function findBiomeHorizontal(biomeSource, centerX, y, centerZ, range, predicate, random, sampler, step = 1, searchFromCenter = false) {\n        if (biomeSource instanceof FixedBiomeSource) {\n            if (predicate(biomeSource.getBiome())) {\n                if (searchFromCenter) {\n                    return { pos: BlockPos.create(centerX, y, centerZ), biome: biomeSource.getBiome() };\n                }\n                else {\n                    return { pos: BlockPos.create(centerX - range + random.nextInt(range * 2 + 1), y, centerZ - range + random.nextInt(range * 2 + 1)), biome: biomeSource.getBiome() };\n                }\n            }\n            else {\n                return undefined;\n            }\n        }\n        const centerQuardX = centerX >> 2;\n        const centerQuardZ = centerZ >> 2;\n        const quardRange = range >> 2;\n        const quardY = y >> 2;\n        var result = undefined;\n        var found_count = 0;\n        var currentRangeStart = searchFromCenter ? 0 : quardRange;\n        for (var currentRange = currentRangeStart; currentRange <= quardRange; currentRange += step) {\n            for (var quardZOffset = -currentRange; quardZOffset <= currentRange; quardZOffset += step) {\n                const isZEdge = Math.abs(quardZOffset) === currentRange;\n                for (var quardXOffset = -currentRange; quardXOffset <= currentRange; quardXOffset += step) {\n                    if (searchFromCenter) {\n                        const isXEdge = Math.abs(quardXOffset) === currentRange;\n                        if (!isXEdge && !isZEdge) {\n                            continue;\n                        }\n                    }\n                    const quardX = centerQuardX + quardXOffset;\n                    const quardZ = centerQuardZ + quardZOffset;\n                    const biome = biomeSource.getBiome(quardX, quardY, quardZ, sampler);\n                    if (predicate(biome)) {\n                        if (result === undefined || random.nextInt(found_count + 1) <= 0.5) {\n                            result = { pos: BlockPos.create(quardX << 2, y, quardZ << 2), biome };\n                            if (searchFromCenter) {\n                                return result;\n                            }\n                        }\n                        found_count++;\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    BiomeSource.findBiomeHorizontal = findBiomeHorizontal;\n})(BiomeSource || (BiomeSource = {}));\n//# sourceMappingURL=BiomeSource.js.map","export var Heightmap;\n(function (Heightmap) {\n    function fromJson(obj) {\n        if (typeof obj === 'string') {\n            if (obj === 'WORLD_SURFACE_WG' || obj === 'WORLD_SURFACE' || obj === 'OCEAN_FLOOR_WG' || obj === 'OCEAN_FLOOR' || obj === 'MOTION_BLOCKING' || obj === 'MOTION_BLOCKING_NO_LEAVES') {\n                return obj;\n            }\n        }\n    }\n    Heightmap.fromJson = fromJson;\n})(Heightmap || (Heightmap = {}));\n//# sourceMappingURL=Heightmap.js.map","import { nextInt, randomBetweenInclusive } from '../math/index.js';\nimport { Json } from '../util/index.js';\nimport { VerticalAnchor } from './VerticalAnchor.js';\nexport var HeightProvider;\n(function (HeightProvider) {\n    function fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        switch (type) {\n            case undefined: return constant(VerticalAnchor.fromJson(obj));\n            case 'constant': return constant(VerticalAnchor.fromJson(root.value));\n            case 'uniform': return uniform(VerticalAnchor.fromJson(root.min_inclusive), VerticalAnchor.fromJson(root.max_inclusive));\n            case 'biased_to_bottom': return biased_to_bottom(VerticalAnchor.fromJson(root.min_inclusive), VerticalAnchor.fromJson(root.max_inclusive), Json.readInt(root.inner));\n            case 'very_biased_to_bottom': return very_biased_to_bottom(VerticalAnchor.fromJson(root.min_inclusive), VerticalAnchor.fromJson(root.max_inclusive), Json.readInt(root.inner));\n            case 'trapezoid': return trapezoid(VerticalAnchor.fromJson(root.min_inclusive), VerticalAnchor.fromJson(root.max_inclusive), Json.readInt(root.plateau));\n            case 'weighted_list':\n                return weighted_list(Json.readArray(root.distribution, (obj) => {\n                    const entry = Json.readObject(obj) ?? {};\n                    return { weight: Json.readInt(entry.weight) ?? 1, data: fromJson(entry.data) };\n                }) ?? []);\n        }\n        return () => 0;\n    }\n    HeightProvider.fromJson = fromJson;\n    function constant(anchor) {\n        return (_, context) => anchor(context);\n    }\n    HeightProvider.constant = constant;\n    function uniform(minInclusive, maxInclusive) {\n        return (random, context) => {\n            const minY = minInclusive(context);\n            const maxY = maxInclusive(context);\n            if (minY > maxY) {\n                return minY;\n            }\n            else {\n                return random.nextInt(maxY - minY + 1) + minY;\n            }\n        };\n    }\n    HeightProvider.uniform = uniform;\n    function biased_to_bottom(minInclusive, maxInclusive, inner = 1) {\n        return (random, context) => {\n            const minY = minInclusive(context);\n            const maxY = maxInclusive(context);\n            if (maxY - minY - inner + 1 <= 0) {\n                return minY;\n            }\n            else {\n                const r = random.nextInt(maxY - minY - inner + 1);\n                return random.nextInt(r + inner) + minY;\n            }\n        };\n    }\n    HeightProvider.biased_to_bottom = biased_to_bottom;\n    function very_biased_to_bottom(minInclusive, maxInclusive, inner = 1) {\n        return (random, context) => {\n            const minY = minInclusive(context);\n            const maxY = maxInclusive(context);\n            if (maxY - minY - inner + 1 <= 0) {\n                return minY;\n            }\n            else {\n                const r1 = nextInt(random, minY + inner, maxY);\n                const r2 = nextInt(random, minY, r1 - 1);\n                return nextInt(random, minY, r2 - 1 + inner);\n            }\n        };\n    }\n    HeightProvider.very_biased_to_bottom = very_biased_to_bottom;\n    function trapezoid(minInclusive, maxInclusive, plateau = 0) {\n        return (random, context) => {\n            const minY = minInclusive(context);\n            const maxY = maxInclusive(context);\n            if (minY > maxY) {\n                return minY;\n            }\n            else {\n                const range = maxY - minY;\n                if (plateau >= range) {\n                    return randomBetweenInclusive(random, minY, maxY);\n                }\n                else {\n                    const slope = (range - plateau) / 2;\n                    const r = range - slope;\n                    return minY + randomBetweenInclusive(random, 0, r) + randomBetweenInclusive(random, 0, slope);\n                }\n            }\n        };\n    }\n    HeightProvider.trapezoid = trapezoid;\n    function weighted_list(distribution) {\n        const totalWeight = distribution.reduce((sum, e, i) => sum + e.weight, 0);\n        return (random, context) => {\n            let r = random.nextInt(totalWeight);\n            for (const e of distribution) {\n                r -= e.weight;\n                if (r <= 0) {\n                    return e.data(random, context);\n                }\n            }\n            return 0;\n        };\n    }\n    HeightProvider.weighted_list = weighted_list;\n})(HeightProvider || (HeightProvider = {}));\n//# sourceMappingURL=HeightProvider.js.map","import { BlockPos, ChunkPos } from '../core/index.js';\nimport { computeIfAbsent } from '../util/index.js';\nimport { Aquifer, NoiseAquifer } from './Aquifer.js';\nimport { DensityFunction } from './DensityFunction.js';\nimport { NoiseSettings } from './NoiseSettings.js';\nexport class NoiseChunk {\n    cellCountXZ;\n    cellCountY;\n    cellNoiseMinY;\n    minX;\n    minZ;\n    settings;\n    cellWidth;\n    cellHeight;\n    firstCellX;\n    firstCellZ;\n    firstNoiseX;\n    firstNoiseZ;\n    noiseSizeXZ;\n    preliminarySurfaceLevel = new Map();\n    aquifer;\n    materialRule;\n    initialDensity;\n    constructor(cellCountXZ, cellCountY, cellNoiseMinY, randomState, minX, minZ, settings, aquifersEnabled, fluidPicker) {\n        this.cellCountXZ = cellCountXZ;\n        this.cellCountY = cellCountY;\n        this.cellNoiseMinY = cellNoiseMinY;\n        this.minX = minX;\n        this.minZ = minZ;\n        this.settings = settings;\n        this.cellWidth = NoiseSettings.cellWidth(settings);\n        this.cellHeight = NoiseSettings.cellHeight(settings);\n        this.firstCellX = Math.floor(minX / this.cellWidth);\n        this.firstCellZ = Math.floor(minZ / this.cellWidth);\n        this.firstNoiseX = minX >> 2;\n        this.firstNoiseZ = minZ >> 2;\n        this.noiseSizeXZ = (cellCountXZ * this.cellWidth) >> 2;\n        if (!aquifersEnabled || true) { // WIP: Noise aquifers don't work yet\n            this.aquifer = Aquifer.createDisabled(fluidPicker);\n        }\n        else {\n            const chunkPos = ChunkPos.fromBlockPos(BlockPos.create(minX, 0, minZ));\n            const minY = cellNoiseMinY * NoiseSettings.cellHeight(settings);\n            const height = cellCountY * NoiseSettings.cellHeight(settings);\n            this.aquifer = new NoiseAquifer(this, chunkPos, randomState.router, randomState.aquiferRandom, minY, height, fluidPicker);\n        }\n        const finalDensity = randomState.router.finalDensity;\n        this.materialRule = MaterialRule.fromList([\n            (context) => this.aquifer.compute(context, finalDensity.compute(context)),\n        ]);\n        this.initialDensity = randomState.router.initialDensityWithoutJaggedness;\n    }\n    getFinalState(x, y, z) {\n        return this.materialRule({ x, y, z });\n    }\n    getPreliminarySurfaceLevel(quartX, quartZ) {\n        return computeIfAbsent(this.preliminarySurfaceLevel, ChunkPos.asLong(quartX, quartZ), () => {\n            const x = quartX << 2;\n            const z = quartZ << 2;\n            for (let y = this.settings.minY + this.settings.height; y >= this.settings.minY; y -= this.cellHeight) {\n                const density = this.initialDensity.compute(DensityFunction.context(x, y, z));\n                if (density > 0.390625) {\n                    return y;\n                }\n            }\n            return Number.MAX_SAFE_INTEGER;\n        });\n    }\n}\nexport var MaterialRule;\n(function (MaterialRule) {\n    function fromList(rules) {\n        return (context) => {\n            for (const rule of rules) {\n                const state = rule(context);\n                if (state)\n                    return state;\n            }\n            return undefined;\n        };\n    }\n    MaterialRule.fromList = fromList;\n})(MaterialRule || (MaterialRule = {}));\n//# sourceMappingURL=NoiseChunk.js.map","import { BlockState, ChunkPos } from '../core/index.js';\nimport { computeIfAbsent } from '../util/index.js';\nimport { FluidStatus } from './Aquifer.js';\nimport { NoiseChunk } from './NoiseChunk.js';\nimport { NoiseSettings } from './NoiseSettings.js';\nexport class NoiseChunkGenerator {\n    biomeSource;\n    settings;\n    noiseChunkCache;\n    globalFluidPicker;\n    constructor(biomeSource, settings) {\n        this.biomeSource = biomeSource;\n        this.settings = settings;\n        this.noiseChunkCache = new Map();\n        const lavaFluid = new FluidStatus(-54, BlockState.LAVA);\n        const defaultFluid = new FluidStatus(settings.seaLevel, settings.defaultFluid);\n        this.globalFluidPicker = (x, y, z) => {\n            if (y < Math.min(-54, settings.seaLevel)) {\n                return lavaFluid;\n            }\n            return defaultFluid;\n        };\n    }\n    getBaseHeight(blockX, blockZ, heightmap, randomState) {\n        let predicate;\n        if (heightmap === 'OCEAN_FLOOR' || heightmap === 'OCEAN_FLOOR_WG') {\n            predicate = (state) => !state.equals(BlockState.AIR);\n        }\n        else {\n            predicate = (state) => state.equals(BlockState.STONE);\n        }\n        return this.iterateNoiseColumn(randomState, blockX, blockZ, undefined, predicate, BlockState.STONE) ?? this.settings.noise.minY;\n    }\n    iterateNoiseColumn(randomState, blockX, blockZ, fillArray, predicate, defaultBlock) {\n        const minY = this.settings.noise.minY;\n        const cellHeight = NoiseSettings.cellHeight(this.settings.noise);\n        const minCellY = Math.floor(minY / cellHeight);\n        const cellCountY = Math.floor(this.settings.noise.height / cellHeight);\n        if (cellCountY <= 0) {\n            return undefined;\n        }\n        const cellWidth = NoiseSettings.cellWidth(this.settings.noise);\n        const cellX = Math.floor(blockX / cellWidth);\n        const cellZ = Math.floor(blockZ / cellWidth);\n        const noiseChunk = new NoiseChunk(1, cellCountY, minCellY, randomState, cellX, cellZ, this.settings.noise, this.settings.aquifersEnabled, this.globalFluidPicker);\n        for (let cellY = cellCountY - 1; cellY >= 0; cellY -= 1) {\n            for (let offY = cellHeight - 1; offY >= 0; offY -= 1) {\n                const blockY = (minCellY + cellY) * cellHeight + offY;\n                const state = noiseChunk.getFinalState(blockX, blockY, blockZ) ?? defaultBlock ?? this.settings.defaultBlock;\n                if (fillArray !== undefined) {\n                    fillArray[blockY + minY] = state;\n                }\n                if (predicate !== undefined && predicate(state)) {\n                    return blockY + 1;\n                }\n            }\n        }\n    }\n    fill(randomState, chunk, onlyFirstZ = false) {\n        const minY = Math.max(chunk.minY, this.settings.noise.minY);\n        const maxY = Math.min(chunk.maxY, this.settings.noise.minY + this.settings.noise.height);\n        const cellWidth = NoiseSettings.cellWidth(this.settings.noise);\n        const cellHeight = NoiseSettings.cellHeight(this.settings.noise);\n        const cellCountXZ = Math.floor(16 / cellWidth);\n        const minCellY = Math.floor(minY / cellHeight);\n        const cellCountY = Math.floor((maxY - minY) / cellHeight);\n        const minX = ChunkPos.minBlockX(chunk.pos);\n        const minZ = ChunkPos.minBlockZ(chunk.pos);\n        const noiseChunk = this.getOrCreateNoiseChunk(randomState, chunk);\n        for (let cellX = 0; cellX < cellCountXZ; cellX += 1) {\n            for (let cellZ = 0; cellZ < (onlyFirstZ ? 1 : cellCountXZ); cellZ += 1) {\n                let section = chunk.getOrCreateSection(chunk.sectionsCount - 1);\n                for (let cellY = cellCountY - 1; cellY >= 0; cellY -= 1) {\n                    for (let offY = cellHeight - 1; offY >= 0; offY -= 1) {\n                        const blockY = (minCellY + cellY) * cellHeight + offY;\n                        const sectionY = blockY & 0xF;\n                        const sectionIndex = chunk.getSectionIndex(blockY);\n                        if (chunk.getSectionIndex(section.minBlockY) !== sectionIndex) {\n                            section = chunk.getOrCreateSection(sectionIndex);\n                        }\n                        for (let offX = 0; offX < cellWidth; offX += 1) {\n                            const blockX = minX + cellX * cellWidth + offX;\n                            const sectionX = blockX & 0xF;\n                            for (let offZ = 0; offZ < (onlyFirstZ ? 1 : cellWidth); offZ += 1) {\n                                const blockZ = minZ + cellZ * cellWidth + offZ;\n                                const sectionZ = blockZ & 0xF;\n                                const state = noiseChunk.getFinalState(blockX, blockY, blockZ) ?? this.settings.defaultBlock;\n                                section.setBlockState(sectionX, sectionY, sectionZ, state);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    buildSurface(randomState, chunk, /** @deprecated */ biome = 'minecraft:plains') {\n        const noiseChunk = this.getOrCreateNoiseChunk(randomState, chunk);\n        const context = this.settings.noise;\n        randomState.surfaceSystem.buildSurface(chunk, noiseChunk, context, () => biome);\n    }\n    computeBiome(randomState, quartX, quartY, quartZ) {\n        return this.biomeSource.getBiome(quartX, quartY, quartZ, randomState.sampler);\n    }\n    getOrCreateNoiseChunk(randomState, chunk) {\n        return computeIfAbsent(this.noiseChunkCache, ChunkPos.toLong(chunk.pos), () => {\n            const minY = Math.max(chunk.minY, this.settings.noise.minY);\n            const maxY = Math.min(chunk.maxY, this.settings.noise.minY + this.settings.noise.height);\n            const cellWidth = NoiseSettings.cellWidth(this.settings.noise);\n            const cellHeight = NoiseSettings.cellHeight(this.settings.noise);\n            const cellCountXZ = Math.floor(16 / cellWidth);\n            const minCellY = Math.floor(minY / cellHeight);\n            const cellCountY = Math.floor((maxY - minY) / cellHeight);\n            const minX = ChunkPos.minBlockX(chunk.pos);\n            const minZ = ChunkPos.minBlockZ(chunk.pos);\n            return new NoiseChunk(cellCountXZ, cellCountY, minCellY, randomState, minX, minZ, this.settings.noise, this.settings.aquifersEnabled, this.globalFluidPicker);\n        });\n    }\n}\n//# sourceMappingURL=NoiseChunkGenerator.js.map","import { Registry } from '../core/index.js';\nimport { BlendedNoise, computeIfAbsent, DensityFunction, Identifier, LegacyRandom, NoiseParameters, NoiseSettings, NormalNoise, XoroshiroRandom } from '../index.js';\nimport { Climate } from './biome/index.js';\nimport { NoiseRouter } from './NoiseRouter.js';\nimport { SurfaceSystem } from './SurfaceSystem.js';\nexport class RandomState {\n    seed;\n    noiseCache;\n    randomCache;\n    random;\n    aquiferRandom;\n    oreRandom;\n    surfaceSystem;\n    router;\n    sampler;\n    constructor(settings, seed) {\n        this.seed = seed;\n        this.noiseCache = new Map();\n        this.randomCache = new Map();\n        this.random = (settings.legacyRandomSource ? new LegacyRandom(seed) : XoroshiroRandom.create(seed)).forkPositional();\n        this.aquiferRandom = this.random.fromHashOf(Identifier.create('aquifer').toString()).forkPositional();\n        this.oreRandom = this.random.fromHashOf(Identifier.create('ore').toString()).forkPositional();\n        this.surfaceSystem = new SurfaceSystem(settings.surfaceRule, settings.defaultBlock, seed);\n        this.router = NoiseRouter.mapAll(settings.noiseRouter, this.createVisitor(settings.noise, settings.legacyRandomSource));\n        this.sampler = Climate.Sampler.fromRouter(this.router);\n    }\n    createVisitor(noiseSettings, legacyRandom) {\n        const mapped = new Map();\n        const getNoise = (noise) => {\n            const key = noise.key();\n            if (key === undefined) {\n                throw new Error('Cannot create noise without key');\n            }\n            if (legacyRandom) {\n                if (key.equals(Identifier.create('temperature'))) {\n                    return new NormalNoise(new LegacyRandom(this.seed + BigInt(0)), NoiseParameters.create(-7, [1, 1]));\n                }\n                if (key.equals(Identifier.create('vegetation'))) {\n                    return new NormalNoise(new LegacyRandom(this.seed + BigInt(1)), NoiseParameters.create(-7, [1, 1]));\n                }\n                if (key.equals(Identifier.create('offset'))) {\n                    return new NormalNoise(this.random.fromHashOf('offset'), NoiseParameters.create(0, [0]));\n                }\n            }\n            return this.getOrCreateNoise(key);\n        };\n        const visitor = {\n            map: (fn) => {\n                if (fn instanceof DensityFunction.HolderHolder) {\n                    const key = fn.holder.key();\n                    if (key !== undefined && mapped.has(key.toString())) {\n                        return mapped.get(key.toString());\n                    }\n                    else {\n                        const value = fn.holder.value().mapAll(visitor);\n                        if (key !== undefined) {\n                            mapped.set(key.toString(), value);\n                        }\n                        return value;\n                    }\n                }\n                if (fn instanceof DensityFunction.Interpolated) {\n                    return fn.withCellSize(NoiseSettings.cellWidth(noiseSettings), NoiseSettings.cellHeight(noiseSettings));\n                }\n                if (fn instanceof DensityFunction.ShiftedNoise) {\n                    return new DensityFunction.ShiftedNoise(fn.shiftX, fn.shiftY, fn.shiftZ, fn.xzScale, fn.yScale, fn.noiseData, getNoise(fn.noiseData));\n                }\n                if (fn instanceof DensityFunction.Noise) {\n                    return new DensityFunction.Noise(fn.xzScale, fn.yScale, fn.noiseData, getNoise(fn.noiseData));\n                }\n                if (fn instanceof DensityFunction.ShiftNoise) {\n                    return fn.withNewNoise(getNoise(fn.noiseData));\n                }\n                if (fn instanceof DensityFunction.WeirdScaledSampler) {\n                    return new DensityFunction.WeirdScaledSampler(fn.input, fn.rarityValueMapper, fn.noiseData, getNoise(fn.noiseData));\n                }\n                if (fn instanceof DensityFunction.OldBlendedNoise) {\n                    return new DensityFunction.OldBlendedNoise(fn.xzScale, fn.yScale, fn.xzFactor, fn.yFactor, fn.smearScaleMultiplier, new BlendedNoise(this.random.fromHashOf(Identifier.create('terrain').toString()), fn.xzScale, fn.yScale, fn.xzFactor, fn.yFactor, fn.smearScaleMultiplier));\n                }\n                if (fn instanceof DensityFunction.EndIslands) {\n                    return new DensityFunction.EndIslands(this.seed);\n                }\n                if (fn instanceof DensityFunction.Mapped) {\n                    return fn.withMinMax();\n                }\n                if (fn instanceof DensityFunction.Ap2) {\n                    return fn.withMinMax();\n                }\n                return fn;\n            },\n        };\n        return visitor;\n    }\n    getOrCreateNoise(id) {\n        const noises = Registry.REGISTRY.getOrThrow(Identifier.create('worldgen/noise'));\n        return computeIfAbsent(this.noiseCache, id.toString(), key => new NormalNoise(this.random.fromHashOf(key), noises.getOrThrow(id)));\n    }\n    getOrCreateRandom(id) {\n        return computeIfAbsent(this.randomCache, id.toString(), key => this.random.fromHashOf(key).forkPositional());\n    }\n}\n//# sourceMappingURL=RandomState.js.map","import { BlockPos, BlockState, Identifier, Structure } from '../../core/index.js';\nimport { shuffle } from '../../math/index.js';\nimport { NbtCompound, NbtString } from '../../nbt/index.js';\nimport { Json } from '../../util/index.js';\nexport class StructurePoolElement {\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        switch (Json.readString(root.element_type)?.replace(/^minecraft:/, '')) {\n            case 'single_pool_element':\n            case 'legacy_single_pool_element':\n                const id = Identifier.parse(Json.readString(root.location) ?? '');\n                const template = {\n                    key: () => id,\n                    value: () => Structure.REGISTRY.get(id) ?? Structure.EMPTY,\n                };\n                return new StructurePoolElement.SinlgePoolElement(template);\n            case 'list_pool_element':\n                const elements = Json.readArray('elements', StructurePoolElement.fromJson) ?? [];\n                return new StructurePoolElement.ListPoolElement(elements);\n            case 'feature_pool_element':\n                return new StructurePoolElement.FeaturePoolElement();\n            case 'empty_pool_element':\n            default:\n                return new StructurePoolElement.EmptyPoolElement();\n        }\n    }\n}\n(function (StructurePoolElement) {\n    class EmptyPoolElement extends StructurePoolElement {\n        getBoundingBox(pos, rotation) {\n            throw new Error('Invalid call of EmptyPoolElement');\n        }\n        getShuffledJigsawBlocks(rotation, random) {\n            return [];\n        }\n        toString() {\n            return '[Empty Pool Element]';\n        }\n    }\n    StructurePoolElement.EmptyPoolElement = EmptyPoolElement;\n    class FeaturePoolElement extends StructurePoolElement {\n        defaultJigsawNBT;\n        constructor() {\n            super();\n            const compoundMap = new Map();\n            compoundMap.set('name', new NbtString('minecraft:bottom'));\n            compoundMap.set('final_state', new NbtString('minecraft:air'));\n            compoundMap.set('pool', new NbtString('minecraft:empty'));\n            compoundMap.set('target', new NbtString('minecraft:empty'));\n            compoundMap.set('joint', new NbtString('rollable'));\n            this.defaultJigsawNBT = new NbtCompound(compoundMap);\n        }\n        getBoundingBox(pos, rotation) {\n            return [pos, pos];\n        }\n        getShuffledJigsawBlocks(rotation, random) {\n            return [{\n                    pos: [0, 0, 0],\n                    state: new BlockState(Identifier.create('jigsaw'), {\n                        orientation: 'down_south',\n                    }),\n                    nbt: this.defaultJigsawNBT,\n                }];\n        }\n        toString() {\n            return '[Feature Pool Element]';\n        }\n    }\n    StructurePoolElement.FeaturePoolElement = FeaturePoolElement;\n    class SinlgePoolElement extends StructurePoolElement {\n        template;\n        static JIGSAW_ID = Identifier.parse('jigsaw');\n        constructor(template) {\n            super();\n            this.template = template;\n        }\n        getBoundingBox(pos, rotation) {\n            const size = BlockPos.offset(this.template.value().getSize(), -1, -1, -1);\n            const pos1 = pos;\n            const pos2 = BlockPos.add(Structure.transform(size, rotation, BlockPos.ZERO), pos);\n            const minPos = BlockPos.create(Math.min(pos1[0], pos2[0]), pos1[1], Math.min(pos1[2], pos2[2]));\n            const maxPos = BlockPos.create(Math.max(pos1[0], pos2[0]), pos2[1], Math.max(pos1[2], pos2[2]));\n            return [minPos, maxPos];\n        }\n        getShuffledJigsawBlocks(rotation, random) {\n            const blocks = this.template.value().getBlocks().filter(block => block.state.getName().equals(SinlgePoolElement.JIGSAW_ID));\n            blocks.forEach(block => block.pos = Structure.transform(block.pos, rotation, BlockPos.ZERO)); // TODO? Rotate state\n            shuffle(blocks, random);\n            return blocks;\n        }\n        toString() {\n            return `[Single Pool Element: ${this.template.key()}]`;\n        }\n    }\n    StructurePoolElement.SinlgePoolElement = SinlgePoolElement;\n    class ListPoolElement extends StructurePoolElement {\n        elements;\n        constructor(elements) {\n            super();\n            this.elements = elements;\n        }\n        getBoundingBox(pos, rotation) {\n            var minPos = undefined;\n            var maxPos = undefined;\n            for (const element of this.elements) {\n                const elementBoundingBox = element.getBoundingBox(pos, rotation);\n                if (!minPos || !maxPos) {\n                    minPos = elementBoundingBox[0];\n                    maxPos = elementBoundingBox[1];\n                }\n                else {\n                    minPos[0] = Math.min(minPos[0], elementBoundingBox[0][0]);\n                    minPos[1] = Math.min(minPos[1], elementBoundingBox[0][1]);\n                    minPos[2] = Math.min(minPos[2], elementBoundingBox[0][2]);\n                    maxPos[0] = Math.min(minPos[0], elementBoundingBox[1][0]);\n                    maxPos[1] = Math.min(minPos[1], elementBoundingBox[1][1]);\n                    maxPos[2] = Math.min(minPos[2], elementBoundingBox[1][2]);\n                }\n            }\n            return [minPos, maxPos];\n        }\n        getShuffledJigsawBlocks(rotation, random) {\n            return this.elements[0].getShuffledJigsawBlocks(rotation, random);\n        }\n        toString() {\n            return `[List Pool Element: ${'; '.concat(...this.elements.map(e => e.toString()))}]`;\n        }\n    }\n    StructurePoolElement.ListPoolElement = ListPoolElement;\n})(StructurePoolElement || (StructurePoolElement = {}));\n//# sourceMappingURL=StructurePoolElement.js.map","import { Holder, Registry } from '../../core/index.js';\nimport { Json } from '../../util/index.js';\nimport { StructurePoolElement } from './StructurePoolElement.js';\nexport class StructureTemplatePool {\n    rawTemplates;\n    fallback;\n    static REGISTRY = Registry.createAndRegister('worldgen/template_pool', StructureTemplatePool.fromJson);\n    totalWeight;\n    constructor(rawTemplates, fallback) {\n        this.rawTemplates = rawTemplates;\n        this.fallback = fallback;\n        this.totalWeight = rawTemplates.reduce((v, e) => v + e.weight, 0);\n    }\n    static structurePoolParser = Holder.parser(StructureTemplatePool.REGISTRY, StructureTemplatePool.fromJson);\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const fallback = StructureTemplatePool.structurePoolParser(root.fallback ?? '');\n        const elements = Json.readArray(root.elements, (obj) => {\n            const root = Json.readObject(obj) ?? {};\n            const element = StructurePoolElement.fromJson(root.element);\n            const weight = Json.readInt(root.weight) ?? 1;\n            return { element, weight };\n        }) ?? [];\n        return new StructureTemplatePool(elements, fallback);\n    }\n    getRandomTemplate(random) {\n        var v = random.nextInt(this.totalWeight);\n        for (const entry of this.rawTemplates) {\n            v -= entry.weight;\n            if (v < 0) {\n                return entry.element;\n            }\n        }\n        return this.rawTemplates[this.rawTemplates.length - 1].element;\n    }\n}\n//# sourceMappingURL=StructureTemplatePool.js.map","import { Rotation } from '../../core/Rotation.js';\nimport { BlockPos, Holder, HolderSet, Identifier, Registry } from '../../core/index.js';\nimport { LegacyRandom } from '../../math/index.js';\nimport { Json } from '../../util/Json.js';\nimport { HeightProvider } from '../HeightProvider.js';\nimport { Heightmap } from '../Heightmap.js';\nimport { NoiseChunkGenerator } from '../NoiseChunkGenerator.js';\nimport { RandomState } from '../RandomState.js';\nimport { WorldgenRegistries } from '../WorldgenRegistries.js';\nimport { StructurePoolElement } from './StructurePoolElement.js';\nimport { StructureTemplatePool } from './StructureTemplatePool.js';\nexport class WorldgenStructure {\n    settings;\n    constructor(settings) {\n        this.settings = settings;\n    }\n    onTopOfChunkCenter(context, chunkX, chunkZ, heightmap = 'WORLD_SURFACE_WG') {\n        const posX = (chunkX << 4) + 8;\n        const posZ = (chunkZ << 4) + 8;\n        return [posX, context.chunkGenerator.getBaseHeight(posX, posZ, heightmap, context.randomState) - 1, posZ]; // TODO\n    }\n    getLowestY(context, minX, minZ, width, depth) {\n        return Math.min(context.chunkGenerator.getBaseHeight(minX, minZ, 'WORLD_SURFACE_WG', context.randomState) - 1, context.chunkGenerator.getBaseHeight(minX, minZ + depth, 'WORLD_SURFACE_WG', context.randomState) - 1, context.chunkGenerator.getBaseHeight(minX + width, minZ, 'WORLD_SURFACE_WG', context.randomState) - 1, context.chunkGenerator.getBaseHeight(minX + width, minZ + depth, 'WORLD_SURFACE_WG', context.randomState) - 1);\n    }\n    getLowestYIn5by5BoxOffset7Blocks(context, chunkX, chunkZ, rotation) {\n        let width = 5;\n        let depth = 5;\n        if (rotation === Rotation.CLOCKWISE_90) {\n            width = -5;\n        }\n        else if (rotation === Rotation.CLOCKWISE_180) {\n            width = -5;\n            depth = -5;\n        }\n        else if (rotation === Rotation.COUNTERCLOCKWISE_90) {\n            depth = -5;\n        }\n        const posX = (chunkX << 4) + 7;\n        const posZ = (chunkZ << 4) + 7;\n        return BlockPos.create(posX, this.getLowestY(context, posX, posZ, width, depth), posZ);\n    }\n    tryGenerate(chunkX, chunkZ, context) {\n        const random = LegacyRandom.fromLargeFeatureSeed(context.seed, chunkX, chunkZ);\n        const pos = this.findGenerationPoint(chunkX, chunkZ, random, context);\n        if (pos === undefined)\n            return false;\n        const biome = context.biomeSource.getBiome(pos[0] >> 2, pos[1], pos[2] >> 2, context.randomState.sampler);\n        return [...this.settings.validBiomes.getEntries()].findIndex((b) => b.key()?.equals(biome)) >= 0;\n    }\n}\n(function (WorldgenStructure) {\n    WorldgenStructure.REGISTRY = Registry.createAndRegister('worldgen/structure', fromJson);\n    class StructureSettings {\n        validBiomes;\n        constructor(validBiomes) {\n            this.validBiomes = validBiomes;\n        }\n    }\n    WorldgenStructure.StructureSettings = StructureSettings;\n    class GenerationContext {\n        seed;\n        biomeSource;\n        settings;\n        chunkGenerator;\n        randomState;\n        constructor(seed, biomeSource, settings) {\n            this.seed = seed;\n            this.biomeSource = biomeSource;\n            this.settings = settings;\n            this.randomState = new RandomState(settings, seed);\n            this.chunkGenerator = new NoiseChunkGenerator(biomeSource, settings);\n        }\n    }\n    WorldgenStructure.GenerationContext = GenerationContext;\n    const structurePoolParser = Holder.parser(StructureTemplatePool.REGISTRY, StructureTemplatePool.fromJson);\n    function fromJson(obj) {\n        const BiomeTagParser = HolderSet.parser(WorldgenRegistries.BIOME);\n        const root = Json.readObject(obj) ?? {};\n        const biomes = BiomeTagParser(root.biomes);\n        const settings = new StructureSettings(biomes.value());\n        switch (Json.readString(root.type)?.replace(/^minecraft:/, '')) {\n            case 'buried_treasure':\n                return new BuriedTreasureStructure(settings);\n            case 'desert_pyramid':\n                return new DesertPyramidStructure(settings);\n            case 'end_city':\n                return new EndCityStructure(settings);\n            case 'fortress':\n                return new NetherFortressStructure(settings);\n            case 'igloo':\n                return new IglooStructure(settings);\n            case 'jigsaw':\n                const startHeight = HeightProvider.fromJson(root.start_height);\n                const startPool = structurePoolParser(root.start_pool);\n                const startJigsawNameString = Json.readString(root.start_jigsaw_name);\n                const startJigsawName = startJigsawNameString ? Identifier.parse(startJigsawNameString) : undefined;\n                const heightmap = Heightmap.fromJson(root.project_start_to_heightmap);\n                return new JigsawStructure(settings, startPool, startHeight, heightmap, startJigsawName);\n            case 'jungle_temple':\n                return new JungleTempleStructure(settings);\n            case 'mineshaft':\n                const type = Json.readString(root.mineshaft_type) === 'mesa' ? 'mesa' : 'normal';\n                return new MineshaftStructure(settings, type);\n            case 'nether_fossil':\n                return new NetherFortressStructure(settings);\n            case 'ocean_monument':\n                return new OceanMonumentStructure(settings);\n            case 'ocean_ruin':\n                return new OceanRuinStructure(settings);\n            case 'ruined_portal':\n                return new RuinedPortalStructure(settings);\n            case 'shipwreck':\n                const isBeached = Json.readBoolean(root.is_beached) ?? false;\n                return new ShipwreckStructure(settings, isBeached);\n            case 'stronghold':\n                return new StrongholdStructure(settings);\n            case 'swamp_hut':\n                return new SwampHutStructure(settings);\n            case 'woodland_mansion':\n                return new WoodlandMansionStructure(settings);\n        }\n        return new BuriedTreasureStructure(settings);\n    }\n    WorldgenStructure.fromJson = fromJson;\n    class JigsawStructure extends WorldgenStructure {\n        startingPoolHolder;\n        startHeight;\n        projectStartToHeightmap;\n        startJigsawName;\n        constructor(settings, startingPoolHolder, startHeight, projectStartToHeightmap, startJigsawName) {\n            super(settings);\n            this.startingPoolHolder = startingPoolHolder;\n            this.startHeight = startHeight;\n            this.projectStartToHeightmap = projectStartToHeightmap;\n            this.startJigsawName = startJigsawName;\n        }\n        findGenerationPoint(chunkX, chunkZ, random, context) {\n            var y = this.startHeight(random, context.settings.noise);\n            const pos = BlockPos.create(chunkX << 4, y, chunkZ << 4);\n            const rotation = Rotation.getRandom(random);\n            const startingPool = this.startingPoolHolder.value();\n            const startingElement = startingPool.getRandomTemplate(random);\n            if (startingElement instanceof StructurePoolElement.EmptyPoolElement) {\n                return undefined;\n            }\n            else {\n                var startJigsawOffset;\n                if (this.startJigsawName) {\n                    const offset = JigsawStructure.getRandomNamedJigsaw(startingElement, this.startJigsawName, rotation, random);\n                    if (offset === undefined) {\n                        return undefined;\n                    }\n                    startJigsawOffset = offset;\n                }\n                else {\n                    startJigsawOffset = BlockPos.ZERO;\n                }\n                const templateStartPos = BlockPos.subtract(pos, startJigsawOffset);\n                const boundingBox = startingElement.getBoundingBox(templateStartPos, rotation);\n                const x = ((boundingBox[1][0] + boundingBox[0][0]) / 2) ^ 0;\n                const z = ((boundingBox[1][2] + boundingBox[0][2]) / 2) ^ 0;\n                var y;\n                if (this.projectStartToHeightmap) {\n                    y = pos[1] + context.chunkGenerator.getBaseHeight(x, z, this.projectStartToHeightmap, context.randomState);\n                }\n                else {\n                    y = templateStartPos[1];\n                }\n                const generationPoint = BlockPos.create(x, y + startJigsawOffset[1], z);\n                //console.log(`Generating Jigsaw Structure in Chunk ${chunkX}, ${chunkZ}: rotation: ${rotation}, startingElement: ${startingElement.toString()}, center: ${x}, ${y}, ${z}`)\n                return generationPoint;\n            }\n        }\n        static getRandomNamedJigsaw(element, name, rotation, random) {\n            const jigsaws = element.getShuffledJigsawBlocks(rotation, random);\n            for (const jigsaw of jigsaws) {\n                if (Identifier.parse(jigsaw.nbt?.getString('name') ?? 'minecraft:empty').equals(name)) {\n                    return jigsaw.pos;\n                }\n            }\n            return undefined;\n        }\n    }\n    WorldgenStructure.JigsawStructure = JigsawStructure;\n    class BuriedTreasureStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            return this.onTopOfChunkCenter(context, chunkX, chunkZ, 'OCEAN_FLOOR_WG');\n        }\n    }\n    WorldgenStructure.BuriedTreasureStructure = BuriedTreasureStructure;\n    class SinglePieceStructure extends WorldgenStructure {\n        width;\n        depth;\n        constructor(settings, width, depth) {\n            super(settings);\n            this.width = width;\n            this.depth = depth;\n        }\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            if (this.getLowestY(context, chunkX << 4, chunkZ << 4, this.width, this.depth) < context.settings.seaLevel) {\n                return undefined;\n            }\n            else {\n                return this.onTopOfChunkCenter(context, chunkX, chunkZ);\n            }\n        }\n    }\n    class DesertPyramidStructure extends SinglePieceStructure {\n        constructor(settings) {\n            super(settings, 21, 21);\n        }\n    }\n    WorldgenStructure.DesertPyramidStructure = DesertPyramidStructure;\n    class EndCityStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, random, context) {\n            const rotation = Rotation.getRandom(random);\n            const pos = this.getLowestYIn5by5BoxOffset7Blocks(context, chunkX, chunkZ, rotation);\n            if (pos[1] < 60)\n                return undefined;\n            return pos;\n        }\n    }\n    WorldgenStructure.EndCityStructure = EndCityStructure;\n    class NetherFortressStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ) {\n            return BlockPos.create(chunkX << 4, 64, chunkZ << 4);\n        }\n    }\n    WorldgenStructure.NetherFortressStructure = NetherFortressStructure;\n    class IglooStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            return this.onTopOfChunkCenter(context, chunkX, chunkZ);\n        }\n    }\n    WorldgenStructure.IglooStructure = IglooStructure;\n    class JungleTempleStructure extends SinglePieceStructure {\n        constructor(settings) {\n            super(settings, 12, 15);\n        }\n    }\n    WorldgenStructure.JungleTempleStructure = JungleTempleStructure;\n    class MineshaftStructure extends WorldgenStructure {\n        type;\n        constructor(settings, type) {\n            super(settings);\n            this.type = type;\n        }\n        findGenerationPoint(chunkX, chunkZ, random, context) {\n            throw new Error('Method not implemented.');\n        }\n    }\n    WorldgenStructure.MineshaftStructure = MineshaftStructure;\n    class NetherFossilStructure extends WorldgenStructure {\n        height;\n        constructor(settings, height) {\n            super(settings);\n            this.height = height;\n        }\n        findGenerationPoint(chunkX, chunkZ) {\n            throw new Error('Method not implemented.');\n        }\n    }\n    WorldgenStructure.NetherFossilStructure = NetherFossilStructure;\n    class OceanMonumentStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ) {\n            throw new Error('Method not implemented.');\n        }\n    }\n    WorldgenStructure.OceanMonumentStructure = OceanMonumentStructure;\n    class OceanRuinStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            return this.onTopOfChunkCenter(context, chunkX, chunkZ, 'OCEAN_FLOOR_WG');\n        }\n    }\n    WorldgenStructure.OceanRuinStructure = OceanRuinStructure;\n    class RuinedPortalStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ) {\n            throw new Error('Method not implemented.');\n        }\n    }\n    WorldgenStructure.RuinedPortalStructure = RuinedPortalStructure;\n    class ShipwreckStructure extends WorldgenStructure {\n        isBeached;\n        constructor(settings, isBeached) {\n            super(settings);\n            this.isBeached = isBeached;\n        }\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            return this.onTopOfChunkCenter(context, chunkX, chunkZ, this.isBeached ? 'WORLD_SURFACE_WG' : 'OCEAN_FLOOR_WG');\n        }\n    }\n    WorldgenStructure.ShipwreckStructure = ShipwreckStructure;\n    class StrongholdStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ) {\n            return BlockPos.create(chunkX << 4, 0, chunkZ << 4);\n        }\n    }\n    WorldgenStructure.StrongholdStructure = StrongholdStructure;\n    class SwampHutStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, _, context) {\n            return this.onTopOfChunkCenter(context, chunkX, chunkZ);\n        }\n    }\n    WorldgenStructure.SwampHutStructure = SwampHutStructure;\n    class WoodlandMansionStructure extends WorldgenStructure {\n        findGenerationPoint(chunkX, chunkZ, random, context) {\n            const rotation = Rotation.getRandom(random);\n            const pos = this.getLowestYIn5by5BoxOffset7Blocks(context, chunkX, chunkZ, rotation);\n            if (pos[1] < 60)\n                return undefined;\n            return pos;\n        }\n    }\n    WorldgenStructure.WoodlandMansionStructure = WoodlandMansionStructure;\n})(WorldgenStructure || (WorldgenStructure = {}));\n//# sourceMappingURL=WorldgenStructure.js.map","import { Holder, Identifier, Registry } from '../../core/index.js';\nimport { LegacyRandom } from '../../math/index.js';\nimport { Json } from '../../util/index.js';\nimport { StructurePlacement } from './StructurePlacement.js';\nimport { WorldgenStructure } from './WorldgenStructure.js';\nexport class StructureSet {\n    structures;\n    placement;\n    static REGISTRY = Registry.createAndRegister('worldgen/structure_set', StructureSet.fromJson);\n    constructor(structures, placement) {\n        this.structures = structures;\n        this.placement = placement;\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const structures = Json.readArray(root.structures, (StructureSet.StructureSelectionEntry.fromJson)) ?? [];\n        const placement = StructurePlacement.fromJson(root.placement);\n        return new StructureSet(structures, placement);\n    }\n    getStructureInChunk(chunkX, chunkZ, context) {\n        this.placement.prepare(context.biomeSource, context.randomState.sampler, context.seed);\n        if (!this.placement.isStructureChunk(context.seed, chunkX, chunkZ)) {\n            return undefined;\n        }\n        if (this.structures.length === 0)\n            return undefined;\n        if (this.structures.length === 1) {\n            if (this.structures[0].structure.value().tryGenerate(chunkX, chunkZ, context)) {\n                return this.structures[0].structure.key();\n            }\n        }\n        else {\n            const random = LegacyRandom.fromLargeFeatureSeed(context.seed, chunkX, chunkZ);\n            const list = Object.assign([], this.structures);\n            let totalWeight = list.reduce((v, e, i) => v + e.weight, 0);\n            while (list.length > 0) {\n                let weightIndex = random.nextInt(totalWeight);\n                let id;\n                let entry;\n                for ([id, entry] of list.entries()) {\n                    weightIndex -= entry.weight;\n                    if (weightIndex < 0) {\n                        break;\n                    }\n                }\n                if (entry.structure.value().tryGenerate(chunkX, chunkZ, context)) {\n                    return entry.structure.key();\n                }\n                list.splice(id, 1);\n                totalWeight -= entry.weight;\n            }\n        }\n        return undefined;\n    }\n}\n(function (StructureSet) {\n    class StructureSelectionEntry {\n        structure;\n        weight;\n        constructor(structure, weight) {\n            this.structure = structure;\n            this.weight = weight;\n        }\n        static fromJson(obj) {\n            const root = Json.readObject(obj) ?? {};\n            return new StructureSelectionEntry(Holder.reference(WorldgenStructure.REGISTRY, Identifier.parse(Json.readString(root.structure) ?? 'minecraft:empty')), Json.readInt(root.weight) ?? 1);\n        }\n    }\n    StructureSet.StructureSelectionEntry = StructureSelectionEntry;\n})(StructureSet || (StructureSet = {}));\n//# sourceMappingURL=StructureSet.js.map","import { BlockPos, Holder, HolderSet, Identifier } from '../../core/index.js';\nimport { LegacyRandom } from '../../math/index.js';\nimport { Json } from '../../util/index.js';\nimport { WorldgenRegistries } from '../WorldgenRegistries.js';\nimport { BiomeSource } from '../biome/index.js';\nimport { StructureSet } from './StructureSet.js';\nexport class StructurePlacement {\n    locateOffset;\n    frequencyReductionMethod;\n    frequency;\n    salt;\n    exclusionZone;\n    constructor(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone) {\n        this.locateOffset = locateOffset;\n        this.frequencyReductionMethod = frequencyReductionMethod;\n        this.frequency = frequency;\n        this.salt = salt;\n        this.exclusionZone = exclusionZone;\n    }\n    static fromJson(obj) {\n        const root = Json.readObject(obj) ?? {};\n        const type = Json.readString(root.type)?.replace(/^minecraft:/, '');\n        const locateOffset = BlockPos.fromJson(root.locate_offset);\n        const frequencyReductionMethod = StructurePlacement.FrequencyReducer.fromType(Json.readString(root.frequency_reduction_method) ?? 'default');\n        const frequency = Json.readNumber(root.frequency) ?? 1;\n        const salt = Json.readInt(root.salt) ?? 0;\n        const exclusionZone = 'exclusion_zone' in root ? StructurePlacement.ExclusionZone.fromJson(root.exclusion_zone) : undefined;\n        switch (type) {\n            case 'random_spread':\n                const spacing = Json.readInt(root.spacing) ?? 1;\n                const separation = Json.readInt(root.separation) ?? 1;\n                const spreadType = StructurePlacement.SpreadType.fromJson(root.spread_type);\n                return new StructurePlacement.RandomSpreadStructurePlacement(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone, spacing, separation, spreadType);\n            case 'concentric_rings':\n                const distance = Json.readInt(root.distance) ?? 1;\n                const spread = Json.readInt(root.spread) ?? 1;\n                const count = Json.readInt(root.count) ?? 1;\n                const preferredBiomes = HolderSet.parser(WorldgenRegistries.BIOME)(root.preferred_biomes);\n                return new StructurePlacement.ConcentricRingsStructurePlacement(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone, distance, spread, count, preferredBiomes);\n        }\n        return new StructurePlacement.RandomSpreadStructurePlacement([0, 0, 0], StructurePlacement.FrequencyReducer.ProbabilityReducer, 1, 0, undefined, 1, 1, 'linear');\n    }\n    isStructureChunk(seed, chunkX, chunkZ) {\n        if (!this.isPlacementChunk(seed, chunkX, chunkZ)) {\n            return false;\n        }\n        else if (this.frequency < 1.0 && !this.frequencyReductionMethod(seed, this.salt, chunkX, chunkZ, this.frequency)) {\n            return false;\n        }\n        else if (this.exclusionZone && this.exclusionZone.isPlacementForbidden(seed, chunkX, chunkZ)) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    prepare(_biomeSource, _sampler, _concentricRingsSeed) { }\n}\n(function (StructurePlacement) {\n    let FrequencyReducer;\n    (function (FrequencyReducer) {\n        function fromType(type) {\n            switch (type) {\n                case 'legacy_type_1': return LegacyPillagerOutpostReducer;\n                case 'legacy_type_2': return LegacyArbitrarySaltProbabilityReducer;\n                case 'legacy_type_3': return LegacyProbabilityReducerWithDouble;\n                case 'default':\n                default: return ProbabilityReducer;\n            }\n        }\n        FrequencyReducer.fromType = fromType;\n        function ProbabilityReducer(seed, salt, chunkX, chunkZ, frequency) {\n            const random = LegacyRandom.fromLargeFeatureWithSalt(seed, salt, chunkX, chunkZ); // [sic]\n            return random.nextFloat() < frequency;\n        }\n        FrequencyReducer.ProbabilityReducer = ProbabilityReducer;\n        function LegacyProbabilityReducerWithDouble(seed, _, chunkX, chunkZ, frequency) {\n            const random = LegacyRandom.fromLargeFeatureSeed(seed, chunkX, chunkZ);\n            return random.nextDouble() < frequency;\n        }\n        FrequencyReducer.LegacyProbabilityReducerWithDouble = LegacyProbabilityReducerWithDouble;\n        function LegacyArbitrarySaltProbabilityReducer(seed, _, chunkX, chunkZ, frequency) {\n            const random = LegacyRandom.fromLargeFeatureWithSalt(seed, chunkX, chunkZ, 10387320);\n            return random.nextFloat() < frequency;\n        }\n        FrequencyReducer.LegacyArbitrarySaltProbabilityReducer = LegacyArbitrarySaltProbabilityReducer;\n        function LegacyPillagerOutpostReducer(seed, _, chunkX, chunkZ, frequency) {\n            const a = chunkX >> 4;\n            const b = chunkZ >> 4;\n            const random = new LegacyRandom(BigInt(a ^ b << 4) ^ seed);\n            random.nextInt();\n            return random.nextInt(Math.floor(1 / frequency)) === 0;\n        }\n        FrequencyReducer.LegacyPillagerOutpostReducer = LegacyPillagerOutpostReducer;\n    })(FrequencyReducer = StructurePlacement.FrequencyReducer || (StructurePlacement.FrequencyReducer = {}));\n    class ExclusionZone {\n        otherSet;\n        chunkCount;\n        constructor(otherSet, chunkCount) {\n            this.otherSet = otherSet;\n            this.chunkCount = chunkCount;\n        }\n        static fromJson(obj) {\n            const root = Json.readObject(obj) ?? {};\n            return new ExclusionZone(Holder.reference(StructureSet.REGISTRY, Identifier.parse(Json.readString(root.other_set) ?? '')), Json.readInt(root.chunk_count) ?? 1);\n        }\n        isPlacementForbidden(seed, chunkX, chunkZ) {\n            const placement = this.otherSet.value().placement;\n            return placement\n                .getPotentialStructureChunks(seed, chunkX - this.chunkCount, chunkZ - this.chunkCount, chunkX + this.chunkCount, chunkZ + this.chunkCount)\n                .findIndex((chunk) => Math.abs(chunk[0] - chunkX) <= this.chunkCount && Math.abs(chunk[1] - chunkZ) <= this.chunkCount && placement.isStructureChunk(seed, chunk[0], chunk[1])) >= 0;\n        }\n    }\n    StructurePlacement.ExclusionZone = ExclusionZone;\n    let SpreadType;\n    (function (SpreadType) {\n        function fromJson(obj) {\n            const string = Json.readString(obj) ?? 'linear';\n            if (string === 'triangular')\n                return 'triangular';\n            return 'linear';\n        }\n        SpreadType.fromJson = fromJson;\n    })(SpreadType = StructurePlacement.SpreadType || (StructurePlacement.SpreadType = {}));\n    class RandomSpreadStructurePlacement extends StructurePlacement {\n        spacing;\n        separation;\n        spreadType;\n        constructor(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone, spacing, separation, spreadType) {\n            super(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone);\n            this.spacing = spacing;\n            this.separation = separation;\n            this.spreadType = spreadType;\n        }\n        evaluateSpread(random, max) {\n            switch (this.spreadType) {\n                case 'linear':\n                    return random.nextInt(max);\n                case 'triangular':\n                    return Math.floor((random.nextInt(max) + random.nextInt(max)) / 2);\n            }\n        }\n        getPotentialStructureChunk(seed, chunkX, chunkZ) {\n            const x = Math.floor(chunkX / this.spacing);\n            const z = Math.floor(chunkZ / this.spacing);\n            const random = LegacyRandom.fromLargeFeatureWithSalt(seed, x, z, this.salt);\n            const maxOffset = this.spacing - this.separation;\n            const offsetX = this.evaluateSpread(random, maxOffset);\n            const offsetZ = this.evaluateSpread(random, maxOffset);\n            return [x * this.spacing + offsetX, z * this.spacing + offsetZ];\n        }\n        isPlacementChunk(seed, chunkX, chunkZ) {\n            const [placementX, palcementZ] = this.getPotentialStructureChunk(seed, chunkX, chunkZ);\n            return placementX === chunkX && palcementZ === chunkZ;\n        }\n        getPotentialStructureChunks(seed, minChunkX, minChunkZ, maxChunkX, maxChunkZ) {\n            const positions = [];\n            for (let chunkX = Math.floor(minChunkX / this.spacing) * this.spacing; chunkX <= maxChunkX; chunkX += this.spacing) {\n                for (let chunkZ = Math.floor(minChunkZ / this.spacing) * this.spacing; chunkZ <= maxChunkZ; chunkZ += this.spacing) {\n                    positions.push(this.getPotentialStructureChunk(seed, chunkX, chunkZ));\n                }\n            }\n            return positions;\n        }\n    }\n    StructurePlacement.RandomSpreadStructurePlacement = RandomSpreadStructurePlacement;\n    const SEARCH_RANGE = 112;\n    class ConcentricRingsStructurePlacement extends StructurePlacement {\n        distance;\n        spread;\n        count;\n        preferredBiomes;\n        positions;\n        constructor(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone, distance, spread, count, preferredBiomes) {\n            super(locateOffset, frequencyReductionMethod, frequency, salt, exclusionZone);\n            this.distance = distance;\n            this.spread = spread;\n            this.count = count;\n            this.preferredBiomes = preferredBiomes;\n        }\n        prepare(biomeSource, sampler, concentricRingsSeed) {\n            if (this.positions !== undefined) {\n                return;\n            }\n            this.positions = [];\n            if (this.count === 0) {\n                return;\n            }\n            const random = new LegacyRandom(concentricRingsSeed);\n            var angle = random.nextDouble() * Math.PI * 2;\n            var current_spread = this.spread;\n            var ringNr = 0;\n            var posInRingNr = 0;\n            const preferredBiomes = [...this.preferredBiomes.value().getEntries()].flatMap(b => b.key() ?? []);\n            for (var i = 0; i < this.count; i++) {\n                const current_distance = 4 * this.distance + this.distance * ringNr * 6 + (random.nextDouble() - 0.5) * this.distance * 2.5;\n                const chunkX = Math.round(Math.cos(angle) * current_distance);\n                const chunkZ = Math.round(Math.sin(angle) * current_distance);\n                const posX = (chunkX << 4) + 8;\n                const posZ = (chunkZ << 4) + 8;\n                const forkedRandom = random.fork();\n                const provider = () => {\n                    const searchResult = BiomeSource.findBiomeHorizontal(biomeSource, posX, 0, posZ, SEARCH_RANGE, (biome) => preferredBiomes.findIndex(b => b.equals(biome)) >= 0, forkedRandom, sampler);\n                    if (searchResult) {\n                        return [searchResult.pos[0] >> 4, searchResult.pos[2] >> 4];\n                    }\n                    else {\n                        return [chunkX, chunkZ];\n                    }\n                };\n                this.positions.push({ center: [chunkX, chunkZ], real: provider });\n                angle += Math.PI * 2 / current_spread;\n                posInRingNr++;\n                if (posInRingNr == current_spread) {\n                    ringNr++;\n                    posInRingNr = 0;\n                    current_spread += 2 * current_spread / (ringNr + 1);\n                    current_spread = Math.min(current_spread, this.count - i);\n                    angle += random.nextDouble() * Math.PI * 2;\n                }\n            }\n        }\n        isPlacementChunk(seed, chunkX, chunkZ) {\n            if (this.positions === undefined) {\n                console.warn('trying to access concentric rings placement before position calculation');\n                return false;\n            }\n            return this.getPotentialStructureChunks(seed, chunkX, chunkZ, chunkX, chunkZ).findIndex((p) => p[0] === chunkX && p[1] === chunkZ) >= 0;\n        }\n        getPotentialStructureChunks(seed, minChunkX, minChunkZ, maxChunkX, maxChunkZ) {\n            if (this.positions === undefined) {\n                console.warn('trying to access concentric rings placement before position calculation');\n                return [];\n            }\n            const results = [];\n            for (const position of this.positions) {\n                if (position.center[0] < minChunkX - (SEARCH_RANGE >> 4))\n                    continue;\n                if (position.center[0] > maxChunkX + (SEARCH_RANGE >> 4))\n                    continue;\n                if (position.center[1] < minChunkZ - (SEARCH_RANGE >> 4))\n                    continue;\n                if (position.center[1] > maxChunkZ + (SEARCH_RANGE >> 4))\n                    continue;\n                if (position.real instanceof Function) {\n                    position.real = position.real();\n                }\n                results.push(position.real);\n            }\n            return results;\n        }\n    }\n    StructurePlacement.ConcentricRingsStructurePlacement = ConcentricRingsStructurePlacement;\n})(StructurePlacement || (StructurePlacement = {}));\n//# sourceMappingURL=StructurePlacement.js.map","'use strict';\n\n\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nmodule.exports.isNothing      = isNothing;\nmodule.exports.isObject       = isObject;\nmodule.exports.toArray        = toArray;\nmodule.exports.repeat         = repeat;\nmodule.exports.isNegativeZero = isNegativeZero;\nmodule.exports.extend         = extend;\n","// YAML error class. http://stackoverflow.com/questions/8458984\n//\n'use strict';\n\nfunction YAMLException(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = (this.reason || '(unknown reason)') + (this.mark ? ' ' + this.mark.toString() : '');\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException.prototype = Object.create(Error.prototype);\nYAMLException.prototype.constructor = YAMLException;\n\n\nYAMLException.prototype.toString = function toString(compact) {\n  var result = this.name + ': ';\n\n  result += this.reason || '(unknown reason)';\n\n  if (!compact && this.mark) {\n    result += ' ' + this.mark.toString();\n  }\n\n  return result;\n};\n\n\nmodule.exports = YAMLException;\n","'use strict';\n\n\nvar common = require('./common');\n\n\nfunction Mark(name, buffer, position, line, column) {\n  this.name     = name;\n  this.buffer   = buffer;\n  this.position = position;\n  this.line     = line;\n  this.column   = column;\n}\n\n\nMark.prototype.getSnippet = function getSnippet(indent, maxLength) {\n  var head, start, tail, end, snippet;\n\n  if (!this.buffer) return null;\n\n  indent = indent || 4;\n  maxLength = maxLength || 75;\n\n  head = '';\n  start = this.position;\n\n  while (start > 0 && '\\x00\\r\\n\\x85\\u2028\\u2029'.indexOf(this.buffer.charAt(start - 1)) === -1) {\n    start -= 1;\n    if (this.position - start > (maxLength / 2 - 1)) {\n      head = ' ... ';\n      start += 5;\n      break;\n    }\n  }\n\n  tail = '';\n  end = this.position;\n\n  while (end < this.buffer.length && '\\x00\\r\\n\\x85\\u2028\\u2029'.indexOf(this.buffer.charAt(end)) === -1) {\n    end += 1;\n    if (end - this.position > (maxLength / 2 - 1)) {\n      tail = ' ... ';\n      end -= 5;\n      break;\n    }\n  }\n\n  snippet = this.buffer.slice(start, end);\n\n  return common.repeat(' ', indent) + head + snippet + tail + '\\n' +\n         common.repeat(' ', indent + this.position - start + head.length) + '^';\n};\n\n\nMark.prototype.toString = function toString(compact) {\n  var snippet, where = '';\n\n  if (this.name) {\n    where += 'in \"' + this.name + '\" ';\n  }\n\n  where += 'at line ' + (this.line + 1) + ', column ' + (this.column + 1);\n\n  if (!compact) {\n    snippet = this.getSnippet();\n\n    if (snippet) {\n      where += ':\\n' + snippet;\n    }\n  }\n\n  return where;\n};\n\n\nmodule.exports = Mark;\n","'use strict';\n\nvar YAMLException = require('./exception');\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new YAMLException('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.tag          = tag;\n  this.kind         = options['kind']         || null;\n  this.resolve      = options['resolve']      || function () { return true; };\n  this.construct    = options['construct']    || function (data) { return data; };\n  this.instanceOf   = options['instanceOf']   || null;\n  this.predicate    = options['predicate']    || null;\n  this.represent    = options['represent']    || null;\n  this.defaultStyle = options['defaultStyle'] || null;\n  this.styleAliases = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new YAMLException('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nmodule.exports = Type;\n","'use strict';\n\n/*eslint-disable max-len*/\n\nvar common        = require('./common');\nvar YAMLException = require('./exception');\nvar Type          = require('./type');\n\n\nfunction compileList(schema, name, result) {\n  var exclude = [];\n\n  schema.include.forEach(function (includedSchema) {\n    result = compileList(includedSchema, name, result);\n  });\n\n  schema[name].forEach(function (currentType) {\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind) {\n        exclude.push(previousIndex);\n      }\n    });\n\n    result.push(currentType);\n  });\n\n  return result.filter(function (type, index) {\n    return exclude.indexOf(index) === -1;\n  });\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {}\n      }, index, length;\n\n  function collectType(type) {\n    result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema(definition) {\n  this.include  = definition.include  || [];\n  this.implicit = definition.implicit || [];\n  this.explicit = definition.explicit || [];\n\n  this.implicit.forEach(function (type) {\n    if (type.loadKind && type.loadKind !== 'scalar') {\n      throw new YAMLException('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n  });\n\n  this.compiledImplicit = compileList(this, 'implicit', []);\n  this.compiledExplicit = compileList(this, 'explicit', []);\n  this.compiledTypeMap  = compileMap(this.compiledImplicit, this.compiledExplicit);\n}\n\n\nSchema.DEFAULT = null;\n\n\nSchema.create = function createSchema() {\n  var schemas, types;\n\n  switch (arguments.length) {\n    case 1:\n      schemas = Schema.DEFAULT;\n      types = arguments[0];\n      break;\n\n    case 2:\n      schemas = arguments[0];\n      types = arguments[1];\n      break;\n\n    default:\n      throw new YAMLException('Wrong number of arguments for Schema.create function');\n  }\n\n  schemas = common.toArray(schemas);\n  types = common.toArray(types);\n\n  if (!schemas.every(function (schema) { return schema instanceof Schema; })) {\n    throw new YAMLException('Specified list of super schemas (or a single Schema object) contains a non-Schema object.');\n  }\n\n  if (!types.every(function (type) { return type instanceof Type; })) {\n    throw new YAMLException('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n  }\n\n  return new Schema({\n    include: schemas,\n    explicit: types\n  });\n};\n\n\nmodule.exports = Schema;\n","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n","'use strict';\n\nvar Type = require('../type');\n\nmodule.exports = new Type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n","// Standard YAML's Failsafe schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2802346\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  explicit: [\n    require('../type/str'),\n    require('../type/seq'),\n    require('../type/map')\n  ]\n});\n","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; }\n  },\n  defaultStyle: 'lowercase'\n});\n","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n","'use strict';\n\nvar common = require('../common');\nvar Type   = require('../type');\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n    // base 8\n    for (; index < max; index++) {\n      ch = data[index];\n      if (ch === '_') continue;\n      if (!isOctCode(data.charCodeAt(index))) return false;\n      hasDigits = true;\n    }\n    return hasDigits && ch !== '_';\n  }\n\n  // base 10 (except 0) or base 60\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (ch === ':') break;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  // if !base60 - done;\n  if (ch !== ':') return true;\n\n  // base60 almost not used, no needs to optimize\n  return /^(:[0-5]?[0-9])+$/.test(data.slice(index));\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch, base, digits = [];\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value, 16);\n    return sign * parseInt(value, 8);\n  }\n\n  if (value.indexOf(':') !== -1) {\n    value.split(':').forEach(function (v) {\n      digits.unshift(parseInt(v, 10));\n    });\n\n    value = 0;\n    base = 1;\n\n    digits.forEach(function (d) {\n      value += (d * base);\n      base *= 60;\n    });\n\n    return sign * value;\n\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0'  + obj.toString(8) : '-0'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n","'use strict';\n\nvar common = require('../common');\nvar Type   = require('../type');\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // 20:59\n  '|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\\\.[0-9_]*' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign, base, digits;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n  digits = [];\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n\n  } else if (value.indexOf(':') >= 0) {\n    value.split(':').forEach(function (v) {\n      digits.unshift(parseFloat(v, 10));\n    });\n\n    value = 0.0;\n    base = 1;\n\n    digits.forEach(function (d) {\n      value += d * base;\n      base *= 60;\n    });\n\n    return sign * value;\n\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n","// Standard YAML's JSON schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2803231\n//\n// NOTE: JS-YAML does not support schema-specific tag resolution restrictions.\n// So, this schema is not such strict as defined in the YAML specification.\n// It allows numbers in binary notaion, use `Null` and `NULL` as `null`, etc.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./failsafe')\n  ],\n  implicit: [\n    require('../type/null'),\n    require('../type/bool'),\n    require('../type/int'),\n    require('../type/float')\n  ]\n});\n","// Standard YAML's Core schema.\n// http://www.yaml.org/spec/1.2/spec.html#id2804923\n//\n// NOTE: JS-YAML does not support schema-specific tag resolution restrictions.\n// So, Core schema has no distinctions from JSON schema is JS-YAML.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./json')\n  ]\n});\n","'use strict';\n\nvar Type = require('../type');\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n","'use strict';\n\nvar Type = require('../type');\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n","'use strict';\n\n/*eslint-disable no-bitwise*/\n\nvar NodeBuffer;\n\ntry {\n  // A trick for browserified version, to not include `Buffer` shim\n  var _require = require;\n  NodeBuffer = _require('buffer').Buffer;\n} catch (__) {}\n\nvar Type       = require('../type');\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  // Wrap into Buffer for NodeJS and leave Array for browser\n  if (NodeBuffer) {\n    // Support node 6.+ Buffer API when available\n    return NodeBuffer.from ? NodeBuffer.from(result) : new NodeBuffer(result);\n  }\n\n  return result;\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(object) {\n  return NodeBuffer && NodeBuffer.isBuffer(object);\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n","'use strict';\n\nvar Type = require('../type');\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nvar _toString       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n","'use strict';\n\nvar Type = require('../type');\n\nvar _toString = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n","'use strict';\n\nvar Type = require('../type');\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n","// JS-YAML's default schema for `safeLoad` function.\n// It is not described in the YAML specification.\n//\n// This schema is based on standard YAML's Core schema and includes most of\n// extra types described at YAML tag repository. (http://yaml.org/type/)\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = new Schema({\n  include: [\n    require('./core')\n  ],\n  implicit: [\n    require('../type/timestamp'),\n    require('../type/merge')\n  ],\n  explicit: [\n    require('../type/binary'),\n    require('../type/omap'),\n    require('../type/pairs'),\n    require('../type/set')\n  ]\n});\n","'use strict';\n\nvar Type = require('../../type');\n\nfunction resolveJavascriptUndefined() {\n  return true;\n}\n\nfunction constructJavascriptUndefined() {\n  /*eslint-disable no-undefined*/\n  return undefined;\n}\n\nfunction representJavascriptUndefined() {\n  return '';\n}\n\nfunction isUndefined(object) {\n  return typeof object === 'undefined';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:js/undefined', {\n  kind: 'scalar',\n  resolve: resolveJavascriptUndefined,\n  construct: constructJavascriptUndefined,\n  predicate: isUndefined,\n  represent: representJavascriptUndefined\n});\n","'use strict';\n\nvar Type = require('../../type');\n\nfunction resolveJavascriptRegExp(data) {\n  if (data === null) return false;\n  if (data.length === 0) return false;\n\n  var regexp = data,\n      tail   = /\\/([gim]*)$/.exec(data),\n      modifiers = '';\n\n  // if regexp starts with '/' it can have modifiers and must be properly closed\n  // `/foo/gim` - modifiers tail can be maximum 3 chars\n  if (regexp[0] === '/') {\n    if (tail) modifiers = tail[1];\n\n    if (modifiers.length > 3) return false;\n    // if expression starts with /, is should be properly terminated\n    if (regexp[regexp.length - modifiers.length - 1] !== '/') return false;\n  }\n\n  return true;\n}\n\nfunction constructJavascriptRegExp(data) {\n  var regexp = data,\n      tail   = /\\/([gim]*)$/.exec(data),\n      modifiers = '';\n\n  // `/foo/gim` - tail can be maximum 4 chars\n  if (regexp[0] === '/') {\n    if (tail) modifiers = tail[1];\n    regexp = regexp.slice(1, regexp.length - modifiers.length - 1);\n  }\n\n  return new RegExp(regexp, modifiers);\n}\n\nfunction representJavascriptRegExp(object /*, style*/) {\n  var result = '/' + object.source + '/';\n\n  if (object.global) result += 'g';\n  if (object.multiline) result += 'm';\n  if (object.ignoreCase) result += 'i';\n\n  return result;\n}\n\nfunction isRegExp(object) {\n  return Object.prototype.toString.call(object) === '[object RegExp]';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:js/regexp', {\n  kind: 'scalar',\n  resolve: resolveJavascriptRegExp,\n  construct: constructJavascriptRegExp,\n  predicate: isRegExp,\n  represent: representJavascriptRegExp\n});\n","'use strict';\n\nvar esprima;\n\n// Browserified version does not have esprima\n//\n// 1. For node.js just require module as deps\n// 2. For browser try to require mudule via external AMD system.\n//    If not found - try to fallback to window.esprima. If not\n//    found too - then fail to parse.\n//\ntry {\n  // workaround to exclude package from browserify list.\n  var _require = require;\n  esprima = _require('esprima');\n} catch (_) {\n  /* eslint-disable no-redeclare */\n  /* global window */\n  if (typeof window !== 'undefined') esprima = window.esprima;\n}\n\nvar Type = require('../../type');\n\nfunction resolveJavascriptFunction(data) {\n  if (data === null) return false;\n\n  try {\n    var source = '(' + data + ')',\n        ast    = esprima.parse(source, { range: true });\n\n    if (ast.type                    !== 'Program'             ||\n        ast.body.length             !== 1                     ||\n        ast.body[0].type            !== 'ExpressionStatement' ||\n        (ast.body[0].expression.type !== 'ArrowFunctionExpression' &&\n          ast.body[0].expression.type !== 'FunctionExpression')) {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nfunction constructJavascriptFunction(data) {\n  /*jslint evil:true*/\n\n  var source = '(' + data + ')',\n      ast    = esprima.parse(source, { range: true }),\n      params = [],\n      body;\n\n  if (ast.type                    !== 'Program'             ||\n      ast.body.length             !== 1                     ||\n      ast.body[0].type            !== 'ExpressionStatement' ||\n      (ast.body[0].expression.type !== 'ArrowFunctionExpression' &&\n        ast.body[0].expression.type !== 'FunctionExpression')) {\n    throw new Error('Failed to resolve function');\n  }\n\n  ast.body[0].expression.params.forEach(function (param) {\n    params.push(param.name);\n  });\n\n  body = ast.body[0].expression.body.range;\n\n  // Esprima's ranges include the first '{' and the last '}' characters on\n  // function expressions. So cut them out.\n  if (ast.body[0].expression.body.type === 'BlockStatement') {\n    /*eslint-disable no-new-func*/\n    return new Function(params, source.slice(body[0] + 1, body[1] - 1));\n  }\n  // ES6 arrow functions can omit the BlockStatement. In that case, just return\n  // the body.\n  /*eslint-disable no-new-func*/\n  return new Function(params, 'return ' + source.slice(body[0], body[1]));\n}\n\nfunction representJavascriptFunction(object /*, style*/) {\n  return object.toString();\n}\n\nfunction isFunction(object) {\n  return Object.prototype.toString.call(object) === '[object Function]';\n}\n\nmodule.exports = new Type('tag:yaml.org,2002:js/function', {\n  kind: 'scalar',\n  resolve: resolveJavascriptFunction,\n  construct: constructJavascriptFunction,\n  predicate: isFunction,\n  represent: representJavascriptFunction\n});\n","// JS-YAML's default schema for `load` function.\n// It is not described in the YAML specification.\n//\n// This schema is based on JS-YAML's default safe schema and includes\n// JavaScript-specific types: !!js/undefined, !!js/regexp and !!js/function.\n//\n// Also this schema is used as default base schema at `Schema.create` function.\n\n\n'use strict';\n\n\nvar Schema = require('../schema');\n\n\nmodule.exports = Schema.DEFAULT = new Schema({\n  include: [\n    require('./default_safe')\n  ],\n  explicit: [\n    require('../type/js/undefined'),\n    require('../type/js/regexp'),\n    require('../type/js/function')\n  ]\n});\n","'use strict';\n\n/*eslint-disable max-len,no-use-before-define*/\n\nvar common              = require('./common');\nvar YAMLException       = require('./exception');\nvar Mark                = require('./mark');\nvar DEFAULT_SAFE_SCHEMA = require('./schema/default_safe');\nvar DEFAULT_FULL_SCHEMA = require('./schema/default_full');\n\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || DEFAULT_FULL_SCHEMA;\n  this.onWarning = options['onWarning'] || null;\n  this.legacy    = options['legacy']    || false;\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  return new YAMLException(\n    message,\n    new Mark(state.filename, state.input, state.position, state.line, (state.position - state.lineStart)));\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startPos) {\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty.call(overridableKeys, keyNode) &&\n        _hasOwnProperty.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n    _result[keyNode] = valueNode;\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = {},\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _pos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = {},\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n    _pos = state.position;\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else if (composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n\n    } else {\n      break; // Reading is done. Go to the epilogue.\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _pos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if (state.lineIndent > nodeIndent && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag !== null && state.tag !== '!') {\n    if (state.tag === '?') {\n      // Implicit resolving is not allowed for non-scalar types, and '?'\n      // non-specific tag is only automatically assigned to plain scalars.\n      //\n      // We only need to check kind conformity in case user explicitly assigns '?'\n      // tag, for example like this: \"!<?> [0]\"\n      //\n      if (state.result !== null && state.kind !== 'scalar') {\n        throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n      }\n\n      for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n        type = state.implicitTypes[typeIndex];\n\n        if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n          state.result = type.construct(state.result);\n          state.tag = type.tag;\n          if (state.anchor !== null) {\n            state.anchorMap[state.anchor] = state.result;\n          }\n          break;\n        }\n      }\n    } else if (_hasOwnProperty.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n\n      if (state.result !== null && type.kind !== state.kind) {\n        throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n      }\n\n      if (!type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n      } else {\n        state.result = type.construct(state.result);\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = {};\n  state.anchorMap = {};\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new YAMLException('expected a single document in the stream, but found more');\n}\n\n\nfunction safeLoadAll(input, iterator, options) {\n  if (typeof iterator === 'object' && iterator !== null && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  return loadAll(input, iterator, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\n\nfunction safeLoad(input, options) {\n  return load(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\n\nmodule.exports.loadAll     = loadAll;\nmodule.exports.load        = load;\nmodule.exports.safeLoadAll = safeLoadAll;\nmodule.exports.safeLoad    = safeLoad;\n","'use strict';\n\n/*eslint-disable no-use-before-define*/\n\nvar common              = require('./common');\nvar YAMLException       = require('./exception');\nvar DEFAULT_FULL_SCHEMA = require('./schema/default_full');\nvar DEFAULT_SAFE_SCHEMA = require('./schema/default_safe');\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new YAMLException('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\nfunction State(options) {\n  this.schema        = options['schema'] || DEFAULT_FULL_SCHEMA;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isnt mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== 0xFEFF /* BOM */)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// [24] b-line-feed       ::=     #xA    /* LF */\n// [25] b-carriage-return ::=     #xD    /* CR */\n// [3]  c-byte-order-mark ::=     #xFEFF\nfunction isNsChar(c) {\n  return isPrintable(c) && !isWhitespace(c)\n    // byte-order-mark\n    && c !== 0xFEFF\n    // b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// Simplified test for values allowed after the first character in plain style.\nfunction isPlainSafe(c, prev) {\n  // Uses a subset of nb-char - c-flow-indicator - \":\" - \"#\"\n  // where nb-char ::= c-printable - b-char - c-byte-order-mark.\n  return isPrintable(c) && c !== 0xFEFF\n    // - c-flow-indicator\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // - \":\" - \"#\"\n    // /* An ns-char preceding */ \"#\"\n    && c !== CHAR_COLON\n    && ((c !== CHAR_SHARP) || (prev && isNsChar(prev)));\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  return isPrintable(c) && c !== 0xFEFF\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // - | ? | : | , | [ | ] | { | }\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | # | & | * | ! | | | = | > | ' | \"\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | % | @ | `)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType) {\n  var i;\n  var char, prev_char;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(string.charCodeAt(0))\n          && !isWhitespace(string.charCodeAt(string.length - 1));\n\n  if (singleLineOnly) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; i++) {\n      char = string.charCodeAt(i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      prev_char = i > 0 ? string.charCodeAt(i - 1) : null;\n      plain = plain && isPlainSafe(char, prev_char);\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; i++) {\n      char = string.charCodeAt(i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      prev_char = i > 0 ? string.charCodeAt(i - 1) : null;\n      plain = plain && isPlainSafe(char, prev_char);\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    return plain && !testAmbiguousType(string)\n      ? STYLE_PLAIN : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//     No ending newline => unaffected; already using strip \"-\" chomping.\n//     Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return \"''\";\n    }\n    if (!state.noCompatMode &&\n        DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1) {\n      return \"'\" + string + \"'\";\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth  40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth, testAmbiguity)) {\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string, lineWidth) + '\"';\n      default:\n        throw new YAMLException('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char, nextChar;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; i++) {\n    char = string.charCodeAt(i);\n    // Check for surrogate pairs (reference Unicode 3.0 section \"3.7 Surrogates\").\n    if (char >= 0xD800 && char <= 0xDBFF/* high surrogate */) {\n      nextChar = string.charCodeAt(i + 1);\n      if (nextChar >= 0xDC00 && nextChar <= 0xDFFF/* low surrogate */) {\n        // Combine the surrogate pair and store it escaped.\n        result += encodeHex((char - 0xD800) * 0x400 + nextChar - 0xDC00 + 0x10000);\n        // Advance index one extra since we already used that char here.\n        i++; continue;\n      }\n    }\n    escapeSeq = ESCAPE_SEQUENCES[char];\n    result += !escapeSeq && isPrintable(char)\n      ? string[i]\n      : escapeSeq || encodeHex(char);\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    // Write only valid elements.\n    if (writeNode(state, level, object[index], false, false)) {\n      if (index !== 0) _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    // Write only valid elements.\n    if (writeNode(state, level + 1, object[index], true, true)) {\n      if (!compact || index !== 0) {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (index !== 0) pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new YAMLException('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || index !== 0) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      state.tag = explicit ? type.tag : '?';\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new YAMLException('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      var arrayLevel = (state.noArrayIndent && (level > 0)) ? level - 1 : level;\n      if (block && (state.dump.length !== 0)) {\n        writeBlockSequence(state, arrayLevel, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, arrayLevel, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey);\n      }\n    } else {\n      if (state.skipInvalid) return false;\n      throw new YAMLException('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      state.dump = '!<' + state.tag + '> ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  if (writeNode(state, 0, input, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nfunction safeDump(input, options) {\n  return dump(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options));\n}\n\nmodule.exports.dump     = dump;\nmodule.exports.safeDump = safeDump;\n","'use strict';\n\n\nvar loader = require('./js-yaml/loader');\nvar dumper = require('./js-yaml/dumper');\n\n\nfunction deprecated(name) {\n  return function () {\n    throw new Error('Function ' + name + ' is deprecated and cannot be used.');\n  };\n}\n\n\nmodule.exports.Type                = require('./js-yaml/type');\nmodule.exports.Schema              = require('./js-yaml/schema');\nmodule.exports.FAILSAFE_SCHEMA     = require('./js-yaml/schema/failsafe');\nmodule.exports.JSON_SCHEMA         = require('./js-yaml/schema/json');\nmodule.exports.CORE_SCHEMA         = require('./js-yaml/schema/core');\nmodule.exports.DEFAULT_SAFE_SCHEMA = require('./js-yaml/schema/default_safe');\nmodule.exports.DEFAULT_FULL_SCHEMA = require('./js-yaml/schema/default_full');\nmodule.exports.load                = loader.load;\nmodule.exports.loadAll             = loader.loadAll;\nmodule.exports.safeLoad            = loader.safeLoad;\nmodule.exports.safeLoadAll         = loader.safeLoadAll;\nmodule.exports.dump                = dumper.dump;\nmodule.exports.safeDump            = dumper.safeDump;\nmodule.exports.YAMLException       = require('./js-yaml/exception');\n\n// Deprecated schema names from JS-YAML 2.0.x\nmodule.exports.MINIMAL_SCHEMA = require('./js-yaml/schema/failsafe');\nmodule.exports.SAFE_SCHEMA    = require('./js-yaml/schema/default_safe');\nmodule.exports.DEFAULT_SCHEMA = require('./js-yaml/schema/default_full');\n\n// Deprecated functions from JS-YAML 1.x.x\nmodule.exports.scan           = deprecated('scan');\nmodule.exports.parse          = deprecated('parse');\nmodule.exports.compose        = deprecated('compose');\nmodule.exports.addConstructor = deprecated('addConstructor');\n","'use strict';\n\n\nvar yaml = require('./lib/js-yaml.js');\n\n\nmodule.exports = yaml;\n","'use strict'\nmodule.exports = rfdc\n\nfunction copyBuffer (cur) {\n  if (cur instanceof Buffer) {\n    return Buffer.from(cur)\n  }\n\n  return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length)\n}\n\nfunction rfdc (opts) {\n  opts = opts || {}\n\n  if (opts.circles) return rfdcCircles(opts)\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    var keys = Object.keys(a)\n    var a2 = new Array(keys.length)\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i]\n      var cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur instanceof Date) {\n        a2[k] = new Date(cur)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        a2[k] = fn(cur)\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o instanceof Map) return new Map(cloneArray(Array.from(o), clone))\n    if (o instanceof Set) return new Set(cloneArray(Array.from(o), clone))\n    var o2 = {}\n    for (var k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else if (cur instanceof Map) {\n        o2[k] = new Map(cloneArray(Array.from(cur), clone))\n      } else if (cur instanceof Set) {\n        o2[k] = new Set(cloneArray(Array.from(cur), clone))\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = clone(cur)\n      }\n    }\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o instanceof Map) return new Map(cloneArray(Array.from(o), cloneProto))\n    if (o instanceof Set) return new Set(cloneArray(Array.from(o), cloneProto))\n    var o2 = {}\n    for (var k in o) {\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else if (cur instanceof Map) {\n        o2[k] = new Map(cloneArray(Array.from(cur), cloneProto))\n      } else if (cur instanceof Set) {\n        o2[k] = new Set(cloneArray(Array.from(cur), cloneProto))\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = cloneProto(cur)\n      }\n    }\n    return o2\n  }\n}\n\nfunction rfdcCircles (opts) {\n  var refs = []\n  var refsNew = []\n\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    var keys = Object.keys(a)\n    var a2 = new Array(keys.length)\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i]\n      var cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur instanceof Date) {\n        a2[k] = new Date(cur)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        var index = refs.indexOf(cur)\n        if (index !== -1) {\n          a2[k] = refsNew[index]\n        } else {\n          a2[k] = fn(cur)\n        }\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o instanceof Map) return new Map(cloneArray(Array.from(o), clone))\n    if (o instanceof Set) return new Set(cloneArray(Array.from(o), clone))\n    var o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (var k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else if (cur instanceof Map) {\n        o2[k] = new Map(cloneArray(Array.from(cur), clone))\n      } else if (cur instanceof Set) {\n        o2[k] = new Set(cloneArray(Array.from(cur), clone))\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        var i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = clone(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o instanceof Map) return new Map(cloneArray(Array.from(o), cloneProto))\n    if (o instanceof Set) return new Set(cloneArray(Array.from(o), cloneProto))\n    var o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (var k in o) {\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else if (cur instanceof Map) {\n        o2[k] = new Map(cloneArray(Array.from(cur), cloneProto))\n      } else if (cur instanceof Set) {\n        o2[k] = new Set(cloneArray(Array.from(cur), cloneProto))\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        var i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = cloneProto(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n}\n","const ARTICLE_PREFIX = 'https://www.minecraft.net/article/'\r\n\r\nconst ARTICLE_OVERRIDES = new Map(Object.entries({\r\n\t'1.16-pre2': 'minecraft-1-16-pre-release-1',\r\n\t'1.16-pre4': 'minecraft-1-16-pre-release-3',\r\n\t'1.16-pre5': 'minecraft-1-16-pre-release-3',\r\n\t'1.16-pre7': 'minecraft-1-16-pre-release-6',\r\n\t'1.16-pre8': 'minecraft-1-16-pre-release-6',\r\n\t'1.16-rc1': 'minecraft-1-16-release-candidate',\r\n\t1.16: 'nether-update-java',\r\n\t'1.16.2-pre3': 'minecraft-1-16-2-pre-release-2',\r\n\t'1.16.2-rc1': 'minecraft-1-16-2-pre-release-2',\r\n\t'1.16.2-rc2': 'minecraft-1-16-2-pre-release-2',\r\n\t'1.17-pre3': 'minecraft-1-17-pre-release-2',\r\n\t'1.17-pre4': 'minecraft-1-17-pre-release-2',\r\n\t'1.17-pre5': 'minecraft-1-17-pre-release-2',\r\n\t'1.17.1-pre3': 'minecraft-1-17-1-pre-release-2',\r\n\t1.17: 'caves---cliffs--part-i-out-today-java',\r\n\t'1.18-pre3': 'minecraft-1-18-pre-release-2',\r\n\t'1.18-pre4': 'minecraft-1-18-pre-release-2',\r\n\t'1.18-pre5': 'minecraft-1-18-pre-release-2',\r\n\t'1.18-pre7': 'minecraft-1-18-pre-release-6',\r\n\t'1.18-pre8': 'minecraft-1-18-pre-release-6',\r\n\t1.18: 'caves---cliffs--part-ii-out-today-java',\r\n\t'1.18.2-pre3': 'minecraft-1-18-2-pre-release-2',\r\n\t'1.18.2-pre5': 'minecraft-1-18-2-pre-release-4',\r\n\t'1.19-pre3': 'minecraft-1-19-pre-release-2',\r\n\t'1.19-pre5': 'minecraft-1-19-pre-release-4',\r\n\t1.19: 'the-wild-update-out-today-java',\r\n\t'1.19.1-pre4': 'minecraft-1-19-1-pre-release-3',\r\n\t'1.19.1-rc2': 'minecraft-1-19-1-release-candidate-2',\r\n\t'1.19.1-rc3': 'minecraft-1-19-1-release-candidate-3',\r\n\t'1.19.3-pre2': 'minecraft-1-19-3-pre-release-1',\r\n}))\r\n\r\nexport function getArticleLink(version: string): string | undefined {\r\n\tconst override = ARTICLE_OVERRIDES.get(version)\r\n\tif (override) {\r\n\t\treturn ARTICLE_PREFIX + override\r\n\t}\r\n\tlet match\r\n\tif ((match = version.match(/^(\\d\\dw\\d\\d)[a-z]$/)) && match[1]) {\r\n\t\treturn ARTICLE_PREFIX + 'minecraft-snapshot-' + match[1] + 'a'\r\n\t}\r\n\tif ((match = version.match(/^(\\d+\\.\\d+(?:\\.\\d+)?)-pre([0-9]+)$/)) && match[1] && match[2]) {\r\n\t\treturn ARTICLE_PREFIX + 'minecraft-' + match[1].replaceAll('.', '-') + '-pre-release-' + match[2]\r\n\t}\r\n\tif ((match = version.match(/^(\\d+\\.\\d+(?:\\.\\d+)?)-rc[0-9]+$/)) && match[1]) {\r\n\t\treturn ARTICLE_PREFIX + 'minecraft-' + match[1].replaceAll('.', '-') + '-release-candidate-1' \r\n\t}\r\n\tif (version.match(/^\\d+\\.\\d+\\.\\d+$/)) {\r\n\t\treturn ARTICLE_PREFIX + 'minecraft-java-edition-' + version.replaceAll('.', '-')\r\n\t}\r\n\treturn undefined\r\n}\r\n","import { clamp } from '../../Utils.js'\r\nimport colormaps from './colormaps.json'\r\n\r\n// Implementation based on https://github.com/politiken-journalism/scale-color-perceptual/blob/master/utils/interpolate.js\r\n// Licenced as ISC\r\n// Copyright (c) 2015, Politiken Journalism <emil.bay@pol.dk>\r\n\r\nexport const ColormapTypes = ['viridis', 'inferno', 'magma', 'plasma', 'cividis', 'rocket', 'mako', 'turbo', 'gray'] as const\r\nexport type ColormapType = typeof ColormapTypes[number]\r\n\r\ntype Color = [number, number, number]\r\n\r\nfunction createColormap(type: ColormapType) {\r\n\tif (type === 'gray') {\r\n\t\treturn (t: number) => [t, t, t]\r\n\t}\r\n\tconst colors = colormaps[type]\r\n\tconst n = colors.length - 2\r\n\tconst w = 1 / n\r\n\tconst intervals: Array<(t: number) => Color> = []\r\n\tfor (var i = 0; i <= n; i++) {\r\n\t\tconst a = colors[i]\r\n\t\tconst b = colors[i+1]\r\n\t\tconst ar = a[0]\r\n\t\tconst ag = a[1]\r\n\t\tconst ab = a[2]\r\n\t\tconst br = b[0] - ar\r\n\t\tconst bg = b[1] - ag\r\n\t\tconst bb = b[2] - ab\r\n\t\tintervals[i] = (t: number) => [\r\n\t\t\tar + br * t,\r\n\t\t\tag + bg * t,\r\n\t\t\tab + bb * t,\r\n\t\t]\r\n\t}\r\n\treturn (t: number) => {\r\n\t\tt = clamp(t, 0, 1)\r\n\t\tconst i = Math.floor(t * n)\r\n\t\tvar offs = i * w\r\n\t\treturn intervals[i](t / w - offs / w)\r\n\t}\r\n}\r\n\r\nconst Colormaps = new Map(ColormapTypes.map(type => {\r\n\treturn [type, createColormap(type)]\r\n}))\r\n\r\nexport function getColormap(type: ColormapType) {\r\n\treturn Colormaps.get(type)!\r\n}\r\n","export default (glob, path) => {\n    const v = glob[path];\n    if (v) {\n        return typeof v === 'function' ? v() : Promise.resolve(v);\n    }\n    return new Promise((_, reject) => {\n        (typeof queueMicrotask === 'function' ? queueMicrotask : setTimeout)(reject.bind(null, new Error('Unknown variable dynamic import: ' + path)));\n    });\n}","import{options as n}from\"preact\";var t,u,r,o,i=0,c=[],f=n.__b,e=n.__r,a=n.diffed,v=n.__c,l=n.unmount;function m(t,r){n.__h&&n.__h(u,t,i||r),i=0;var o=u.__H||(u.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({}),o.__[t]}function p(n){return i=1,y(z,n)}function y(n,r,o){var i=m(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):z(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function d(r,o){var i=m(t++,3);!n.__s&&w(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function h(r,o){var i=m(t++,4);!n.__s&&w(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function s(n){return i=5,A(function(){return{current:n}},[])}function _(n,t,u){i=6,h(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==u?u:u.concat(n))}function A(n,u){var r=m(t++,7);return w(r.__H,u)&&(r.__=n(),r.__H=u,r.__h=n),r.__}function F(n,t){return i=8,A(function(){return n},t)}function T(n){var r=u.context[n.__c],o=m(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function q(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function x(n){var r=m(t++,10),o=p();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function b(){for(var t;t=c.shift();)if(t.__P)try{t.__H.__h.forEach(j),t.__H.__h.forEach(k),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,f&&f(n)},n.__r=function(n){e&&e(n),t=0;var o=(u=n.__c).__H;o&&(r===u?(o.__h=[],u.__h=[],o.__.forEach(function(n){n.__H&&(n.__H=void 0)})):(o.__h.forEach(j),o.__h.forEach(k),o.__h=[])),r=u},n.diffed=function(t){a&&a(t);var i=t.__c;i&&i.__H&&i.__H.__h.length&&(1!==c.push(i)&&o===n.requestAnimationFrame||((o=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),g&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);g&&(t=requestAnimationFrame(u))})(b)),u=null,r=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(j),t.__h=t.__h.filter(function(n){return!n.__||k(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),v&&v(t,u)},n.unmount=function(t){l&&l(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{j(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function k(n){var t=u;n.__c=n.__(),u=t}function w(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function z(n,t){return\"function\"==typeof t?t(n):t}export{p as useState,y as useReducer,d as useEffect,h as useLayoutEffect,s as useRef,_ as useImperativeHandle,A as useMemo,F as useCallback,T as useContext,q as useDebugValue,x as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import{options as r,Fragment as _}from\"preact\";export{Fragment}from\"preact\";var o=0;function e(_,e,n,t,f){var l,s,u={};for(s in e)\"ref\"==s?l=e[s]:u[s]=e[s];var a={type:_,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:f,__self:t};if(\"function\"==typeof _&&(l=_.defaultProps))for(s in l)void 0===u[s]&&(u[s]=l[s]);return r.vnode&&r.vnode(a),a}export{e as jsx,e as jsxs,e as jsxDEV};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","// import { createRequire } from 'module'\r\nimport type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\r\nimport { Analytics } from '../Analytics.js'\r\nimport config from '../Config.js'\r\nimport { Store } from '../Store.js'\r\n// const require = createRequire(import.meta.url)\r\n// const English = require('../../locales/en.json')\r\nimport English from '../../locales/en.json'\r\n\r\ninterface Locale {\r\n\tlang: string,\r\n\tlocale: (key: string, ...params: string[]) => string,\r\n\tchangeLocale: (lang: string) => unknown,\r\n}\r\nconst Locale = createContext<Locale>({\r\n\tlang: 'none',\r\n\tlocale: key => key,\r\n\tchangeLocale: () => {},\r\n})\r\n\r\nexport const Locales: {\r\n\t[key: string]: {\r\n\t\t[key: string]: string,\r\n\t},\r\n} = {\r\n\tfallback: English,\r\n}\r\n\r\nexport function localize(lang: string, key: string, ...params: string[]) {\r\n\tconst value: string | undefined = Locales[lang]?.[key]\r\n\t?? Locales.en?.[key] ?? Locales.fallback[key] ?? key\r\n\treturn resolveLocaleParams(value, params)\r\n}\r\n\r\nfunction resolveLocaleParams(value: string, params?: string[]): string {\r\n\treturn value.replace(/%\\d+%/g, match => {\r\n\t\tconst index = parseInt(match.slice(1, -1))\r\n\t\treturn params?.[index] !== undefined ? params[index] : match\r\n\t})\r\n}\r\n\r\nasync function loadLocale(language: string) {\r\n\tif (Locales[language]) return\r\n\tconst langConfig = config.languages.find(lang => lang.code === language)\r\n\tif (!langConfig) return\r\n\tconst data = await import(`../../locales/${language}.json`)\r\n\tconst schema = langConfig.schemas !== false\r\n\t\t&& await import(`../../../node_modules/@mcschema/locales/src/${language}.json`)\r\n\tlet partners = { default: {} }\r\n\tif (language === 'en') {\r\n\t\tpartners = await import('../partners/locales/en.json')\r\n\t}\r\n\tLocales[language] = { ...data.default, ...schema.default, ...partners.default }\r\n}\r\n\r\nexport function useLocale() {\r\n\treturn useContext(Locale)\r\n}\r\n\r\nexport function LocaleProvider({ children }: { children: ComponentChildren }) {\r\n\tconst [lang, setLanguage] = useState('none')\r\n\r\n\tconst locale = useCallback((key: string, ...params: string[]) => {\r\n\t\treturn localize(lang, key, ...params)\r\n\t}, [lang])\r\n\r\n\tconst changeLocale = useCallback(async (newLang: string) => {\r\n\t\tawait loadLocale(newLang)\r\n\t\tAnalytics.changeLocale(lang, newLang)\r\n\t\tStore.setLanguage(newLang)\r\n\t\tsetLanguage(newLang)\r\n\t}, [lang])\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst target = Store.getLanguage()\r\n\t\t\tAnalytics.setLocale(target)\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tloadLocale('en'),\r\n\t\t\t\t...(target !== 'en' ? [loadLocale(target)] : []),\r\n\t\t\t])\r\n\t\t\tsetLanguage(target)\r\n\t\t})()\r\n\t}, [])\r\n\r\n\tconst value: Locale = {\r\n\t\tlang,\r\n\t\tlocale,\r\n\t\tchangeLocale,\r\n\t}\r\n\r\n\treturn <Locale.Provider value={value}>\r\n\t\t{children}\r\n\t</Locale.Provider>\r\n}\r\n","import { useCallback, useRef, useState } from 'preact/hooks'\r\n\r\ninterface ActiveTimeoutOptions {\r\n\tcooldown?: number,\r\n\tinvert?: boolean,\r\n\tinitial?: boolean,\r\n}\r\nexport function useActiveTimeout({ cooldown, invert, initial }: ActiveTimeoutOptions = {}): [boolean | undefined, () => unknown] {\r\n\tconst [active, setActive] = useState(initial)\r\n\tconst timeout = useRef<number | undefined>(undefined)\r\n\r\n\tconst trigger = useCallback(() => {\r\n\t\tsetActive(invert ? false : true)\r\n\t\tif (timeout.current !== undefined) clearTimeout(timeout.current)\r\n\t\ttimeout.current = setTimeout(() => {\r\n\t\t\tsetActive(invert ? true : false)\r\n\t\t}, cooldown ?? 2000) as any\r\n\t}, [])\r\n\r\n\treturn [active, trigger]\r\n}\r\n","import type { Inputs } from 'preact/hooks'\r\nimport { useEffect } from 'preact/hooks'\r\nimport type { AsyncCancel, AsyncState } from './index.js'\r\nimport { useAsyncFn } from './index.js'\r\n\r\nexport function useAsync<R>(\r\n\tfn: () => Promise<R | typeof AsyncCancel>,\r\n\tinputs: Inputs = [],\r\n\tinitialState: AsyncState<R> = { loading: true },\r\n): AsyncState<R> & { refresh: () => Promise<unknown> } {\r\n\tconst [state, callback] = useAsyncFn<R, () => Promise<R | typeof AsyncCancel>>(fn, inputs, initialState)\r\n\r\n\tuseEffect(() => {\r\n\t\tcallback()\r\n\t}, [callback])\r\n\r\n\treturn {\r\n\t\t...state,\r\n\t\trefresh: callback,\r\n\t}\r\n}\r\n","import type { Inputs } from 'preact/hooks'\r\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\r\n\r\n\r\nexport type AsyncState<T> = {\r\n\tloading: boolean,\r\n\terror?: undefined,\r\n\tvalue?: undefined,\r\n} | {\r\n\tloading: true,\r\n\terror?: Error | undefined,\r\n\tvalue?: T,\r\n} | {\r\n\tloading: false,\r\n\terror: Error,\r\n\tvalue?: undefined,\r\n} | {\r\n\tloading: false,\r\n\terror?: undefined,\r\n\tvalue: T,\r\n}\r\n\r\nexport const AsyncCancel = Symbol('async-cancel')\r\n\r\nexport function useAsyncFn<R, T extends (...args: any[]) => Promise<R | typeof AsyncCancel>>(\r\n\tfn: T,\r\n\tinputs: Inputs = [],\r\n\tinitialState: AsyncState<R> = { loading: false },\r\n): [AsyncState<R>, (...args: Parameters<T>) => Promise<R | typeof AsyncCancel | undefined>] {\r\n\tconst [state, setState] = useState<AsyncState<R>>(initialState)\r\n\tconst isMounted = useRef<boolean>(false)\r\n\tconst lastCallId = useRef(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tisMounted.current = true\r\n\t\treturn () => isMounted.current = false\r\n\t}, [])\r\n\r\n\tconst callback = useCallback((...args: Parameters<T>): Promise<R | typeof AsyncCancel | undefined> => {\r\n\t\tconst callId = ++lastCallId.current\r\n\t\tif (!state.loading) {\r\n\t\t\tsetState(prev => ({ ...prev, loading: true }))\r\n\t\t}\r\n\r\n\t\treturn fn(...args).then(\r\n\t\t\tvalue => {\r\n\t\t\t\tif (isMounted.current && callId === lastCallId.current && value !== AsyncCancel) {\r\n\t\t\t\t\tsetState({ value, loading: false })\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tif (isMounted.current && callId === lastCallId.current) {\r\n\t\t\t\t\tsetState({ error, loading: false })\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined\r\n\t\t\t})\r\n\t}, inputs)\r\n\r\n\treturn [state, callback]\r\n}\r\n","import { useEffect, useState } from 'preact/hooks'\r\n\r\nexport const LOSE_FOCUS = 'misode-lose-focus'\r\n\r\nexport function useFocus(): [boolean, (active?: boolean) => unknown] {\r\n\tconst [active, setActive] = useState(false)\r\n\r\n\tconst hider = () => {\r\n\t\tsetActive(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (active) {\r\n\t\t\tdocument.body.addEventListener('click', hider)\r\n\t\t\tdocument.body.addEventListener('contextmenu', hider)\r\n\t\t\tdocument.body.addEventListener(LOSE_FOCUS, hider)\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tdocument.body.removeEventListener('click', hider)\r\n\t\t\tdocument.body.removeEventListener('contextmenu', hider)\r\n\t\t\tdocument.body.removeEventListener(LOSE_FOCUS, hider)\r\n\t\t}\r\n\t}, [active])\r\n\r\n\treturn [active, (active = true) => setActive(active)]\r\n}\r\n","import { useCallback, useState } from 'preact/hooks'\r\n\r\ntype Result<T> = [T, (value: T | null | undefined) => void]\r\n\r\nexport function useLocalStorage(key: string, defaultValue: string): Result<string>\r\nexport function useLocalStorage<T>(key: string, defaultValue: T, parse: (s: string) => T, stringify: (e: T) => string): Result<T>\r\nexport function useLocalStorage<T>(key: string, defaultValue: T, parse?: (s: string) => T, stringify?: (e: T) => string): Result<T> {\r\n\tconst getter = useCallback(() => {\r\n\t\tconst raw = localStorage.getItem(key)\r\n\t\tif (raw === null) {\r\n\t\t\treturn defaultValue\r\n\t\t} else if (parse === undefined) {\r\n\t\t\treturn raw as unknown as T\r\n\t\t} else {\r\n\t\t\treturn parse(raw)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst [state, setState] = useState(getter())\r\n\r\n\tconst setter = useCallback((value: T | null | undefined) => {\r\n\t\tif (value == null) {\r\n\t\t\tlocalStorage.removeItem(key)\r\n\t\t\tsetState(defaultValue)\r\n\t\t} else if (stringify !== undefined) {\r\n\t\t\tlocalStorage.setItem(key, stringify(value))\r\n\t\t\tsetState(value)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(key, value as unknown as string)\r\n\t\t\tsetState(value)\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn [state, setter]\r\n}\r\n","import { useEffect, useState } from 'preact/hooks'\r\n\r\nexport function useMediaQuery(query: string): boolean {\r\n\tconst [prefers, setPrefers] = useState(matchMedia(query).matches)\r\n\r\n\tconst onChange = (e: MediaQueryListEvent) => {\r\n\t\tsetPrefers(e.matches)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst mediaQuery = matchMedia(query)\r\n\t\tmediaQuery.addEventListener('change', onChange)\r\n\t\treturn () => {\r\n\t\t\tmediaQuery.removeEventListener('change', onChange)\r\n\t\t}\r\n\t}, [query])\r\n\r\n\treturn prefers\r\n}\r\n","import type { DataModel } from '@mcschema/core'\r\nimport type { Inputs } from 'preact/hooks'\r\nimport { useEffect } from 'preact/hooks'\r\n\r\nexport function useModel(model: DataModel | undefined | null, invalidated: (model: DataModel) => unknown, inputs?: Inputs) {\r\n\tconst listener = {\r\n\t\tinvalidated() {\r\n\t\t\tif (model) {\r\n\t\t\t\tinvalidated(model)\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tmodel?.addListener(listener)\r\n\t\treturn () => {\r\n\t\t\tmodel?.removeListener(listener)\r\n\t\t}\r\n\t}, [model, ...inputs ?? []])\r\n}\r\n","import { useCallback, useEffect, useState } from 'preact/hooks'\r\nimport { changeUrl } from '../Utils.js'\r\n\r\nconst getValue = (search: string, param: string) => new URLSearchParams(search).get(param) ?? undefined\r\n\r\nexport function useSearchParam(param: string): [string | undefined, (value: string | undefined, replace?: boolean) => unknown] {\r\n\tconst location = window.location\r\n\tconst [value, setValue] = useState<string | undefined>(getValue(location.search, param))\r\n\r\n\tuseEffect(() => {\r\n\t\tconst onChange = () => {\r\n\t\t\tsetValue(getValue(location.search, param))\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('popstate', onChange)\r\n\t\twindow.addEventListener('pushstate', onChange)\r\n\t\twindow.addEventListener('replacestate', onChange)\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('popstate', onChange)\r\n\t\t\twindow.removeEventListener('pushstate', onChange)\r\n\t\t\twindow.removeEventListener('replacestate', onChange)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst changeValue = useCallback((newValue: string | undefined, replace?: boolean) => {\r\n\t\tif (newValue !== value) {\r\n\t\t\tsetValue(newValue)\r\n\t\t\tconst params = new URLSearchParams(location.search)\r\n\t\t\tif (newValue === undefined || newValue.length === 0) {\r\n\t\t\t\tparams.delete(param)\r\n\t\t\t} else {\r\n\t\t\t\tparams.set(param, newValue)\r\n\t\t\t}\r\n\t\t\tchangeUrl({ search: params.toString().replaceAll('%7C', '|').replaceAll('%2F', '/'), replace })\r\n\t\t}\r\n\t}, [value])\r\n\r\n\treturn [value, changeValue]\r\n};\r\n","import { useMemo } from 'preact/hooks'\r\nimport { useSearchParam } from './index.js'\r\n\r\nconst TAG_KEY = 'tags'\r\nconst TAG_SEP = '|'\r\n\r\nexport function useTags(): [string[], (tag: string, force?: boolean) => void] {\r\n\tconst [tags, setTags] = useSearchParam(TAG_KEY)\r\n\tconst activeTags = useMemo(() => tags?.split(TAG_SEP) ?? [], [tags])\r\n\r\n\tconst toggleTag = (tag: string, force?: boolean) => {\r\n\t\tif (force === false || (activeTags.includes(tag) && force !== true)) {\r\n\t\t\tsetTags(activeTags.filter(t => t !== tag).join(TAG_SEP), true)\r\n\t\t} else {\r\n\t\t\tsetTags([...activeTags, tag].sort().join(TAG_SEP), true)\r\n\t\t}\r\n\t}\r\n\r\n\treturn [activeTags, toggleTag]\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\r\nimport { Analytics } from '../Analytics.js'\r\nimport { useSearchParam } from '../hooks/index.js'\r\nimport type { VersionId } from '../services/index.js'\r\nimport { VersionIds } from '../services/index.js'\r\nimport { Store } from '../Store.js'\r\n\r\nconst VERSION_PARAM = 'version'\r\n\r\ninterface Version {\r\n\tversion: VersionId,\r\n\tchangeVersion: (version: VersionId, store?: boolean, updateSearch?: boolean) => unknown,\r\n\tchangeTargetVersion: (version: VersionId, replace?: boolean) => unknown,\r\n}\r\nconst Version = createContext<Version>({\r\n\tversion: '1.18.2',\r\n\tchangeVersion: () => {},\r\n\tchangeTargetVersion: () => {},\r\n})\r\n\r\nexport function useVersion() {\r\n\treturn useContext(Version)\r\n}\r\n\r\nexport function VersionProvider({ children }: { children: ComponentChildren }) {\r\n\tconst [version, setVersion] = useState<VersionId>(Store.getVersionOrDefault())\r\n\r\n\tconst [targetVersion, changeTargetVersion] = useSearchParam(VERSION_PARAM)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (VersionIds.includes(targetVersion as VersionId) && version !== targetVersion) {\r\n\t\t\tAnalytics.setVersion(targetVersion as VersionId)\r\n\t\t\tsetVersion(targetVersion as VersionId)\r\n\t\t}\r\n\t}, [version, targetVersion])\r\n\r\n\tconst changeVersion = useCallback((newVersion: VersionId, store = true, updateSearch = false) => {\r\n\t\tif (updateSearch || targetVersion) {\r\n\t\t\tchangeTargetVersion(newVersion, true)\r\n\t\t}\r\n\t\tif (store) {\r\n\t\t\tAnalytics.changeVersion(version, newVersion)\r\n\t\t\tStore.setVersion(newVersion)\r\n\t\t}\r\n\t\tsetVersion(newVersion)\r\n\t}, [version, targetVersion])\r\n\r\n\tuseEffect(() => {\r\n\t\tAnalytics.setVersion(version)\r\n\t\tAnalytics.setSelectedVersion(Store.getVersion() ?? 'default')\r\n\t}, [])\r\n\r\n\tconst value: Version = {\r\n\t\tversion,\r\n\t\tchangeVersion,\r\n\t\tchangeTargetVersion,\r\n\t}\r\n\r\n\treturn <Version.Provider value={value}>\r\n\t\t{children}\r\n\t</Version.Provider>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { route } from 'preact-router'\r\nimport { useCallback, useContext, useMemo, useState } from 'preact/hooks'\r\nimport config from '../Config.js'\r\nimport type { VersionId } from '../services/index.js'\r\nimport { Store } from '../Store.js'\r\nimport { cleanUrl, genPath } from '../Utils.js'\r\nimport { useVersion } from './Version.jsx'\r\n\r\nexport type Project = {\r\n\tname: string,\r\n\tnamespace?: string,\r\n\tversion?: VersionId,\r\n\tfiles: ProjectFile[],\r\n}\r\nexport const DRAFT_PROJECT: Project = {\r\n\tname: 'Drafts',\r\n\tnamespace: 'draft',\r\n\tfiles: [],\r\n}\r\n\r\nexport type ProjectFile = {\r\n\ttype: string,\r\n\tid: string,\r\n\tdata: any,\r\n}\r\n\r\nexport const FilePatterns = [\r\n\t'worldgen/[a-z_]+',\r\n\t'tags/worldgen/[a-z_]+',\r\n\t'tags/[a-z_]+',\r\n\t'[a-z_]+',\r\n].map(e => RegExp(`^data/([a-z0-9._-]+)/(${e})/([a-z0-9/._-]+)$`))\r\n\r\ninterface ProjectContext {\r\n\tprojects: Project[],\r\n\tproject: Project,\r\n\tfile?: ProjectFile,\r\n\tcreateProject: (name: string, namespace?: string, version?: VersionId) => unknown,\r\n\tdeleteProject: (name: string) => unknown,\r\n\tchangeProject: (name: string) => unknown,\r\n\tupdateProject: (project: Partial<Project>) => unknown,\r\n\tupdateFile: (type: string, id: string | undefined, file: Partial<ProjectFile>) => boolean,\r\n\topenFile: (type: string, id: string) => unknown,\r\n\tcloseFile: () => unknown,\r\n}\r\nconst Project = createContext<ProjectContext>({\r\n\tprojects: [DRAFT_PROJECT],\r\n\tproject: DRAFT_PROJECT,\r\n\tcreateProject: () => {},\r\n\tdeleteProject: () => {},\r\n\tchangeProject: () => {},\r\n\tupdateProject: () => {},\r\n\tupdateFile: () => false,\r\n\topenFile: () => {},\r\n\tcloseFile: () => {},\r\n})\r\n\r\nexport function useProject() {\r\n\treturn useContext(Project)\r\n}\r\n\r\nexport function ProjectProvider({ children }: { children: ComponentChildren }) {\r\n\tconst [projects, setProjects] = useState<Project[]>(Store.getProjects())\r\n\tconst { version } = useVersion()\r\n\r\n\tconst [projectName, setProjectName] = useState<string>(Store.getOpenProject())\r\n\tconst project = useMemo(() => {\r\n\t\treturn projects.find(p => p.name === projectName) ?? DRAFT_PROJECT\r\n\t}, [projects, projectName])\r\n\r\n\tconst [fileId, setFileId] = useState<[string, string] | undefined>(undefined)\r\n\tconst file = useMemo(() => {\r\n\t\tif (!fileId) return undefined\r\n\t\treturn project.files.find(f => f.type === fileId[0] && f.id === fileId[1])\r\n\t}, [project, fileId])\r\n\r\n\tconst changeProjects = useCallback((projects: Project[]) => {\r\n\t\tStore.setProjects(projects)\r\n\t\tsetProjects(projects)\r\n\t}, [])\r\n\r\n\tconst createProject = useCallback((name: string, namespace?: string, version?: VersionId) => {\r\n\t\tchangeProjects([...projects, { name, namespace, version, files: [] }])\r\n\t}, [projects])\r\n\r\n\tconst deleteProject = useCallback((name: string) => {\r\n\t\tif (name === DRAFT_PROJECT.name) return\r\n\t\tchangeProjects(projects.filter(p => p.name !== name))\r\n\t}, [projects])\r\n\r\n\tconst changeProject = useCallback((name: string) => {\r\n\t\tStore.setOpenProject(name)\r\n\t\tsetProjectName(name)\r\n\t}, [])\r\n\r\n\tconst updateProject = useCallback((edits: Partial<Project>) => {\r\n\t\tchangeProjects(projects.map(p => p.name === projectName ?\t{ ...p, ...edits } : p))\r\n\t}, [projects, projectName])\r\n\r\n\tconst updateFile = useCallback((type: string, id: string | undefined, edits: Partial<ProjectFile>) => {\r\n\t\tif (!edits.id) { // remove\r\n\t\t\tupdateProject({ files: project.files.filter(f => f.type !== type || f.id !== id) })\r\n\t\t} else {\r\n\t\t\tconst newId = type === 'pack_mcmeta' ? 'pack' : edits.id.includes(':') ? edits.id : `${project.namespace ?? 'minecraft'}:${edits.id}`\r\n\t\t\tconst exists = project.files.some(f => f.type === type && f.id === newId)\r\n\t\t\tif (!id) { // create\r\n\t\t\t\tif (exists) return false\r\n\t\t\t\tupdateProject({ files: [...project.files, { type, id: newId, data: edits.data ?? {} } ]})\r\n\t\t\t\tsetFileId([type, newId])\r\n\t\t\t} else { // rename or update data\r\n\t\t\t\tif (file?.id === id && id !== newId && exists) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tupdateProject({ files: project.files.map(f => f.type === type && f.id === id ? { ...f, ...edits, id: newId } : f)})\r\n\t\t\t\tif (file?.id === id) setFileId([type, newId])\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}, [updateProject, project, file])\r\n\r\n\tconst openFile = useCallback((type: string, id: string) => {\r\n\t\tconst gen = config.generators.find(g => g.id === type || genPath(g, version) === type)\r\n\t\tif (!gen) {\r\n\t\t\tthrow new Error(`Cannot find generator of type ${type}`)\r\n\t\t}\r\n\t\tsetFileId([gen.id, id])\r\n\t\troute(cleanUrl(gen.url))\r\n\t}, [version])\r\n\r\n\tconst closeFile = useCallback(() => {\r\n\t\tsetFileId(undefined)\r\n\t}, [])\r\n\r\n\tconst value: ProjectContext = {\r\n\t\tprojects,\r\n\t\tproject,\r\n\t\tfile,\r\n\t\tcreateProject,\r\n\t\tchangeProject,\r\n\t\tdeleteProject,\r\n\t\tupdateProject,\r\n\t\tupdateFile,\r\n\t\topenFile,\r\n\t\tcloseFile,\r\n\t}\r\n\r\n\treturn <Project.Provider value={value}>\r\n\t\t{children}\r\n\t</Project.Provider>\r\n}\r\n\r\nexport function getFilePath(file: { id: string, type: string }, version: VersionId) {\r\n\tconst [namespace, id] = file.id.includes(':') ? file.id.split(':') : ['minecraft', file.id]\r\n\tif (file.type === 'pack_mcmeta') {\r\n\t\tif (file.id === 'pack') return 'pack.mcmeta'\r\n\t\treturn undefined\r\n\t}\r\n\tconst gen = config.generators.find(g => g.id === file.type)\r\n\tif (!gen) {\r\n\t\treturn undefined\r\n\t}\r\n\treturn `data/${namespace}/${genPath(gen, version)}/${id}.json`\r\n}\r\n\r\nexport function disectFilePath(path: string, version: VersionId) {\r\n\tif (path === 'pack.mcmeta') {\r\n\t\treturn { type: 'pack_mcmeta', id: 'pack' }\r\n\t}\r\n\tfor (const p of FilePatterns) {\r\n\t\tconst match = path.match(p)\r\n\t\tif (!match) continue\r\n\t\tconst gen = config.generators.find(g => (genPath(g, version) ?? g.id) === match[2])\r\n\t\tif (!gen) continue\r\n\t\tconst namespace = match[1]\r\n\t\tconst name = match[3].replace(/\\.[a-z]+$/, '')\r\n\t\treturn {\r\n\t\t\ttype: gen.id,\r\n\t\t\tid: `${namespace}:${name}`,\r\n\t\t}\r\n\t}\r\n\treturn undefined\r\n}\r\n\r\nexport function getProjectData(project: Project) {\r\n\treturn Object.fromEntries(['worldgen/noise_settings', 'worldgen/noise', 'worldgen/density_function'].map(type => {\r\n\t\tconst resources = Object.fromEntries(\r\n\t\t\tproject.files.filter(file => file.type === type)\r\n\t\t\t\t.map<[string, unknown]>(file => [file.id, file.data])\r\n\t\t)\r\n\t\treturn [type, resources]\r\n\t}))\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { useCallback, useContext } from 'preact/hooks'\r\nimport { useLocalStorage } from '../hooks/index.js'\r\nimport type { Color } from '../Utils.js'\r\n\r\ninterface Store {\r\n\tbiomeColors: Record<string, [number, number, number]>\r\n\tsetBiomeColor: (biome: string, color: Color) => void\r\n}\r\n\r\nconst Store = createContext<Store>({\r\n\tbiomeColors: {},\r\n\tsetBiomeColor: () => {},\r\n})\r\n\r\nexport function useStore() {\r\n\treturn useContext(Store)\r\n}\r\n\r\nexport function StoreProvider({ children }: { children: ComponentChildren }) {\r\n\tconst [biomeColors, setBiomeColors] = useLocalStorage<Record<string, Color>>('misode_biome_colors', {}, JSON.parse, JSON.stringify)\r\n\r\n\tconst setBiomeColor = useCallback((biome: string, color: Color) => {\r\n\t\tsetBiomeColors({...biomeColors, [biome]: color })\r\n\t}, [biomeColors])\r\n\r\n\tconst value: Store = {\r\n\t\tbiomeColors,\r\n\t\tsetBiomeColor,\r\n\t}\r\n\r\n\treturn <Store.Provider value={value}>\r\n\t\t{children}\r\n\t</Store.Provider>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'preact/hooks'\r\nimport { Analytics } from '../Analytics.js'\r\nimport { Store } from '../Store.js'\r\nimport { useMediaQuery } from '../hooks/index.js'\r\n\r\ninterface Theme {\r\n\ttheme: string,\r\n\tactualTheme: 'light' | 'dark',\r\n\tchangeTheme: (theme: string) => unknown,\r\n}\r\nconst Theme = createContext<Theme>({\r\n\ttheme: 'dark',\r\n\tactualTheme: 'dark',\r\n\tchangeTheme: () => {},\r\n})\r\n\r\nexport function useTheme() {\r\n\treturn useContext(Theme)\r\n}\r\n\r\nexport function ThemeProvider({ children }: { children: ComponentChildren }) {\r\n\tconst [theme, setTheme] = useState(Store.getTheme())\r\n\tconst prefersLight = useMediaQuery('(prefers-color-scheme: light)')\r\n\tconst prefersDark = useMediaQuery('(prefers-color-scheme: dark)')\r\n\r\n\tconst changeTheme = useCallback((newTheme: string) => {\r\n\t\tAnalytics.changeTheme(theme, newTheme)\r\n\t\tStore.setTheme(newTheme)\r\n\t\tsetTheme(newTheme)\r\n\t}, [theme])\r\n\r\n\tuseEffect(() => {\r\n\t\tAnalytics.setPrefersColorScheme(prefersLight ? 'light' : prefersDark ? 'dark' : 'none')\r\n\t}, [prefersLight, prefersDark])\r\n\r\n\tconst actualTheme = useMemo(() => {\r\n\t\treturn theme === 'light' || (theme !== 'dark' && prefersLight) ? 'light' : 'dark'\r\n\t}, [theme, prefersLight])\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.documentElement.classList.toggle('dark', actualTheme === 'dark')\r\n\t}, [actualTheme])\r\n\r\n\tconst value: Theme = {\r\n\t\ttheme,\r\n\t\tactualTheme,\r\n\t\tchangeTheme,\r\n\t}\r\n\r\n\treturn <Theme.Provider value={value}>\r\n\t\t{children}\r\n\t</Theme.Provider>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { createContext } from 'preact'\r\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\r\nimport config from '../Config.js'\r\nimport type { VersionId } from '../services/index.js'\r\nimport { useLocale } from './index.js'\r\n\r\nconst VERSIONS_IN_TITLE = 3\r\n\r\ninterface Title {\r\n\ttitle: string,\r\n\tchangeTitle: (title: string, versions?: VersionId[], suffix?: string) => unknown,\r\n}\r\nconst Title = createContext<Title>({\r\n\ttitle: '',\r\n\tchangeTitle: () => {},\r\n})\r\n\r\nexport function useTitle(title?: string, versions?: VersionId[], suffix?: string) {\r\n\tconst context = useContext(Title)\r\n\tuseEffect(() => {\r\n\t\tif (title) {\r\n\t\t\tcontext.changeTitle(title, versions, suffix)\r\n\t\t}\r\n\t}, [title, versions, suffix])\r\n\treturn context\r\n}\r\n\r\nexport function TitleProvider({ children }: { children: ComponentChildren }) {\r\n\tconst { locale } = useLocale()\r\n\tconst [title, setTitle] = useState<string>(locale('title.home'))\r\n\r\n\tconst changeTitle = useCallback((title: string, versionIds?: VersionId[], suffix?: string) => {\r\n\t\tlet versions = config.versions\r\n\t\tif (versionIds !== undefined) {\r\n\t\t\tversions = config.versions.filter(v => versionIds?.includes(v.id as VersionId))\r\n\t\t}\r\n\t\tlet titleSuffix = ''\r\n\t\tif (suffix) {\r\n\t\t\ttitleSuffix = ` - ${suffix}`\r\n\t\t}\r\n\t\tif (!(versionIds?.length === 0)) {\r\n\t\t\tconst titleVersions = versions.map(v => v.id)\r\n\t\t\t\t.filter((v, _, arr) => v.length === 4 || arr.length <= 3)\r\n\t\t\t\t.slice(-VERSIONS_IN_TITLE)\r\n\t\t\ttitleSuffix = ` - Minecraft ${titleVersions.join(', ')}`\r\n\t\t}\r\n\t\tdocument.title = title + titleSuffix\r\n\t\tsetTitle(title)\r\n\t}, [])\r\n\r\n\tconst value = {\r\n\t\ttitle,\r\n\t\tchangeTitle,\r\n\t}\r\n\r\n\treturn <Title.Provider value={value}>\r\n\t\t{children}\r\n\t</Title.Provider>\r\n}\r\n","import type { ColormapType } from './components/previews/Colormap.js'\r\nimport { ColormapTypes } from './components/previews/Colormap.js'\r\nimport type { Project } from './contexts/index.js'\r\nimport { DRAFT_PROJECT } from './contexts/index.js'\r\nimport type { VersionId } from './services/index.js'\r\nimport { DEFAULT_VERSION, VersionIds } from './services/index.js'\r\n\r\nexport namespace Store {\r\n\texport const ID_LANGUAGE = 'language'\r\n\texport const ID_THEME = 'theme'\r\n\texport const ID_VERSION = 'schema_version'\r\n\texport const ID_INDENT = 'indentation'\r\n\texport const ID_FORMAT = 'output_format'\r\n\texport const ID_HIGHLIGHTING = 'output_highlighting'\r\n\texport const ID_SOUNDS_VERSION = 'minecraft_sounds_version'\r\n\texport const ID_PROJECTS = 'misode_projects'\r\n\texport const ID_BACKUPS = 'misode_generator_backups'\r\n\texport const ID_PREVIEW_PANEL_OPEN = 'misode_preview_panel_open'\r\n\texport const ID_PROJECT_PANEL_OPEN = 'misode_project_panel_open'\r\n\texport const ID_OPEN_PROJECT = 'misode_open_project'\r\n\texport const ID_TREE_VIEW_MODE = 'misode_tree_view_mode'\r\n\texport const ID_COLORMAP = 'misode_colormap'\r\n\texport const ID_GENERATOR_HISTORY = 'misode_generator_history'\r\n\texport const ID_WHATS_NEW_SEEN = 'misode_whats_new_seen'\r\n\r\n\texport function getLanguage() {\r\n\t\treturn localStorage.getItem(ID_LANGUAGE) ?? 'en'\r\n\t}\r\n\r\n\texport function getTheme() {\r\n\t\treturn localStorage.getItem(ID_THEME) ?? 'dark'\r\n\t}\r\n\r\n\texport function getVersionOrDefault(): VersionId {\r\n\t\tconst version = localStorage.getItem(ID_VERSION)\r\n\t\tif (version && VersionIds.includes(version as VersionId)) {\r\n\t\t\treturn version as VersionId\r\n\t\t}\r\n\t\treturn DEFAULT_VERSION\r\n\t}\r\n\r\n\texport function getVersion(): VersionId | null {\r\n\t\tconst version = localStorage.getItem(ID_VERSION)\r\n\t\tif (version && VersionIds.includes(version as VersionId)) {\r\n\t\t\treturn version as VersionId\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\texport function getIndent() {\r\n\t\treturn localStorage.getItem(ID_INDENT) ?? '2_spaces'\r\n\t}\r\n\r\n\texport function getFormat() {\r\n\t\treturn localStorage.getItem(ID_FORMAT) ?? 'json'\r\n\t}\r\n\r\n\texport function getHighlighting() {\r\n\t\treturn localStorage.getItem(ID_HIGHLIGHTING) !== 'false'\r\n\t}\r\n\r\n\texport function getSoundsVersion() {\r\n\t\treturn localStorage.getItem(ID_SOUNDS_VERSION) ?? 'latest'\r\n\t}\r\n\r\n\texport function getProjects(): Project[] {\r\n\t\tconst projects = localStorage.getItem(ID_PROJECTS)\r\n\t\tif (projects) {\r\n\t\t\treturn JSON.parse(projects) as Project[]\r\n\t\t}\r\n\t\treturn [DRAFT_PROJECT]\r\n\t}\r\n\r\n\texport function getBackup(id: string): object | undefined {\r\n\t\tconst backups = JSON.parse(localStorage.getItem(ID_BACKUPS) ?? '{}')\r\n\t\treturn backups[id]\r\n\t}\r\n\r\n\texport function getPreviewPanelOpen(): boolean | undefined {\r\n\t\tconst open = localStorage.getItem(ID_PREVIEW_PANEL_OPEN)\r\n\t\tif (open === null) return undefined\r\n\t\treturn JSON.parse(open)\r\n\t}\r\n\r\n\texport function getProjectPanelOpen(): boolean | undefined {\r\n\t\tconst open = localStorage.getItem(ID_PROJECT_PANEL_OPEN)\r\n\t\tif (open === null) return undefined\r\n\t\treturn JSON.parse(open)\r\n\t}\r\n\r\n\texport function getOpenProject() {\r\n\t\treturn localStorage.getItem(ID_OPEN_PROJECT) ?? DRAFT_PROJECT.name\r\n\t}\r\n\r\n\texport function getTreeViewMode() {\r\n\t\treturn localStorage.getItem(ID_TREE_VIEW_MODE) ?? 'resources'\r\n\t}\r\n\r\n\texport function getColormap(): ColormapType | undefined {\r\n\t\tconst value = localStorage.getItem(ID_COLORMAP)\r\n\t\tif (value === null || !ColormapTypes.includes(value as ColormapType)) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\treturn value as ColormapType\r\n\t}\r\n\r\n\texport function getGeneratorHistory(): string[] {\r\n\t\treturn JSON.parse(localStorage.getItem(ID_GENERATOR_HISTORY) ?? '[]')\r\n\t}\r\n\r\n\texport function setLanguage(language: string | undefined) {\r\n\t\tif (language) localStorage.setItem(ID_LANGUAGE, language)\r\n\t}\r\n\r\n\texport function setTheme(theme: string | undefined) {\r\n\t\tif (theme) localStorage.setItem(ID_THEME, theme)\r\n\t}\r\n\r\n\texport function setVersion(version: VersionId | undefined) {\r\n\t\tif (version) localStorage.setItem(ID_VERSION, version)\r\n\t}\r\n\r\n\texport function setIndent(indent: string | undefined) {\r\n\t\tif (indent) localStorage.setItem(ID_INDENT, indent)\r\n\t}\r\n\r\n\texport function setFormat(format: string | undefined) {\r\n\t\tif (format) localStorage.setItem(ID_FORMAT, format)\r\n\t}\r\n\r\n\texport function setHighlighting(highlighting: boolean | undefined) {\r\n\t\tif (highlighting !== undefined) localStorage.setItem(ID_HIGHLIGHTING, highlighting.toString())\r\n\t}\r\n\r\n\texport function setSoundsVersion(version: string | undefined) {\r\n\t\tif (version) localStorage.setItem(ID_SOUNDS_VERSION, version)\r\n\t}\r\n\r\n\texport function setProjects(projects: Project[] | undefined) {\r\n\t\tif (projects) localStorage.setItem(ID_PROJECTS, JSON.stringify(projects))\r\n\t}\r\n\r\n\texport function setBackup(id: string, data: object | undefined) {\r\n\t\tconst backups = JSON.parse(localStorage.getItem(ID_BACKUPS) ?? '{}')\r\n\t\tif (data === undefined) {\r\n\t\t\tdelete backups[id]\r\n\t\t} else {\r\n\t\t\tbackups[id] = data\r\n\t\t}\r\n\t\tlocalStorage.setItem(ID_BACKUPS, JSON.stringify(backups))\r\n\t}\r\n\r\n\texport function setPreviewPanelOpen(open: boolean | undefined) {\r\n\t\tif (open === undefined) {\r\n\t\t\tlocalStorage.removeItem(ID_PREVIEW_PANEL_OPEN)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(ID_PREVIEW_PANEL_OPEN, JSON.stringify(open))\r\n\t\t}\r\n\t}\r\n\r\n\texport function setProjectPanelOpen(open: boolean | undefined) {\r\n\t\tif (open === undefined) {\r\n\t\t\tlocalStorage.removeItem(ID_PROJECT_PANEL_OPEN)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(ID_PROJECT_PANEL_OPEN, JSON.stringify(open))\r\n\t\t}\r\n\t}\r\n\r\n\texport function setOpenProject(projectName: string | undefined) {\r\n\t\tif (projectName === undefined) {\r\n\t\t\tlocalStorage.removeItem(ID_OPEN_PROJECT)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem(ID_OPEN_PROJECT, projectName)\r\n\t\t}\r\n\t}\r\n\r\n\texport function setTreeViewMode(mode: string | undefined) {\r\n\t\tif (mode) localStorage.setItem(ID_TREE_VIEW_MODE, mode)\r\n\t}\r\n\r\n\texport function setColormap(colormap: ColormapType | undefined) {\r\n\t\tif (colormap) localStorage.setItem(ID_COLORMAP, colormap)\r\n\t}\r\n\r\n\texport function visitGenerator(id: string) {\r\n\t\tconst history = getGeneratorHistory()\r\n\t\thistory.push(id)\r\n\t\tlocalStorage.setItem(ID_GENERATOR_HISTORY, JSON.stringify(history.slice(-50)))\r\n\t}\r\n\r\n\texport function getWhatsNewSeen(): { id: string, time: string }[] {\r\n\t\treturn JSON.parse(localStorage.getItem(ID_WHATS_NEW_SEEN) ?? '[]')\r\n\t}\r\n\r\n\texport function seeWhatsNew(ids: string[]) {\r\n\t\tconst now = new Date().toISOString()\r\n\t\tconst items = getWhatsNewSeen()\r\n\t\tfor (const id of ids) {\r\n\t\t\tconst old = items.find(i => i.id === id)\r\n\t\t\tif (old) {\r\n\t\t\t\told.time = now\r\n\t\t\t} else {\r\n\t\t\t\titems.push({ id, time: now })\r\n\t\t\t}\r\n\t\t}\r\n\t\tlocalStorage.setItem(ID_WHATS_NEW_SEEN, JSON.stringify(items))\r\n\t}\r\n}\r\n","import type { CollectionRegistry } from '@mcschema/core'\r\nimport config from '../Config.js'\r\nimport { Store } from '../Store.js'\r\nimport { message } from '../Utils.js'\r\nimport type { BlockStateRegistry, VersionId } from './Schemas.js'\r\n\r\nconst CACHE_NAME = 'misode-v2'\r\nconst CACHE_LATEST_VERSION = 'cached_latest_version'\r\nconst CACHE_PATCH = 'misode_cache_patch'\r\n\r\ntype Version = {\r\n\tid: string,\r\n\tref?: string,\r\n\tdynamic?: boolean,\r\n}\r\n\r\ndeclare var __LATEST_VERSION__: string\r\nexport const latestVersion = __LATEST_VERSION__ ?? ''\r\nconst mcmetaUrl = 'https://raw.githubusercontent.com/misode/mcmeta'\r\nconst mcmetaTarballUrl = 'https://github.com/misode/mcmeta/tarball'\r\nconst changesUrl = 'https://raw.githubusercontent.com/misode/technical-changes'\r\nconst fixesUrl = 'https://raw.githubusercontent.com/misode/mcfixes'\r\nconst versionDiffUrl = 'https://mcmeta-diff.misode.workers.dev'\r\nconst whatsNewUrl = 'https://whats-new.misode.workers.dev'\r\n\r\ntype McmetaTypes = 'summary' | 'data' | 'data-json' | 'assets' | 'assets-json' | 'registries' | 'atlas'\r\n\r\ninterface RefInfo {\r\n\tdynamic?: boolean\r\n\tref?: string\r\n}\r\n\r\nfunction mcmeta(version: RefInfo, type: McmetaTypes, tarball?: boolean) {\r\n\treturn `${tarball ? mcmetaTarballUrl : mcmetaUrl}/${version.dynamic ? type : `${version.ref}-${type}`}`\r\n}\r\n\r\nasync function validateCache(version: RefInfo) {\r\n\tawait applyPatches()\r\n\tif (version.dynamic) {\r\n\t\tif (localStorage.getItem(CACHE_LATEST_VERSION) !== latestVersion) {\r\n\t\t\tawait deleteMatching(url => url.startsWith(`${mcmetaUrl}/summary/`) || url.startsWith(`${mcmetaUrl}/data/`) || url.startsWith(`${mcmetaUrl}/assets/`) || url.startsWith(`${mcmetaUrl}/registries/`) || url.startsWith(`${mcmetaUrl}/atlas/`) || url.startsWith(`${mcmetaTarballUrl}/assets-json/`))\r\n\t\t\tlocalStorage.setItem(CACHE_LATEST_VERSION, latestVersion)\r\n\t\t}\r\n\t\tversion.ref = latestVersion\r\n\t}\r\n}\r\n\r\nexport async function fetchData(versionId: string, collectionTarget: CollectionRegistry, blockStateTarget: BlockStateRegistry) {\r\n\tconst version = config.versions.find(v => v.id === versionId) as Version | undefined\r\n\tif (!version) {\r\n\t\tconsole.error(`[fetchData] Unknown version ${version} in ${JSON.stringify(config.versions)}`)\r\n\t\treturn\r\n\t}\r\n\r\n\tawait validateCache(version)\r\n\r\n\tawait Promise.all([\r\n\t\t_fetchRegistries(version, collectionTarget),\r\n\t\t_fetchBlockStateMap(version, blockStateTarget),\r\n\t])\r\n}\r\n\r\nasync function _fetchRegistries(version: Version, target: CollectionRegistry) {\r\n\tconsole.debug(`[fetchRegistries] ${version.id}`)\r\n\ttry {\r\n\t\tconst data = await cachedFetch<any>(`${mcmeta(version, 'summary')}/registries/data.min.json`)\r\n\t\tfor (const id in data) {\r\n\t\t\ttarget.register(id, data[id].map((e: string) => 'minecraft:' + e))\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.warn('Error occurred while fetching registries:', message(e))\r\n\t}\r\n}\r\n\r\nasync function _fetchBlockStateMap(version: Version, target: BlockStateRegistry) {\r\n\tconsole.debug(`[fetchBlockStateMap] ${version.id}`)\r\n\ttry {\r\n\t\tconst data = await cachedFetch<any>(`${mcmeta(version, 'summary')}/blocks/data.min.json`)\r\n\t\tfor (const id in data) {\r\n\t\t\ttarget['minecraft:' + id] = {\r\n\t\t\t\tproperties: data[id][0],\r\n\t\t\t\tdefault: data[id][1],\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.warn('Error occurred while fetching block state map:', message(e))\r\n\t}\r\n}\r\n\r\nexport async function fetchRegistries(versionId: VersionId) {\r\n\tconsole.debug(`[fetchRegistries] ${versionId}`)\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\ttry {\r\n\t\tconst data = await cachedFetch<any>(`${mcmeta(version, 'summary')}/registries/data.min.json`)\r\n\t\tconst result = new Map<string, string[]>()\r\n\t\tfor (const id in data) {\r\n\t\t\tresult.set(id, data[id].map((e: string) => 'minecraft:' + e))\r\n\t\t}\r\n\t\treturn result\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occurred while fetching registries (2): ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport async function fetchBlockStates(versionId: VersionId) {\r\n\tconsole.debug(`[fetchBlockStates] ${versionId}`)\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\tconst result = new Map<string, {properties: Record<string, string[]>, default: Record<string, string>}>()\r\n\ttry {\r\n\t\tconst data = await cachedFetch<any>(`${mcmeta(version, 'summary')}/blocks/data.min.json`)\r\n\t\tfor (const id in data) {\r\n\t\t\tresult.set('minecraft:' + id, {\r\n\t\t\t\tproperties: data[id][0],\r\n\t\t\t\tdefault: data[id][1],\r\n\t\t\t})\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.warn('Error occurred while fetching block states:', message(e))\r\n\t}\r\n\treturn result\r\n}\r\n\r\nexport async function fetchPreset(versionId: VersionId, registry: string, id: string) {\r\n\tconsole.debug(`[fetchPreset] ${versionId} ${registry} ${id}`)\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\ttry {\r\n\t\tlet url\r\n\t\tif (id.startsWith('immersive_weathering:')) {\r\n\t\t\turl = `https://raw.githubusercontent.com/AstralOrdana/Immersive-Weathering/main/src/main/resources/data/immersive_weathering/block_growths/${id.slice(21)}.json`\r\n\t\t} else {\r\n\t\t\tconst type = ['atlases', 'blockstates', 'models', 'font'].includes(registry) ? 'assets' : 'data'\r\n\t\t\turl = `${mcmeta(version, type)}/${type}/minecraft/${registry}/${id}.json`\r\n\t\t}\r\n\t\tconst res = await fetch(url)\r\n\t\treturn await res.json()\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occurred while fetching ${registry} preset ${id}: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport async function fetchAllPresets(versionId: VersionId, registry: string) {\r\n\tconsole.debug(`[fetchAllPresets] ${versionId} ${registry}`)\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\tawait validateCache(version)\r\n\ttry {\r\n\t\tconst type = ['atlas', 'block_definition', 'model', 'font'].includes(registry) ? 'assets' : 'data'\r\n\t\treturn new Map<string, unknown>(Object.entries(await cachedFetch(`${mcmeta(version, 'summary')}/${type}/${registry}/data.min.json`)))\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occurred while fetching all ${registry} presets: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport type SoundEvents = {\r\n\t[key: string]: {\r\n\t\tsounds: (string | { name: string })[],\r\n\t},\r\n}\r\nexport async function fetchSounds(versionId: VersionId): Promise<SoundEvents> {\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\tawait validateCache(version)\r\n\ttry {\r\n\t\tconst url = `${mcmeta(version, 'summary')}/sounds/data.min.json`\r\n\t\treturn await cachedFetch(url)\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occurred while fetching sounds for ${version}: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport function getSoundUrl(versionId: VersionId, path: string) {\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\treturn `${mcmeta(version, 'assets')}/assets/minecraft/sounds/${path}.ogg`\r\n}\r\n\r\nexport type VersionMeta = {\r\n\tid: string,\r\n\tname: string,\r\n\trelease_target: string,\r\n\ttype: 'snapshot' | 'release',\r\n\tstable: boolean,\r\n\tdata_version: number,\r\n\tprotocol_version: number,\r\n\tdata_pack_version: number,\r\n\tresource_pack_version: number,\r\n\tbuild_time: string,\r\n\trelease_time: string,\r\n\tsha1: string,\r\n}\r\nexport async function fetchVersions(): Promise<VersionMeta[]> {\r\n\tawait validateCache({ dynamic: true })\r\n\ttry {\r\n\t\treturn cachedFetch(`${mcmeta({ dynamic: true }, 'summary')}/versions/data.min.json`, { refresh: true })\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching versions: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport function getAssetUrl(versionId: VersionId, type: string, path: string): string {\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\treturn `${mcmeta(version, 'assets')}/assets/minecraft/${type}/${path}.png`\r\n}\r\n\r\nexport async function fetchResources(versionId: VersionId) {\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\tawait validateCache(version)\r\n\ttry {\r\n\t\tconst [blockDefinitions, models, uvMapping, atlas] = await Promise.all([\r\n\t\t\tfetchAllPresets(versionId, 'block_definition'),\r\n\t\t\tfetchAllPresets(versionId, 'model'),\r\n\t\t\tfetch(`${mcmeta(version, 'atlas')}/all/data.min.json`).then(r => r.json()),\r\n\t\t\tloadImage(`${mcmeta(version, 'atlas')}/all/atlas.png`),\r\n\t\t])\r\n\t\treturn { blockDefinitions, models, uvMapping, atlas }\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching resources: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport async function loadImage(src: string) {\r\n\treturn new Promise<HTMLImageElement>(res => {\r\n\t\tconst image = new Image()\r\n\t\timage.onload = () => res(image)\r\n\t\timage.crossOrigin = 'Anonymous'\r\n\t\timage.src = src\r\n\t})\r\n}\r\n\r\n/*\r\nasync function loadImage(src: string) {\r\n\tconst buffer = await cachedFetch(src, { decode: r => r.arrayBuffer() })\r\n\tconst blob = new Blob([buffer], { type: 'image/png' })\r\n\tconst img = new Image()\r\n\timg.src = URL.createObjectURL(blob)\r\n\treturn new Promise<ImageData>((res) => {\r\n\t\timg.onload = () => {\r\n\t\t\tconst canvas = document.createElement('canvas')\r\n\t\t\tconst ctx = canvas.getContext('2d')!\r\n\t\t\tctx.drawImage(img, 0, 0)\r\n\t\t\tconst imgData = ctx.getImageData(0, 0, img.width, img.height)\r\n\t\t\tres(imgData)\r\n\t\t}\r\n\t})\r\n}\r\n*/\r\n\r\nexport async function fetchLanguage(versionId: VersionId, lang: string = 'en_us') {\r\n\tconst version = config.versions.find(v => v.id === versionId)!\r\n\tawait validateCache(version)\r\n\ttry {\r\n\t\treturn await cachedFetch<Record<string, string>>(`${mcmeta(version, 'assets')}/assets/minecraft/lang/${lang}.json`)\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching language: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport interface Change {\r\n\tgroup: string,\r\n\tversion: string,\r\n\torder: number,\r\n\ttags: string[],\r\n\tcontent: string,\r\n}\r\n\r\nexport async function fetchChangelogs(): Promise<Change[]> {\r\n\ttry {\r\n\t\tconst [changes, versions] = await Promise.all([\r\n\t\t\tcachedFetch<Omit<Change, 'order'>[]>(`${changesUrl}/generated/changes.json`, { refresh: true }),\r\n\t\t\tfetchVersions(),\r\n\t\t])\r\n\t\tconst versionMap = new Map(versions.map((v, i) => [v.id, versions.length - i]))\r\n\t\treturn changes.map(c => ({ ...c, order: versionMap.get(c.version) ?? 0 }))\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching technical changes: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport interface Bugfix {\r\n\tid: string,\r\n\tsummary: string,\r\n\tlabels: string[],\r\n\tstatus: string,\r\n\tconfirmation_status: string,\r\n\tcategories: string[],\r\n\tpriority: string,\r\n\tfix_versions: string[],\r\n\tcreation_date: string,\r\n\tresolution_date: string,\r\n\tupdated_date: string,\r\n\twatches: number,\r\n\tvotes: number,\r\n}\r\n\r\nexport async function fetchBugfixes(version: string): Promise<Bugfix[]> {\r\n\ttry {\r\n\t\tconst fixes = await cachedFetch<Bugfix[]>(`${fixesUrl}/main/versions/${version}.json`, { refresh: true })\r\n\t\treturn fixes\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching bugfixes for version ${version}: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport interface GitHubCommitFile {\r\n\tsha: string,\r\n\tfilename: string,\r\n\tprevious_filename?: string,\r\n\tstatus: 'added' | 'modified' | 'removed' | 'renamed',\r\n\tadditions: number,\r\n\tdeletions: number,\r\n\tchanges: number,\r\n\tpatch: string,\r\n}\r\n\r\nexport interface GitHubCommit {\r\n\tsha: string,\r\n\thtml_url: string,\r\n\tparents: {\r\n\t\tsha: string,\r\n\t}[],\r\n\tstats: {\r\n\t\ttotal: number,\r\n\t\tadditions: number,\r\n\t\tdeletions: number,\r\n\t},\r\n\tfiles: GitHubCommitFile[],\r\n}\r\n\r\nexport async function fetchVersionDiff(version: string) {\r\n\ttry {\r\n\t\tconst diff = await cachedFetch<GitHubCommit>(`${versionDiffUrl}/${version}`, { refresh: true })\r\n\t\treturn diff\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching diff for version ${version}: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nexport interface WhatsNewItem {\r\n\tid: string,\r\n\ttitle: string,\r\n\tbody: string,\r\n\turl: string,\r\n\tcreatedAt: string,\r\n\tseenAt?: string,\r\n}\r\n\r\nexport async function fetchWhatsNew(): Promise<WhatsNewItem[]> {\r\n\ttry {\r\n\t\tconst whatsNew = await cachedFetch<WhatsNewItem[]>(whatsNewUrl, { refresh: true })\r\n\t\tconst seenState = Store.getWhatsNewSeen()\r\n\t\tfor (const { id, time } of seenState) {\r\n\t\t\tconst item = whatsNew.find(i => i.id === id)\r\n\t\t\tif (item) {\r\n\t\t\t\titem.seenAt = time\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn whatsNew\r\n\t} catch (e) {\r\n\t\tthrow new Error(`Error occured while fetching what's new: ${message(e)}`)\r\n\t}\r\n}\r\n\r\ninterface FetchOptions<D> {\r\n\tdecode?: (r: Response) => Promise<D>\r\n\trefresh?: boolean\r\n}\r\n\r\nconst REFRESHED = new Set<string>()\r\n\r\nasync function cachedFetch<D = unknown>(url: string, { decode = (r => r.json()), refresh }: FetchOptions<D> = {}): Promise<D> {\r\n\ttry {\r\n\t\tconst cache = await caches.open(CACHE_NAME)\r\n\t\tconsole.debug(`[cachedFetch] Opened cache ${CACHE_NAME} ${url}`)\r\n\t\tconst cacheResponse = await cache.match(url)\r\n\r\n\t\tif (refresh) {\r\n\t\t\tif (REFRESHED.has(url)) {\r\n\t\t\t\trefresh = false\r\n\t\t\t} else {\r\n\t\t\t\tREFRESHED.add(url)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (refresh) {\r\n\t\t\ttry {\r\n\t\t\t\treturn await fetchAndCache(cache, url, decode, refresh)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (cacheResponse && cacheResponse.ok) {\r\n\t\t\t\t\tconsole.debug(`[cachedFetch] Cannot refresh, using cache ${url}`)\r\n\t\t\t\t\treturn await decode(cacheResponse)\r\n\t\t\t\t}\r\n\t\t\t\tthrow new Error(`Failed to fetch: ${message(e)}`)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (cacheResponse && cacheResponse.ok) {\r\n\t\t\t\tconsole.debug(`[cachedFetch] Retrieving cached data ${url}`)\r\n\t\t\t\treturn await decode(cacheResponse)\r\n\t\t\t}\r\n\t\t\treturn await fetchAndCache(cache, url, decode)\r\n\t\t}\r\n\t} catch (e: any) {\r\n\t\tconsole.warn(`[cachedFetch] Failed to open cache ${CACHE_NAME}: ${e.message}`)\r\n\r\n\t\tconsole.debug(`[cachedFetch] Fetching data ${url}`)\r\n\t\tconst fetchResponse = await fetch(url)\r\n\t\tconst fetchData = await decode(fetchResponse)\r\n\t\treturn fetchData\r\n\t}\r\n}\r\n\r\nconst RAWGITHUB_REGEX = /^https:\\/\\/raw\\.githubusercontent\\.com\\/([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/(.*)$/\r\n\r\nasync function fetchAndCache<D>(cache: Cache, url: string, decode: (r: Response) => Promise<D>, noCache?: boolean) {\r\n\tconsole.debug(`[cachedFetch] Fetching data ${url}`)\r\n\tlet fetchResponse\r\n\ttry {\r\n\t\tfetchResponse = await fetch(url, noCache ? { cache: 'no-cache' } : undefined)\r\n\t} catch (e) {\r\n\t\tif (url.startsWith('https://raw.githubusercontent.com/')) {\r\n\t\t\tconst backupUrl = url.replace(RAWGITHUB_REGEX, 'https://cdn.jsdelivr.net/gh/$1/$2@$3/$4')\r\n\t\t\tconsole.debug(`[cachedFetch] Retrying using ${backupUrl}`)\r\n\t\t\ttry {\r\n\t\t\t\tfetchResponse = await fetch(backupUrl)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow new Error(`Backup \"${backupUrl}\" failed: ${message(e)}`)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\tconst fetchClone = fetchResponse.clone()\r\n\tconst fetchData = await decode(fetchResponse)\r\n\tawait cache.put(url, fetchClone)\r\n\treturn fetchData\r\n}\r\n\r\nasync function deleteMatching(matches: (url: string) => boolean) {\r\n\ttry {\r\n\t\tconst cache = await caches.open(CACHE_NAME)\r\n\t\tconsole.debug(`[deleteMatching] Opened cache ${CACHE_NAME}`)\r\n\t\tconst promises: Promise<boolean>[] = []\r\n  \r\n\t\tfor (const request of await cache.keys()) {\r\n\t\t\tif (matches(request.url)) {\r\n\t\t\t\tpromises.push(cache.delete(request))\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.debug(`[deleteMatching] Removing ${promises.length} cache objects...`)\r\n\t\tawait Promise.all(promises)\r\n\t} catch (e) {\r\n\t\tconsole.warn(`[deleteMatching] Failed to open cache ${CACHE_NAME}: ${message(e)}`)\r\n\t}\r\n}\r\n\r\nconst PATCHES: (() => Promise<void>)[] = [\r\n\tasync () => {\r\n\t\t['1.15', '1.16', '1.17'].forEach(v => localStorage.removeItem(`cache_${v}`));\r\n\t\t['mcdata_master', 'vanilla_datapack_summary'].forEach(v => localStorage.removeItem(`cached_${v}`))\r\n\t\tcaches.delete('misode-v1')\r\n\t},\r\n\tasync () => {\r\n\t\tawait deleteMatching(url => url.startsWith(`${mcmetaUrl}/1.18.2-summary/`))\r\n\t},\r\n]\r\n\r\nasync function applyPatches() {\r\n\tconst start = parseInt(localStorage.getItem(CACHE_PATCH) ?? '0')\r\n\tfor (let i = start + 1; i <= PATCHES.length; i +=1) {\r\n\t\tconst patch = PATCHES[i - 1]\r\n\t\tif (patch) {\r\n\t\t\tawait patch()\r\n\t\t}\r\n\t\tlocalStorage.setItem(CACHE_PATCH, i.toFixed())\r\n\t}\r\n}\r\n","import type { BlockDefinitionProvider, BlockFlagsProvider, BlockModelProvider, BlockPropertiesProvider, ItemStack, TextureAtlasProvider, UV } from 'deepslate/render'\r\nimport { BlockDefinition, BlockModel, Identifier, ItemRenderer, TextureAtlas, upperPowerOfTwo } from 'deepslate/render'\r\nimport config from '../Config.js'\r\nimport { message } from '../Utils.js'\r\nimport { fetchLanguage, fetchResources } from './DataFetcher.js'\r\nimport type { VersionId } from './Schemas.js'\r\n\r\nconst Resources: Record<string, ResourceManager | Promise<ResourceManager>> = {}\r\n\r\nexport async function getResources(version: VersionId) {\r\n\tif (!Resources[version]) {\r\n\t\tResources[version] = (async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { blockDefinitions, models, uvMapping, atlas} = await fetchResources(version)\r\n\t\t\t\tResources[version] = new ResourceManager(blockDefinitions, models, uvMapping, atlas)\r\n\t\t\t\treturn Resources[version]\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('Error: ', e)\r\n\t\t\t\tthrow new Error(`Cannot get resources for version ${version}: ${message(e)}`)\r\n\t\t\t}\r\n\t\t})()\r\n\t\treturn Resources[version]\r\n\t}\r\n\treturn Resources[version]\r\n}\r\n\r\nconst RENDER_SIZE = 128\r\nconst ItemRenderCache = new Map<string, Promise<string>>()\r\n\r\nexport async function renderItem(version: VersionId, item: ItemStack) {\r\n\tconst cache_key = `${version} ${item.toString()}`\r\n\tconst cached = ItemRenderCache.get(cache_key)\r\n\tif (cached !== undefined) {\r\n\t\treturn cached\r\n\t}\r\n\r\n\tconst promise = (async () => {\r\n\t\tconst canvas = document.createElement('canvas')\r\n\t\tcanvas.width = RENDER_SIZE\r\n\t\tcanvas.height = RENDER_SIZE\r\n\t\tconst resources = await getResources(version)\r\n\t\tconst gl = canvas.getContext('webgl2', { preserveDrawingBuffer: true })\r\n\t\tif (!gl) {\r\n\t\t\tthrow new Error('Cannot get WebGL2 context')\r\n\t\t}\r\n\t\tconst renderer = new ItemRenderer(gl, item, resources)\r\n\t\tconsole.log('Rendering', item.toString())\r\n\t\trenderer.drawItem()\r\n\t\treturn canvas.toDataURL()\r\n\t})()\r\n\tItemRenderCache.set(cache_key, promise)\r\n\treturn promise\r\n}\r\n\r\ninterface Resources extends BlockDefinitionProvider, BlockModelProvider, TextureAtlasProvider, BlockFlagsProvider, BlockPropertiesProvider {}\r\n\r\nexport class ResourceManager implements Resources {\r\n\tprivate readonly blockDefinitions: { [id: string]: BlockDefinition }\r\n\tprivate readonly blockModels: { [id: string]: BlockModel }\r\n\tprivate textureAtlas: TextureAtlas\r\n\r\n\tconstructor(blockDefinitions: Map<string, unknown>, models: Map<string, unknown>, uvMapping: any, textureAtlas: HTMLImageElement) {\r\n\t\tthis.blockDefinitions = {}\r\n\t\tthis.blockModels = {}\r\n\t\tthis.textureAtlas = TextureAtlas.empty()\r\n\t\tthis.loadBlockDefinitions(blockDefinitions)\r\n\t\tthis.loadBlockModels(models)\r\n\t\tthis.loadBlockAtlas(textureAtlas, uvMapping)\r\n\t}\r\n\r\n\tpublic getBlockDefinition(id: Identifier) {\r\n\t\treturn this.blockDefinitions[id.toString()]\r\n\t}\r\n\r\n\tpublic getBlockModel(id: Identifier) {\r\n\t\treturn this.blockModels[id.toString()]\r\n\t}\r\n\r\n\tpublic getTextureUV(id: Identifier) {\r\n\t\treturn this.textureAtlas.getTextureUV(id)\r\n\t}\r\n\r\n\tpublic getTextureAtlas() {\r\n\t\treturn this.textureAtlas.getTextureAtlas()\r\n\t}\r\n\r\n\tpublic getBlockFlags() {\r\n\t\treturn { opaque: false }\r\n\t}\r\n\r\n\tpublic getBlockProperties() {\r\n\t\treturn null\r\n\t}\r\n\r\n\tpublic getDefaultBlockProperties() {\r\n\t\treturn null\r\n\t}\r\n\r\n\tprivate loadBlockModels(models: Map<string, unknown>) {\r\n\t\t[...models.entries()].forEach(([id, model]) => {\r\n\t\t\tthis.blockModels[Identifier.create(id).toString()] = BlockModel.fromJson(id, model)\r\n\t\t})\r\n\t\tObject.values(this.blockModels).forEach(m => m.flatten(this))\r\n\t}\r\n\r\n\tprivate loadBlockDefinitions(definitions: Map<string, unknown>) {\r\n\t\t[...definitions.entries()].forEach(([id, definition]) => {\r\n\t\t\tthis.blockDefinitions[Identifier.create(id).toString()] = BlockDefinition.fromJson(id, definition)\r\n\t\t})\r\n\t}\r\n\r\n\tprivate loadBlockAtlas(image: HTMLImageElement, textures: any) {\r\n\t\tconst atlasCanvas = document.createElement('canvas')\r\n\t\tconst w = upperPowerOfTwo(image.width)\r\n\t\tconst h = upperPowerOfTwo(image.height)\r\n\t\tatlasCanvas.width = w\r\n\t\tatlasCanvas.height = h\r\n\t\tconst ctx = atlasCanvas.getContext('2d')!\r\n\t\tctx.drawImage(image, 0, 0)\r\n\t\tconst imageData = ctx.getImageData(0, 0, w, h)\r\n\r\n\t\tconst idMap: Record<string, UV> = {}\r\n\t\tObject.keys(textures).forEach(id => {\r\n\t\t\tconst [u, v, du, dv] = textures[id]\r\n\t\t\tconst dv2 = (du !== dv && id.startsWith('block/')) ? du : dv\r\n\t\t\tidMap[Identifier.create(id).toString()] = [u / w, v / h, (u + du) / w, (v + dv2) / h]\r\n\t\t})\r\n\t\tthis.textureAtlas = new TextureAtlas(imageData, idMap)\r\n\t}\r\n}\r\n\r\nexport class ResourceWrapper implements Resources {\r\n\tconstructor(\r\n\t\tprivate readonly wrapped: Resources,\r\n\t\tprivate readonly overrides: Partial<Resources>,\r\n\t) {}\r\n\r\n\tpublic getBlockDefinition(id: Identifier) {\r\n\t\treturn this.overrides.getBlockDefinition?.(id) ?? this.wrapped.getBlockDefinition(id)\r\n\t}\r\n\r\n\tpublic getBlockModel(id: Identifier) {\r\n\t\treturn this.overrides.getBlockModel?.(id) ?? this.wrapped.getBlockModel(id)\r\n\t}\r\n\r\n\tpublic getTextureUV(texture: Identifier) {\r\n\t\treturn this.overrides.getTextureUV?.(texture) ?? this.wrapped.getTextureUV(texture)\r\n\t}\r\n\r\n\tpublic getTextureAtlas() {\r\n\t\treturn this.overrides.getTextureAtlas?.() ?? this.wrapped.getTextureAtlas()\r\n\t}\r\n\r\n\tpublic getBlockFlags(id: Identifier) {\r\n\t\treturn this.overrides.getBlockFlags?.(id) ?? this.wrapped.getBlockFlags(id)\r\n\t}\r\n\r\n\tpublic getBlockProperties(id: Identifier) {\r\n\t\treturn this.overrides.getBlockProperties?.(id) ?? this.wrapped.getBlockProperties(id)\r\n\t}\r\n\r\n\tpublic getDefaultBlockProperties(id: Identifier) {\r\n\t\treturn this.overrides.getDefaultBlockProperties?.(id) ?? this.wrapped.getDefaultBlockProperties(id)\r\n\t}\r\n}\r\n\r\nexport type Language = Record<string, string>\r\n\r\nconst Languages: Record<string, Language | Promise<Language>> = {}\r\n\r\nexport async function getLanguage(version: VersionId, lang: string = 'en') {\r\n\tconst mcLang = config.languages.find(l => l.code === lang)?.mc ?? 'en_us'\r\n\tconst cacheKey = `${version}_${mcLang}`\r\n\tif (!Languages[cacheKey]) {\r\n\t\tLanguages[cacheKey] = (async () => {\r\n\t\t\ttry {\r\n\t\t\t\tLanguages[cacheKey] = await fetchLanguage(version, mcLang)\r\n\t\t\t\treturn Languages[cacheKey]\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('Error: ', e)\r\n\t\t\t\tthrow new Error(`Cannot get language '${mcLang}' for version ${version}: ${message(e)}`)\r\n\t\t\t}\r\n\t\t})()\r\n\t\treturn Languages[cacheKey]\r\n\t}\r\n\treturn Languages[cacheKey]\r\n}\r\n\r\nexport function getTranslation(lang: Language, key: string, params?: string[]) {\r\n\tconst str = lang[key]\r\n\tif (!str) return undefined\r\n\treturn replaceTranslation(str, params)\r\n}\r\n\r\nexport function replaceTranslation(src: string, params?: string[]) {\r\n\tlet out = ''\r\n\tlet i = 0\r\n\tlet p = 0\r\n\twhile (i < src.length) {\r\n\t\tconst c0 = src[i++]\r\n\t\tif (c0 === '%') { // percent character\r\n\t\t\tif (i >= src.length) { // INVALID: %<end>\r\n\t\t\t\tout += c0\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tlet c1 = src[i++]\r\n\t\t\tif (c1 === '%') { // escape\r\n\t\t\t\tout += '%'\r\n\t\t\t} else if (c1 === 's' || c1 === 'd') { // short form %s\r\n\t\t\t\tout += params?.[p++] ?? ''\r\n\t\t\t} else if (c1 >= '0' && c1 <= '9') {\r\n\t\t\t\tif (i >= src.length) { // INVALID: %2<end>\r\n\t\t\t\t\tout += c0 + c1\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\tlet num = ''\r\n\t\t\t\tdo {\r\n\t\t\t\t\tnum += c1\r\n\t\t\t\t\tc1 = src[i++]\r\n\t\t\t\t} while (i < src.length && c1 >= '0' && c1 <= '9')\r\n\t\t\t\tif (c1 === '$') {\r\n\t\t\t\t\tif (i >= src.length) { // INVALID: %2$<end>\r\n\t\t\t\t\t\tout += c0 + num + c1\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst c2 = src[i++]\r\n\t\t\t\t\tif (c2 === 's' || c2 === 'd') { // long form %2$s\r\n\t\t\t\t\t\tconst pos = parseInt(num) - 1\r\n\t\t\t\t\t\tif (!params || isNaN(pos) || pos < 0 || pos >= params.length) {\r\n\t\t\t\t\t\t\tout += ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tout += params[pos]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else { // INVALID: %2$...\r\n\t\t\t\t\t\tout += c0 + num + c1\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { // INVALID: %2...\r\n\t\t\t\t\tout += c0 + num\r\n\t\t\t\t}\r\n\t\t\t} else { // INVALID: %...\r\n\t\t\t\tout += c0\r\n\t\t\t}\r\n\t\t} else { // normal character\r\n\t\t\tout += c0\r\n\t\t}\r\n\t}\r\n\treturn out\r\n}\r\n","import { useMemo } from 'preact/hooks'\r\nimport { useLocale } from '../contexts/Locale.jsx'\r\nimport { useVersion } from '../contexts/Version.jsx'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { getLanguage, replaceTranslation } from '../services/Resources.js'\r\n\r\ninterface StyleData {\r\n\tcolor?: string,\r\n\tbold?: boolean,\r\n\titalic?: boolean,\r\n\tunderlined?: boolean,\r\n\tstrikethrough?: boolean,\r\n}\r\n\r\ninterface PartData extends StyleData {\r\n\ttext?: string,\r\n\ttranslate?: string,\r\n\tfallback?: string,\r\n\twith?: string[],\r\n}\r\n\r\ninterface Props {\r\n\tcomponent: unknown,\r\n\tbase?: StyleData,\r\n\tshadow?: boolean,\r\n}\r\nexport function TextComponent({ component, base = { color: 'white' }, shadow = true }: Props) {\r\n\tconst { version } = useVersion()\r\n\tconst { lang } = useLocale()\r\n\r\n\tconst state = JSON.stringify(component)\r\n\tconst parts = useMemo(() => {\r\n\t\tconst parts: PartData[] = []\r\n\t\tvisitComponent(component, el => parts.push(inherit(el, base)))\r\n\t\treturn parts\r\n\t}, [state, base])\r\n\r\n\tconst { value: language } = useAsync(() => getLanguage(version, lang), [version, lang])\r\n\r\n\treturn <div class=\"text-component\">\r\n\t\t{shadow && <div>\r\n\t\t\t{parts.map(p => <TextPart part={p} shadow={true} lang={language ?? {}} />)}\r\n\t\t</div>}\r\n\t\t<div class=\"text-foreground\">\r\n\t\t\t{parts.map(p => <TextPart part={p} lang={language ?? {}} />)}\r\n\t\t</div>\r\n\t</div>\r\n}\r\n\r\nfunction visitComponent(component: unknown, consumer: (c: PartData) => void) {\r\n\tif (typeof component === 'string' || typeof component === 'number') {\r\n\t\tconsumer({ text: component.toString() })\r\n\t} else if (Array.isArray(component)) {\r\n\t\tconst base = component[0] ?? {}\r\n\t\tvisitComponent(base, consumer)\r\n\t\tfor (const c of component.slice(1)) {\r\n\t\t\tvisitComponent(c, d => consumer(inherit(d, base)))\r\n\t\t}\r\n\t} else if (typeof component === 'object' && component !== null) {\r\n\t\tif ('text' in component) {\r\n\t\t\tconsumer(component)\r\n\t\t} else if ('translate' in component) {\r\n\t\t\tconsumer(component)\r\n\t\t} else if ('score' in component) {\r\n\t\t\tconsumer({ ...component, text: '123' })\r\n\t\t} else if ('selector' in component) {\r\n\t\t\tconsumer({ ...component, text: 'Steve' })\r\n\t\t} else if ('keybind' in component) {\r\n\t\t\tconsumer({ ...component, text: (component as any).keybind })\r\n\t\t} else if ('nbt' in component) {\r\n\t\t\tconsumer({ ...component, text: (component as any).nbt })\r\n\t\t}\r\n\t\tif ('extra' in component) {\r\n\t\t\tfor (const e of (component as any).extra) {\r\n\t\t\t\tvisitComponent(e, c => consumer(inherit(c, component)))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction inherit(component: object, base: PartData) {\r\n\treturn {\r\n\t\tcolor: base.color,\r\n\t\tbold: base.bold,\r\n\t\titalic: base.italic,\r\n\t\tunderlined: base.underlined,\r\n\t\tstrikethrough: base.strikethrough,\r\n\t\t...component,\r\n\t}\r\n}\r\n\r\nconst TextColors = {\r\n\tblack: ['#000', '#000'],\r\n\tdark_blue: ['#00A', '#00002A'],\r\n\tdark_green: ['#0A0', '#002A00'],\r\n\tdark_aqua: ['#0AA', '#002A2A'],\r\n\tdark_red: ['#A00', '#2A0000'],\r\n\tdark_purple: ['#A0A', '#2A002A'],\r\n\tgold: ['#FA0', '#2A2A00'],\r\n\tgray: ['#AAA', '#2A2A2A'],\r\n\tdark_gray: ['#555', '#151515'],\r\n\tblue: ['#55F', '#15153F'],\r\n\tgreen: ['#5F5', '#153F15'],\r\n\taqua: ['#5FF', '#153F3F'],\r\n\tred: ['#F55', '#3F1515'],\r\n\tlight_purple: ['#F5F', '#3F153F'],\r\n\tyellow: ['#FF5', '#3F3F15'],\r\n\twhite: ['#FFF', '#3F3F3F'],\r\n}\r\n\r\ntype TextColorKey = keyof typeof TextColors\r\nexport const TextColorKeys = Object.keys(TextColors)\r\n\r\nfunction TextPart({ part, shadow, lang }: { part: PartData, shadow?: boolean, lang: Record<string, string> }) {\r\n\tif (part.translate) {\r\n\t\tconst str = resolveTranslate(part.translate, part.fallback, part.with, lang)\r\n\t\treturn <span style={createStyle(part, shadow)}>{str}</span>\r\n\t}\r\n\treturn <span style={createStyle(part, shadow)}>{part.text}</span>\r\n}\r\n\r\nfunction resolveTranslate(translate: string, fallback: string | undefined, with_: any[] | undefined, lang: Record<string, string>): string {\r\n\tconst str = lang[translate] ?? fallback\r\n\tif (typeof str !== 'string') return translate\r\n\tconst params = with_?.map((c): string => {\r\n\t\tif (typeof c === 'string' || typeof c === 'number') return `${c}`\r\n\t\tif (c.text) return c.text\r\n\t\tif (c.translate) return resolveTranslate(c.translate, c.fallback, c.with, lang)\r\n\t\treturn ''\r\n\t})\r\n\treturn replaceTranslation(str, params)\r\n}\r\n\r\nfunction createStyle(style: StyleData, shadow?: boolean) {\r\n\treturn {\r\n\t\tcolor: style.color && (TextColorKeys.includes(style.color)\r\n\t\t\t? TextColors[style.color as TextColorKey][shadow ? 1 : 0]\r\n\t\t\t: shadow ? 'transparent' : style.color),\r\n\t\tfontWeight: (style.bold === true) ? 'bold' : undefined,\r\n\t\tfontStyle: (style.italic === true) ? 'italic' : undefined,\r\n\t\ttextDecoration: (style.underlined === true)\r\n\t\t\t? (style.strikethrough === true) ? 'underline line-through' : 'underline'\r\n\t\t\t: (style.strikethrough === true) ? 'line-through' : undefined,\r\n\t}\r\n}\r\n","import type {CollectionRegistry, SchemaRegistry} from '@mcschema/core'\r\nimport { MapNode} from '@mcschema/core'\r\nimport {BooleanNode, Case, Mod, NumberNode, ObjectNode, Opt, Switch} from '@mcschema/core'\r\nimport {Reference as RawReference} from '@mcschema/core/lib/nodes/Reference.js'\r\nimport {StringNode as RawStringNode} from '@mcschema/core/lib/nodes/StringNode.js'\r\nimport {TextColorKeys} from '../components/TextComponent.js'\r\n\r\nexport function initMinejago(schemas: SchemaRegistry, collections: CollectionRegistry) {\r\n\tconst Reference = RawReference.bind(undefined, schemas)\r\n\tconst StringNode = RawStringNode.bind(undefined, collections)\r\n\r\n\tconst modRecipeTypes = ['minejago:teapot_brewing'];\r\n\r\n\tschemas.register('minejago:mod_recipe', Mod(ObjectNode({\r\n\t\ttype: StringNode({ validator: 'resource', params: { pool: modRecipeTypes } }),\r\n\t\t[Switch]: [{ push: 'type' }],\r\n\t\t[Case]: {\r\n\t\t\t'minejago:teapot_brewing': {\r\n\t\t\t\tgroup: Opt(StringNode()),\r\n\t\t\t\tbase: StringNode({ validator: 'resource', params: { pool: 'potion' } }),\r\n\t\t\t\tingredient: Reference('recipe_ingredient_object'),\r\n\t\t\t\tresult: StringNode({ validator: 'resource', params: { pool: 'potion' } }),\r\n\t\t\t\texperience: Opt(NumberNode()),\r\n\t\t\t\tbrewing_time: Opt(Reference('int_provider')),\r\n\t\t\t},\r\n\t\t},\r\n\t}, { context: 'minejago:mod_recipe', disableSwitchContext: true }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('display', Mod(ObjectNode({\r\n\t\tlore: Opt(Reference('text_component')),\r\n\t\tdescription: Opt(Reference('text_component')),\r\n\t}, {context: 'display'}), {\r\n\t}))\r\n\r\n\tschemas.register('minejago:power', Mod(ObjectNode({\r\n\t\tid: StringNode(),\r\n\t\tpower_color: Opt(StringNode({ enum: TextColorKeys, additional: true })),\r\n\t\ttagline: Opt(Reference('text_component')),\r\n\t\t// @ts-ignore\r\n\t\tborder_particle: Opt(StringNode({ validator: 'resource', params: { pool: '$particle_type' } })),\r\n\t\thas_sets: Opt(BooleanNode()),\r\n\t\tdisplay: Opt(Reference('display')),\r\n\t\tis_special: Opt(BooleanNode()),\r\n\t}, { context: 'minejago:power' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_blockstate', Mod(ObjectNode({\r\n\t\tstate: Opt(Reference('block_state')),\r\n\t\tblock: Opt(StringNode({ validator: 'resource', params: { pool: 'block' } })),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_blockstate' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_entity', Mod(ObjectNode({\r\n\t\tentity_type: StringNode({ validator: 'resource', params: { pool: 'entity_type' } }),\r\n\t\tnbt: Opt(MapNode(\r\n\t\t\tStringNode(),\r\n\t\t\tStringNode(),\r\n\t\t)),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_entity' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_itemstack', Mod(ObjectNode({\r\n\t\tstack: Opt(Reference('item_stack')),\r\n\t\titem: Opt(StringNode({ validator: 'resource', params: { pool: 'item' } })),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_itemstack' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_biome', Mod(ObjectNode({\r\n\t\tkey: StringNode({ validator: 'resource', params: { pool: '$worldgen/biome' } }),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_biome' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_dimension', Mod(ObjectNode({\r\n\t\tkey: StringNode({ validator: 'resource', params: { pool: '$dimension' } }),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_dimension' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_mob_effect', Mod(ObjectNode({\r\n\t\tkey: StringNode({ validator: 'resource', params: { pool: 'mob_effect' } }),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_mob_effect' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_structure', Mod(ObjectNode({\r\n\t\tkey: StringNode({ validator: 'resource', params: { pool: '$structure' } }),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_structure' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n\r\n\tschemas.register('minejago:focus_modifier_world', Mod(ObjectNode({\r\n\t\tday_time: Opt(Reference('int_provider')),\r\n\t\tweather: Opt(StringNode({ enum: ['clear', 'rain', 'thunder_rain', 'snow', 'thunder_snow'] })),\r\n\t\ty: Opt(Reference('int_provider')),\r\n\t\ttemperature: Opt(Reference('int_provider')),\r\n\t\tmodifier: NumberNode({ integer: false }),\r\n\t\toperation: StringNode({ enum: ['addition', 'subtraction', 'multiplication', 'division'] }),\r\n\t}, { context: 'minejago:focus_modifier_world' }), {\r\n\t\tdefault: () => ({\r\n\t\t}),\r\n\t}))\r\n}\r\n","import type {CollectionRegistry, SchemaRegistry} from '@mcschema/core';\r\nimport {Opt} from '@mcschema/core'\r\nimport {Mod, ObjectNode} from '@mcschema/core'\r\nimport {StringNode as RawStringNode} from '@mcschema/core/lib/nodes/StringNode.js'\r\nimport {Reference as RawReference} from '@mcschema/core/lib/nodes/Reference.js'\r\n\r\nconst ID = 'sherdsapi'\r\n\r\nexport function initSherdsApi(schemas: SchemaRegistry, collections: CollectionRegistry) {\r\n\tconst StringNode = RawStringNode.bind(undefined, collections)\r\n\tconst Reference = RawReference.bind(undefined, schemas)\r\n\r\n\tschemas.register(`${ID}:sherd`, Mod(ObjectNode({\r\n\t\tingredient: Reference('recipe_ingredient_object'),\r\n\t\t// @ts-ignore\r\n\t\tpattern: Opt(StringNode({ validator: 'resource', params: { pool: '$decorated_pot_pattern' } })),\r\n\t}, {context: `${ID}:sherd`}), {\r\n\t}))\r\n}\r\n","import type { CollectionRegistry, SchemaRegistry } from '@mcschema/core'\r\nimport {initMinejago} from './Minejago.js'\r\nimport {initSherdsApi} from './SherdsApi.js'\r\n\r\nexport * from './Minejago.js'\r\nexport * from './SherdsApi.js'\r\n\r\nexport function initPartners(schemas: SchemaRegistry, collections: CollectionRegistry) {\r\n\tinitMinejago(schemas, collections)\r\n\tinitSherdsApi(schemas, collections)\r\n}\r\n","import type { CollectionRegistry, INode, SchemaRegistry } from '@mcschema/core'\r\nimport { ChoiceNode, DataModel, Reference, StringNode } from '@mcschema/core'\r\nimport config from '../Config.js'\r\nimport { initPartners } from '../partners/index.js'\r\nimport { message } from '../Utils.js'\r\nimport { fetchData } from './DataFetcher.js'\r\n\r\nexport const VersionIds = ['1.15', '1.16', '1.17', '1.18', '1.18.2', '1.19', '1.19.3', '1.19.4', '1.20', '1.20.2', '1.20.3', '1.20.5', '1.21', '1.21.2'] as const\r\nexport type VersionId = typeof VersionIds[number]\r\n\r\nexport const DEFAULT_VERSION: VersionId = '1.21'\r\n\r\nexport type BlockStateRegistry = {\r\n\t[block: string]: {\r\n\t\tproperties?: {\r\n\t\t\t[key: string]: string[],\r\n\t\t},\r\n\t\tdefault?: {\r\n\t\t\t[key: string]: string,\r\n\t\t},\r\n\t},\r\n}\r\n\r\ntype VersionData = {\r\n\tcollections: CollectionRegistry,\r\n\tschemas: SchemaRegistry,\r\n\tblockStates: BlockStateRegistry,\r\n}\r\nconst Versions: Record<string, VersionData | Promise<VersionData>> = {}\r\n\r\ntype ModelData = {\r\n\tmodel: DataModel,\r\n\tversion: VersionId,\r\n}\r\nconst Models: Record<string, ModelData> = {}\r\n\r\nconst versionGetter: {\r\n\t[versionId in VersionId]: () => Promise<{\r\n\t\tgetCollections: () => CollectionRegistry,\r\n\t\tgetSchemas: (collections: CollectionRegistry) => SchemaRegistry,\r\n\t}>\r\n} = {\r\n\t1.15: () => import('@mcschema/java-1.15'),\r\n\t1.16: () => import('@mcschema/java-1.16'),\r\n\t1.17: () => import('@mcschema/java-1.17'),\r\n\t1.18: () => import('@mcschema/java-1.18'),\r\n\t'1.18.2': () => import('@mcschema/java-1.18.2'),\r\n\t1.19: () => import('@mcschema/java-1.19'),\r\n\t'1.19.3': () => import('@mcschema/java-1.19.3'),\r\n\t'1.19.4': () => import('@mcschema/java-1.19.4'),\r\n\t'1.20': () => import('@mcschema/java-1.20'),\r\n\t'1.20.2': () => import('@mcschema/java-1.20.2'),\r\n\t'1.20.3': () => import('@mcschema/java-1.20.3'),\r\n\t'1.20.5': () => import('@mcschema/java-1.20.5'),\r\n\t1.21: () => import('@mcschema/java-1.21'),\r\n\t'1.21.2': () => import('@mcschema/java-1.21.2'),\r\n}\r\n\r\nexport let CachedDecorator: INode<any>\r\nexport let CachedFeature: INode<any>\r\nexport let CachedCollections: CollectionRegistry\r\nexport let CachedSchemas: SchemaRegistry\r\n\r\nasync function getVersion(id: VersionId): Promise<VersionData> {\r\n\tif (!Versions[id]) {\r\n\t\tVersions[id] = (async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst mcschema = await versionGetter[id]()\r\n\t\t\t\tconst collections = mcschema.getCollections()\r\n\t\t\t\tconst blockStates: BlockStateRegistry = {}\r\n\t\t\t\tawait fetchData(id, collections, blockStates)\r\n\t\t\t\tconst schemas = mcschema.getSchemas(collections)\r\n\t\t\t\tinitPartners(schemas, collections)\r\n\t\t\t\tVersions[id] = { collections, schemas, blockStates }\r\n\t\t\t\treturn Versions[id]\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow new Error(`Cannot get version \"${id}\": ${message(e)}`)\r\n\t\t\t}\r\n\t\t})()\r\n\t\treturn Versions[id]\r\n\t}\r\n\treturn Versions[id]\r\n}\r\n\r\nexport async function getModel(version: VersionId, id: string): Promise<DataModel> {\r\n\tif (!Models[id] || Models[id].version !== version) {\r\n\t\tconst versionData = await getVersion(version)\r\n\t\t\r\n\t\tCachedDecorator = Reference(versionData.schemas, 'configured_decorator')\r\n\t\tCachedFeature = ChoiceNode([\r\n\t\t\t{\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tnode: StringNode(versionData.collections, { validator: 'resource', params: { pool: '$worldgen/configured_feature' } }),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'object',\r\n\t\t\t\tnode: Reference(versionData.schemas, 'configured_feature'),\r\n\t\t\t},\r\n\t\t], { choiceContext: 'feature' })\r\n\r\n\t\tconst schemaName = config.generators.find(g => g.id === id)?.schema\r\n\t\tif (!schemaName) {\r\n\t\t\tthrow new Error(`Cannot find model ${id}`)\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst schema = versionData.schemas.get(schemaName)\r\n\t\t\tconst model = new DataModel(schema, { wrapLists: true })\r\n\t\t\tif (Models[id]) {\r\n\t\t\t\tmodel.reset(Models[id].model.data, false)\r\n\t\t\t} else {\r\n\t\t\t\tmodel.validate(true)\r\n\t\t\t\tmodel.history = [JSON.stringify(model.data)]\r\n\t\t\t}\r\n\t\t\tModels[id] = { model, version }\r\n\t\t} catch (e) {\r\n\t\t\tconst err = new Error(`Cannot get generator \"${id}\" for version \"${version}\": ${message(e)}`)\r\n\t\t\tif (e instanceof Error) err.stack = e.stack\r\n\t\t\tthrow err\r\n\t\t}\r\n\t}\r\n\treturn Models[id].model\r\n}\r\n\r\nexport async function getCollections(version: VersionId): Promise<CollectionRegistry> {\r\n\tconst versionData = await getVersion(version)\r\n\tCachedCollections = versionData.collections\r\n\treturn versionData.collections\r\n}\r\n\r\nexport async function getBlockStates(version: VersionId): Promise<BlockStateRegistry> {\r\n\tconst versionData = await getVersion(version)\r\n\treturn versionData.blockStates\r\n}\r\n\r\nexport async function getSchemas(version: VersionId): Promise<SchemaRegistry> {\r\n\tconst versionData = await getVersion(version)\r\n\tCachedSchemas = versionData.schemas\r\n\treturn versionData.schemas\r\n}\r\n\r\nexport function checkVersion(versionId: string, minVersionId: string | undefined, maxVersionId?: string) {\r\n\tconst version = config.versions.findIndex(v => v.id === versionId)\r\n\tconst minVersion = minVersionId ? config.versions.findIndex(v => v.id === minVersionId) : 0\r\n\tconst maxVersion = maxVersionId ? config.versions.findIndex(v => v.id === maxVersionId) : config.versions.length - 1\r\n\treturn minVersion <= version && version <= maxVersion\r\n}\r\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","import lz from 'lz-string'\r\nimport type { VersionId } from './Schemas.js'\r\n\r\nconst API_PREFIX = 'https://snippets.misode.workers.dev'\r\n\r\nconst ShareCache = new Map<string, string>()\r\n\r\nexport async function shareSnippet(type: string, version: VersionId, jsonData: any, show_preview: boolean) {\r\n\ttry {\r\n\t\tconst raw = JSON.stringify(jsonData)\r\n\t\tconst data = lz.compressToBase64(raw)\r\n\t\tconst body = JSON.stringify({ data, type, version, show_preview })\r\n\t\tlet id = ShareCache.get(body)\r\n\t\tif (!id) {\r\n\t\t\tconst snippet = await fetchApi('/', body)\r\n\t\t\tShareCache.set(body, snippet.id)\r\n\t\t\tid = snippet.id as string\r\n\t\t}\r\n\t\treturn { id, length: raw.length, compressed: data.length, rate: raw.length / data.length }\r\n\t} catch (e) {\r\n\t\tif (e instanceof Error) {\r\n\t\t\te.message = `Error creating share link: ${e.message}`\r\n\t\t}\r\n\t\tthrow e\r\n\t}\r\n}\r\n\r\nexport async function getSnippet(id: string) {\r\n\ttry {\r\n\t\tconst snippet = await fetchApi(`/${id}`)\r\n\t\treturn {\r\n\t\t\t...snippet,\r\n\t\t\tdata: JSON.parse(lz.decompressFromBase64(snippet.data) ?? '{}'),\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tif (e instanceof Error) {\r\n\t\t\te.message = `Error loading shared content: ${e.message}`\r\n\t\t}\r\n\t\tthrow e\r\n\t}\r\n}\r\n\r\nasync function fetchApi(url: string, body?: string) {\r\n\tconst res = await fetch(API_PREFIX + url, body ? {\r\n\t\tmethod: 'post',\r\n\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\tbody,\r\n\t} : undefined)\r\n\tif (!res.ok) {\r\n\t\tconst message = await res.text()\r\n\t\tthrow new Error(message)\r\n\t}\r\n\treturn await res.json()\r\n}\r\n","import { NbtByte, NbtCompound, NbtDouble, NbtInt, NbtList, NbtString, NbtTag } from 'deepslate'\r\nimport yaml from 'js-yaml'\r\nimport { Store } from '../Store.js'\r\n\r\nconst INDENTS: Record<string, number | string | undefined> = {\r\n\t'2_spaces': 2,\r\n\t'4_spaces': 4,\r\n\ttabs: '\\t',\r\n\tminified: undefined,\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\r\nlet commentJson: typeof import('comment-json') | null = null\r\n\r\nconst FORMATS: Record<string, {\r\n\tparse: (v: string) => Promise<unknown>,\r\n\tstringify: (v: unknown, indentation: string | number | undefined) => string,\r\n}> = {\r\n\tjson: {\r\n\t\tparse: async (v) => {\r\n\t\t\ttry {\r\n\t\t\t\treturn JSON.parse(v)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tcommentJson = await import('comment-json')\r\n\t\t\t\treturn commentJson.parse(v)\r\n\t\t\t}\r\n\t\t},\r\n\t\tstringify: (v, i) => (commentJson ?? JSON).stringify(v, null, i) + '\\n',\r\n\t},\r\n\tsnbt: {\r\n\t\tparse: async (v) => NbtTag.fromString(v).toSimplifiedJson(),\r\n\t\tstringify: (v, _i) => jsonToNbt(v).toPrettyString(),\r\n\t},\r\n\tyaml: {\r\n\t\tparse: async (v) => yaml.load(v),\r\n\t\tstringify: (v, i) => yaml.dump(v, {\r\n\t\t\tflowLevel: i === undefined ? 0 : -1,\r\n\t\t\tindent: typeof i === 'string' ? 4 : i,\r\n\t\t}),\r\n\t},\r\n}\r\n\r\nfunction jsonToNbt(value: unknown): NbtTag {\r\n\tif (typeof value === 'string') {\r\n\t\treturn new NbtString(value)\r\n\t}\r\n\tif (typeof value === 'number') {\r\n\t\treturn Number.isInteger(value) ? new NbtInt(value) : new NbtDouble(value)\r\n\t}\r\n\tif (typeof value === 'boolean') {\r\n\t\treturn new NbtByte(value)\r\n\t}\r\n\tif (Array.isArray(value)) {\r\n\t\treturn new NbtList(value.map(jsonToNbt))\r\n\t}\r\n\tif (typeof value === 'object' && value !== null) {\r\n\t\treturn new NbtCompound(\r\n\t\t\tnew Map(Object.entries(value ?? {})\r\n\t\t\t\t.map(([k, v]) => [k, jsonToNbt(v)]))\r\n\t\t)\r\n\t}\r\n\tthrow new Error(`Could not convert ${value} to NBT`)\r\n}\r\n\r\nexport function stringifySource(data: unknown, format?: string, indent?: string) {\r\n\treturn FORMATS[format ?? Store.getFormat()].stringify(data, INDENTS[indent ?? Store.getIndent()])\r\n}\r\n\r\nexport async function parseSource(data: string, format: string) {\r\n\treturn await FORMATS[format].parse(data)\r\n}\r\n\r\nexport function getSourceIndent(indent: string) {\r\n\treturn INDENTS[indent]\r\n}\r\n\r\nexport function getSourceIndents() {\r\n\treturn Object.keys(INDENTS)\r\n}\r\n\r\nexport function getSourceFormats() {\r\n\treturn Object.keys(FORMATS)\r\n}\r\n","import type { DataModel } from '@mcschema/core'\r\nimport { Path } from '@mcschema/core'\r\nimport * as zip from '@zip.js/zip.js'\r\nimport type { Random } from 'deepslate'\r\nimport { Matrix3, Matrix4, Vector } from 'deepslate'\r\nimport type { mat3 } from 'gl-matrix'\r\nimport { quat, vec2 } from 'gl-matrix'\r\nimport yaml from 'js-yaml'\r\nimport { route } from 'preact-router'\r\nimport rfdc from 'rfdc'\r\nimport type { ConfigGenerator } from './Config.js'\r\nimport config from './Config.js'\r\nimport type { VersionId } from './services/index.js'\r\nimport { checkVersion } from './services/index.js'\r\n\r\nexport function isPromise(obj: any): obj is Promise<any> {\r\n\treturn typeof (obj as any)?.then === 'function' \r\n}\r\n\r\nexport function isObject(obj: any): obj is Record<string, any> {\r\n\treturn typeof obj === 'object' && obj !== null\r\n}\r\n\r\nfunction decToHex(n: number) {\r\n\treturn n.toString(16).padStart(2, '0')\r\n}\r\n\r\nexport function hexId(length = 12) {\r\n\tvar arr = new Uint8Array(length / 2)\r\n\twindow.crypto.getRandomValues(arr)\r\n\treturn Array.from(arr, decToHex).join('')\r\n}\r\n\r\nexport function randomSeed() {\r\n\treturn BigInt(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER))\r\n}\r\n\r\nexport function generateUUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\tconst r = Math.random()*16|0\r\n\t\tconst v = c == 'x' ? r : (r&0x3|0x8)\r\n\t\treturn v.toString(16)\r\n\t})\r\n}\r\n\r\nexport function generateColor() {\r\n\treturn Math.floor(Math.random() * 16777215)\r\n}\r\n\r\nexport function newSeed(model: DataModel) {\r\n\tconst seed = Math.floor(Math.random() * (4294967296)) - 2147483648\r\n\tconst dimensions = model.get(new Path(['dimensions']))\r\n\tmodel.set(new Path(['seed']), seed, true)\r\n\tif (isObject(dimensions)) {\r\n\t\tObject.keys(dimensions).forEach(id => {\r\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'seed']), seed, true)\r\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'biome_source', 'seed']), seed, true)\r\n\t\t})\r\n\t}\r\n\tmodel.set(new Path(['placement', 'salt']), Math.abs(seed), true)\r\n\tmodel.set(new Path(['generator', 'seed']), seed, true)\r\n\tmodel.set(new Path(['generator', 'biome_source', 'seed']), seed)\r\n}\r\n\r\nexport function htmlEncode(str: string) {\r\n\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n\t\t.replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\\//g, '&#x2F;')\r\n}\r\n\r\nexport function hashString(s: string) {\r\n\tlet h = 0\r\n\tfor(let i = 0; i < s.length; i++)\r\n\t\th = Math.imul(31, h) + s.charCodeAt(i) | 0\r\n\treturn h\r\n}\r\n\r\nexport function cleanUrl(url: string) {\r\n\treturn `/${url}/`.replaceAll('//', '/')\r\n}\r\n\r\nexport function getPath(url: string) {\r\n\tconst searchIndex = url.indexOf('?')\r\n\tif (searchIndex >= 0) {\r\n\t\turl = url.slice(0, searchIndex)\r\n\t}\r\n\treturn cleanUrl(url)\r\n}\r\n\r\nexport function getGenerator(url: string) {\r\n\tconst trimmedUrl = getPath(url).replace(/^\\//, '').replace(/\\/$/, '')\r\n\treturn config.generators.find(g => g.url === trimmedUrl)\r\n}\r\n\r\nexport function changeUrl({ path, search, hash, replace }: { path?: string, search?: string, hash?: string, replace?: boolean }) {\r\n\tconst url = (path !== undefined ? cleanUrl(path) : location.pathname)\r\n\t\t+ (search !== undefined ? (search.startsWith('?') || search.length === 0 ? search : '?' + search) : location.search)\r\n\t\t+ (hash !== undefined ? (hash.startsWith('#') ? hash : '#' + hash) : location.hash)\r\n\troute(url, replace)\r\n}\r\n\r\nexport function parseFrontMatter(source: string): Record<string, any> {\r\n\tconst data = yaml.load(source.substring(3, source.indexOf('---', 3)))\r\n\tif (!isObject(data)) return {}\r\n\treturn data\r\n}\r\n\r\nexport function versionContent(content: string, version: string) {\r\n\tlet cursor = 0\r\n\twhile (true) {\r\n\t\tconst start = content.indexOf('{#', cursor)\r\n\t\tif (start < 0) {\r\n\t\t\tbreak\r\n\t\t}\r\n\t\tconst end = findMatchingClose(content, start + 2)\r\n\t\tconst vStart = content.indexOf('#[', start + 1)\r\n\t\tlet sub = ''\r\n\t\tif (vStart >= 0 && vStart < end) {\r\n\t\t\tconst vEnd = content.indexOf(']', vStart + 2)\r\n\t\t\tconst v = content.substring(vStart + 2, vEnd)\r\n\t\t\tif (v === version) {\r\n\t\t\t\tsub = content.substring(vEnd + 1, end).trim()\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst key = content.substring(start + 2, end)\r\n\t\t\tconst versionConfig = config.versions.find(v => v.id === version)\r\n\t\t\tsub = ({\r\n\t\t\t\tversion: versionConfig?.id,\r\n\t\t\t\tpack_format: versionConfig?.pack_format.toString(),\r\n\t\t\t} as Record<string, string | undefined>)[key] ?? ''\r\n\t\t}\r\n\t\tcontent = content.substring(0, start) + sub + content.substring(end + 2)\r\n\t\tcursor = start\r\n\t\t\r\n\t}\r\n\treturn content\r\n}\r\n\r\nfunction findMatchingClose(source: string, index: number) {\r\n\tlet depth = 0\r\n\tlet iteration = 0\r\n\twhile (iteration++ < 1000) {\r\n\t\tconst close = source.indexOf('#}', index)\r\n\t\tconst open = source.indexOf('{#', index)\r\n\t\tif (close < 0) {\r\n\t\t\tconsole.warn('Missing closing bracket')\r\n\t\t\treturn source.length\r\n\t\t}\r\n\t\tif (open < 0) {\r\n\t\t\tif (depth === 0) {\r\n\t\t\t\treturn close\r\n\t\t\t} else {\r\n\t\t\t\tdepth -= 1\r\n\t\t\t\tindex = close + 2\r\n\t\t\t}\r\n\t\t} else if (open < close) {\r\n\t\t\tdepth += 1\r\n\t\t\tindex = open + 2\r\n\t\t} else if (depth === 0) {\r\n\t\t\treturn close\r\n\t\t} else {\r\n\t\t\tdepth -= 1\r\n\t\t\tindex = close + 2\r\n\t\t}\r\n\t}\r\n\tconsole.warn('Exceeded max iterations while finding closing bracket')\r\n\treturn source.length\r\n}\r\n\r\nexport type Color = [number, number, number]\r\n\r\nexport function stringToColor(str: string): Color {\r\n\tconst h = Math.abs(hashString(str))\r\n\treturn [h % 256, (h >> 8) % 256, (h >> 16) % 256]\r\n}\r\n\r\nexport function rgbToHex(color: Color): string {\r\n\tif (!Array.isArray(color) || color.length !== 3) return '#000000'\r\n\tconst [r, g, b] = color\r\n\treturn '#' + decToHex(r) + decToHex(g) + decToHex(b)\r\n}\r\n\r\nexport function hexToRgb(hex: string | undefined): Color {\r\n\tif (typeof hex !== 'string') return [0, 0, 0]\r\n\tconst num = parseInt(hex.startsWith('#') ? hex.slice(1) : hex, 16)\r\n\tconst r = (num >> 16) & 255\r\n\tconst g = (num >> 8) & 255\r\n\tconst b = num & 255\r\n\treturn [r, g, b]\r\n}\r\n\r\nexport function square(a: number) {\r\n\treturn a * a\r\n}\r\n\r\nexport function clamp(a: number, b: number, c: number) {\r\n\treturn Math.max(b, Math.min(a, c))\r\n}\r\n\r\nexport function clampedLerp(a: number, b: number, c: number): number {\r\n\tif (c < 0) {\r\n\t\treturn a\r\n\t} else if (c > 1) {\r\n\t\treturn b\r\n\t} else {\r\n\t\treturn lerp(c, a, b)\r\n\t}\r\n}\r\n\r\nexport function lerp(a: number, b: number, c: number): number {\r\n\treturn b + a * (c - b)\r\n}\r\n\r\nexport function lerp2(a: number, b: number, c: number, d: number, e: number, f: number): number {\r\n\treturn lerp(b, lerp(a, c, d), lerp(a, e, f))\r\n}\r\n\r\nexport function lerp3(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number, j: number, k: number) {\r\n\treturn lerp(c, lerp2(a, b, d, e, f, g), lerp2(a, b, h, i, j, k))\r\n}\r\n\r\nexport function smoothstep(x: number): number {\r\n\treturn x * x * x * (x * (x * 6 - 15) + 10)\r\n}\r\n\r\nexport function message(e: unknown): string {\r\n\tif (e instanceof Error) return e.message\r\n\treturn `${e}`\r\n}\r\n\r\nexport const deepClone = rfdc()\r\n\r\n/**\r\n * MIT License\r\n * \r\n * Copyright (c) 2017 Evgeny Poberezkin\r\n * \r\n * https://github.com/epoberezkin/fast-deep-equal/blob/master/LICENSE\r\n */\r\nexport function deepEqual(a: any, b: any) {\r\n\tif (a === b) return true\r\n\r\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\r\n\t\tif (a.constructor !== b.constructor) return false\r\n\t\tlet length, i\r\n\t\tif (Array.isArray(a)) {\r\n\t\t\tlength = a.length\r\n\t\t\tif (length != b.length) return false\r\n\t\t\tfor (i = 0; i < length; i++) {\r\n\t\t\t\tif (!deepEqual(a[i], b[i])) return false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tif (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf()\r\n\t\tif (a.toString !== Object.prototype.toString) return a.toString() === b.toString()\r\n\t\tconst keys = Object.keys(a)\r\n\t\tlength = keys.length\r\n\t\tif (length !== Object.keys(b).length) return false\r\n\t\tfor (i = length; i-- !== 0;)\r\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\r\n\t\tfor (i = length; i-- !== 0;) {\r\n\t\t\tconst key = keys[i]\r\n\t\t\tif (!deepEqual(a[key], b[key])) return false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\treturn a !== a && b !== b\r\n}\r\n\r\nexport class BiMap<A, B> {\r\n\tpublic readonly forward: Map<A, B>\r\n\tpublic readonly backward: Map<B, A>\r\n\r\n\tconstructor() {\r\n\t\tthis.forward = new Map()\r\n\t\tthis.backward = new Map()\r\n\t}\r\n\r\n\tpublic set(a: A, b: B) {\r\n\t\tthis.forward.set(a, b)\r\n\t\tthis.backward.set(b, a)\r\n\t}\r\n\r\n\tpublic getA(key: B) {\r\n\t\treturn this.backward.get(key)\r\n\t}\r\n\r\n\tpublic getB(key: A) {\r\n\t\treturn this.forward.get(key)\r\n\t}\r\n\r\n\tpublic getOrPut(key: A, defaultValue: B) {\r\n\t\tconst b = this.forward.get(key)\r\n\t\tif (b === undefined) {\r\n\t\t\tthis.set(key, defaultValue)\r\n\t\t\treturn defaultValue\r\n\t\t}\r\n\t\treturn b\r\n\t}\r\n\r\n\tpublic computeIfAbsent(key: A, value: () => B) {\r\n\t\tconst b = this.forward.get(key)\r\n\t\tif (b === undefined) {\r\n\t\t\tconst newValue = value()\r\n\t\t\tthis.set(key, newValue)\r\n\t\t\treturn newValue\r\n\t\t}\r\n\t\treturn b\r\n\t}\r\n}\r\n\r\nexport async function readZip(file: File | ArrayBuffer, predicate: (name: string) => boolean = () => true): Promise<[string, string][]> {\r\n\tconst buffer = file instanceof File ? await file.arrayBuffer() : file\r\n\tconst reader = new zip.ZipReader(new zip.BlobReader(new Blob([buffer])))\r\n\tconst entries = await reader.getEntries()\r\n\treturn await Promise.all(entries\r\n\t\t.filter(e => !e.directory && predicate(e.filename))\r\n\t\t.map(async e => {\r\n\t\t\tconst writer = new zip.TextWriter('utf-8')\r\n\t\t\treturn [e.filename, await e.getData?.(writer)] as [string, string]\r\n\t\t})\r\n\t)\r\n}\r\n\r\nexport async function writeZip(entries: [string, string][]): Promise<string> {\r\n\tconst writer = new zip.ZipWriter(new zip.Data64URIWriter('application/zip'))\r\n\tawait Promise.all(entries.map(async ([name, data]) => {\r\n\t\tawait writer.add(name, new zip.TextReader(data))\r\n\t}))\r\n\treturn await writer.close()\r\n}\r\n\r\nexport function shuffle<T>(array: T[]) {\r\n\tlet i = array.length\r\n\twhile (i != 0) {\r\n\t\tconst j = Math.floor(Math.random() * i)\r\n\t\ti -= 1;\r\n\t\t[array[i], array[j]] = [array[j], array[i]]\r\n\t}\r\n\treturn array\r\n}\r\n\r\nexport function computeIfAbsent<K, V>(map: Map<K, V>, key: K, getter: (key: K) => V): V {\r\n\tconst existing = map.get(key)\r\n\tif (existing) {\r\n\t\treturn existing\r\n\t}\r\n\tconst value = getter(key)\r\n\tmap.set(key, value)\r\n\treturn value\r\n}\r\n\r\nexport async function computeIfAbsentAsync<K, V>(map: Map<K, V>, key: K, getter: (key: K) => Promise<V>): Promise<V> {\r\n\tconst existing = map.get(key)\r\n\tif (existing) {\r\n\t\treturn existing\r\n\t}\r\n\tconst value = await getter(key)\r\n\tmap.set(key, value)\r\n\treturn value\r\n}\r\n\r\nexport function getWeightedRandom<T>(random: Random, entries: T[], getWeight: (entry: T) => number) {\r\n\tlet totalWeight = 0\r\n\tfor (const entry of entries) {\r\n\t\ttotalWeight += getWeight(entry)\r\n\t}\r\n\tif (totalWeight <= 0) {\r\n\t\treturn undefined\r\n\t}\r\n\tlet n = random.nextInt(totalWeight)\r\n\tfor (const entry of entries) {\r\n\t\tn -= getWeight(entry)\r\n\t\tif (n < 0) {\r\n\t\t\treturn entry\r\n\t\t}\r\n\t}\r\n\treturn undefined\r\n}\r\n\r\nexport function iterateWorld2D<D>(img: ImageData, transform: mat3, getData: (x: number, y: number) => D, getColor: (d: D) => [number, number, number]) {\r\n\tconst pos = vec2.create()\r\n\tconst arr = Array(img.width * img.height)\r\n\tfor (let x = 0; x < img.width; x += 1) {\r\n\t\tfor (let y = 0; y < img.height; y += 1) {\r\n\t\t\tconst i = x + y * img.width\r\n\t\t\tvec2.transformMat3(pos, vec2.fromValues(x, y), transform)\r\n\t\t\tarr[i] = getData(Math.floor(pos[0]), -Math.floor(pos[1]))\r\n\t\t}\r\n\t}\r\n\tfor (let i = 0; i < img.width * img.height; i += 1) {\r\n\t\tconst color = getColor(arr[i])\r\n\t\timg.data[4 * i] = color[0]\r\n\t\timg.data[4 * i + 1] = color[1]\r\n\t\timg.data[4 * i + 2] = color[2]\r\n\t\timg.data[4 * i + 3] = 255\r\n\t}\r\n}\r\n\r\nfunction makeFloat(a: number) {\r\n\treturn a > 3.4028235E38 ? Infinity : a < -3.4028235E38 ? -Infinity : a\r\n}\r\n\r\nconst G = 3 + 2 * Math.sqrt(2)\r\nconst CS = Math.cos(Math.PI / 8)\r\nconst SS = Math.sin(Math.PI / 8)\r\nfunction approxGivensQuat(a: number, b: number, c: number): [number, number] {\r\n\tconst d = 2 * (a - c)\r\n\tif (makeFloat(G * b * b) < makeFloat(d * d)) {\r\n\t\tconst e = 1 / Math.sqrt(b * b + d * d)\r\n\t\treturn [e * b, e * d]\r\n\t} else {\r\n\t\treturn [SS, CS]\r\n\t}\r\n}\r\n\r\nfunction qrGivensQuat(a: number, b: number): [number, number] {\r\n\tconst c = Math.hypot(a, b)\r\n\tlet d = c > 1e-6 ? b : 0\r\n\tlet e = Math.abs(a) + Math.max(c, 1e-6)\r\n\tif (a < 0) {\r\n\t\t[d, e] = [e, d]\r\n\t}\r\n\tconst f = 1 / Math.sqrt(e * e + d * d)\r\n\treturn [d * f, e * f]\r\n}\r\n\r\n// modifies the passed matrix\r\nfunction stepJacobi(m: Matrix3): quat {\r\n\tconst q = quat.create()\r\n\tif (m.m01 * m.m01 + m.m10 * m.m10 > 1e-6) {\r\n\t\tconst [a, b] = approxGivensQuat(m.m00, 0.5 * (m.m01 + m.m10), m.m11)\r\n\t\tconst r = quat.fromValues(0, 0, a, b)\r\n\t\tconst c = b * b - a * a\r\n\t\tconst d = -2 * a * b\r\n\t\tquat.mul(q, q, r)\r\n\t\tconst n = new Matrix3()\r\n\t\tn.m00 = c\r\n\t\tn.m11 = c\r\n\t\tn.m01 = -d\r\n\t\tn.m10 = d\r\n\t\tm.mul(n)\r\n\t\tn.transpose().mul(m)\r\n\t\tm.copy(n)\r\n\t}\r\n\tif (m.m02 * m.m02 + m.m20 * m.m20 > 1e-6) {\r\n\t\tconst pair = approxGivensQuat(m.m00, 0.5 * (m.m02 + m.m20), m.m22)\r\n\t\tconst a = -pair[0]\r\n\t\tconst b = pair[1]\r\n\t\tconst r = quat.fromValues(0, a, 0, b)\r\n\t\tconst c = b * b - a * a\r\n\t\tconst d = -2 * a * b\r\n\t\tquat.mul(q, q, r)\r\n\t\tconst n = new Matrix3()\r\n\t\tn.m00 = c\r\n\t\tn.m22 = c\r\n\t\tn.m02 = d\r\n\t\tn.m20 = -d\r\n\t\tm.mul(n)\r\n\t\tn.transpose().mul(m)\r\n\t\tm.copy(n)\r\n\t}\r\n\tif (m.m12 * m.m12 + m.m21 * m.m21 > 1e-6) {\r\n\t\tconst [a, b] = approxGivensQuat(m.m11, 0.5 * (m.m12 + m.m21), m.m22)\r\n\t\tconst r = quat.fromValues(a, 0, 0, b)\r\n\t\tconst c = b * b - a * a\r\n\t\tconst d = -2 * a * b\r\n\t\tquat.mul(q, q, r)\r\n\t\tconst n = new Matrix3()\r\n\t\tn.m11 = c\r\n\t\tn.m22 = c\r\n\t\tn.m12 = -d\r\n\t\tn.m21 = d\r\n\t\tm.mul(n)\r\n\t\tn.transpose().mul(m)\r\n\t\tm.copy(n)\r\n\t}\r\n\treturn q\r\n}\r\n\r\nexport function svdDecompose(m: Matrix3): [quat, Vector, quat] {\r\n\tconst q = quat.create()\r\n\tconst r = quat.create()\r\n\tconst n = m.clone()\r\n\t\t.transpose()\r\n\t\t.mul(m)\r\n\r\n\tfor (let i = 0; i < 5; i += 1) {\r\n\t\tquat.mul(r, r, stepJacobi(n))\r\n\t}\r\n\tquat.normalize(r, r)\r\n\tconst p0 = m.clone()\r\n\t\t.mul(Matrix3.fromQuat(r))\r\n\r\n\tconst [a1, b1] = m.m00 < 1e-6\r\n\t\t? qrGivensQuat(p0.m11, -p0.m10)\r\n\t\t: qrGivensQuat(p0.m00, p0.m01)\r\n\tconst c1 = b1 * b1 - a1 * a1\r\n\tconst d1 = -2 * a1 * b1\r\n\tconst s1 = quat.fromValues(0, 0, a1, b1)\r\n\tquat.mul(q, q, s1)\r\n\tconst p1 = new Matrix3()\r\n\tp1.m00 = c1\r\n\tp1.m11 = c1\r\n\tp1.m01 = d1\r\n\tp1.m10 = -d1\r\n\tp1.mul(p0)\r\n\r\n\tconst pair = m.m00 < 1e-6\r\n\t\t? qrGivensQuat(p1.m22, -p1.m20)\r\n\t\t: qrGivensQuat(p1.m00, p1.m02)\r\n\tconst a2 = -pair[0]\r\n\tconst b2 = pair[1]\r\n\tconst c2 = b2 * b2 - a2 * a2\r\n\tconst d2 = -2 * a2 * b2\r\n\tconst s2 = quat.fromValues(0, a2, 0, b2)\r\n\tquat.mul(q, q, s2)\r\n\tconst p2 = new Matrix3()\r\n\tp2.m00 = c2\r\n\tp2.m22 = c2\r\n\tp2.m02 = -d2\r\n\tp2.m20 = d2\r\n\tp2.mul(p1)\r\n\r\n\tconst [a3, b3] = m.m11 < 1e-6\r\n\t\t? qrGivensQuat(p2.m22, -p2.m21)\r\n\t\t: qrGivensQuat(p2.m11, p2.m12)\r\n\tconst c3 = b3 * b3 - a3 * a3\r\n\tconst d3 = -2 * a3 * b3\r\n\tconst s3 = quat.fromValues(a3, 0, 0, b3)\r\n\tquat.mul(q, q, s3)\r\n\tconst p3 = new Matrix3()\r\n\tp3.m11 = c3\r\n\tp3.m22 = c3\r\n\tp3.m12 = d3\r\n\tp3.m21 = -d3\r\n\tp3.mul(p2)\r\n\r\n\tquat.scale(q, q, Math.sqrt(1))\r\n\tconst scale = new Vector(p3.m00, p3.m11, p3.m22)\r\n\tquat.conjugate(r, r)\r\n\treturn [q, scale, r]\r\n}\r\n\r\nexport function composeMatrix(translation: Vector, leftRotation: quat, scale: Vector, rightRotation: quat) {\r\n\treturn new Matrix4()\r\n\t\t.translate(translation)\r\n\t\t.mul(Matrix4.fromQuat(leftRotation))\r\n\t\t.scale(scale)\r\n\t\t.mul(Matrix4.fromQuat(rightRotation))\r\n}\r\n\r\nexport interface PatchLine {\r\n\tline: string\r\n\tbefore?: number\r\n\tafter?: number\r\n}\r\n\r\nexport function parseGitPatch(patch: string) {\r\n\tconst source = patch.split('\\n')\r\n\tconst result: PatchLine[] = []\r\n\tlet before = 1\r\n\tlet after = 1\r\n\tfor (let i = 0; i < source.length; i += 1) {\r\n\t\tconst line = source[i]\r\n\t\tif (line.startsWith('@')) {\r\n\t\t\tconst match = line.match(/^@@ -(\\d+)(?:,(?:\\d+))? \\+(\\d+)(?:,(?:\\d+))? @@/)\r\n\t\t\tif (!match) throw new Error(`Invalid patch pattern at line ${i+1}: ${line}`)\r\n\t\t\tresult.push({ line })\r\n\t\t\tbefore = Number(match[1])\r\n\t\t\tafter = Number(match[2])\r\n\t\t} else if (line.startsWith(' ')) {\r\n\t\t\tresult.push({ line, before, after })\r\n\t\t\tbefore += 1\r\n\t\t\tafter += 1\r\n\t\t} else if (line.startsWith('+')) {\r\n\t\t\tresult.push({ line, after })\r\n\t\t\tafter += 1\r\n\t\t} else if (line.startsWith('-')) {\r\n\t\t\tresult.push({ line, before })\r\n\t\t\tbefore += 1\r\n\t\t} else if (!line.startsWith('\\\\')) {\r\n\t\t\tthrow new Error(`Invalid patch, got ${line.charAt(0)} at line ${i+1}`)\r\n\t\t}\r\n\t}\r\n\treturn result\r\n}\r\n\r\nconst legacyFolders = new Set(['loot_table', 'predicate', 'item_modifier', 'advancement', 'recipe', 'tag/function', 'tag/item', 'tag/block', 'tag/fluid', 'tag/entity_type', 'tag/game_event'])\r\nexport function genPath(gen: ConfigGenerator, version: VersionId) {\r\n\tconst path = gen.path ?? gen.id\r\n\tif (!checkVersion(version, '1.21') && legacyFolders.has(gen.id)) {\r\n\t\treturn path + 's'\r\n\t}\r\n\treturn path\r\n}\r\n","import { useEffect } from 'preact/hooks'\r\n\r\ndeclare const ethicalads: any\r\n\r\ntype AdProps = {\r\n\ttype: 'text' | 'image',\r\n\tid: string,\r\n}\r\nexport function Ad({ type, id }: AdProps) {\r\n\tuseEffect(() => {\r\n\t\tdocument.getElementById('ad-placeholder')?.remove()\r\n\t\tif ('ethicalads' in window) {\r\n\t\t\tethicalads.load()\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn <div data-ea-publisher=\"misode-github-io\" data-ea-type={type} class=\"ad dark flat\" id={id}></div>\r\n}\r\n","import { Octicon } from './index.js'\r\n\r\ntype BtnProps = {\r\n\ticon?: keyof typeof Octicon,\r\n\tlabel?: string,\r\n\tactive?: boolean,\r\n\ttooltip?: string,\r\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\r\n\tclass?: string,\r\n\tonClick?: (event: MouseEvent) => unknown,\r\n\tdisabled?: boolean,\r\n}\r\nexport function Btn({ icon, label, active, class: clazz, tooltip, tooltipLoc, onClick, disabled }: BtnProps) {\r\n\treturn <div class={`btn${active ? ' active' : ''}${clazz ? ` ${clazz}` : ''}${tooltip ? ` tooltipped tip-${tooltipLoc ?? 'sw'}` : ''}${disabled ? ' disabled' : ''}${active ? ' tip-shown' : ''}`} onClick={disabled ? undefined : onClick} aria-label={tooltip}>\r\n\t\t{icon && Octicon[icon]}\r\n\t\t{label && <span>{label}</span>}\r\n\t</div>\r\n}\r\n","import { useEffect, useRef } from 'preact/hooks'\r\nimport { hexId } from '../Utils.js'\r\nimport { Octicon } from './index.js'\r\n\r\ntype BtnInputProps = {\r\n\ticon?: keyof typeof Octicon,\r\n\tlabel?: string,\r\n\tlarge?: boolean,\r\n\tlarger?: boolean,\r\n\tdoSelect?: number,\r\n\tvalue?: string,\r\n\tplaceholder?: string,\r\n\tdataList?: string[],\r\n\tonChange?: (value: string) => unknown,\r\n}\r\nexport function BtnInput({ icon, label, large, larger, doSelect, value, placeholder, dataList, onChange }: BtnInputProps) {\r\n\tconst onInput = onChange === undefined ? () => {} : (e: any) => {\r\n\t\tconst value = (e.target as HTMLInputElement).value\r\n\t\tonChange?.(value)\r\n\t}\r\n\r\n\tconst ref = useRef<HTMLInputElement>(null)\r\n\tuseEffect(() => {\r\n\t\tif (doSelect && ref.current) {\r\n\t\t\tref.current.select()\r\n\t\t}\r\n\t}, [doSelect])\r\n\r\n\tconst dataListId = dataList && hexId()\r\n\r\n\treturn <div class={`btn btn-input ${large ? 'large-input' : ''} ${larger ? 'larger-input' : ''}`} onClick={e => e.stopPropagation()}>\r\n\t\t{icon && Octicon[icon]}\r\n\t\t{label && <span>{label}</span>}\r\n\t\t<input ref={ref} type=\"text\" value={value} onChange={onInput} placeholder={placeholder} list={dataListId} />\r\n\t\t{dataList && <datalist id={dataListId}>\r\n\t\t\t{dataList.map(e => <option value={e} />)}\r\n\t\t</datalist>}\r\n\t</div>\r\n}\r\n","import { Octicon } from './index.js'\r\n\r\ninterface Props {\r\n\tlink?: string,\r\n\ticon?: keyof typeof Octicon,\r\n\tlabel?: string,\r\n\ttooltip?: string,\r\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\r\n\tswapped?: boolean,\r\n}\r\nexport function BtnLink({ link, icon, label, tooltip, tooltipLoc, swapped }: Props) {\r\n\treturn <a {...link ? { href: link } : { disabled: true }} class={`btn btn-link${tooltip ? ` tooltipped tip-${tooltipLoc ?? 'sw'}` : ''}`} aria-label={tooltip}>\r\n\t\t{swapped ? <>\r\n\t\t\t{label && <span>{label}</span>}\r\n\t\t\t{icon && Octicon[icon]}\r\n\t\t</> : <>\r\n\t\t\t{icon && Octicon[icon]}\r\n\t\t\t{label && <span>{label}</span>}\r\n\t\t</>}\r\n\t</a>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { useFocus } from '../hooks/index.js'\r\nimport type { Octicon } from './index.js'\r\nimport { Btn } from './index.js'\r\n\r\ninterface BtnMenuProps extends JSX.HTMLAttributes<HTMLDivElement> {\r\n\ticon?: keyof typeof Octicon,\r\n\tlabel?: string,\r\n\trelative?: boolean,\r\n\ttooltip?: string,\r\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\r\n\tchildren: ComponentChildren,\r\n}\r\nexport function BtnMenu(props: BtnMenuProps) {\r\n\tconst { icon, label, relative, tooltip, tooltipLoc, children } = props\r\n\tconst [active, setActive] = useFocus()\r\n\r\n\treturn <div {...props} class={`btn-menu${relative === false ? ' no-relative' : ''} ${props.class}`}>\r\n\t\t<Btn {...{icon, label, tooltip, tooltipLoc}} onClick={() => setActive()} />\r\n\t\t{active && <div class=\"btn-group\">\r\n\t\t\t{children}\r\n\t\t</div>}\r\n\t</div>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\n\r\ninterface Props {\r\n\ttitle?: ComponentChildren,\r\n\tlink?: string,\r\n\toverlay?: ComponentChildren,\r\n\tchildren?: ComponentChildren,\r\n}\r\nexport function Card({ title, overlay, link, children }: Props) {\r\n\tconst content = <>\r\n\t\t{overlay && <span class=\"card-overlay\">{overlay}</span>}\r\n\t\t<div class=\"card-content\">\r\n\t\t\t{title && <h3 class=\"card-title font-bold text-[1.17em]\">{title}</h3>}\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t</>\r\n\r\n\treturn link === undefined\r\n\t\t?\t<div class=\"card\">{content}</div>\r\n\t\t: <a class=\"card\" href={link} target={link.startsWith('https://') ? '_blank' : undefined}>{content}</a>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { getCurrentUrl } from 'preact-router'\r\nimport { useEffect, useMemo, useState } from 'preact/hooks'\r\nimport { Store } from '../Store.js'\r\nimport { getGenerator } from '../Utils.js'\r\nimport { useVersion } from '../contexts/Version.jsx'\r\nimport { latestVersion } from '../services/DataFetcher.js'\r\nimport { Octicon } from './index.js'\r\n\r\ntype ErrorPanelProps = {\r\n\terror: string | Error,\r\n\tprefix?: string,\r\n\treportable?: boolean,\r\n\tonDismiss?: () => unknown,\r\n\tbody?: string,\r\n\tchildren?: ComponentChildren,\r\n}\r\nexport function ErrorPanel({ error, prefix, reportable, onDismiss, body: body_, children }: ErrorPanelProps) {\r\n\tconst { version } = useVersion()\r\n\tconst [stackVisible, setStackVisible] = useState(false)\r\n\tconst [stack, setStack] = useState<string | undefined>(undefined)\r\n\r\n\tconst gen = getGenerator(getCurrentUrl())\r\n\tconst source = gen ? Store.getBackup(gen.id) : undefined\r\n\tconst name = (prefix ?? '') + (error instanceof Error ? error.message : error)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (error instanceof Error) {\r\n\t\t\tconst stack = error.stack!.split('\\n').map(line => {\r\n\t\t\t\treturn line.replace(/^(\\s+)at (?:async )?(https?:.*)/, '$1at ($2)')\r\n\t\t\t})\r\n\t\t\tsetStack(stack.join('\\n'))\r\n\t\t\timport('sourcemapped-stacktrace').then(({ mapStackTrace }) => {\r\n\t\t\t\tmapStackTrace(stack.join('\\n'), (mapped) => {\r\n\t\t\t\t\tconst mappedStack = mapped.map(line => {\r\n\t\t\t\t\t\treturn line.replace(/..\\/..\\/src\\//, 'src/')\r\n\t\t\t\t\t}).join('\\n')\r\n\t\t\t\t\tsetStack(mappedStack)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}, [error])\r\n\r\n\tconst url = useMemo(() => {\r\n\t\tlet url ='https://github.com/misode/misode.github.io/issues/new'\r\n\t\tconst fullName = (error instanceof Error ? `${error.name}: ` : '') + name\r\n\t\turl += `?title=${encodeURIComponent(fullName)}`\r\n\t\tlet body = ''\r\n\t\tbody += `## Crash report\\n * Page url: \\`${location.href}\\`\\n`\r\n\t\tif (gen) {\r\n\t\t\tbody += ` * Generator ID: \\`${gen.id}\\`\\n`\r\n\t\t}\r\n\t\tbody += ` * Current version: \\`${version}\\`\\n`\r\n\t\tbody += ` * Latest version: \\`${latestVersion}\\`\\n`\r\n\t\tif (error instanceof Error && stack) {\r\n\t\t\tbody += `\\n### Stack trace\\n\\`\\`\\`\\n${fullName}\\n${stack}\\n\\`\\`\\`\\n`\r\n\t\t}\r\n\t\tif (source) {\r\n\t\t\tbody += `\\n### Generator JSON\\n<details>\\n<pre>\\n${JSON.stringify(source, null, 2)}\\n</pre>\\n</details>\\n`\r\n\t\t}\r\n\t\tif (body_) {\r\n\t\t\tbody += body_\r\n\t\t}\r\n\t\turl += `&body=${encodeURIComponent(body)}`\r\n\t\treturn url\r\n\t}, [error, name, body_, version, stack, source, gen?.id])\r\n\r\n\treturn <div class=\"error\">\r\n\t\t{onDismiss && <div class=\"error-dismiss\" onClick={onDismiss}>{Octicon.x}</div>}\r\n\t\t<h3 class=\"font-bold text-xl !my-[10px]\">\r\n\t\t\t{(prefix ?? '') + (error instanceof Error ? error.message : error)}\r\n\t\t\t{stack && <span onClick={() => setStackVisible(!stackVisible)}>\r\n\t\t\t\t{Octicon.info}\r\n\t\t\t</span>}\r\n\t\t</h3>\r\n\t\t{stack && stackVisible && <pre>{stack}</pre>}\r\n\t\t{reportable !== false && <p>If you think this is a bug, you can report it <a href={url} target=\"_blank\">on GitHub</a></p>}\r\n\t\t{children}\r\n\t</div>\r\n}\r\n","import { useCallback, useRef } from 'preact/hooks'\r\nimport { useLocale } from '../contexts/index.js'\r\nimport { Btn } from './index.js'\r\n\r\ninterface Props {\r\n\tvalue: File | undefined,\r\n\tonChange: (file: File) => unknown,\r\n\tlabel?: string,\r\n\taccept?: string,\r\n}\r\nexport function FileUpload({ value, onChange, label, accept }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst fileUpload = useRef<HTMLInputElement>(null)\r\n\t\r\n\tconst onUpload = () => {\r\n\t\tif (fileUpload.current === null) return\r\n\t\tfor (let i = 0; i < (fileUpload.current.files?.length ?? 0); i++) {\r\n\t\t\tconst file = fileUpload.current.files![i]\r\n\t\t\tonChange(file)\r\n\t\t} \r\n\t}\r\n\r\n\tconst onDrop = useCallback((e: DragEvent) => {\r\n\t\te.preventDefault()\r\n\t\tif(!e.dataTransfer) return\r\n\r\n\t\tfor (let i = 0; i < e.dataTransfer.files.length; i++) {\r\n\t\t\tconst file = e.dataTransfer.files[i]\r\n\t\t\tonChange(file)\r\n\t\t}\r\n\t}, [onChange])\r\n\r\n\treturn <label class=\"file-upload\" onDrop={onDrop} onDragOver={e => e.preventDefault()}>\r\n\t\t<input ref={fileUpload} type=\"file\" onChange={onUpload} accept={accept} />\r\n\t\t<Btn label={label ?? locale('choose_file')} />\r\n\t\t<span>\r\n\t\t\t{value ? value.name : locale('no_file_chosen')}\r\n\t\t</span>\r\n\t</label>\r\n}\r\n","import { useLocale } from '../contexts/index.js'\r\nimport { Octicon } from './index.js'\r\n\r\ninterface Props {\r\n\tdonate?: boolean,\r\n}\r\nexport function Footer({ donate }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\treturn <div>\r\n\t\t<footer>\r\n\t\t\t<h3>\r\n\t\t\t\tThis website has been modified specifically for the Minejago mod.<br />\r\n\t\t\t\tplease do NOT report problems to the original author!\r\n\t\t\t</h3>\r\n\t\t</footer>\r\n\t\t<footer>\r\n\t\t\t<p>\r\n\t\t\t\t<span>{locale('developed_by')} <a href=\"https://github.com/misode\" target=\"_blank\" rel=\"noreferrer\">Misode</a></span>\r\n\t\t\t</p>\r\n\t\t\t{donate !== false && <p class=\"donate\">\r\n\t\t\t\t{Octicon.heart}\r\n\t\t\t\t<a href=\"https://ko-fi.com/misode\" target=\"_blank\" rel=\"noreferrer\">{locale('donate')}</a>\r\n\t\t\t</p>}\r\n\t\t\t<p>\r\n\t\t\t\t{Octicon.mark_github}\r\n\t\t\t\t<span>{locale('source_code_on')} <a href=\"https://github.com/misode/misode.github.io\" target=\"_blank\" rel=\"noreferrer\">{locale('github')}</a></span>\r\n\t\t\t</p>\r\n\t\t</footer>\r\n\t\t<footer>\r\n\t\t\t<p>\r\n\t\t\t\t<span>{locale('modified_by')} <a href=\"https://github.com/thomasglasser\" target=\"_blank\" rel=\"noreferrer\">Thomas Glasser</a></span>\r\n\t\t\t</p>\r\n\t\t\t{donate !== false && <p class=\"donate\">\r\n\t\t\t\t{Octicon.heart}\r\n\t\t\t\t<a href=\"https://www.buymeacoffee.com/ThomasGlasser\" target=\"_blank\" rel=\"noreferrer\">{locale('donate')}</a>\r\n\t\t\t</p>}\r\n\t\t\t<p>\r\n\t\t\t\t{Octicon.mark_github}\r\n\t\t\t\t<span>{locale('source_code_on')} <a href=\"https://github.com/thomasglasser/minejago-json-generator\" target=\"_blank\" rel=\"noreferrer\">{locale('github')}</a></span>\r\n\t\t\t</p>\r\n\t\t</footer>\r\n\t</div>\r\n}\r\n","\r\ninterface Props {\r\n\tterm?: string,\r\n}\r\n\r\n// @ts-ignore\r\nexport function Giscus({ term }: Props) {\r\n\treturn null\r\n\t// const { actualTheme } = useTheme()\r\n\t// const themeSuffix = actualTheme === 'light' ? '-burn' : ''\r\n\t// const themeUrl = (import.meta as any).env.DEV\r\n\t// \t? `http://localhost:3000/src/styles/giscus${themeSuffix}.css`\r\n\t// \t: `${location.protocol}//${location.host}/assets/giscus${themeSuffix}.css`\r\n\r\n\t// return <div class=\"giscus-container\">\r\n\t// \t<GiscusReact\r\n\t// \t\trepo=\"misode/misode.github.io\"\r\n\t// \t\trepoId=\"MDEwOlJlcG9zaXRvcnkxOTIyNTQyMzA=\"\r\n\t// \t\tcategory=\"Site\"\r\n\t// \t\tcategoryId=\"DIC_kwDOC3WRFs4COB8r\"\r\n\t// \t\tmapping={term ? 'specific' : 'pathname'}\r\n\t// \t\tterm={term}\r\n\t// \t\treactionsEnabled=\"1\"\r\n\t// \t\temitMetadata=\"0\"\r\n\t// \t\tinputPosition=\"top\"\r\n\t// \t\ttheme={themeUrl}\r\n\t// \t\tlang=\"en\" />\r\n\t// </div>\r\n}\r\n","import { getCurrentUrl, Link, route } from 'preact-router'\r\nimport config from '../Config.js'\r\nimport { useLocale, useProject, useTheme, useTitle, useVersion } from '../contexts/index.js'\r\nimport { checkVersion } from '../services/index.js'\r\nimport { cleanUrl, getGenerator } from '../Utils.js'\r\nimport { Btn, BtnMenu, Icons, Octicon } from './index.js'\r\n\r\nconst Themes: Record<string, keyof typeof Octicon> = {\r\n\tsystem: 'device_desktop',\r\n\tdark: 'moon',\r\n\tlight: 'sun',\r\n}\r\n\r\nexport function Header() {\r\n\tconst { lang, locale, changeLocale: changeLanguage } = useLocale()\r\n\tconst { theme, changeTheme } = useTheme()\r\n\tconst { version } = useVersion()\r\n\tconst { projects, project, changeProject } = useProject()\r\n\tconst { title } = useTitle()\r\n\tconst url = getCurrentUrl()\r\n\tconst gen = getGenerator(url)\r\n\r\n\treturn <header>\r\n\t\t<div class=\"title\">\r\n\t\t\t<Link class=\"home-link\" href=\"/\" aria-label={locale('home')} data-cy=\"home-link\">{Icons.home}</Link>\r\n\t\t\t<h1 class=\"font-bold\">{title}</h1>\r\n\t\t\t{gen && <BtnMenu icon=\"chevron_down\" tooltip={locale('switch_generator')} data-cy=\"generator-switcher\">\r\n\t\t\t\t{config.generators\r\n\t\t\t\t\t.filter(g => g.tags?.[0] === gen?.tags?.[0] && checkVersion(version, g.minVersion))\r\n\t\t\t\t\t.map(g =>\r\n\t\t\t\t\t\t<Btn label={locale(`generator.${g.id}`)} active={g.id === gen.id} onClick={() => route(cleanUrl(g.url))} />\r\n\t\t\t\t\t)}\r\n\t\t\t</BtnMenu>}\r\n\t\t\t{!gen && url.match(/\\/?project\\/?$/) && <BtnMenu icon=\"chevron_down\" tooltip={locale('switch_project')}>\r\n\t\t\t\t{projects.map(p =>\r\n\t\t\t\t\t<Btn label={p.name} active={p.name === project.name} onClick={() => changeProject(p.name)} />\r\n\t\t\t\t)}\r\n\t\t\t</BtnMenu>}\r\n\t\t</div>\r\n\t\t<nav>\r\n\t\t\t<ul>\r\n\t\t\t\t<li data-cy=\"language-switcher\">\r\n\t\t\t\t\t<BtnMenu icon=\"globe\" tooltip={locale('language')}>\r\n\t\t\t\t\t\t{config.languages.map(({ code, name }) =>\r\n\t\t\t\t\t\t\t<Btn label={name} active={code === lang}\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(code)} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</BtnMenu>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li data-cy=\"theme-switcher\">\r\n\t\t\t\t\t<BtnMenu icon={Themes[theme]} tooltip={locale('theme')}>\r\n\t\t\t\t\t\t{Object.entries(Themes).map(([th, icon]) =>\r\n\t\t\t\t\t\t\t<Btn icon={icon} label={locale(`theme.${th}`)} active={th === theme}\r\n\t\t\t\t\t\t\t\tonClick={() => changeTheme(th)} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</BtnMenu>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"dimmed\">\r\n\t\t\t\t\t<a href=\"https://github.com/misode/misode.github.io\" target=\"_blank\" rel=\"noreferrer\" class=\"tooltipped tip-sw\" aria-label={locale('github')}>\r\n\t\t\t\t\t\t{Octicon.mark_github}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t</header>\r\n}\r\n","const TAG = <svg width=\"29\" height=\"29\" viewBox=\"0 0 29 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.8284 0.686291C17.298 0.686291 16.7893 0.897005 16.4142 1.27208L1.44365 16.2426C0.662602 17.0237 0.662602 18.29 1.44365 19.0711L9.92893 27.5563C10.71 28.3374 11.9763 28.3374 12.7574 27.5563L27.7279 12.5858C28.103 12.2107 28.3137 11.702 28.3137 11.1716V2.68629C28.3137 1.58172 27.4183 0.686291 26.3137 0.686291H17.8284ZM23.5 8C24.8807 8 26 6.88071 26 5.5C26 4.11929 24.8807 3 23.5 3C22.1193 3 21 4.11929 21 5.5C21 6.88071 22.1193 8 23.5 8Z\"/></svg>\r\nconst STRUCTURE = <svg width=\"28\" height=\"22\" viewBox=\"0 0 28 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8426 9.83057L23.3294 9.83057V20.8306C23.3294 21.3829 22.8817 21.8306 22.3294 21.8306H5.3294C4.77712 21.8306 4.3294 21.3829 4.3294 20.8306V9.83057L1.00171 9.83057C-0.017101 9.83057 -0.383456 8.48519 0.494688 7.96864L13.8067 0.138065C14.1279 -0.0509101 14.5276 -0.045538 14.8437 0.152002L27.3726 7.98258C28.2246 8.51506 27.8473 9.83057 26.8426 9.83057ZM15.3294 11.8306C14.7771 11.8306 14.3294 12.2783 14.3294 12.8306V16.8306C14.3294 17.3829 14.7771 17.8306 15.3294 17.8306H18.3294C18.8817 17.8306 19.3294 17.3829 19.3294 16.8306V12.8306C19.3294 12.2783 18.8817 11.8306 18.3294 11.8306H15.3294Z\"/></svg>\r\n\r\nexport const Icons = {\r\n\thome: <svg width=\"32\" height=\"28\" viewBox=\"0 0 32 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"26\" height=\"6\" rx=\"3\" fill=\"#7CB45C\"/><rect x=\"8\" width=\"18\" height=\"6\" rx=\"3\" fill=\"#4BA041\"/><rect y=\"11\" width=\"32\" height=\"6\" rx=\"3\" fill=\"#AAA8A8\"/><rect x=\"11\" y=\"11\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#91908F\"/><rect x=\"11\" y=\"22\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#70B5C3\"/><rect x=\"17\" y=\"22\" width=\"15\" height=\"6\" rx=\"3\" fill=\"#4D989B\"/></svg>,\r\n\treport: <svg width=\"30\" height=\"36\" viewBox=\"0 0 30 36\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 16C0 13.7909 1.79086 12 4 12V12C6.20914 12 8 13.7909 8 16V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V16Z\" fill=\"#6ACC5D\"/><path d=\"M11 4C11 1.79086 12.7909 0 15 0V0C17.2091 0 19 1.79086 19 4V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V4Z\" fill=\"#FF4C4C\"/><path d=\"M22 10C22 7.79086 23.7909 6 26 6V6C28.2091 6 30 7.79086 30 10V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V10Z\" fill=\"#E5B442\"/><path d=\"M0 23C0 20.7909 1.79086 19 4 19V19C6.20914 19 8 20.7909 8 23V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V23Z\" fill=\"#2BAD1D\"/><path d=\"M11 15C11 12.7909 12.7909 11 15 11V11C17.2091 11 19 12.7909 19 15V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V15Z\" fill=\"#C10B0B\"/><path d=\"M22 19C22 16.7909 23.7909 15 26 15V15C28.2091 15 30 16.7909 30 19V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V19Z\" fill=\"#CC8E00\"/></svg>,\r\n\tsounds: <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#451475\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3.5 10C3.5 8.27609 4.18482 6.62279 5.40381 5.40381C6.62279 4.18482 8.27609 3.5 10 3.5C11.7239 3.5 13.3772 4.18482 14.5962 5.40381C15.8152 6.62279 16.5 8.27609 16.5 10C16.5 11.7239 15.8152 13.3772 14.5962 14.5962C13.3772 15.8152 11.7239 16.5 10 16.5C8.27609 16.5 6.62279 15.8152 5.40381 14.5962C4.18482 13.3772 3.5 11.7239 3.5 10V10ZM10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2V2ZM8.379 7.227C8.34101 7.20412 8.29762 7.19175 8.25327 7.19117C8.20892 7.19059 8.16522 7.20181 8.12664 7.2237C8.08807 7.24558 8.05601 7.27733 8.03375 7.3157C8.0115 7.35406 7.99985 7.39765 8 7.442V12.559C8.00003 12.6033 8.0118 12.6467 8.03413 12.685C8.05646 12.7232 8.08854 12.7548 8.12708 12.7765C8.16563 12.7983 8.20926 12.8095 8.25352 12.8088C8.29778 12.8082 8.34108 12.7958 8.379 12.773L12.643 10.214C12.6798 10.1917 12.7103 10.1604 12.7315 10.1229C12.7526 10.0854 12.7638 10.043 12.7638 10C12.7638 9.95695 12.7526 9.91463 12.7315 9.87714C12.7103 9.83965 12.6798 9.80825 12.643 9.786L8.379 7.227Z\" fill=\"#C5A5E6\"/></svg>,\r\n\tcustomized: <svg width=\"28\" height=\"29\" viewBox=\"0 0 28 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18 16.5V11\" stroke=\"#4BA041\" stroke-width=\"2\"/><rect x=\"15\" y=\"6\" width=\"6\" height=\"6\" rx=\"2\" fill=\"#4BA041\"/><path d=\"M9 11.5V5\" stroke=\"#4BA041\" stroke-width=\"2\"/><rect x=\"6\" width=\"6\" height=\"6\" rx=\"2\" fill=\"#4BA041\"/><path d=\"M24 24H8C5.79086 24 4 22.2091 4 20V8.99999C6 8.5 8 8.49999 9.5 9.99999C10.5 11 11.5 12.9368 13 14.4368C13.9499 15.3867 15.6497 15.9119 17.5 16C19 16.0714 21.078 15.3978 22 14.9368C23 14.4368 26 14 28 14.4368V20C28 22.2091 26.2091 24 24 24Z\" fill=\"#91908F\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6 26.2968H22C22.5869 26.2968 23.1444 26.1704 23.6465 25.9433C23.0189 27.3311 21.6222 28.2968 20 28.2968H4C1.79086 28.2968 0 26.5059 0 24.2968V13.2968C0.673018 13.1285 1.34604 13.0169 2 13V22.2968C2 24.5059 3.79086 26.2968 6 26.2968Z\" fill=\"#4D989B\"/></svg>,\r\n\tadvancement: <svg width=\"27\" height=\"27\" viewBox=\"0 0 27 27\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M5.76943 2.86824L2.18356 0.819176C1.29934 0.313911 0.313911 1.29934 0.819176 2.18356L2.86824 5.76943C2.95458 5.92052 3 6.09154 3 6.26556V20.7344C3 20.9085 2.95459 21.0795 2.86824 21.2306L0.819176 24.8164C0.313911 25.7007 1.29934 26.6861 2.18356 26.1808L5.76943 24.1318C5.92052 24.0454 6.09154 24 6.26556 24H20.7344C20.9085 24 21.0795 24.0454 21.2306 24.1318L24.8164 26.1808C25.7007 26.6861 26.6861 25.7007 26.1808 24.8164L24.1318 21.2306C24.0454 21.0795 24 20.9085 24 20.7344V6.26556C24 6.09154 24.0454 5.92052 24.1318 5.76943L26.1808 2.18356C26.6861 1.29934 25.7007 0.313911 24.8164 0.819176L21.2306 2.86824C21.0795 2.95458 20.9085 3 20.7344 3H6.26556C6.09154 3 5.92052 2.95459 5.76943 2.86824Z\"/></svg>,\r\n\tblock_definition: <svg width=\"28\" height=\"30\" viewBox=\"0 0 28 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.75 0.272806C13.5437 -0.0909347 14.4563 -0.0909357 15.25 0.272805L26.25 5.31447C27.3163 5.80322 28 6.86864 28 8.04167V21.3583C28 22.5313 27.3163 23.5967 26.25 24.0855L15.25 29.1272C14.4563 29.4909 13.5437 29.4909 12.75 29.1272L1.75004 24.0855C0.683681 23.5967 0 22.5313 0 21.3583V8.04167C0 6.86864 0.683678 5.80322 1.75004 5.31447L12.75 0.272806ZM14 4.10003L6.92266 7.34381L14 10.2391L21.0773 7.34381L14 4.10003ZM24 10.4699V20.7166L16 24.3833V13.7427L24 10.4699ZM12 13.7427L4 10.4699V20.7166L12 24.3833V13.7427Z\"/></svg>,\r\n\tchat_type: <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4 0C1.79086 0 0 1.79086 0 4V21C0 23.2091 1.79086 25 4 25H8V30.7732C8 31.636 9.01946 32.0938 9.66436 31.5206L17 25H28C30.2091 25 32 23.2091 32 21V4C32 1.79086 30.2091 0 28 0H4Z\"/></svg>,\t\r\n\tdimension: <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M19.7659 0.445701C18.5582 0.154357 17.2971 0 16 0C12.7056 0 9.64369 0.995672 7.09887 2.70251C7.94418 3.62868 8.45554 4.49063 8.75229 5.30669C9.09264 6.24263 9.125 7.05145 9.125 7.6875C9.125 7.78933 9.12466 7.88242 9.12434 7.96797V7.96834V7.96869V7.96901V7.96902C9.12247 8.47232 9.12158 8.71409 9.19707 8.93677C9.24638 9.08226 9.36226 9.31309 9.94721 9.60557C10.5615 9.91273 10.7586 9.8353 10.7733 9.82952L10.7739 9.82929C10.8476 9.80165 10.9347 9.73088 11.2191 9.3753L11.256 9.32901C11.4803 9.04661 11.8843 8.53789 12.5239 8.29804C13.2651 8.02009 14.0719 8.16789 14.9472 8.60557C16.4469 9.35541 17.3707 9.72195 17.9896 9.84301C18.2833 9.90046 18.4612 9.89221 18.5724 9.86953C18.6731 9.84897 18.7646 9.80771 18.8753 9.71913C19.2786 9.39647 19.6673 8.76901 19.9604 7.83984C20.2468 6.93156 20.4085 5.83955 20.4378 4.72369C20.4672 3.60868 20.3634 2.50945 20.1445 1.59133C20.0358 1.13577 19.9057 0.75371 19.7659 0.445701ZM5.50368 3.92379C2.13164 6.85717 4.76837e-07 11.1797 4.76837e-07 16C4.76837e-07 16.1436 0.00189157 16.2867 0.00565022 16.4294C1.54401 16.9679 2.98111 16.6462 4.47925 16.2249C4.59499 16.1923 4.71296 16.1585 4.83279 16.1242L4.83282 16.1242C5.68141 15.881 6.62293 15.6113 7.5179 15.5713C8.62706 15.5218 9.72807 15.8138 10.7071 16.7929C11.7646 17.8503 12.0777 19.3283 11.8236 20.6012C11.5699 21.8719 10.7059 23.1043 9.24253 23.4702C8.94395 23.5448 8.87224 23.6435 8.85319 23.6716C8.82014 23.7204 8.77492 23.8288 8.77233 24.0677C8.7697 24.3108 8.81045 24.5892 8.869 24.9304L8.88606 25.0286L8.88606 25.0286C8.93527 25.3102 9 25.6807 9 26C9 27.4332 8.58821 28.8019 8.09018 29.9113C10.4231 31.2406 13.1229 32 16 32C19.5354 32 22.8029 30.8534 25.4511 28.9117C25.3471 28.7646 25.2399 28.6153 25.1301 28.465C24.5506 27.672 23.9089 26.8682 23.2732 26.2107C22.6167 25.5315 22.05 25.0971 21.6286 24.9285C20.8738 24.6266 20.1566 24.1617 19.9616 23.3144C19.8718 22.9244 19.9228 22.5591 20.0033 22.2613C20.0827 21.9675 20.2083 21.6782 20.3292 21.4199C20.3937 21.2823 20.4611 21.1436 20.5296 21.0026L20.5296 21.0024C20.9898 20.055 21.5 19.0047 21.5 17.5C21.5 16.2061 22.0035 15.2171 22.8218 14.4932C23.5953 13.8089 24.6068 13.3989 25.5877 13.1047C26.3248 12.8835 27.1287 12.7056 27.8822 12.5388L27.8824 12.5388L27.8824 12.5388L27.8824 12.5388C28.1297 12.484 28.3716 12.4305 28.6038 12.377C29.5877 12.1506 30.4202 11.9219 31.0528 11.6056C31.1525 11.5557 31.2566 11.5241 31.3612 11.5094C29.9973 6.83578 26.5583 3.04703 22.1087 1.2075C22.3608 2.30151 22.4695 3.54643 22.4372 4.7763C22.404 6.03545 22.2219 7.31843 21.8678 8.4414C21.5202 9.54349 20.9714 10.6035 20.1247 11.2809C19.7989 11.5415 19.4221 11.7373 18.9722 11.8291C18.5328 11.9188 18.0778 11.8982 17.6057 11.8058C16.6928 11.6273 15.5531 11.1446 14.0528 10.3944C13.4385 10.0873 13.2414 10.1647 13.2267 10.1705L13.2261 10.1707C13.1524 10.1983 13.0653 10.2691 12.7809 10.6247L12.744 10.671C12.5197 10.9534 12.1157 11.4621 11.4761 11.702C10.7349 11.9799 9.92815 11.8321 9.05279 11.3944C8.13774 10.9369 7.56612 10.3552 7.30294 9.57885C7.10968 9.00876 7.1174 8.37679 7.1232 7.90214V7.90213C7.12412 7.82627 7.125 7.75443 7.125 7.6875C7.125 7.13604 7.09486 6.60111 6.87271 5.99018C6.66804 5.42734 6.27867 4.74354 5.50368 3.92379ZM31.8004 13.4655C30.9636 13.8583 29.9823 14.1121 29.0524 14.3261C28.782 14.3883 28.5159 14.4472 28.2543 14.5052C27.5209 14.6676 26.8227 14.8222 26.1623 15.0203C25.2682 15.2886 24.5922 15.5973 24.147 15.9912C23.7465 16.3454 23.5 16.7939 23.5 17.5C23.5 19.496 22.7817 20.9579 22.3162 21.9053L22.3159 21.9058C22.2518 22.0363 22.1925 22.157 22.1405 22.268C22.0298 22.5045 21.9661 22.6645 21.934 22.7831C21.9282 22.8046 21.9241 22.8225 21.9212 22.837C21.9775 22.8824 22.105 22.965 22.3714 23.0715C23.2 23.403 24.0083 24.0935 24.7112 24.8206C25.4349 25.5693 26.1369 26.4531 26.7449 27.285C26.8288 27.3998 26.9111 27.5139 26.9917 27.6269C30.0758 24.7103 32 20.5798 32 16C32 15.1375 31.9318 14.291 31.8004 13.4655ZM6.39285 28.7958C6.7349 27.9612 7 26.9846 7 26C7 25.8639 6.96675 25.6702 6.9058 25.3152L6.8978 25.2686C6.84067 24.9356 6.76762 24.4924 6.77245 24.0461C6.77733 23.5956 6.86084 23.0468 7.19719 22.5502C7.54754 22.0328 8.08591 21.6977 8.75748 21.5299C9.2941 21.3957 9.72071 20.9187 9.86229 20.2096C10.0034 19.5028 9.81659 18.7308 9.2929 18.2071C8.77193 17.6861 8.24794 17.5407 7.6071 17.5693C6.96482 17.598 6.27253 17.7947 5.38824 18.0461L5.38718 18.0464L5.3833 18.0475C5.26594 18.0808 5.1452 18.1152 5.02075 18.1502C3.64971 18.5358 2.00798 18.9412 0.20345 18.5584C0.873856 22.73 3.15691 26.3624 6.39285 28.7958ZM21.8827 22.799C21.882 22.7982 21.8816 22.7979 21.8815 22.7979C21.881 22.798 21.883 22.8012 21.8886 22.8073C21.886 22.8031 21.884 22.8004 21.8827 22.799Z\"/></svg>,\r\n\tdimension_type: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.2929 22.7071C11.6834 23.0976 12.3166 23.0976 12.7071 22.7071L19.0711 16.3431C19.4616 15.9526 19.4616 15.3195 19.0711 14.9289C18.6805 14.5384 18.0474 14.5384 17.6569 14.9289L13 19.5858V14.1521C14.074 14.1106 15.2545 13.9152 16.5 13.5C17.4051 13.1983 18.0371 12.8511 18.602 12.5408C19.9096 11.8225 20.8576 11.3017 24 12V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V9.5C3 7.5 6 10.5 7.5 12.5C7.95659 13.1088 9.22475 13.7863 11 14.0485V19.5858L6.34315 14.9289C5.95262 14.5384 5.31946 14.5384 4.92893 14.9289C4.53841 15.3195 4.53841 15.9526 4.92893 16.3431L11.2929 22.7071ZM11 14.0485V3.41421L6.34315 8.07107C5.95262 8.46159 5.31946 8.46159 4.92893 8.07107C4.53841 7.68054 4.53841 7.04738 4.92893 6.65686L11.2929 0.292893C11.6834 -0.097631 12.3166 -0.097631 12.7071 0.292893L19.0711 6.65686C19.4616 7.04738 19.4616 7.68054 19.0711 8.07107C18.6805 8.46159 18.0474 8.46159 17.6569 8.07107L13 3.41421V14.1521C12.2816 14.1799 11.6108 14.1388 11 14.0485Z\"/></svg>,\r\n\tfont: <svg width=\"26\" height=\"20\" viewBox=\"0 0 26 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3 16V3H9V16H3ZM0 1C0 0.447715 0.447715 0 1 0H11C11.5523 0 12 0.447715 12 1V18C12 18.5523 11.5523 19 11 19H1C0.447715 19 0 18.5523 0 18V1ZM17.3224 18.8366C17.8622 19.0687 18.4801 19.1847 19.1761 19.1847C19.6828 19.1847 20.1373 19.1207 20.5398 18.9929C20.947 18.8651 21.2997 18.6733 21.598 18.4176C21.901 18.1619 22.1496 17.8494 22.3438 17.4801H22.429V19H25.696V11.5852C25.696 11.0076 25.5753 10.4938 25.3338 10.044C25.0971 9.59422 24.7609 9.21544 24.3253 8.90767C23.8897 8.59517 23.3783 8.35843 22.7912 8.19744C22.2041 8.03172 21.5625 7.94886 20.8665 7.94886C19.8911 7.94886 19.0554 8.10038 18.3594 8.40341C17.6681 8.7017 17.1236 9.11364 16.7259 9.6392C16.3329 10.16 16.089 10.7519 15.9943 11.4148L19.1974 11.5284C19.2732 11.178 19.4508 10.9034 19.7301 10.7045C20.0095 10.5057 20.3788 10.4062 20.8381 10.4062C21.2642 10.4062 21.6027 10.5057 21.8537 10.7045C22.1046 10.9034 22.2301 11.1851 22.2301 11.5497V11.5852C22.2301 11.8078 22.1425 11.9806 21.9673 12.1037C21.7969 12.2221 21.5223 12.3144 21.1435 12.3807C20.7647 12.4422 20.2652 12.5014 19.6449 12.5582C19.0909 12.6056 18.5701 12.6979 18.0824 12.8352C17.5947 12.9678 17.1638 13.1643 16.7898 13.4247C16.4157 13.6851 16.1222 14.0237 15.9091 14.4403C15.696 14.857 15.5895 15.3684 15.5895 15.9744C15.5895 16.6941 15.7434 17.2931 16.0511 17.7713C16.3636 18.2448 16.7874 18.5999 17.3224 18.8366ZM21.2571 16.6847C20.9588 16.8362 20.6226 16.9119 20.2486 16.9119C19.8509 16.9119 19.5218 16.8172 19.2614 16.6278C19.0057 16.4384 18.8778 16.1638 18.8778 15.804C18.8778 15.5672 18.937 15.3636 19.0554 15.1932C19.1785 15.018 19.3537 14.8759 19.581 14.767C19.813 14.6581 20.0923 14.5777 20.419 14.5256C20.58 14.5019 20.7481 14.4759 20.9233 14.4474C21.0985 14.419 21.2689 14.3859 21.4347 14.348C21.6004 14.3101 21.7519 14.2699 21.8892 14.2273C22.0312 14.1847 22.152 14.1373 22.2514 14.0852V15.1222C22.2514 15.4773 22.1615 15.7898 21.9815 16.0597C21.8016 16.3248 21.5601 16.5331 21.2571 16.6847Z\"/></svg>,\r\n\titem_modifier: <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><line x1=\"8.05026\" y1=\"17.9498\" x2=\"17.9498\" y2=\"8.05026\" stroke=\"currentColor\" stroke-width=\"4\" stroke-linecap=\"round\"/><path d=\"M10.1749 4.51138C10.1749 4.51138 16.4785 3.75061 19.364 6.63604C22.2494 9.52148 21.4886 15.8251 21.4886 15.8251\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"4\" stroke-linecap=\"round\"/></svg>,\r\n\tloot_table: <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0.159296 8.96068C-0.224317 6.7851 1.22836 4.71047 3.40393 4.32686L27.0393 0.159301C29.2149 -0.224312 31.2895 1.22836 31.6731 3.40394L35.8407 27.0393C36.2243 29.2149 34.7716 31.2895 32.5961 31.6731L8.96068 35.8407C6.7851 36.2243 4.71047 34.7716 4.32685 32.5961L0.159296 8.96068ZM11.5999 10.4974C11.9356 12.401 10.6645 14.2163 8.76089 14.552C6.85726 14.8876 5.04196 13.6165 4.7063 11.7129C4.37063 9.80928 5.64172 7.99398 7.54535 7.65832C9.44898 7.32266 11.2643 8.59375 11.5999 10.4974ZM25.5026 11.6C27.4063 11.2643 28.6773 9.44899 28.3417 7.54536C28.006 5.64173 26.1907 4.37064 24.2871 4.7063C22.3835 5.04196 21.1124 6.85727 21.448 8.7609C21.7837 10.6645 23.599 11.9356 25.5026 11.6ZM14.552 27.2391C14.8876 29.1427 13.6165 30.958 11.7129 31.2937C9.80928 31.6294 7.99398 30.3583 7.65831 28.4546C7.32265 26.551 8.59374 24.7357 10.4974 24.4001C12.401 24.0644 14.2163 25.3355 14.552 27.2391ZM28.4546 28.3417C30.3583 28.006 31.6294 26.1907 31.2937 24.2871C30.958 22.3835 29.1427 21.1124 27.2391 21.448C25.3355 21.7837 24.0644 23.599 24.4 25.5026C24.7357 27.4063 26.551 28.6773 28.4546 28.3417Z\"/></svg>,\r\n\tmodel: <svg width=\"28\" height=\"23\" viewBox=\"0 0 28 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.75 0.27279C13.5437 -0.09095 14.4563 -0.0909509 15.25 0.27279L26.25 5.31446C27.3163 5.8032 28 6.86863 28 8.04165V15.3333C28 16.5444 27.2718 17.6367 26.1538 18.1025L15.1538 22.6859C14.4154 22.9936 13.5846 22.9936 12.8462 22.6859L1.84615 18.1025C0.728214 17.6367 0 16.5444 0 15.3333V8.04165C0 6.86863 0.683678 5.8032 1.75004 5.31446L12.75 0.27279ZM14 4.10002L6.92266 7.3438L14 10.2391L21.0773 7.3438L14 4.10002ZM24 10.4699V14.6666L16 18V13.7427L24 10.4699ZM12 13.7427L4 10.4699V14.6666L12 18V13.7427Z\"/></svg>,\r\n\tpack_mcmeta: <svg width=\"28\" height=\"31\" viewBox=\"0 0 28 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.25 0.872837C14.4563 0.509096 13.5437 0.509097 12.75 0.872837L1.75004 5.9145C0.683678 6.40325 0 7.46867 0 8.6417V23.3333C0 24.5444 0.728212 25.6368 1.84615 26.1026L12.8462 30.6859C13.5846 30.9936 14.4154 30.9936 15.1538 30.6859L26.1538 26.1026C27.2718 25.6368 28 24.5444 28 23.3333V8.6417C28 7.46867 27.3163 6.40325 26.25 5.9145L15.25 0.872837ZM11.8374 5.69126L14 4.70006L21.0773 7.94384L18.8225 8.86629L11.8374 5.69126ZM9.4308 6.79428L6.92266 7.94384L14 10.8391L16.2787 9.90694L9.4308 6.79428ZM24 22.6667V11.07L16 14.3427V26L24 22.6667ZM4 11.07L12 14.3427V26L4 22.6667V11.07Z\"/></svg>,\r\n\tpredicate: <svg width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M22 0H2C1.17595 0 0.705573 0.940764 1.2 1.6L8.8 11.7333C8.92982 11.9064 9 12.117 9 12.3333V20.382C9 21.1253 9.78231 21.6088 10.4472 21.2764L14.4472 19.2764C14.786 19.107 15 18.7607 15 18.382V12.3333C15 12.117 15.0702 11.9064 15.2 11.7333L22.8 1.6C23.2944 0.940764 22.824 0 22 0Z\"/></svg>,\r\n\trecipe: <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20 2H12V10L20 10V2ZM10 2V10H2V4C2 2.89543 2.89543 2 4 2H10ZM2 20L2 12H10V20H2ZM2 22L2 28C2 29.1046 2.89543 30 4 30H10V22H2ZM12 22V30H20V22L12 22ZM22 22V30H28C29.1046 30 30 29.1046 30 28V22H22ZM30 20V12H22V20H30ZM20 20L12 20V12L20 12V20ZM30 4V10H22V2H28C29.1046 2 30 2.89543 30 4ZM4 0C1.79086 0 0 1.79086 0 4V28C0 30.2091 1.79086 32 4 32H28C30.2091 32 32 30.2091 32 28V4C32 1.79086 30.2091 0 28 0H4Z\"/></svg>,\r\n\t'tag/block': TAG,\r\n\t'tag/damage_type': TAG,\r\n\t'tag/entity_type': TAG,\r\n\t'tag/fluid': TAG,\r\n\t'tag/game_event': TAG,\r\n\t'tag/item': TAG,\r\n\t'tag/worldgen/biome': TAG,\r\n\t'tag/worldgen/structure': TAG,\r\n\t'tag/worldgen/structure_set': TAG,\r\n\t'tag/worldgen/flat_level_generator_preset': TAG,\r\n\t'tag/worldgen/world_preset': TAG,\r\n\t'tag/banner_pattern': TAG,\r\n\t'tag/cat_variant': TAG,\r\n\t'tag/instrument': TAG,\r\n\t'tag/painting_variant': TAG,\r\n\t'tag/point_of_interest_type': TAG,\r\n\ttext_component: <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0 4C0 1.79086 1.79086 0 4 0H28C30.2091 0 32 1.79086 32 4V21C32 23.2091 30.2091 25 28 25H17L9.66436 31.5206C9.01946 32.0938 8 31.636 8 30.7732V25H4C1.79086 25 0 23.2091 0 21V4ZM2.46875 20H6.24716L7.20402 16.946H12.2272L13.1861 20H16.9645L12.0568 5.45455H7.37642L2.46875 20ZM11.3888 14.2756L9.76989 9.11932H9.65625L8.04072 14.2756H11.3888ZM19.7521 19.8366C20.2919 20.0687 20.9098 20.1847 21.6058 20.1847C22.1125 20.1847 22.567 20.1207 22.9695 19.9929C23.3767 19.8651 23.7294 19.6733 24.0277 19.4176C24.3307 19.1619 24.5793 18.8494 24.7734 18.4801H24.8587V20H28.1257V12.5852C28.1257 12.0076 28.005 11.4938 27.7635 11.044C27.5268 10.5942 27.1906 10.2154 26.755 9.90767C26.3194 9.59517 25.808 9.35843 25.2209 9.19744C24.6338 9.03172 23.9922 8.94886 23.2962 8.94886C22.3208 8.94886 21.4851 9.10038 20.7891 9.40341C20.0978 9.7017 19.5533 10.1136 19.1555 10.6392C18.7625 11.16 18.5187 11.7519 18.424 12.4148L21.6271 12.5284C21.7029 12.178 21.8804 11.9034 22.1598 11.7045C22.4392 11.5057 22.8085 11.4062 23.2678 11.4062C23.6939 11.4062 24.0324 11.5057 24.2834 11.7045C24.5343 11.9034 24.6598 12.1851 24.6598 12.5497V12.5852C24.6598 12.8078 24.5722 12.9806 24.397 13.1037C24.2266 13.2221 23.9519 13.3144 23.5732 13.3807C23.1944 13.4422 22.6948 13.5014 22.0746 13.5582C21.5206 13.6056 20.9998 13.6979 20.5121 13.8352C20.0244 13.9678 19.5935 14.1643 19.2195 14.4247C18.8454 14.6851 18.5518 15.0237 18.3388 15.4403C18.1257 15.857 18.0192 16.3684 18.0192 16.9744C18.0192 17.6941 18.1731 18.2931 18.4808 18.7713C18.7933 19.2448 19.2171 19.5999 19.7521 19.8366ZM23.6868 17.6847C23.3885 17.8362 23.0523 17.9119 22.6783 17.9119C22.2805 17.9119 21.9515 17.8172 21.6911 17.6278C21.4354 17.4384 21.3075 17.1638 21.3075 16.804C21.3075 16.5672 21.3667 16.3636 21.4851 16.1932C21.6082 16.018 21.7834 15.8759 22.0107 15.767C22.2427 15.6581 22.522 15.5777 22.8487 15.5256C23.0097 15.5019 23.1778 15.4759 23.353 15.4474C23.5282 15.419 23.6986 15.3859 23.8643 15.348C24.0301 15.3101 24.1816 15.2699 24.3189 15.2273C24.4609 15.1847 24.5817 15.1373 24.6811 15.0852V16.1222C24.6811 16.4773 24.5911 16.7898 24.4112 17.0597C24.2313 17.3248 23.9898 17.5331 23.6868 17.6847Z\"/></svg>,\r\n\tworld: <svg width=\"28\" height=\"29\" viewBox=\"0 0 28 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6 2C6 0.895431 6.89543 0 8 0H10C11.1046 0 12 0.895431 12 2V4C12 5.10457 11.1046 6 10 6V10.5688C10.2875 10.9298 10.5816 11.3478 10.8939 11.7915L10.8939 11.7916C11.5 12.6529 12.1742 13.6111 13 14.4368C13.8636 15.3004 15.3471 15.813 17 15.9652V12C15.8954 12 15 11.1046 15 10V8C15 6.89543 15.8954 6 17 6H19C20.1046 6 21 6.89543 21 8V10C21 11.1046 20.1046 12 19 12V15.8819C20.1705 15.6766 21.362 15.2558 22 14.9368C23 14.4368 26 14 28 14.4368V20C28 22.2091 26.2091 24 24 24H8C5.79086 24 4 22.2091 4 20V9C5.38919 8.65271 6.77837 8.54664 8 9.01691V6C6.89543 6 6 5.10457 6 4V2ZM22 26.2968H6C3.79086 26.2968 2 24.5059 2 22.2968V13C1.34604 13.0169 0.673018 13.1285 0 13.2968V24.2968C0 26.5059 1.79086 28.2968 4 28.2968H20C21.6222 28.2968 23.0189 27.3311 23.6465 25.9433C23.1444 26.1704 22.5869 26.2968 22 26.2968Z\"/></svg>,\r\n\tworldgen: <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4 0C2.89543 0 2 0.89543 2 2V4C2 5.10457 2.89543 6 4 6V9.01691C2.77837 8.54664 1.38919 8.65271 0 9V20C0 22.2091 1.79086 24 4 24H20C22.2091 24 24 22.2091 24 20V14.4368C22 14 19 14.4368 18 14.9368C17.362 15.2558 16.1705 15.6766 15 15.8819V12C16.1046 12 17 11.1046 17 10V8C17 6.89543 16.1046 6 15 6H13C11.8954 6 11 6.89543 11 8V10C11 11.1046 11.8954 12 13 12V15.9652C11.3471 15.813 9.86362 15.3004 9 14.4368C8.17424 13.6111 7.50001 12.6529 6.8939 11.7916L6.89388 11.7916L6.89388 11.7916L6.89385 11.7915C6.58163 11.3478 6.28748 10.9298 6 10.5688V6C7.10457 6 8 5.10457 8 4V2C8 0.895431 7.10457 0 6 0H4Z\"/></svg>,\r\n\t'worldgen/biome': <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 1C7 0.447715 7.44772 0 8 0C8.55229 0 9 0.447715 9 1V3C9 3.55228 8.55229 4 8 4C7.44772 4 7 3.55228 7 3V1ZM20.5 21H22.5C23.2136 21 23.6975 20.2741 23.4231 19.6154L19.9231 11.2154C19.5812 10.3949 18.4188 10.3949 18.0769 11.2154L14.5769 19.6154C14.3025 20.2741 14.7864 21 15.5 21H17.5V24H20.5V21ZM16 8C16 7.44772 15.5523 7 15 7H13C12.4477 7 12 7.44772 12 8C12 8.55228 12.4477 9 13 9H15C15.5523 9 16 8.55229 16 8ZM14.4142 13C14.8047 13.3905 14.8047 14.0237 14.4142 14.4142C14.0237 14.8047 13.3905 14.8047 13 14.4142L11.5858 13C11.1953 12.6095 11.1953 11.9763 11.5858 11.5858C11.9763 11.1953 12.6095 11.1953 13 11.5858L14.4142 13ZM4 8C4 7.44772 3.55228 7 3 7H1C0.447715 7 0 7.44772 0 8C0 8.55228 0.447715 9 1 9H3C3.55228 9 4 8.55229 4 8ZM4.41422 3C4.80474 3.39053 4.80474 4.02369 4.41422 4.41421C4.02369 4.80474 3.39053 4.80474 3 4.41421L1.58579 3C1.19526 2.60948 1.19526 1.97631 1.58579 1.58579C1.97631 1.19526 2.60948 1.19526 3 1.58579L4.41422 3ZM8 16C8.55229 16 9 15.5523 9 15V13C9 12.4477 8.55229 12 8 12C7.44772 12 7 12.4477 7 13L7 15C7 15.5523 7.44772 16 8 16ZM3 14.4142C2.60947 14.8047 1.97631 14.8047 1.58579 14.4142C1.19526 14.0237 1.19526 13.3905 1.58579 13L3 11.5858C3.39052 11.1953 4.02369 11.1953 4.41421 11.5858C4.80474 11.9763 4.80474 12.6095 4.41421 13L3 14.4142ZM14.4142 1.58579C14.0237 1.19526 13.3905 1.19526 13 1.58579L11.5858 3C11.1953 3.39053 11.1953 4.02369 11.5858 4.41422C11.9763 4.80474 12.6095 4.80474 13 4.41422L14.4142 3C14.8047 2.60948 14.8047 1.97631 14.4142 1.58579ZM7 5C5.89543 5 5 5.89543 5 7V9C5 10.1046 5.89543 11 7 11H9C10.1046 11 11 10.1046 11 9V7C11 5.89543 10.1046 5 9 5H7Z\"/></svg>,\r\n\t'worldgen/configured_carver': <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 24H4C1.79086 24 0 22.2091 2.47955e-06 20L3.09944e-06 19C1.5 20.5 4.5 22 7 21.5C9.5 21 10 19.7806 10 17.5C10 15 9.17881 12.9285 11.5 12C14 11 16 17 18.5 17.5C20.5 17.9 23 15.3333 24 14.5V20C24 22.2091 22.2091 24 20 24Z\"/><path d=\"M24 4V8C22.1667 9.66667 20.1125 11.8062 18.5 11C16.5 10 14 9 11.5 8.5C10.5194 8.30388 8.5 9 7.5 11C6.5 13 7.5 14.5 6.5 15.5C5.5 16.5 4.5 17 3.5 16C2.05778 14.5578 2 13 0 12.5L2.10762e-06 4C2.65539e-06 1.79086 1.79086 0 4 0H20C22.2091 0 24 1.79086 24 4Z\"/></svg>,\r\n\t'worldgen/configured_feature': <svg width=\"11\" height=\"18\" viewBox=\"0 0 11 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0 2C0 0.89543 0.895431 0 2 0H7C8.10457 0 9 0.895431 9 2V4C10.1046 4 11 4.89543 11 6V8C11 9.10457 10.1046 10 9 10H7C6.63571 10 6.29417 9.90261 6 9.73244L6 18H3V15H1C0.447715 15 0 14.5523 0 14V12C0 11.4477 0.447715 11 1 11H3L3 9H2C0.89543 9 0 8.10457 0 7V2Z\"/></svg>,\r\n\t'worldgen/configured_structure_feature': STRUCTURE,\r\n\t'worldgen/configured_surface_builder': <svg width=\"24\" height=\"20\" viewBox=\"0 0 24 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.21953 2.06398C0.59354 2.14445 0 1.68765 0 1.0565C0 0.611334 0.302132 0.217946 0.74016 0.138531C2.48644 -0.178075 4.18528 -0.0156892 5.5 1.29904C5.94949 1.74852 6.39898 2.38729 6.89388 3.09058L6.89388 3.09059C7.5 3.95195 8.17424 4.91009 9 5.73586C9.9499 6.68575 11.6497 7.21092 13.5 7.29903C15 7.37046 17.078 6.69683 18 6.23586C18.8772 5.79726 21.2934 5.40727 23.2235 5.61295C23.6802 5.66162 24 6.06324 24 6.52248C24 7.14603 23.4206 7.61579 22.7982 7.57749C20.9522 7.46389 18.8138 7.82895 18 8.23586C17.078 8.69683 15 9.37046 13.5 9.29904C11.6497 9.21092 9.9499 8.68575 9 7.73586C8.17424 6.91009 7.5 5.95195 6.89388 5.09059L6.89388 5.09059L6.89387 5.09058C6.39898 4.38729 5.94949 3.74852 5.5 3.29904C4.30594 2.10498 2.79505 1.86144 1.21953 2.06398ZM4 19.299H20C22.2091 19.299 24 17.5082 24 15.299V9.73586C22 9.29903 19 9.73586 18 10.2359C17.078 10.6968 15 11.3705 13.5 11.299C11.6497 11.2109 9.9499 10.6858 9 9.73586C8.17423 8.91009 7.5 7.95194 6.89388 7.09058C6.39898 6.38729 5.94949 5.74852 5.5 5.29903C4 3.79903 2 3.79904 0 4.29903V15.299C0 17.5082 1.79086 19.299 4 19.299Z\"/></svg>,\r\n\t'worldgen/density_function': <svg width=\"24\" height=\"19\" viewBox=\"0 0 24 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3.99999 19C3.44771 19 2.99999 18.5523 2.99999 18V16H0.999994C0.447709 16 -6.40123e-06 15.5523 -6.40123e-06 15C-6.40123e-06 14.4477 0.447709 14 0.999994 14H2.99999V6.50898C2.73742 6.59875 2.44791 6.71456 2.12858 6.86194C1.3764 7.2091 0.485216 6.88077 0.138056 6.12859C-0.209103 5.37641 0.11923 4.48522 0.871408 4.13806C1.62438 3.79054 2.33177 3.5433 2.99999 3.39632V1C2.99999 0.447716 3.44771 0 3.99999 0C4.55228 0 4.99999 0.447716 4.99999 1V3.2668C5.19676 3.28855 5.38996 3.32136 5.57983 3.36522C6.95063 3.68192 7.87758 4.51535 8.55369 5.26846C8.81818 5.56308 9.07365 5.88025 9.29728 6.15788L9.29731 6.15792C9.35241 6.22632 9.40557 6.29232 9.45646 6.35499C9.73181 6.69411 9.96489 6.96732 10.2004 7.19234C10.6367 7.60933 11.0034 7.79103 11.5 7.79103C13.4431 7.79103 14.7031 7.02516 16.2234 6.10111L16.4096 5.988C18.0133 5.01523 19.9627 3.89955 22.8254 4.53572C23.6341 4.71543 24.144 5.51669 23.9643 6.32539C23.7846 7.13409 22.9833 7.64399 22.1746 7.46428C20.5373 7.10044 19.4867 7.63028 17.9654 8.55302C17.8762 8.60715 17.7854 8.66264 17.6929 8.71915C16.2113 9.62479 14.3033 10.791 11.5 10.791C9.99661 10.791 8.92576 10.1238 8.12775 9.36127C7.74604 8.99651 7.41271 8.59727 7.12751 8.24603C7.06056 8.16357 6.99674 8.0844 6.93508 8.00791L6.9348 8.00757C6.71743 7.73792 6.52696 7.50165 6.3213 7.27257C5.84352 6.74037 5.44831 6.44194 4.99999 6.31296V14H23C23.5523 14 24 14.4477 24 15C24 15.5523 23.5523 16 23 16H4.99999V18C4.99999 18.5523 4.55228 19 3.99999 19Z\"/></svg>,\r\n\t'worldgen/flat_level_generator_preset': <svg width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M5 0C3.89543 0 3 0.895431 3 2V4C3 5.10457 3.89543 6 5 6V10H1C0.447715 10 0 10.4477 0 11C0 11.5523 0.447716 12 1 12H23C23.5523 12 24 11.5523 24 11C24 10.4477 23.5523 10 23 10H7V6C8.10457 6 9 5.10457 9 4V2C9 0.895431 8.10457 0 7 0H5ZM0 15C0 14.4477 0.447715 14 1 14H23C23.5523 14 24 14.4477 24 15V21C24 21.5523 23.5523 22 23 22H1C0.447716 22 0 21.5523 0 21V15Z\"/></svg>,\r\n\t'worldgen/noise': <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M28 0H5C7 5 3 8 0 8V25.5C2.5 31 6.64628 28.2245 11 23C13.5 20 18 19 17.5 32H28C30.2091 32 32 30.2091 32 28V21.5C27.754 23.044 24.104 20.4161 21.05 18.2174C20.148 17.568 19.298 16.956 18.5 16.5C15 14.5 17.953 6.1094 23.5 5C25.2216 4.65569 25.5205 4.78558 27.6624 5.71624C28.6308 6.13704 29.9761 6.72157 32 7.5V4C32 1.79086 30.2091 0 28 0ZM8.5 11.5C7.5 11 6.5 10.5 5 12C2.87868 14.1213 3.5 19.5 6.5 19C9.5 18.5 10 16 10 14.5C10 13.3 9.13246 11.8162 8.5 11.5Z\"/></svg>,\r\n\t'worldgen/noise_settings': <svg width=\"24\" height=\"19\" viewBox=\"0 0 24 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 18.299H4C1.79086 18.299 0 16.5082 0 14.299V3.29904C1.5 1 3.5 -1.5 6 2C7 3.4 7.5 7.23586 9 8.73586C9.9499 9.68576 11.3494 10.3408 13 9.5C14.5 8.73586 15 7 16.5 6.5C18.091 5.96967 22 8.29904 24 8.73586V14.299C24 16.5082 22.2091 18.299 20 18.299Z\"/></svg>,\r\n\t'worldgen/placed_feature': <svg width=\"15\" height=\"20\" viewBox=\"0 0 15 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11 0C9.89543 0 9 0.89543 9 2V4C9 5.10457 9.89543 6 11 6V9H10C8.89543 9 8 9.89543 8 11V13C8 14.1046 8.89543 15 10 15V19.5H12V15C13.1046 15 14 14.1046 14 13V11C14 10.2597 13.5978 9.61337 13 9.26756V6C14.1046 6 15 5.10457 15 4V2C15 0.895431 14.1046 0 13 0H11ZM2 5C0.895431 5 0 5.89543 0 7V9C0 10.1046 0.89543 11 2 11L2 15.5H4V11C5.10457 11 6 10.1046 6 9V7C6 5.89543 5.10457 5 4 5H2Z\"/></svg>,\r\n\t'worldgen/processor_list': <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.21973 0H4C1.79086 0 0 1.79086 0 4V5.82578L4.72912 3.27934L6.21973 0ZM0 8.0973V11H16.9613L17.9149 6.09189L11.6129 0H8.41664L6.48011 4.26037C6.34438 4.55898 6.11451 4.80487 5.82571 4.96037L5.43726 5.16954L7.99614 6.63176C8.47566 6.90577 8.64226 7.51662 8.36825 7.99614C8.09424 8.47566 7.48338 8.64225 7.00387 8.36824L3.50386 6.36824C3.45778 6.34191 3.41458 6.31246 3.37439 6.28032L0 8.0973ZM14.4905 0L17.5131 2.92179L19.4556 1.66116C19.9189 1.36051 20.5382 1.49235 20.8388 1.95563C21.1395 2.41891 21.0077 3.03819 20.5444 3.33884L18.9888 4.34834L19.5 4.84246C19.8649 5.19527 20.0267 5.70872 19.9299 6.20702L18.9987 11H24V4C24 1.79086 22.2091 0 20 0H14.4905ZM3.94591 14H0V20C0 22.2091 1.79086 24 4 24H11V19.1801L6.54232 18.1514L4.89443 21.4472C4.64744 21.9412 4.04677 22.1414 3.55279 21.8944C3.05881 21.6474 2.85859 21.0468 3.10558 20.5528L4.92033 16.9233L3.94591 14ZM11 17.1276V14H6.0541L6.77134 16.1517L11 17.1276ZM21.6247 17.7809C22.056 17.4359 22.1259 16.8066 21.7809 16.3753C21.4359 15.944 20.8066 15.8741 20.3753 16.2191L18.0071 18.1137C17.7506 18.3189 17.5686 18.6026 17.4889 18.9212L16.2192 24H14V14H24V20C24 22.2091 22.2091 24 20 24H18.2808L19.3883 19.57L21.6247 17.7809Z\"/></svg>,\r\n\t'worldgen/structure': STRUCTURE,\r\n\t'worldgen/structure_set': <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11 4L9.5376 4C9.05336 4 8.85189 3.38045 9.24351 3.09563L13.2059 0.21388C13.3812 0.0863707 13.6188 0.0863706 13.7941 0.21388L17.7565 3.09563C18.1481 3.38045 17.9467 4 17.4624 4L16 4V7C16 7.55228 15.5523 8 15 8H12C11.4477 8 11 7.55228 11 7V4ZM8.46241 7H0.537581C0.0533412 7 -0.148129 6.38045 0.243493 6.09563L4.2059 3.21388C4.38123 3.08637 4.61875 3.08637 4.79407 3.21388L8.75649 6.09563C9.14812 6.38045 8.94665 7 8.46241 7ZM6.99999 10V7H1.99999V10C1.99999 10.5523 2.4477 11 2.99999 11H5.99999C6.55227 11 6.99999 10.5523 6.99999 10ZM9.99999 17V14H8.5376C8.05336 14 7.85189 13.3804 8.24351 13.0956L12.2059 10.2139C12.3812 10.0864 12.6188 10.0864 12.7941 10.2139L16.7565 13.0956C17.1481 13.3804 16.9467 14 16.4624 14H15V17C15 17.5523 14.5523 18 14 18H11C10.4477 18 9.99999 17.5523 9.99999 17Z\"/></svg>,\r\n\t'worldgen/template_pool': <svg width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.2361 5C10.7111 4.46924 11 3.76835 11 3C11 1.34315 9.65685 0 8 0C6.34315 0 5 1.34315 5 3C5 3.76835 5.28885 4.46924 5.76389 5H3C1.34315 5 0 6.34315 0 8V10.1707C0.312779 10.0602 0.649365 10 1 10C2.65685 10 4 11.3431 4 13C4 14.6569 2.65685 16 1 16C0.649365 16 0.312779 15.9398 0 15.8293V18C0 19.6569 1.34315 21 3 21H5.17071C5.06015 20.6872 5 20.3506 5 20C5 18.3431 6.34315 17 8 17C9.65685 17 11 18.3431 11 20C11 20.3506 10.9398 20.6872 10.8293 21H13C14.6569 21 16 19.6569 16 18V15.8293C16.3128 15.9398 16.6494 16 17 16C18.6569 16 20 14.6569 20 13C20 11.3431 18.6569 10 17 10C16.6494 10 16.3128 10.0602 16 10.1707V8C16 6.34315 14.6569 5 13 5H10.2361Z\"/></svg>,\r\n\t'worldgen/world_preset': <svg width=\"28\" height=\"23\" viewBox=\"0 0 28 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15 2C15 0.89543 15.8954 0 17 0H19C20.1046 0 21 0.895431 21 2V4C21 5.10457 20.1046 6 19 6V9.88192C20.1705 9.67661 21.362 9.2558 22 8.93682C23 8.43682 26 8 28 8.43682V14C28 16.2091 26.2091 18 24 18H8C5.79086 18 4 16.2091 4 14V3C6 2.50001 8 2.5 9.5 4C9.94949 4.44949 10.399 5.08825 10.8939 5.79154L10.8939 5.79155C11.5 6.65291 12.1742 7.61106 13 8.43682C13.8636 9.30044 15.3471 9.81299 17 9.96519V6C15.8954 6 15 5.10457 15 4V2ZM22 20.2968H6C3.79086 20.2968 2 18.5059 2 16.2968V7C1.34604 7.01691 0.673018 7.12855 0 7.2968V18.2968C0 20.5059 1.79086 22.2968 4 22.2968H20C21.6222 22.2968 23.0189 21.3311 23.6465 19.9433C23.1444 20.1704 22.5869 20.2968 22 20.2968Z\"/></svg>,\r\n}\r\n","import type { JSX } from 'preact'\r\nimport { useCallback, useEffect } from 'preact/hooks'\r\nimport { LOSE_FOCUS } from '../hooks/index.js'\r\n\r\nconst MODALS_KEY = 'data-modals'\r\n\r\ninterface Props extends JSX.HTMLAttributes<HTMLDivElement> {\r\n\tonDismiss: () => void,\r\n}\r\nexport function Modal(props: Props) {\r\n\tuseEffect(() => {\r\n\t\taddCurrentModals(1)\r\n\t\twindow.addEventListener('click', props.onDismiss)\r\n\t\treturn () => {\r\n\t\t\taddCurrentModals(-1)\r\n\t\t\twindow.removeEventListener('click', props.onDismiss)\r\n\t\t}\r\n\t})\r\n\r\n\tconst onClick = useCallback((e: MouseEvent) => {\r\n\t\te.stopPropagation()\r\n\t\te.target?.dispatchEvent(new Event(LOSE_FOCUS, { bubbles: true }))\r\n\t}, [])\r\n\r\n\treturn <div {...props} class={`modal ${props.class ?? ''}`} onClick={onClick}>\r\n\t\t{props.children}\r\n\t</div>\r\n}\r\n\r\nfunction addCurrentModals(diff: number) {\r\n\tconst currentModals = parseInt(document.body.getAttribute(MODALS_KEY) ?? '0')\r\n\tconst newModals = currentModals + diff\r\n\tif (newModals <= 0) {\r\n\t\tdocument.body.removeAttribute(MODALS_KEY)\r\n\t} else {\r\n\t\tdocument.body.setAttribute(MODALS_KEY, newModals.toFixed())\r\n\t}\r\n}\r\n","export const Octicon = {\r\n\talert: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path></svg>,\r\n\tarchive: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5a.25.25 0 00-.25.25v1.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-1.5a.25.25 0 00-.25-.25H1.75zM0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v1.5A1.75 1.75 0 0114.25 6H1.75A1.75 1.75 0 010 4.25v-1.5zM1.75 7a.75.75 0 01.75.75v5.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25v-5.5a.75.75 0 111.5 0v5.5A1.75 1.75 0 0113.25 15H2.75A1.75 1.75 0 011 13.25v-5.5A.75.75 0 011.75 7zm4.5 1a.75.75 0 000 1.5h3.5a.75.75 0 100-1.5h-3.5z\"></path></svg>,\r\n\tarrow_left: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z\"></path></svg>,\r\n\tarrow_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z\"></path></svg>,\r\n\tarrow_switch: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M5.22 14.78a.75.75 0 0 0 1.06-1.06L4.56 12h8.69a.75.75 0 0 0 0-1.5H4.56l1.72-1.72a.75.75 0 0 0-1.06-1.06l-3 3a.75.75 0 0 0 0 1.06l3 3Zm5.56-6.5a.75.75 0 1 1-1.06-1.06l1.72-1.72H2.75a.75.75 0 0 1 0-1.5h8.69L9.72 2.28a.75.75 0 0 1 1.06-1.06l3 3a.75.75 0 0 1 0 1.06l-3 3Z\"></path></svg>,\r\n\tcheck: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\"></path></svg>,\r\n\tchevron_down: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>,\r\n\tchevron_left: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M9.78 12.78a.75.75 0 01-1.06 0L4.47 8.53a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L6.06 8l3.72 3.72a.75.75 0 010 1.06z\"></path></svg>,\r\n\tchevron_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z\"></path></svg>,\r\n\tchevron_up: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z\"></path></svg>,\r\n\tcircle_slash: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM3.965 13.096a6.5 6.5 0 0 0 9.131-9.131ZM1.5 8a6.474 6.474 0 0 0 1.404 4.035l9.131-9.131A6.499 6.499 0 0 0 1.5 8Z\"></path></svg>,\r\n\tclippy: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z\"></path></svg>,\r\n\tcode: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z\"></path></svg>,\r\n\tcodescan_checkmark: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M10.28 6.28a.75.75 0 10-1.06-1.06L6.25 8.19l-.97-.97a.75.75 0 00-1.06 1.06l1.5 1.5a.75.75 0 001.06 0l3.5-3.5z\"></path><path fill-rule=\"evenodd\" d=\"M7.5 15a7.469 7.469 0 004.746-1.693l2.474 2.473a.75.75 0 101.06-1.06l-2.473-2.474A7.5 7.5 0 107.5 15zm0-13.5a6 6 0 104.094 10.386.75.75 0 01.293-.292A6 6 0 007.5 1.5z\"></path></svg>,\r\n\tdiff_added: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25V2.75C1 1.784 1.784 1 2.75 1Zm10.5 1.5H2.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25ZM8 4a.75.75 0 0 1 .75.75v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5A.75.75 0 0 1 8 4Z\"></path></svg>,\r\n\tdiff_modified: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M13.25 1c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25V2.75C1 1.784 1.784 1 2.75 1ZM2.75 2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z\"></path></svg>,\r\n\tdiff_removed: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M13.25 1c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25V2.75C1 1.784 1.784 1 2.75 1ZM2.75 2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Zm8.5 6.25h-6.5a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5Z\"></path></svg>,\r\n\tdiff_renamed: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M13.25 1c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25V2.75C1 1.784 1.784 1 2.75 1ZM2.75 2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Zm9.03 6.03-3.25 3.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.97-1.97H4.75a.75.75 0 0 1 0-1.5h4.69L7.47 5.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l3.25 3.25a.75.75 0 0 1 0 1.06Z\"></path></svg>,\r\n\tdash: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2 8a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75A.75.75 0 012 8z\"></path></svg>,\r\n\tdevice_desktop: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5h12.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25zM14.25 1H1.75A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z\"></path></svg>,\r\n\tdot_fill: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8z\"></path></svg>,\r\n\tdownload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\r\n\tduplicate: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M10.5 3a.75.75 0 01.75.75v1h1a.75.75 0 010 1.5h-1v1a.75.75 0 01-1.5 0v-1h-1a.75.75 0 010-1.5h1v-1A.75.75 0 0110.5 3z\"></path><path fill-rule=\"evenodd\" d=\"M6.75 0A1.75 1.75 0 005 1.75v7.5c0 .966.784 1.75 1.75 1.75h7.5A1.75 1.75 0 0016 9.25v-7.5A1.75 1.75 0 0014.25 0h-7.5zM6.5 1.75a.25.25 0 01.25-.25h7.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5z\"></path><path d=\"M1.75 5A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h7.5A1.75 1.75 0 0011 14.25v-1.5a.75.75 0 00-1.5 0v1.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1.5a.75.75 0 000-1.5h-1.5z\"></path></svg>,\r\n\teye: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z\"></path></svg>,\r\n\teye_closed: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M.143 2.31a.75.75 0 011.047-.167l14.5 10.5a.75.75 0 11-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.618 1.618 0 010-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 01.143 2.31zm3.386 3.378a14.21 14.21 0 00-1.85 2.244.12.12 0 00-.022.068c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 016.058 7.52l-2.53-1.832zM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 11-.473-1.423A6.23 6.23 0 018 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.619 1.619 0 010 1.798c-.11.166-.248.365-.41.587a.75.75 0 11-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 000-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5z\"></path></svg>,\r\n\tfile: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z\"></path></svg>,\r\n\tfile_directory: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 1A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25v-8.5A1.75 1.75 0 0014.25 3h-6.5a.25.25 0 01-.2-.1l-.9-1.2c-.33-.44-.85-.7-1.4-.7h-3.5z\"></path></svg>,\r\n\tfile_zip: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.5 1.75a.25.25 0 01.25-.25h3a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h2.086a.25.25 0 01.177.073l2.914 2.914a.25.25 0 01.073.177v8.586a.25.25 0 01-.25.25h-.5a.75.75 0 000 1.5h.5A1.75 1.75 0 0014 13.25V4.664c0-.464-.184-.909-.513-1.237L10.573.513A1.75 1.75 0 009.336 0H3.75A1.75 1.75 0 002 1.75v11.5c0 .649.353 1.214.874 1.515a.75.75 0 10.752-1.298.25.25 0 01-.126-.217V1.75zM8.75 3a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM6 5.25a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5A.75.75 0 016 5.25zm2 1.5A.75.75 0 018.75 6h.5a.75.75 0 010 1.5h-.5A.75.75 0 018 6.75zm-1.25.75a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM8 9.75A.75.75 0 018.75 9h.5a.75.75 0 010 1.5h-.5A.75.75 0 018 9.75zm-.75.75a1.75 1.75 0 00-1.75 1.75v3c0 .414.336.75.75.75h2.5a.75.75 0 00.75-.75v-3a1.75 1.75 0 00-1.75-1.75h-.5zM7 12.25a.25.25 0 01.25-.25h.5a.25.25 0 01.25.25v2.25H7v-2.25z\"></path></svg>,\r\n\tflame: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.998 14.5c2.832 0 5-1.98 5-4.5 0-1.463-.68-2.19-1.879-3.383l-.036-.037c-1.013-1.008-2.3-2.29-2.834-4.434-.322.256-.63.579-.864.953-.432.696-.621 1.58-.046 2.73.473.947.67 2.284-.278 3.232-.61.61-1.545.84-2.403.633a2.788 2.788 0 01-1.436-.874A3.21 3.21 0 003 10c0 2.53 2.164 4.5 4.998 4.5zM9.533.753C9.496.34 9.16.009 8.77.146 7.035.75 4.34 3.187 5.997 6.5c.344.689.285 1.218.003 1.5-.419.419-1.54.487-2.04-.832-.173-.454-.659-.762-1.035-.454C2.036 7.44 1.5 8.702 1.5 10c0 3.512 2.998 6 6.498 6s6.5-2.5 6.5-6c0-2.137-1.128-3.26-2.312-4.438-1.19-1.184-2.436-2.425-2.653-4.81z\"></path></svg>,\r\n\tgear: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z\"></path></svg>,\r\n\tgit_commit: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M10.5 7.75a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.43.75a4.002 4.002 0 01-7.86 0H.75a.75.75 0 110-1.5h3.32a4.001 4.001 0 017.86 0h3.32a.75.75 0 110 1.5h-3.32z\"></path></svg>,\r\n\tglobe: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.543 7.25h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.506 6.506 0 00-4.666 5.5zm2.733 1.5H1.543a6.506 6.506 0 004.666 5.5 11.13 11.13 0 01-.352-.552c-.715-1.192-1.437-2.874-1.581-4.948zm1.504 0h4.44a9.637 9.637 0 01-1.363 4.177c-.306.51-.612.919-.857 1.215a9.978 9.978 0 01-.857-1.215A9.637 9.637 0 015.78 8.75zm4.44-1.5H5.78a9.637 9.637 0 011.363-4.177c.306-.51.612-.919.857-1.215.245.296.55.705.857 1.215A9.638 9.638 0 0110.22 7.25zm1.504 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.506 6.506 0 004.666-5.5h-2.733zm2.733-1.5h-2.733c-.144-2.074-.866-3.756-1.58-4.948a11.738 11.738 0 00-.353-.552 6.506 6.506 0 014.666 5.5zM8 0a8 8 0 100 16A8 8 0 008 0z\"></path></svg>,\r\n\theart: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z\"></path></svg>,\r\n\thistory: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z\"></path></svg>,\r\n\tinfo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path></svg>,\r\n\tissue_opened: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z\"></path></svg>,\r\n\tkebab_horizontal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\"></path></svg>,\r\n\tlink: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg>,\r\n\tlink_external: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M10.604 1h4.146a.25.25 0 01.25.25v4.146a.25.25 0 01-.427.177L13.03 4.03 9.28 7.78a.75.75 0 01-1.06-1.06l3.75-3.75-1.543-1.543A.25.25 0 0110.604 1zM3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z\"></path></svg>,\r\n\tlock: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M4 4a4 4 0 0 1 8 0v2h.25c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 12.25 15h-8.5A1.75 1.75 0 0 1 2 13.25v-5.5C2 6.784 2.784 6 3.75 6H4Zm8.25 3.5h-8.5a.25.25 0 0 0-.25.25v5.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25ZM10.5 6V4a2.5 2.5 0 1 0-5 0v2Z\"></path></svg>,\r\n\tmark_github: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>,\r\n\tmegaphone: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M3.25 9a.75.75 0 0 1 .75.75c0 2.142.456 3.828.733 4.653a.122.122 0 0 0 .05.064.212.212 0 0 0 .117.033h1.31c.085 0 .18-.042.258-.152a.45.45 0 0 0 .075-.366A16.743 16.743 0 0 1 6 9.75a.75.75 0 0 1 1.5 0c0 1.588.25 2.926.494 3.85.293 1.113-.504 2.4-1.783 2.4H4.9c-.686 0-1.35-.41-1.589-1.12A16.4 16.4 0 0 1 2.5 9.75.75.75 0 0 1 3.25 9Z\"></path><path d=\"M0 6a4 4 0 0 1 4-4h2.75a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-.75.75H4a4 4 0 0 1-4-4Zm4-2.5a2.5 2.5 0 1 0 0 5h2v-5Z\"></path><path d=\"M15.59.082A.75.75 0 0 1 16 .75v10.5a.75.75 0 0 1-1.189.608l-.002-.001h.001l-.014-.01a5.775 5.775 0 0 0-.422-.25 10.63 10.63 0 0 0-1.469-.64C11.576 10.484 9.536 10 6.75 10a.75.75 0 0 1 0-1.5c2.964 0 5.174.516 6.658 1.043.423.151.787.302 1.092.443V2.014c-.305.14-.669.292-1.092.443C11.924 2.984 9.713 3.5 6.75 3.5a.75.75 0 0 1 0-1.5c2.786 0 4.826-.484 6.155-.957.665-.236 1.154-.47 1.47-.64.144-.077.284-.161.421-.25l.014-.01a.75.75 0 0 1 .78-.061Z\"></path></svg>,\r\n\tmoon: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z\"></path></svg>,\r\n\tmortar_board: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M7.693 1.066a.747.747 0 0 1 .614 0l7.25 3.25a.75.75 0 0 1 0 1.368L13 6.831v2.794c0 1.024-.81 1.749-1.66 2.173-.893.447-2.075.702-3.34.702-.278 0-.55-.012-.816-.036a.75.75 0 0 1 .133-1.494c.22.02.45.03.683.03 1.082 0 2.025-.221 2.67-.543.69-.345.83-.682.83-.832V7.503L8.307 8.934a.747.747 0 0 1-.614 0L4 7.28v1.663c.296.105.575.275.812.512.438.438.688 1.059.688 1.796v3a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75v-3c0-.737.25-1.358.688-1.796.237-.237.516-.407.812-.512V6.606L.443 5.684a.75.75 0 0 1 0-1.368ZM2.583 5 8 7.428 13.416 5 8 2.572ZM2.5 11.25v2.25H4v-2.25c0-.388-.125-.611-.25-.735a.697.697 0 0 0-.5-.203.707.707 0 0 0-.5.203c-.125.124-.25.347-.25.735Z\"></path></svg>,\r\n\tpackage: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.878.392a1.75 1.75 0 00-1.756 0l-5.25 3.045A1.75 1.75 0 001 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 001.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 01.25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271l4.625-2.683a.25.25 0 00.125-.216V5.677L8.75 8.432v5.516z\"></path></svg>,\r\n\tpencil: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z\"></path></svg>,\r\n\tplay: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM6.379 5.227A.25.25 0 006 5.442v5.117a.25.25 0 00.379.214l4.264-2.559a.25.25 0 000-.428L6.379 5.227z\"></path></svg>,\r\n\tplus: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2a.75.75 0 01.75.75v4.5h4.5a.75.75 0 010 1.5h-4.5v4.5a.75.75 0 01-1.5 0v-4.5h-4.5a.75.75 0 010-1.5h4.5v-4.5A.75.75 0 018 2z\"></path></svg>,\r\n\tplus_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zm.75 4.75a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h2.5v2.5a.75.75 0 001.5 0v-2.5h2.5a.75.75 0 000-1.5h-2.5v-2.5z\"></path></svg>,\r\n\tquestion: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>,\r\n\trepo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z\"></path></svg>,\r\n\trocket: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z\"></path></svg>,\r\n\trows: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M16 2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v2.5A1.75 1.75 0 001.75 7h12.5A1.75 1.75 0 0016 5.25v-2.5zm-1.75-.25a.25.25 0 01.25.25v2.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-2.5a.25.25 0 01.25-.25h12.5zM16 10.75A1.75 1.75 0 0014.25 9H1.75A1.75 1.75 0 000 10.75v2.5A1.75 1.75 0 001.75 15h12.5A1.75 1.75 0 0016 13.25v-2.5zm-1.75-.25a.25.25 0 01.25.25v2.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-2.5a.25.25 0 01.25-.25h12.5z\"></path></svg>,\r\n\tsearch: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z\"></path></svg>,\r\n\tsort_asc: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 4.25a.75.75 0 01.75-.75h2.5a.75.75 0 010 1.5H.75A.75.75 0 010 4.25zm0 4a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75A.75.75 0 010 8.25zm0 4a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75zm12.927-9.677a.25.25 0 00-.354 0l-3 3A.25.25 0 009.75 6H12v6.75a.75.75 0 001.5 0V6h2.25a.25.25 0 00.177-.427l-3-3z\"></path></svg>,\r\n\tsort_desc: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 4.25a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5H.75A.75.75 0 010 4.25zm0 4a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75A.75.75 0 010 8.25zm0 4a.75.75 0 01.75-.75h2.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75z\"></path><path d=\"M13.5 10h2.25a.25.25 0 01.177.427l-3 3a.25.25 0 01-.354 0l-3-3A.25.25 0 019.75 10H12V3.75a.75.75 0 011.5 0V10z\"></path></svg>,\r\n\tsquare: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4 5.75C4 4.784 4.784 4 5.75 4h4.5c.966 0 1.75.784 1.75 1.75v4.5A1.75 1.75 0 0110.25 12h-4.5A1.75 1.75 0 014 10.25v-4.5zm1.75-.25a.25.25 0 00-.25.25v4.5c0 .138.112.25.25.25h4.5a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-4.5z\"></path></svg>,\r\n\tsquare_fill: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M5.75 4A1.75 1.75 0 004 5.75v4.5c0 .966.784 1.75 1.75 1.75h4.5A1.75 1.75 0 0012 10.25v-4.5A1.75 1.75 0 0010.25 4h-4.5z\"></path></svg>,\r\n\tstack: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.122.392a1.75 1.75 0 011.756 0l5.003 2.902c.83.481.83 1.68 0 2.162L8.878 8.358a1.75 1.75 0 01-1.756 0L2.119 5.456a1.25 1.25 0 010-2.162L7.122.392zM8.125 1.69a.25.25 0 00-.25 0l-4.63 2.685 4.63 2.685a.25.25 0 00.25 0l4.63-2.685-4.63-2.685zM1.601 7.789a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0L1.874 8.814A.75.75 0 011.6 7.789zm0 3.5a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0l-5.248-3.044a.75.75 0 01-.273-1.025z\"></path></svg>,\r\n\tsun: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z\"></path></svg>,\r\n\tsync: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z\"></path></svg>,\r\n\ttag: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z\"></path></svg>,\r\n\tterminal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75zm1.75-.25a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25H1.75zM7.25 8a.75.75 0 01-.22.53l-2.25 2.25a.75.75 0 11-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 111.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z\"></path></svg>,\r\n\tthree_bars: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z\"></path></svg>,\r\n\ttrashcan: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z\"></path></svg>,\r\n\tundo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M1.22 6.28a.749.749 0 0 1 0-1.06l3.5-3.5a.749.749 0 1 1 1.06 1.06L3.561 5h7.188l.001.007L10.749 5c.058 0 .116.007.171.019A4.501 4.501 0 0 1 10.5 14H8.796a.75.75 0 0 1 0-1.5H10.5a3 3 0 1 0 0-6H3.561L5.78 8.72a.749.749 0 1 1-1.06 1.06l-3.5-3.5Z\"></path></svg>,\r\n\tunfold: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8.177.677l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25a.75.75 0 01-1.5 0V4H5.104a.25.25 0 01-.177-.427L7.823.677a.25.25 0 01.354 0zM7.25 10.75a.75.75 0 011.5 0V12h2.146a.25.25 0 01.177.427l-2.896 2.896a.25.25 0 01-.354 0l-2.896-2.896A.25.25 0 015.104 12H7.25v-1.25zm-5-2a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z\"></path></svg>,\r\n\tunlock: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M5.5 4v2h7A1.5 1.5 0 0 1 14 7.5v6a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5v-6A1.5 1.5 0 0 1 3.499 6H4V4a4 4 0 0 1 7.371-2.154.75.75 0 0 1-1.264.808A2.5 2.5 0 0 0 5.5 4Zm-2 3.5v6h9v-6h-9Z\"></path></svg>,\r\n\tupload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.53 1.22a.75.75 0 00-1.06 0L3.72 4.97a.75.75 0 001.06 1.06l2.47-2.47v6.69a.75.75 0 001.5 0V3.56l2.47 2.47a.75.75 0 101.06-1.06L8.53 1.22zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\r\n\tx: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\"></path></svg>,\r\n\tx_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.404 12.596a6.5 6.5 0 119.192-9.192 6.5 6.5 0 01-9.192 9.192zM2.344 2.343a8 8 0 1011.313 11.314A8 8 0 002.343 2.343zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z\"></path></svg>,\r\n}\r\n","import { Icons } from './Icons.js'\r\nimport { Octicon } from './Octicon.jsx'\r\n\r\ninterface Props {\r\n\ttitle: string,\r\n\ttitleIcon?: keyof typeof Octicon | keyof typeof Icons,\r\n\tlink: string,\r\n\ticon?: keyof typeof Icons,\r\n\tdesc?: string,\r\n}\r\nexport function ToolCard({ title, desc, link, icon, titleIcon }: Props) {\r\n\tif (icon || desc) {\r\n\t\treturn <a class=\"tool-card\" href={link}>\r\n\t\t\t{icon && Icons[icon]}\r\n\t\t\t<div>\r\n\t\t\t\t<ToolHead title={title} titleIcon={titleIcon} />\r\n\t\t\t\t<p>{desc}</p>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t}\r\n\r\n\treturn <a class=\"tool-card\" href={link}>\r\n\t\t<ToolHead title={title} titleIcon={titleIcon} />\r\n\t</a>\r\n}\r\n\r\nfunction ToolHead({ title, titleIcon }: Pick<Props, 'title' | 'titleIcon'>) {\r\n\treturn <h3 class=\"text-[1.17em]\">\r\n\t\t{title}\r\n\t\t{titleIcon && (titleIcon in Octicon ? (Octicon as any)[titleIcon] : (Icons as any)[titleIcon])}\r\n\t</h3>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport type { Icons } from './Icons.jsx'\r\nimport type { Octicon } from './Octicon.jsx'\r\nimport { ToolCard } from './ToolCard.jsx'\r\n\r\ninterface Props {\r\n\ttitle: string,\r\n\ttitleIcon?: keyof typeof Octicon | keyof typeof Icons,\r\n\tlink?: string,\r\n\tchildren?: ComponentChildren,\r\n}\r\nexport function ToolGroup({ title, titleIcon, link, children }: Props) {\r\n\treturn <div class=\"tool-group\">\r\n\t\t{link === undefined\r\n\t\t\t? <div class=\"tool-card\"><h3 class=\"text-[1.17em]\">{title}</h3></div>\r\n\t\t\t: <ToolCard {...{ title, titleIcon, link}} />\r\n\t\t}\r\n\t\t{children && <div class=\"tool-body\">\r\n\t\t\t{children}\r\n\t\t</div>}\r\n\t</div>\r\n}\r\n","import { useMemo, useState } from 'preact/hooks'\r\n\r\nexport type TreeViewGroupRenderer = (props: { name: string, open: boolean, onClick: () => void }) => JSX.Element\r\nexport type TreeViewLeafRenderer<E> = (props: { entry: E }) => JSX.Element\r\n\r\ninterface Props<E> {\r\n\tentries: E[],\r\n\tsplit: (entry: E) => string[],\r\n\tgroup: TreeViewGroupRenderer,\r\n\tleaf: TreeViewLeafRenderer<E>,\r\n\tlevel?: number,\r\n}\r\n\r\nexport function TreeView<E>({ entries, split, group: Group, leaf: Leaf, level = 0 }: Props<E>) {\r\n\tconst roots = useMemo(() => {\r\n\t\tconst groups: Record<string, E[]> = {}\r\n\t\tfor (const entry of entries) {\r\n\t\t\tconst path = split(entry)\r\n\t\t\tif (path[level + 1] !== undefined) {\r\n\t\t\t\t;(groups[path[level]] ??= []).push(entry)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn groups\r\n\t}, [entries, split, level])\r\n\r\n\tconst leaves = useMemo(() => {\r\n\t\treturn entries.filter(e => split(e).length === level + 1)\r\n\t}, [entries, split, level])\r\n\r\n\tconst [hidden, setHidden] = useState(new Set<string>())\r\n\tconst toggle = (root: string) => {\r\n\t\tif (hidden.has(root)) {\r\n\t\t\thidden.delete(root)\r\n\t\t} else {\r\n\t\t\thidden.add(root)\r\n\t\t}\r\n\t\tsetHidden(new Set(hidden))\r\n\t}\r\n\r\n\treturn <div class=\"tree-view\" style={`--indent: ${level};`}>\r\n\t\t{Object.entries(roots).map(([r, childs]) => <>\r\n\t\t\t<Group name={r} open={!hidden.has(r)} onClick={() => toggle(r)} />\r\n\t\t\t{!hidden.has(r) &&\r\n\t\t\t\t<TreeView<E> entries={childs} split={split} group={Group} leaf={Leaf} level={level + 1} />}\r\n\t\t</>)}\r\n\t\t{leaves.map(e => <Leaf key={split(e).join('/')} entry={e} />)}\r\n\t</div>\r\n}\r\n","import { useMemo, useState } from 'preact/hooks'\r\nimport config from '../Config.js'\r\nimport { Store } from '../Store.js'\r\nimport { useLocale } from '../contexts/index.js'\r\nimport type { VersionId } from '../services/index.js'\r\nimport { Btn } from './Btn.js'\r\nimport { BtnMenu } from './BtnMenu.js'\r\n\r\ninterface Props {\r\n\tvalue?: VersionId,\r\n\tallowed?: VersionId[],\r\n\thasAny?: boolean,\r\n\tonChange: (version: VersionId) => void,\r\n\tonAny?: () => void,\r\n}\r\nexport function VersionSwitcher({ value, allowed, hasAny, onChange, onAny }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst [showMore, setShowMore] = useState(false)\r\n\r\n\tconst versions = useMemo(() => {\r\n\t\tif (allowed) {\r\n\t\t\treturn allowed\r\n\t\t\t\t.map(a => config.versions.find(v => v.id === a)!)\r\n\t\t\t\t.filter(v => v !== undefined)\r\n\t\t}\r\n\t\treturn [...config.versions].reverse()\r\n\t}, [allowed])\r\n\r\n\tconst hasMoreVersions = useMemo(() => {\r\n\t\treturn versions.some(v => !(v.show || v.id === value))\r\n\t}, [])\r\n\r\n\tconst shownVersions = useMemo(() => {\r\n\t\treturn versions.filter(v => v.show || v.id === value || showMore)\r\n\t}, [versions, showMore, value])\r\n\r\n\treturn <BtnMenu class={`version-switcher${Store.getVersion() === null ? ' attention' : ''}`} icon=\"tag\" label={value ?? locale('any_version')} tooltip={locale('switch_version')}>\r\n\t\t{hasAny && <Btn label={locale('any_version')} onClick={onAny} active={!value} />}\r\n\t\t{shownVersions.map(v => \r\n\t\t\t<Btn label={v.name} active={v.id === value} onClick={() => onChange(v.id)} />)}\r\n\t\t{!showMore && hasMoreVersions && <Btn icon=\"chevron_down\" label=\"More\" onClick={e => {setShowMore(true);e.stopPropagation()}} />}\r\n\t</BtnMenu>\r\n}\r\n","import { hexId } from '../../Utils.js'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\tvalue: boolean,\r\n\tonChange: (value: boolean) => unknown,\r\n}\r\nexport function Checkbox({ label, value, onChange }: Props) {\r\n\tconst id = hexId()\r\n\treturn <label class=\"checkbox\">\r\n\t\t<input id={id} type=\"checkbox\" checked={value} onClick={() => onChange(!value)} />\r\n\t\t{label}\r\n\t</label>\r\n}\r\n","import type { JSX } from 'preact'\r\nimport { useEffect, useRef } from 'preact/hooks'\r\n\r\ntype InputProps = JSX.HTMLAttributes<HTMLInputElement>\r\n\r\ntype BaseInputProps<T> = Omit<InputProps, 'onChange' | 'type'> & {\r\n\tonChange?: (value: T) => unknown,\r\n\tonEnter?: (value: T) => unknown,\r\n\tonCancel?: () => unknown,\r\n}\r\nfunction BaseInput<T>(name: string, type: string, fn: (value: string) => T) {\r\n\tconst component = (props: BaseInputProps<T>) => {\r\n\t\tconst onChange = props.onChange && ((evt: Event) => {\r\n\t\t\tconst value = (evt.target as HTMLInputElement).value\r\n\t\t\tprops.onChange?.(fn(value))\r\n\t\t})\r\n\t\tconst onKeyDown = props.onEnter && ((evt: KeyboardEvent) => {\r\n\t\t\tif (evt.key === 'Enter') {\r\n\t\t\t\tconst value = (evt.target as HTMLInputElement).value\r\n\t\t\t\tprops.onEnter?.(fn(value))\r\n\t\t\t} else if (evt.key === 'Escape') {\r\n\t\t\t\tprops.onCancel?.()\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst ref = useRef<HTMLInputElement>(null)\r\n\t\tuseEffect(() => {\r\n\t\t\tif (props.autofocus) {\r\n\t\t\t\tref.current?.select()\r\n\t\t\t}\r\n\t\t}, [props.autofocus])\r\n\t\treturn <input ref={ref} {...props} {...{ type, onChange, onKeyDown }} />\r\n\t}\r\n\tcomponent.displayName = name\r\n\treturn component\r\n}\r\n\r\nexport const TextInput = BaseInput('TextInput', 'text', v => v)\r\n\r\nexport const NumberInput = BaseInput('NumberInput', 'number', v => Number(v))\r\n\r\nexport const RangeInput = BaseInput('RangeInput', 'range', v => Number(v))\r\n","import { useMemo, useState } from 'preact/hooks'\r\nimport { Btn, BtnInput } from '../index.js'\r\n\r\ninterface Props {\r\n\tvalues?: string[],\r\n\tonSelect?: (value: string) => unknown,\r\n\tsearchPlaceholder?: string,\r\n\tnoResults?: string,\r\n}\r\nexport function SearchList({ values, onSelect, searchPlaceholder, noResults }: Props) {\r\n\tconst [search, setSearch] = useState('')\r\n\tconst results = useMemo(() => {\r\n\t\tconst terms = search.trim().split(' ')\r\n\t\treturn values?.filter(v => terms.every(t => v.includes(t))) ?? []\r\n\t}, [values, search])\r\n\r\n\treturn <>\r\n\t\t<BtnInput icon=\"search\" large value={search} onChange={setSearch} doSelect={1} placeholder={searchPlaceholder ?? 'Search'} />\r\n\t\t<div class=\"result-list\">\r\n\t\t\t{results.map(v => <Btn key={v} label={v} onClick={() => onSelect?.(v)} />)}\r\n\t\t\t{results.length === 0 && <Btn label={noResults ?? 'No results'}/>}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { useState } from 'preact/hooks'\r\nimport { Analytics } from '../../Analytics.js'\r\nimport { useLocale, useProject } from '../../contexts/index.js'\r\nimport { Btn } from '../Btn.js'\r\nimport { TextInput } from '../forms/index.js'\r\nimport { Modal } from '../Modal.js'\r\n\r\ninterface Props {\r\n\tmodel: DataModel,\r\n\tid: string,\r\n\tmethod: string,\r\n\tonClose: () => void,\r\n}\r\nexport function FileCreation({ model, id, method, onClose }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { projects, project, updateFile } = useProject()\r\n\tconst [fileId, setFileId] = useState(id === 'pack_mcmeta' ? 'pack' : '')\r\n\r\n\tconst doSave = () => {\r\n\t\tAnalytics.saveProjectFile(id, projects.length, project.files.length, method as any)\r\n\t\tupdateFile(id, undefined, { type: id, id: fileId, data: DataModel.unwrapLists(model.data) })\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn <Modal class=\"file-modal\" onDismiss={onClose}>\r\n\t\t<p>{locale('project.save_current_file')}</p>\r\n\t\t<TextInput autofocus={id !== 'pack_mcmeta'} class=\"btn btn-input\" value={fileId} onChange={setFileId} onEnter={doSave} onCancel={onClose} placeholder={locale('resource_location')} spellcheck={false} readOnly={id === 'pack_mcmeta'} />\r\n\t\t<Btn icon=\"file\" label={locale('project.save')} onClick={doSave} />\r\n\t</Modal>\r\n}\r\n","import { useState } from 'preact/hooks'\r\nimport { Analytics } from '../../Analytics.js'\r\nimport { useLocale, useProject } from '../../contexts/index.js'\r\nimport { Btn } from '../Btn.js'\r\nimport { TextInput } from '../forms/index.js'\r\nimport { Modal } from '../Modal.js'\r\n\r\ninterface Props {\r\n\tid: string,\r\n\tname: string,\r\n\tonClose: () => void,\r\n}\r\nexport function FileRenaming({ id, name, onClose }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { projects, project, updateFile } = useProject()\r\n\tconst [fileId, setFileId] = useState(name)\r\n\r\n\tconst doSave = () => {\r\n\t\tAnalytics.renameProjectFile(id, projects.length, project.files.length, 'menu')\r\n\t\tupdateFile(id, name, { type: id, id: fileId })\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn <Modal class=\"file-modal\" onDismiss={onClose}>\r\n\t\t<p>{locale('project.rename_file')}</p>\r\n\t\t<TextInput autofocus class=\"btn btn-input\" value={fileId} onChange={setFileId} onEnter={doSave} placeholder={locale('resource_location')} spellcheck={false} />\r\n\t\t<Btn icon=\"pencil\" label={locale('project.rename')} onClick={doSave} />\r\n\t</Modal>\r\n}\r\n","import { useMemo } from 'preact/hooks'\r\nimport type { ConfigGenerator } from '../../Config.js'\r\nimport config from '../../Config.js'\r\nimport { cleanUrl } from '../../Utils.js'\r\nimport { useLocale } from '../../contexts/Locale.jsx'\r\nimport type { VersionId } from '../../services/Schemas.js'\r\nimport { checkVersion } from '../../services/Schemas.js'\r\nimport { Badge, Card, Icons, ToolCard } from '../index.js'\r\n\r\nconst VERSION_SEP = '  '\r\n\r\ninterface Props {\r\n\tid: string,\r\n\tminimal?: boolean,\r\n}\r\nexport function GeneratorCard({ id, minimal }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst gen = useMemo<ConfigGenerator>(() => {\r\n\t\tconst gen = config.generators.find(g => g.id === id)\r\n\t\tif (gen === undefined) {\r\n\t\t\treturn { id, schema: id, url: id }\r\n\t\t}\r\n\t\treturn gen\r\n\t}, [id])\r\n\r\n\tconst title = locale(`generator.${gen.id}`)\r\n\r\n\tconst icon = Object.keys(Icons).includes(id) ? id as keyof typeof Icons : undefined\r\n\r\n\tif (minimal) {\r\n\t\treturn <ToolCard title={title} link={cleanUrl(gen.url)} titleIcon={icon} />\r\n\t}\r\n\r\n\tconst versions = useMemo(() => {\r\n\t\tif (!gen) return []\r\n\t\treturn config.versions\r\n\t\t\t.filter(v => checkVersion(v.id, gen.minVersion, gen.maxVersion))\r\n\t\t\t.map(v => v.id as VersionId)\r\n\t}, [gen])\r\n\r\n\tconst versionText = useMemo(() => {\r\n\t\tif (versions.length <= 5) {\r\n\t\t\treturn versions.join(VERSION_SEP)\r\n\t\t}\r\n\t\treturn versions[0] + VERSION_SEP\r\n\t\t\t+ '...' + VERSION_SEP\r\n\t\t\t+ versions.slice(-3).join(VERSION_SEP)\r\n\t}, [versions])\r\n\r\n\tconst tags = useMemo(() => {\r\n\t\tif (gen.tags?.includes('assets')) return ['resource-pack']\r\n\t\treturn []\r\n\t}, [gen])\r\n\r\n\treturn <Card title={<>{title}{icon && Icons[icon]}</>} overlay={gen.tags?.includes('partners') ? locale(`partner.${gen.id.substring(0, gen.id.indexOf('.'))}`) : versionText} link={cleanUrl(gen.url)}>\r\n\t\t{!gen.noPath && <p class=\"card-subtitle\">/{gen.path ?? gen.id}</p>}\r\n\t\t{tags.length > 0 && <div class=\"badges-list\">\r\n\t\t\t{tags.sort().map(tag => <Badge label={tag} />)}\r\n\t\t</div>}\r\n\t</Card>\r\n}\r\n","import { useMemo, useState } from 'preact/hooks'\r\nimport type { ConfigGenerator } from '../../Config.js'\r\nimport config from '../../Config.js'\r\nimport { useLocale, useVersion } from '../../contexts/index.js'\r\nimport { checkVersion } from '../../services/Schemas.js'\r\nimport { GeneratorCard, TextInput, VersionSwitcher } from '../index.js'\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n\tpredicate?: (gen: ConfigGenerator) => boolean | undefined,\r\n}\r\nexport function GeneratorList({ predicate }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version, changeVersion } = useVersion()\r\n\r\n\tconst [search, setSearch] = useState('')\r\n\r\n\tconst [versionFilter, setVersionFiler] = useState(true)\r\n\r\n\tconst versionedGenerators = useMemo(() => {\r\n\t\treturn config.generators.filter(gen => {\r\n\t\t\tif (predicate === undefined || !predicate(gen)) return false\r\n\t\t\tif (versionFilter === false) return true\r\n\t\t\treturn checkVersion(version, gen.minVersion, gen.maxVersion)\r\n\t\t})\r\n\t}, [version, versionFilter])\r\n\r\n\tconst filteredGenerators = useMemo(() => {\r\n\t\tconst query = search.split(' ').map(q => q.trim().toLowerCase()).filter(q => q.length > 0)\r\n\t\treturn versionedGenerators.filter(gen => {\r\n\t\t\tconst content = `${gen.id} ${gen.tags?.join(' ') ?? ''} ${gen.path ?? ''} ${locale(`generator.${gen.id}`).toLowerCase()}`\r\n\t\t\treturn query.every(q => {\r\n\t\t\t\tif (q.startsWith('!')) {\r\n\t\t\t\t\treturn q.length === 1 || !content.includes(q.slice(1))\r\n\t\t\t\t}\r\n\t\t\t\treturn content.includes(q)\r\n\t\t\t})\r\n\t\t})\r\n\t}, [versionedGenerators, search, locale])\r\n\r\n\treturn <div class=\"generator-list\">\r\n\t\t<div class=\"navigation\">\r\n\t\t\t<TextInput class=\"btn btn-input query-search\" placeholder={locale('generators.search')} value={search} onChange={setSearch} autofocus />\r\n\t\t\t<VersionSwitcher value={versionFilter ? version : undefined} onChange={v => {changeVersion(v); setVersionFiler(true)}} hasAny onAny={() => setVersionFiler(false)} />\r\n\t\t</div>\r\n\t\t{filteredGenerators.length === 0 ? <>\r\n\t\t\t<span class=\"note\">{locale('generators.no_results')}</span>\r\n\t\t</> : <div class=\"card-column\">\r\n\t\t\t{filteredGenerators.map(gen =>\r\n\t\t\t\t<GeneratorCard id={gen.id} />\r\n\t\t\t)}\r\n\t\t</div>}\r\n\t</div>\r\n}\r\n","import { useCallback } from 'preact/hooks'\r\nimport { Analytics } from '../../Analytics.js'\r\nimport { Store } from '../../Store.js'\r\nimport { Btn } from '../Btn.jsx'\r\nimport { BtnMenu } from '../BtnMenu.jsx'\r\nimport type { ColormapType } from './Colormap.js'\r\nimport { ColormapTypes } from './Colormap.js'\r\n\r\ninterface Props {\r\n\tvalue: ColormapType,\r\n\tonChange: (value: ColormapType) => void,\r\n}\r\nexport function ColormapSelector({ value, onChange }: Props) {\r\n\tconst doChange = useCallback((type: ColormapType) => {\r\n\t\tAnalytics.setColormap(type)\r\n\t\tStore.setColormap(type)\r\n\t\tonChange(type)\r\n\t}, [onChange])\r\n\r\n\treturn <BtnMenu icon=\"flame\">\r\n\t\t{ColormapTypes.map(type => <Btn label={type} onClick={() => doChange(type)} active={value === type} />)}\r\n\t</BtnMenu>\r\n}\r\n","import * as deepslate19 from 'deepslate/worldgen'\r\nimport { clamp, computeIfAbsent, computeIfAbsentAsync, deepClone, deepEqual, isObject, square } from '../../Utils.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { checkVersion, fetchAllPresets, fetchPreset } from '../../services/index.js'\r\n\r\nexport type ProjectData = Record<string, Record<string, unknown>>\r\n\r\nconst DYNAMIC_REGISTRIES = new Set([\r\n\t'minecraft:worldgen/noise',\r\n\t'minecraft:worldgen/density_function',\r\n\t'minecraft:worldgen/noise_settings',\r\n])\r\n\r\nexport class Deepslate {\r\n\tprivate d = deepslate19\r\n\tprivate loadedVersion: VersionId | undefined\r\n\tprivate loadingVersion: VersionId | undefined\r\n\tprivate loadingPromise: Promise<void> | undefined\r\n\tprivate readonly deepslateCache = new Map<VersionId, typeof deepslate19>()\r\n\tprivate readonly Z = 0\r\n\r\n\tprivate cacheState: unknown\r\n\tprivate settingsCache: NoiseSettings | undefined\r\n\tprivate routerCache: NoiseRouter | undefined\r\n\tprivate generatorCache: ChunkGenerator | undefined\r\n\tprivate biomeSourceCache: BiomeSource | undefined\r\n\tprivate randomStateCache: deepslate19.RandomState | undefined\r\n\tprivate structureContextCache: deepslate19.WorldgenStructure.GenerationContext | undefined\r\n\tprivate chunksCache: Chunk[] = []\r\n\tprivate biomeCache: Map<string, string> = new Map()\r\n\tprivate readonly presetCache: Map<string, unknown> = new Map()\r\n\r\n\tpublic async loadVersion(version: VersionId, project?: ProjectData) {\r\n\t\tif (this.loadedVersion === version) {\r\n\t\t\tthis.applyProjectData(version, project)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (this.loadingVersion !== version || !this.loadingPromise) {\r\n\t\t\tthis.loadingVersion = version\r\n\t\t\tthis.loadingPromise = this.doLoadVersion(version, project)\r\n\t\t}\r\n\t\treturn this.loadingPromise\r\n\t}\r\n\r\n\tprivate async doLoadVersion(version: VersionId, project?: ProjectData) {\r\n\t\tconst cachedDeepslate = this.deepslateCache.get(version)\r\n\t\tif (cachedDeepslate) {\r\n\t\t\tthis.d = cachedDeepslate\r\n\t\t} else {\r\n\t\t\tif (checkVersion(version, '1.19')) {\r\n\t\t\t\tthis.d = deepslate19\r\n\t\t\t} else if (checkVersion(version, '1.18.2')) {\r\n\t\t\t\tthis.d = await import('deepslate-1.18.2') as any\r\n\t\t\t} else {\r\n\t\t\t\tthis.d = await import('deepslate-1.18') as any\r\n\t\t\t}\r\n\t\t\tif (checkVersion(version, '1.19')) {\r\n\t\t\t\tawait Promise.all(this.d.Registry.REGISTRY.map(async (id, registry) => {\r\n\t\t\t\t\tif (DYNAMIC_REGISTRIES.has(id.toString())) {\r\n\t\t\t\t\t\tconst entries = await fetchAllPresets(version, id.path)\r\n\t\t\t\t\t\tfor (const [key, value] of entries.entries()) {\r\n\t\t\t\t\t\t\tregistry.register(this.d.Identifier.parse(key), registry.parse(value), true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}))\r\n\t\t\t} else if (checkVersion(version, '1.18.2')) {\r\n\t\t\t\tawait Promise.all([...DYNAMIC_REGISTRIES].map(async (id) => {\r\n\t\t\t\t\tconst entries = await fetchAllPresets(version, id.replace(/^minecraft:/, ''))\r\n\t\t\t\t\tfor (const [key, value] of entries.entries()) {\r\n\t\t\t\t\t\tif (id === 'minecraft:worldgen/noise') {\r\n\t\t\t\t\t\t\tthis.d.WorldgenRegistries.NOISE.register(this.d.Identifier.parse(key), this.d.NoiseParameters.fromJson(value), true)\r\n\t\t\t\t\t\t} else if (id === 'minecraft:worldgen/density_function') {\r\n\t\t\t\t\t\t\tthis.d.WorldgenRegistries.DENSITY_FUNCTION.register(this.d.Identifier.parse(key), this.d.DensityFunction.fromJson(value), true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\tthis.deepslateCache.set(version, this.d)\r\n\t\t}\r\n\t\tthis.applyProjectData(version, project)\r\n\t\tthis.loadedVersion = version\r\n\t\tthis.loadingVersion = undefined\r\n\t}\r\n\r\n\tprivate applyProjectData(version: VersionId, project?: ProjectData) {\r\n\t\tif (checkVersion(version, '1.19')) {\r\n\t\t\tthis.d.Registry.REGISTRY.forEach((id, registry) => {\r\n\t\t\t\tif (DYNAMIC_REGISTRIES.has(id.toString())) {\r\n\t\t\t\t\tregistry.clear()\r\n\t\t\t\t\tfor (const [key, value] of Object.entries(project?.[id.path] ?? {})) {\r\n\t\t\t\t\t\tregistry.register(this.d.Identifier.parse(key), registry.parse(value))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async loadChunkGenerator(settings: unknown, biomeState: unknown, seed: bigint) {\r\n\t\tconst newCacheState = [settings, `${seed}`, biomeState]\r\n\t\tif (!deepEqual(this.cacheState, newCacheState)) {\r\n\t\t\tconst noiseSettings = this.createNoiseSettings(settings)\r\n\t\t\tif (noiseSettings.noise.xzSize === 0 || noiseSettings.noise.ySize === 0) {\r\n\t\t\t\tthrow new Error('size_horizontal or size_vertical cannot be zero')\r\n\t\t\t}\r\n\t\t\tconst biomeSource = await this.createBiomeSource(noiseSettings, biomeState, seed)\r\n\t\t\tconst chunkGenerator = this.isVersion('1.19')\r\n\t\t\t\t?\tnew this.d.NoiseChunkGenerator(biomeSource, noiseSettings)\r\n\t\t\t\t: new (this.d.NoiseChunkGenerator as any)(seed, biomeSource, noiseSettings)\r\n\t\t\tthis.settingsCache = noiseSettings.noise\r\n\t\t\tthis.generatorCache = chunkGenerator\r\n\t\t\tif (this.isVersion('1.19')) {\r\n\t\t\t\tthis.randomStateCache = new this.d.RandomState(noiseSettings, seed)\r\n\t\t\t\tthis.routerCache = this.randomStateCache.router\r\n\t\t\t} else {\r\n\t\t\t\tthis.randomStateCache = undefined\r\n\t\t\t\t\r\n\t\t\t\tthis.routerCache = undefined\r\n\t\t\t}\r\n\t\t\tthis.biomeSourceCache = {\r\n\t\t\t\tgetBiome: (x, y, z) => biomeSource.getBiome(x, y, z, undefined!),\r\n\t\t\t}\r\n\t\t\tthis.chunksCache = []\r\n\t\t\tthis.biomeCache = new Map()\r\n\t\t\tthis.cacheState = deepClone(newCacheState)\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async createBiomeSource(noiseSettings: deepslate19.NoiseGeneratorSettings, biomeState: unknown, seed: bigint): Promise<deepslate19.BiomeSource> {\r\n\t\tif (this.loadedVersion && isObject(biomeState) && typeof biomeState.preset === 'string') {\r\n\t\t\tconst version = this.loadedVersion\r\n\t\t\tconst preset = biomeState.preset.replace(/^minecraft:/, '')\r\n\t\t\tconst biomes = await computeIfAbsentAsync(this.presetCache, `${version}-${preset}`, async () => {\r\n\t\t\t\tconst dimension = await fetchPreset(version, 'dimension', preset === 'overworld' ? 'overworld' : 'the_nether')\r\n\t\t\t\treturn dimension.generator.biome_source.biomes\r\n\t\t\t})\r\n\t\t\tbiomeState = { type: biomeState.type, biomes }\r\n\t\t}\r\n\t\tif (this.isVersion('1.19')) {\r\n\t\t\tconst bs = this.d.BiomeSource.fromJson(biomeState)\r\n\t\t\treturn bs\r\n\t\t} else {\r\n\t\t\tconst root = isObject(biomeState) ? biomeState : {}\r\n\t\t\tconst type = typeof root.type === 'string' ? root.type.replace(/^minecraft:/, '') : undefined\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'fixed':\r\n\t\t\t\t\treturn new (this.d as any).FixedBiome(this.isVersion('1.18.2') ? this.d.Identifier.parse(root.biome as string) : root.biome as any)\r\n\t\t\t\tcase 'checkerboard':\r\n\t\t\t\t\tconst shift = (root.scale ?? 2) + 2\r\n\t\t\t\t\tconst numBiomes = root.biomes?.length ?? 0\r\n\t\t\t\t\treturn { getBiome: (x: number, _y: number, z: number) => {\r\n\t\t\t\t\t\tconst i = (((x >> shift) + (z >> shift)) % numBiomes + numBiomes) % numBiomes\r\n\t\t\t\t\t\tconst biome = root.biomes?.[i]\r\n\t\t\t\t\t\treturn this.isVersion('1.18.2') ? this.d.Identifier.parse(biome) : biome\r\n\t\t\t\t\t} }\r\n\t\t\t\tcase 'multi_noise':\r\n\t\t\t\t\tif (this.isVersion('1.18')) {\r\n\t\t\t\t\t\tconst parameters = new this.d.Climate.Parameters(root.biomes.map((b: any) => {\r\n\t\t\t\t\t\t\tconst biome = this.isVersion('1.18.2') ? this.d.Identifier.parse(b.biome) : b.biome\r\n\t\t\t\t\t\t\treturn [this.d.Climate.ParamPoint.fromJson(b.parameters), () => biome]\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t\tconst multiNoise = new (this.d as any).MultiNoise(parameters)\r\n\t\t\t\t\t\tlet sampler: any\r\n\t\t\t\t\t\tif (this.isVersion('1.18.2')) {\r\n\t\t\t\t\t\t\tconst router = this.d.NoiseRouter.create({\r\n\t\t\t\t\t\t\t\ttemperature: new this.d.DensityFunction.Noise(0.25, 0, (this.d as any).Noises.TEMPERATURE),\r\n\t\t\t\t\t\t\t\tvegetation: new this.d.DensityFunction.Noise(0.25, 0, (this.d as any).Noises.VEGETATION),\r\n\t\t\t\t\t\t\t\tcontinents: new this.d.DensityFunction.Noise(0.25, 0, (this.d as any).Noises.CONTINENTALNESS),\r\n\t\t\t\t\t\t\t\terosion: new this.d.DensityFunction.Noise(0.25, 0, (this.d as any).Noises.EROSION),\r\n\t\t\t\t\t\t\t\tridges: new this.d.DensityFunction.Noise(0.25, 0, (this.d as any).Noises.RIDGE),\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsampler = this.d.Climate.Sampler.fromRouter((this.d.NoiseRouter as any).withSettings(router, noiseSettings, seed))\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst noiseSampler = new (this.d as any).NoiseSampler(this.d.NoiseSettings.fromJson(null), true, seed, true)\r\n\t\t\t\t\t\t\tsampler = (x: number, y: number, z: number) => noiseSampler.sample(x, y, z)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn { getBiome: (x: number, y: number, z: number) => {\r\n\t\t\t\t\t\t\treturn multiNoise.getBiome(x, y, z, sampler)\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst noise = ['altitude', 'temperature', 'humidity', 'weirdness']\r\n\t\t\t\t\t\t\t.map((id, i) => {\r\n\t\t\t\t\t\t\t\tconst config = root[`${id}_noise`]\r\n\t\t\t\t\t\t\t\tconfig.firstOctave = clamp(config.firstOctave ?? -7, -100, -1)\r\n\t\t\t\t\t\t\t\treturn new this.d.NormalNoise(new this.d.LegacyRandom(seed + BigInt(i)), config)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (!Array.isArray(root.biomes) || root.biomes.length === 0) {\r\n\t\t\t\t\t\t\treturn { getBiome: () => this.d.Identifier.create('unknown') }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn { getBiome: (x: number, _y: number, z: number) => {\r\n\t\t\t\t\t\t\tconst n = noise.map(n => n.sample(x, z, 0))\r\n\t\t\t\t\t\t\tlet minDist = Infinity\r\n\t\t\t\t\t\t\tlet minBiome = 'unknown'\r\n\t\t\t\t\t\t\tfor (const { biome, parameters: p } of root.biomes) {\r\n\t\t\t\t\t\t\t\tconst dist = square(p.altitude - n[0]) + square(p.temperature - n[1]) + square(p.humidity - n[2]) + square(p.weirdness - n[3]) + square(p.offset)\r\n\t\t\t\t\t\t\t\tif (dist < minDist) {\r\n\t\t\t\t\t\t\t\t\tminDist = dist\r\n\t\t\t\t\t\t\t\t\tminBiome = biome\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn minBiome as unknown as deepslate19.Identifier\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault: throw new Error(`Unsupported biome source ${type}`)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate createNoiseSettings(settings: unknown): deepslate19.NoiseGeneratorSettings {\r\n\t\tif (typeof settings === 'string') {\r\n\t\t\tif (this.isVersion('1.19')) {\r\n\t\t\t\treturn this.d.WorldgenRegistries.NOISE_SETTINGS.getOrThrow(this.d.Identifier.parse(settings))\r\n\t\t\t} else {\r\n\t\t\t\treturn this.d.NoiseGeneratorSettings.fromJson(undefined)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn this.d.NoiseGeneratorSettings.fromJson(settings)\r\n\t\t}\r\n\t}\r\n\r\n\tpublic generateChunks(minX: number, width: number, biome = 'unknown') {\r\n\t\tminX = Math.floor(minX)\r\n\t\tif (!this.settingsCache) {\r\n\t\t\tthrow new Error('Tried to generate chunks before settings are loaded')\r\n\t\t}\r\n\t\tconst minY = this.settingsCache.minY\r\n\t\tconst height = this.settingsCache.height\r\n\r\n\t\treturn [...Array(Math.ceil(width / 16) + 1)].map((_, i) => {\r\n\t\t\tconst x: number = (minX >> 4) + i\r\n\t\t\tconst cached = this.chunksCache.find(c => c.pos[0] === x)\r\n\t\t\tif (cached) {\r\n\t\t\t\treturn cached\r\n\t\t\t}\r\n\t\t\tconst chunk = new this.d.Chunk(minY, height, this.d.ChunkPos.create(x, this.Z >> 4))\r\n\t\t\tif (!this.generatorCache) {\r\n\t\t\t\tthrow new Error('Tried to generate chunks before generator is loaded')\r\n\t\t\t}\r\n\t\t\tif (checkVersion(this.loadedVersion!, '1.19')) {\r\n\t\t\t\tif (!this.randomStateCache) {\r\n\t\t\t\t\tthrow new Error('Tried to generate chunks before random state is loaded')\r\n\t\t\t\t}\r\n\t\t\t\tthis.generatorCache.fill(this.randomStateCache, chunk, true)\r\n\t\t\t\tthis.generatorCache.buildSurface(this.randomStateCache, chunk, biome)\r\n\t\t\t} else {\r\n\t\t\t\t(this.generatorCache as any).fill(chunk, true);\r\n\t\t\t\t(this.generatorCache as any).buildSurface(chunk, biome)\r\n\t\t\t}\r\n\t\t\tthis.chunksCache.push(chunk)\r\n\t\t\treturn chunk\r\n\t\t})\r\n\t}\r\n\r\n\tpublic getBiome(x: number, y: number, z: number) {\r\n\t\treturn computeIfAbsent(this.biomeCache, `${x}:${y}:${z}`, () => {\r\n\t\t\tif (this.isVersion('1.19')) {\r\n\t\t\t\tif (!this.randomStateCache || !this.generatorCache) {\r\n\t\t\t\t\tthrow new Error('Tried to compute biomes before random state is loaded')\r\n\t\t\t\t}\r\n\t\t\t\treturn this.generatorCache.computeBiome(this.randomStateCache, x, y, z).toString()\r\n\t\t\t} else {\r\n\t\t\t\tif(!this.biomeSourceCache) {\r\n\t\t\t\t\tthrow new Error('Tried to compute biomes before biome source is loaded')\r\n\t\t\t\t}\r\n\t\t\t\treturn this.biomeSourceCache.getBiome(x, y, z).toString()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tpublic loadDensityFunction(state: unknown, minY: number, height: number, seed: bigint) {\r\n\t\tif (this.isVersion('1.19')) {\r\n\t\t\tconst settings = this.d.NoiseGeneratorSettings.create({\r\n\t\t\t\tnoise: {\r\n\t\t\t\t\tminY: minY,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\txzSize: 1,\r\n\t\t\t\t\tySize: 2,\r\n\t\t\t\t},\r\n\t\t\t\tnoiseRouter: this.d.NoiseRouter.create({\r\n\t\t\t\t\tfinalDensity: this.d.DensityFunction.fromJson(state),\r\n\t\t\t\t}),\r\n\t\t\t})\r\n\t\t\tthis.settingsCache = settings.noise\r\n\t\t\tconst randomState = new this.d.RandomState(settings, seed)\r\n\t\t\treturn randomState.router.finalDensity\r\n\t\t} else {\r\n\t\t\tconst random = this.d.XoroshiroRandom.create(seed).forkPositional()\r\n\t\t\tconst settings = this.d.NoiseSettings.fromJson({\r\n\t\t\t\tmin_y: minY,\r\n\t\t\t\theight: height,\r\n\t\t\t\tsize_horizontal: 1,\r\n\t\t\t\tsize_vertical: 2,\r\n\t\t\t\tsampling: { xz_scale: 1, y_scale: 1, xz_factor: 80, y_factor: 160 },\r\n\t\t\t\tbottom_slide: { target: 0.1171875, size: 3, offset: 0 },\r\n\t\t\t\ttop_slide: { target: -0.078125, size: 2, offset: 8 },\r\n\t\t\t\tterrain_shaper: { offset: 0.044, factor: 4, jaggedness: 0 },\r\n\t\t\t})\r\n\t\t\tthis.settingsCache = settings\r\n\t\t\tconst originalFn = this.d.DensityFunction.fromJson(state)\r\n\t\t\treturn originalFn.mapAll(new (this.d.NoiseRouter as any).Visitor(random, settings))\r\n\t\t}\r\n\t}\r\n\r\n\tpublic loadStructureSet(state: unknown, seed: bigint) {\r\n\t\tif (!this.isVersion('1.19')) {\r\n\t\t\tthrow new Error('Cannot load structure set prior to 1.19')\r\n\t\t}\r\n\t\tconst settings = this.d.NoiseGeneratorSettings.create({\r\n\t\t\tnoise: {\r\n\t\t\t\tminY: 0,\r\n\t\t\t\theight: 256,\r\n\t\t\t\txzSize: 1,\r\n\t\t\t\tySize: 2,\r\n\t\t\t},\r\n\t\t\tnoiseRouter: this.d.NoiseRouter.create({\r\n\t\t\t\tfinalDensity: this.d.DensityFunction.fromJson(state),\r\n\t\t\t}),\r\n\t\t})\r\n\t\tconst unknownBiome = this.d.Identifier.create('unknown')\r\n\t\tconst randomState = new this.d.RandomState(settings, seed)\r\n\t\tconst biomeSource = new this.d.FixedBiomeSource(unknownBiome)\r\n\t\tconst chunkGenerator = new this.d.NoiseChunkGenerator(biomeSource, settings)\r\n\t\tthis.structureContextCache = { seed, settings, randomState, biomeSource, chunkGenerator }\r\n\r\n\t\tclass SimpleStructure extends this.d.WorldgenStructure {\r\n\t\t\tconstructor(settings: deepslate19.WorldgenStructure.StructureSettings) {\r\n\t\t\t\tsuper(settings)\r\n\t\t\t}\r\n\t\t\tfindGenerationPoint(chunkX: number, chunkZ: number, _random: deepslate19.Random, _context: deepslate19.WorldgenStructure.GenerationContext): deepslate19.BlockPos {\r\n\t\t\t\treturn [(chunkX << 4) + 8, 0, (chunkZ << 4) + 8]\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst structureSet = this.d.StructureSet.fromJson(state)\r\n\t\tfor (const e of structureSet.structures) {\r\n\t\t\tconst id = e.structure.key()\r\n\t\t\tif (id === undefined) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tconst structure = new SimpleStructure({ validBiomes: new this.d.HolderSet([this.d.Holder.reference(this.d.WorldgenRegistries.BIOME, unknownBiome)])})\r\n\t\t\tthis.d.WorldgenStructure.REGISTRY.register(id, structure)\r\n\t\t\tthis.d.WorldgenRegistries.BIOME.register(unknownBiome, {})\r\n\t\t}\r\n\t\tif (structureSet.placement instanceof this.d.StructurePlacement.ConcentricRingsStructurePlacement) {\r\n\t\t\tconst biomeTag = structureSet.placement['preferredBiomes'].key()\r\n\t\t\tif (biomeTag instanceof this.d.Identifier) {\r\n\t\t\t\tthis.d.WorldgenRegistries.BIOME.getTagRegistry().register(biomeTag, new this.d.HolderSet([this.d.Holder.reference(this.d.WorldgenRegistries.BIOME, unknownBiome)]))\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn structureSet\r\n\t}\r\n\r\n\tpublic getWorldgenStructureContext(): deepslate19.WorldgenStructure.GenerationContext {\r\n\t\tif (!this.structureContextCache) {\r\n\t\t\tthrow new Error('Tried to access structure context when it isn\\'t loaded')\r\n\t\t}\r\n\t\treturn this.structureContextCache\r\n\t}\r\n\r\n\tpublic getNoiseSettings(): NoiseSettings {\r\n\t\tif (!this.settingsCache) {\r\n\t\t\tthrow new Error('Tried to access noise settings when it isn\\'t loaded')\r\n\t\t}\r\n\t\treturn this.settingsCache\r\n\t}\r\n\r\n\tpublic getNoiseRouter(): NoiseRouter {\r\n\t\tif (!this.routerCache) {\r\n\t\t\tthrow new Error('Tried to access noise router when it isn\\'t loaded')\r\n\t\t}\r\n\t\treturn this.routerCache\r\n\t}\r\n\r\n\tpublic getBlockState(x: number, y: number) {\r\n\t\tx = Math.floor(x)\r\n\t\ty = Math.floor(y)\r\n\t\tconst chunk = this.chunksCache.find(c => this.d.ChunkPos.minBlockX(c.pos) <= x && this.d.ChunkPos.maxBlockX(c.pos) >= x)\r\n\t\treturn chunk?.getBlockState(this.d.BlockPos.create(x, y, this.Z))\r\n\t}\r\n\r\n\tprivate isVersion(min?: VersionId, max?: VersionId) {\r\n\t\tif (!this.loadedVersion) {\r\n\t\t\tthrow new Error('No deepslate version loaded')\r\n\t\t}\r\n\t\treturn checkVersion(this.loadedVersion, min, max)\r\n\t}\r\n}\r\n\r\nexport const DEEPSLATE = new Deepslate()\r\n\r\ninterface NoiseSettings {\r\n\tminY: number\r\n\theight: number\r\n}\r\n\r\ninterface NoiseRouter {\r\n\ttemperature: deepslate19.DensityFunction\r\n\tvegetation: deepslate19.DensityFunction\r\n\tcontinents: deepslate19.DensityFunction\r\n\terosion: deepslate19.DensityFunction\r\n\tridges: deepslate19.DensityFunction\r\n\tdepth: deepslate19.DensityFunction\r\n}\r\n\r\ninterface ChunkGenerator {\r\n\tfill(randomState: deepslate19.RandomState, chunk: Chunk, onlyFirstZ?: boolean): void\r\n\tbuildSurface(randomState: deepslate19.RandomState, chunk: Chunk, biome: string): void\r\n\tcomputeBiome(randomState: deepslate19.RandomState, quartX: number, quartY: number, quartZ: number): deepslate19.Identifier\r\n}\r\n\r\ninterface Chunk {\r\n\treadonly pos: deepslate19.ChunkPos\r\n\tgetBlockState(pos: deepslate19.BlockPos): deepslate19.BlockState\r\n}\r\n\r\ninterface BiomeSource {\r\n\tgetBiome(x: number, y: number, z: number): deepslate19.Identifier\r\n}\r\n","import { mat3, vec2 } from 'gl-matrix'\r\nimport { useCallback, useEffect, useRef } from 'preact/hooks'\r\n\r\ninterface Props {\r\n\tonSetup: (canvas: HTMLCanvasElement) => void,\r\n\tonDraw: (transform: mat3) => void,\r\n\tonHover?: (offset: [number, number] | undefined) => void,\r\n\tonResize: (width: number, height: number) => void,\r\n\tstate?: unknown,\r\n\tpixelSize?: number,\r\n\tstartPosition?: [number, number],\r\n\tstartScale?: number,\r\n\tminScale?: number,\r\n\tmaxScale?: number,\r\n}\r\nexport function InteractiveCanvas2D({ onSetup, onDraw, onHover, onResize, state, pixelSize = 1, startPosition, startScale, minScale = 1/16, maxScale = 16 }: Props) {\r\n\tconst canvas = useRef<HTMLCanvasElement>(null)\r\n\tconst dragStart = useRef<[number, number] | undefined>()\r\n\tconst dragButton = useRef<number | undefined>()\r\n\tconst centerPos = useRef<[number, number]>(startPosition ? [-startPosition[0], -startPosition[1]] : [0, 0])\r\n\tconst viewScale = useRef(startScale ?? 1)\r\n\tconst frameRequest = useRef<number>()\r\n\r\n\t// Transforms screen coordinates to world coordinates\r\n\tconst transform = useCallback(() => {\r\n\t\tconst mat = mat3.create()\r\n\t\tif (!canvas.current) return mat\r\n\t\tconst halfWidth = Math.floor(canvas.current.clientWidth / 2) / pixelSize\r\n\t\tconst halfHeight = Math.floor(canvas.current.clientHeight / 2) / pixelSize\r\n\t\tconst scale = Math.pow(2, Math.floor(Math.log(viewScale.current * pixelSize) /Math.log(2)))\r\n\t\tconst offsetX = Math.floor(centerPos.current[0])\r\n\t\tconst offsetY = Math.floor(centerPos.current[1])\r\n\t\tmat3.translate(mat, mat, [offsetX, offsetY])\r\n\t\tmat3.scale(mat, mat, [scale, scale])\r\n\t\tmat3.translate(mat, mat, [-halfWidth, -halfHeight])\r\n\t\treturn mat\r\n\t}, [pixelSize])\r\n\r\n\tconst redraw = useRef<Function>(() => {})\r\n\tuseEffect(() => {\r\n\t\tredraw.current = function requestRedraw() {\r\n\t\t\tif (frameRequest.current !== undefined) {\r\n\t\t\t\tcancelAnimationFrame(frameRequest.current)\r\n\t\t\t}\r\n\t\t\tframeRequest.current = requestAnimationFrame(function redraw() {\r\n\t\t\t\tonDraw(transform())\r\n\t\t\t})\r\n\t\t}\r\n\t}, [onDraw, transform])\r\n\r\n\tuseEffect(function changeDetected() {\r\n\t\tredraw.current()\r\n\t}, [state, onDraw, transform])\r\n\r\n\tuseEffect(function setupListeners() {\r\n\t\tif (!canvas.current) return\r\n\t\tfunction onMouseDown(e: MouseEvent) {\r\n\t\t\tif (!canvas.current) return\r\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\r\n\t\t\tdragButton.current = e.button\r\n\t\t}\r\n\t\tfunction onMouseMove(e: MouseEvent) {\r\n\t\t\tif (!canvas.current) return\r\n\t\t\tif (dragStart.current === undefined) {\r\n\t\t\t\tconst pos = vec2.fromValues(e.offsetX / pixelSize, e.offsetY / pixelSize)\r\n\t\t\t\tvec2.transformMat3(pos, pos, transform())\r\n\t\t\t\tonHover?.([Math.floor(pos[0]), Math.floor(pos[1])])\r\n\t\t\t} else {\r\n\t\t\t\tconst dragEnd: [number, number] = [e.offsetX, e.offsetY]\r\n\t\t\t\tconst dx = (dragEnd[0] - dragStart.current[0]) * (viewScale.current)\r\n\t\t\t\tconst dy = (dragEnd[1] - dragStart.current[1]) * (viewScale.current)\r\n\t\t\t\tcenterPos.current = [centerPos.current[0] - dx, centerPos.current[1] - dy]\r\n\t\t\t\tdragStart.current = dragEnd\r\n\t\t\t\tredraw.current()\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseUp () {\r\n\t\t\tdragStart.current = undefined\r\n\t\t}\r\n\t\tfunction onMouseLeave () {\r\n\t\t\tonHover?.(undefined)\r\n\t\t}\r\n\t\tfunction onWheel (e: WheelEvent) {\r\n\t\t\tconst newScale = Math.pow(2, Math.log(viewScale.current) / Math.log(2) + e.deltaY / 200)\r\n\t\t\tif (newScale > minScale && newScale < maxScale) {\r\n\t\t\t\tviewScale.current = newScale\r\n\t\t\t\tredraw.current()\r\n\t\t\t}\r\n\t\t\te.preventDefault()\r\n\t\t}\r\n\t\tfunction onContextMenu(evt: MouseEvent) {\r\n\t\t\tevt.preventDefault()\r\n\t\t}\r\n\t\tfunction resizeHandler() {\r\n\t\t\tif (!canvas.current) return\r\n\t\t\tconst width = Math.floor(canvas.current.clientWidth / pixelSize)\r\n\t\t\tconst height = Math.floor(canvas.current.clientHeight / pixelSize)\r\n\t\t\tcanvas.current.width = width\r\n\t\t\tcanvas.current.height = height\r\n\t\t\tonResize?.(width, height)\r\n\t\t\tredraw.current()\r\n\t\t}\r\n\r\n\t\tonSetup(canvas.current)\r\n\t\tresizeHandler()\r\n\r\n\t\tcanvas.current.addEventListener('mousedown', onMouseDown)\r\n\t\tcanvas.current.addEventListener('mousemove', onMouseMove)\r\n\t\tcanvas.current.addEventListener('mouseleave', onMouseLeave)\r\n\t\tdocument.body.addEventListener('mouseup', onMouseUp)\r\n\t\tcanvas.current.addEventListener('wheel', onWheel)\r\n\t\tcanvas.current.addEventListener('contextmenu', onContextMenu)\r\n\t\twindow.addEventListener('resize', resizeHandler)\r\n\r\n\t\treturn () => {\r\n\t\t\tcanvas.current?.removeEventListener('mousedown', onMouseDown)\r\n\t\t\tcanvas.current?.removeEventListener('mousemove', onMouseMove)\r\n\t\t\tcanvas.current?.removeEventListener('mouseleave', onMouseLeave)\r\n\t\t\tdocument.body.removeEventListener('mouseup', onMouseUp)\r\n\t\t\tcanvas.current?.removeEventListener('wheel', onWheel)\r\n\t\t\tcanvas.current?.removeEventListener('contextmenu', onContextMenu)\r\n\t\t\twindow.removeEventListener('resize', resizeHandler)\r\n\t\t}\r\n\t}, [onSetup, onResize, onHover, transform, pixelSize, minScale, maxScale])\r\n\r\n\treturn <canvas ref={canvas}></canvas>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { clampedMap } from 'deepslate'\r\nimport { mat3 } from 'gl-matrix'\r\nimport { useCallback, useRef, useState } from 'preact/hooks'\r\nimport { getProjectData, useLocale, useProject, useStore } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/index.js'\r\nimport { checkVersion } from '../../services/Schemas.js'\r\nimport { Store } from '../../Store.js'\r\nimport { iterateWorld2D, randomSeed, stringToColor } from '../../Utils.js'\r\nimport { Btn, BtnMenu, NumberInput } from '../index.js'\r\nimport type { ColormapType } from './Colormap.js'\r\nimport { getColormap } from './Colormap.js'\r\nimport { ColormapSelector } from './ColormapSelector.jsx'\r\nimport { DEEPSLATE } from './Deepslate.js'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\n\r\nconst LAYERS = ['biomes', 'temperature', 'vegetation', 'continents', 'erosion', 'ridges', 'depth'] as const\r\ntype Layer = typeof LAYERS[number]\r\n\r\nconst DETAIL_DELAY = 300\r\nconst DETAIL_SCALE = 2\r\n\r\nexport const BiomeSourcePreview = ({ data, shown, version }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst { project } = useProject()\r\n\tconst { biomeColors } = useStore()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst [layer, setLayer] = useState<Layer>('biomes')\r\n\tconst [yOffset, setYOffset] = useState(64)\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\tconst [focused2, setFocused2] = useState<string[]>([])\r\n\r\n\tconst state = JSON.stringify(data)\r\n\tconst type: string = data?.generator?.biome_source?.type?.replace(/^minecraft:/, '') ?? ''\r\n\tconst hasRandomness = type === 'multi_noise' || type === 'the_end'\r\n\r\n\tconst { value } = useAsync(async function loadBiomeSource() {\r\n\t\tawait DEEPSLATE.loadVersion(version, getProjectData(project))\r\n\t\tawait DEEPSLATE.loadChunkGenerator(DataModel.unwrapLists(data?.generator?.settings), DataModel.unwrapLists(data?.generator?.biome_source), seed)\r\n\t\treturn {\r\n\t\t\tbiomeSource: { loaded: true },\r\n\t\t\tnoiseRouter: checkVersion(version, '1.19') ? DEEPSLATE.getNoiseRouter() : undefined,\r\n\t\t}\r\n\t}, [state, seed, project, version])\r\n\tconst { biomeSource, noiseRouter } = value ?? {}\r\n\r\n\tconst actualLayer = noiseRouter ? layer : 'biomes'\r\n\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst [colormap, setColormap] = useState<ColormapType>(Store.getColormap() ?? 'viridis')\r\n\r\n\tconst detailCanvas = useRef<HTMLCanvasElement>(null)\r\n\tconst detailCtx = useRef<CanvasRenderingContext2D>()\r\n\tconst detailImageData = useRef<ImageData>()\r\n\tconst detailTimeout = useRef<number>()\r\n\t\r\n\tconst onSetup = useCallback(function onSetup(canvas: HTMLCanvasElement) {\r\n\t\tctx.current = canvas.getContext('2d') ?? undefined\r\n\t\tdetailCtx.current = detailCanvas.current?.getContext('2d') ?? undefined\r\n\t}, [])\r\n\tconst onResize = useCallback(function onResize(width: number, height: number) {\r\n\t\tif (ctx.current) {\r\n\t\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t\t}\r\n\t\tif (detailCtx.current && detailCanvas.current) {\r\n\t\t\tdetailCanvas.current.width = width * DETAIL_SCALE\r\n\t\t\tdetailCanvas.current.height = height * DETAIL_SCALE\r\n\t\t\tdetailImageData.current = detailCtx.current.getImageData(0, 0, width * DETAIL_SCALE, height * DETAIL_SCALE)\r\n\t\t}\r\n\t}, [])\r\n\tconst onDraw = useCallback(function onDraw(transform: mat3) {\r\n\t\tif (!ctx.current || !imageData.current || !shown) return\r\n\r\n\t\tfunction actualDraw(ctx: CanvasRenderingContext2D, img: ImageData, transform: mat3) {\r\n\t\t\tif (actualLayer === 'biomes' && biomeSource) {\r\n\t\t\t\titerateWorld2D(img, transform, (x, y) => {\r\n\t\t\t\t\treturn DEEPSLATE.getBiome(x, yOffset, y)\r\n\t\t\t\t}, (biome) => {\r\n\t\t\t\t\treturn getBiomeColor(biome, biomeColors)\r\n\t\t\t\t})\r\n\t\t\t} else if (actualLayer !== 'biomes' && noiseRouter) {\r\n\t\t\t\tconst df = noiseRouter[actualLayer]\r\n\t\t\t\tconst colorPicker = getColormap(colormap)\r\n\t\t\t\titerateWorld2D(img, transform, (x, y) => {\r\n\t\t\t\t\treturn df.compute({ x: x*4, y: yOffset, z: y*4 }) ?? 0\r\n\t\t\t\t}, (density) => {\r\n\t\t\t\t\tconst color = colorPicker(clampedMap(density, -1, 1, 0, 1))\r\n\t\t\t\t\treturn [color[0] * 256, color[1] * 256, color[2] * 256]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tctx.putImageData(img, 0, 0)\r\n\t\t}\r\n\r\n\t\tactualDraw(ctx.current, imageData.current, transform)\r\n\t\tdetailCanvas.current?.classList.remove('visible')\r\n\r\n\t\tclearTimeout(detailTimeout.current)\r\n\t\tif (hasRandomness) {\r\n\t\t\tdetailTimeout.current = setTimeout(function detailTimout() {\r\n\t\t\t\tif (!detailCtx.current || !detailImageData.current || !detailCanvas.current) return\r\n\t\t\t\tconst detailTransform = mat3.create()\r\n\t\t\t\tmat3.scale(detailTransform, transform, [1/DETAIL_SCALE, 1/DETAIL_SCALE])\r\n\t\t\t\tactualDraw(detailCtx.current, detailImageData.current, detailTransform)\r\n\t\t\t\tdetailCanvas.current.classList.add('visible')\r\n\t\t\t}, DETAIL_DELAY) as unknown as number\r\n\t\t}\r\n\t}, [biomeSource, noiseRouter, actualLayer, colormap, shown, biomeColors, yOffset])\r\n\tconst onHover = useCallback(function onHover(pos: [number, number] | undefined) {\r\n\t\tconst [x, y] = pos ?? [0, 0]\r\n\t\tif (!pos || !biomeSource) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst biome = DEEPSLATE.getBiome(x, yOffset, -y)\r\n\t\t\tsetFocused([biome.replace(/^minecraft:/, ''), `X=${x*4} Z=${-y*4}`])\r\n\t\t}\r\n\t\tif (!pos || !noiseRouter) {\r\n\t\t\tsetFocused2([])\r\n\t\t} else {\r\n\t\t\tsetFocused2([LAYERS.flatMap(l => {\r\n\t\t\t\tif (l === 'biomes') return []\r\n\t\t\t\tconst value = noiseRouter[l].compute({ x: x*4, y: yOffset, z: -y*4 })\r\n\t\t\t\treturn [`${locale(`layer.${l}`).charAt(0)}=${value.toPrecision(2)}`]\r\n\t\t\t}).join(' ')])\r\n\t\t}\r\n\t}, [biomeSource, noiseRouter, yOffset])\r\n\r\n\treturn <>\r\n\t\t{(hasRandomness && focused2) && <div class=\"controls secondary-controls\">\r\n\t\t\t{focused2.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t</div>}\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t{actualLayer !== 'biomes' && <ColormapSelector value={colormap} onChange={setColormap} />}\r\n\t\t\t{hasRandomness && <>\r\n\t\t\t\t<BtnMenu icon=\"stack\" tooltip={locale('layer')}>\r\n\t\t\t\t\t<div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t<span>{locale('y')}</span>\r\n\t\t\t\t\t\t<NumberInput value={yOffset} onChange={setYOffset} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{checkVersion(version, '1.19') && LAYERS.map(l => <Btn label={locale(`layer.${l}`)} active={l === actualLayer} onClick={() => setLayer(l)} />)}\r\n\t\t\t\t</BtnMenu>\r\n\t\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t\t</>}\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas2D onSetup={onSetup} onResize={onResize} onDraw={onDraw} onHover={onHover} pixelSize={hasRandomness ? 8 : 2} />\r\n\t\t\t{hasRandomness && <canvas class={'preview-details'} ref={detailCanvas} />}\r\n\t\t</div>\r\n\t</>\r\n}\r\n\r\ntype Triple = [number, number, number]\r\ntype BiomeColors = Record<string, Triple>\r\nfunction getBiomeColor(biome: string, biomeColors: BiomeColors): Triple {\r\n\tif (!biome) {\r\n\t\treturn [128, 128, 128]\r\n\t}\r\n\tconst color = biomeColors[biome] ?? VanillaColors[biome]\r\n\tif (color === undefined) {\r\n\t\treturn stringToColor(biome)\r\n\t}\r\n\treturn color\r\n}\r\n\r\nexport const VanillaColors: Record<string, Triple> = {\r\n\t'minecraft:badlands': [217,69,21],\r\n\t'minecraft:badlands_plateau': [202,140,101],\r\n\t'minecraft:bamboo_jungle': [118,142,20],\r\n\t'minecraft:bamboo_jungle_hills': [59,71,10],\r\n\t'minecraft:basalt_deltas': [64,54,54],\r\n\t'minecraft:beach': [250,222,85],\r\n\t'minecraft:birch_forest': [48,116,68],\r\n\t'minecraft:birch_forest_hills': [31,95,50],\r\n\t'minecraft:cold_ocean': [32,32,112],\r\n\t'minecraft:crimson_forest': [221,8,8],\r\n\t'minecraft:dark_forest': [64,81,26],\r\n\t'minecraft:dark_forest_hills': [104,121,66],\r\n\t'minecraft:deep_cold_ocean': [32,32,56],\r\n\t'minecraft:deep_frozen_ocean': [64,64,144],\r\n\t'minecraft:deep_lukewarm_ocean': [0,0,64],\r\n\t'minecraft:deep_ocean': [0,0,48],\r\n\t'minecraft:deep_warm_ocean': [0,0,80],\r\n\t'minecraft:desert': [250,148,24],\r\n\t'minecraft:desert_hills': [210,95,18],\r\n\t'minecraft:desert_lakes': [255,188,64],\r\n\t'minecraft:end_barrens': [39,30,61],\r\n\t'minecraft:end_highlands': [232,244,178],\r\n\t'minecraft:end_midlands': [194,187,136],\r\n\t'minecraft:eroded_badlands': [255,109,61],\r\n\t'minecraft:flower_forest': [45,142,73],\r\n\t'minecraft:forest': [5,102,33],\r\n\t'minecraft:frozen_ocean': [112,112,214],\r\n\t'minecraft:frozen_river': [160,160,255],\r\n\t'minecraft:giant_spruce_taiga': [129,142,121],\r\n\t'minecraft:old_growth_spruce_taiga': [129,142,121],\r\n\t'minecraft:giant_spruce_taiga_hills': [109,119,102],\r\n\t'minecraft:giant_tree_taiga': [89,102,81],\r\n\t'minecraft:old_growth_pine_taiga': [89,102,81],\r\n\t'minecraft:giant_tree_taiga_hills': [69,79,62],\r\n\t'minecraft:gravelly_hills': [136,136,136],\r\n\t'minecraft:gravelly_mountains': [136,136,136],\r\n\t'minecraft:windswept_gravelly_hills': [136,136,136],\r\n\t'minecraft:ice_spikes': [180,220,220],\r\n\t'minecraft:jungle': [83,123,9],\r\n\t'minecraft:jungle_edge': [98,139,23],\r\n\t'minecraft:sparse_jungle': [98,139,23],\r\n\t'minecraft:jungle_hills': [44,66,5],\r\n\t'minecraft:lukewarm_ocean': [0,0,144],\r\n\t'minecraft:modified_badlands_plateau': [242,180,141],\r\n\t'minecraft:modified_gravelly_mountains': [120,152,120],\r\n\t'minecraft:modified_jungle': [123,163,49],\r\n\t'minecraft:modified_jungle_edge': [138,179,63],\r\n\t'minecraft:modified_wooded_badlands_plateau': [216,191,141],\r\n\t'minecraft:mountain_edge': [114,120,154],\r\n\t'minecraft:extreme_hills': [96,96,96],\r\n\t'minecraft:mountains': [96,96,96],\r\n\t'minecraft:windswept_hills': [96,96,96],\r\n\t'minecraft:mushroom_field_shore': [160,0,255],\r\n\t'minecraft:mushroom_fields': [255,0,255],\r\n\t'minecraft:nether_wastes': [191,59,59],\r\n\t'minecraft:ocean': [0,0,112],\r\n\t'minecraft:plains': [141,179,96],\r\n\t'minecraft:river': [0,0,255],\r\n\t'minecraft:savanna': [189,178,95],\r\n\t'minecraft:savanna_plateau': [167,157,100],\r\n\t'minecraft:shattered_savanna': [229,218,135],\r\n\t'minecraft:windswept_savanna': [229,218,135],\r\n\t'minecraft:shattered_savanna_plateau': [207,197,140],\r\n\t'minecraft:small_end_islands': [16,12,28],\r\n\t'minecraft:snowy_beach': [250,240,192],\r\n\t'minecraft:snowy_mountains': [160,160,160],\r\n\t'minecraft:snowy_taiga': [49,85,74],\r\n\t'minecraft:snowy_taiga_hills': [36,63,54],\r\n\t'minecraft:snowy_taiga_mountains': [89,125,114],\r\n\t'minecraft:snowy_tundra': [255,255,255],\r\n\t'minecraft:snowy_plains': [255,255,255],\r\n\t'minecraft:soul_sand_valley': [94,56,48],\r\n\t'minecraft:stone_shore': [162,162,132],\r\n\t'minecraft:stony_shore': [162,162,132],\r\n\t'minecraft:sunflower_plains': [181,219,136],\r\n\t'minecraft:swamp': [7,249,178],\r\n\t'minecraft:swamp_hills': [47,255,218],\r\n\t'minecraft:taiga': [11,102,89],\r\n\t'minecraft:taiga_hills': [22,57,51],\r\n\t'minecraft:taiga_mountains': [51,142,129],\r\n\t'minecraft:tall_birch_forest': [88,156,108],\r\n\t'minecraft:old_growth_birch_forest': [88,156,108],\r\n\t'minecraft:tall_birch_hills': [71,135,90],\r\n\t'minecraft:the_end': [59,39,84],\r\n\t'minecraft:the_void': [0,0,0],\r\n\t'minecraft:warm_ocean': [0,0,172],\r\n\t'minecraft:warped_forest': [73,144,123],\r\n\t'minecraft:wooded_badlands_plateau': [176,151,101],\r\n\t'minecraft:wooded_badlands': [176,151,101],\r\n\t'minecraft:wooded_hills': [34,85,28],\r\n\t'minecraft:wooded_mountains': [80,112,80],\r\n\t'minecraft:windswept_forest': [80,112,80],\r\n\t'minecraft:snowy_slopes': [140, 195, 222],\r\n\t'minecraft:lofty_peaks': [196, 168, 193],\r\n\t'minecraft:jagged_peaks': [196, 168, 193],\r\n\t'minecraft:snowcapped_peaks': [200, 198, 200],\r\n\t'minecraft:frozen_peaks': [200, 198, 200],\r\n\t'minecraft:stony_peaks': [82, 92, 103],\r\n\t'minecraft:grove': [150, 150, 189],\r\n\t'minecraft:meadow': [169, 197, 80],\r\n\t'minecraft:lush_caves': [112, 255, 79],\r\n\t'minecraft:dripstone_caves': [140, 124, 0],\r\n\t'minecraft:deep_dark': [10, 14, 19],\r\n\t'minecraft:mangrove_swamp': [36,196,142],\r\n}\r\n","import { mat4, vec3 } from 'gl-matrix'\r\nimport { useEffect, useRef } from 'preact/hooks'\r\n\r\ninterface Props {\r\n\tonSetup: (canvas: HTMLCanvasElement) => void,\r\n\tonDraw: (transform: mat4) => void,\r\n\tonResize: (width: number, height: number) => void,\r\n\tstate?: unknown,\r\n\tstartPosition?: [number, number, number],\r\n\tstartDistance?: number,\r\n\tstartYRotation?: number,\r\n\tstartXRotation?: number,\r\n}\r\nexport function InteractiveCanvas3D({ onSetup, onDraw, onResize, state, startPosition, startDistance, startYRotation, startXRotation }: Props) {\r\n\tconst canvas = useRef<HTMLCanvasElement>(null)\r\n\tconst dragStart = useRef<[number, number] | undefined>()\r\n\tconst dragButton = useRef<number | undefined>()\r\n\tconst centerPos = useRef<[number, number, number]>(startPosition ? [-startPosition[0], -startPosition[1], -startPosition[2]] : [0, 0, 0])\r\n\tconst viewDist = useRef(startDistance ?? 4)\r\n\tconst yRotation = useRef(startYRotation ?? 0.8)\r\n\tconst xRotation = useRef(startXRotation ?? 0.5)\r\n\tconst frameRequest = useRef<number>()\r\n\r\n\tconst redraw = useRef<Function>(() => {})\r\n\tuseEffect(() => {\r\n\t\tredraw.current = function requestRedraw() {\r\n\t\t\tif (frameRequest.current !== undefined) {\r\n\t\t\t\tcancelAnimationFrame(frameRequest.current)\r\n\t\t\t}\r\n\t\t\tframeRequest.current = requestAnimationFrame(function redraw() {\r\n\t\t\t\tyRotation.current = yRotation.current % (Math.PI * 2)\r\n\t\t\t\txRotation.current = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, xRotation.current))\r\n\t\t\t\tviewDist.current = Math.max(1, viewDist.current)\r\n\r\n\t\t\t\tconst transform = mat4.create()\r\n\t\t\t\tmat4.translate(transform, transform, [0, 0, -viewDist.current])\r\n\t\t\t\tmat4.rotateX(transform, transform, xRotation.current)\r\n\t\t\t\tmat4.rotateY(transform, transform, yRotation.current)\r\n\t\t\t\tmat4.translate(transform, transform, centerPos.current)\r\n\t\t\t\tonDraw(transform)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [onDraw])\r\n\r\n\tuseEffect(function changeDetected() {\r\n\t\tredraw.current()\r\n\t}, [state, onDraw])\r\n\r\n\tuseEffect(function setupListeners() {\r\n\t\tif (!canvas.current) return\r\n\t\tfunction onMouseDown(e: MouseEvent) {\r\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\r\n\t\t\tdragButton.current = e.button\r\n\t\t}\r\n\t\tfunction onMouseMove(e: MouseEvent) {\r\n\t\t\tif (dragStart.current === undefined) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst dx = e.offsetX - dragStart.current[0]\r\n\t\t\tconst dy = e.offsetY - dragStart.current[1]\r\n\t\t\tif (dx === 0 && dy === 0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (dragButton.current === 0) {\r\n\t\t\t\tyRotation.current += dx / 100\r\n\t\t\t\txRotation.current += dy / 100\r\n\t\t\t\tredraw.current()\r\n\t\t\t} else if (dragButton.current === 1 || dragButton.current === 2) {\r\n\t\t\t\tconst pos = vec3.fromValues(centerPos.current[0], centerPos.current[1], centerPos.current[2])\r\n\t\t\t\tvec3.rotateY(pos, pos, [0, 0, 0], yRotation.current)\r\n\t\t\t\tvec3.rotateX(pos, pos, [0, 0, 0], xRotation.current)\r\n\t\t\t\tconst d = vec3.fromValues(dx / 100, -dy / 100, 0)\r\n\t\t\t\tvec3.scale(d, d, 0.25 * viewDist.current)\r\n\t\t\t\tvec3.add(pos, pos, d)\r\n\t\t\t\tvec3.rotateX(pos, pos, [0, 0, 0], -xRotation.current)\r\n\t\t\t\tvec3.rotateY(pos, pos, [0, 0, 0], -yRotation.current)\r\n\t\t\t\tcenterPos.current = [pos[0], pos[1], pos[2]]\r\n\t\t\t\tredraw.current()\r\n\t\t\t}\r\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\r\n\t\t}\r\n\t\tfunction onMouseUp() {\r\n\t\t\tdragStart.current = undefined\r\n\t\t}\r\n\t\tfunction onWheel(evt: WheelEvent) {\r\n\t\t\tviewDist.current = Math.max(1, viewDist.current + evt.deltaY / 100)\r\n\t\t\tredraw.current()\r\n\t\t\tevt.preventDefault()\r\n\t\t}\r\n\t\tfunction onContextMenu(evt: MouseEvent) {\r\n\t\t\tevt.preventDefault()\r\n\t\t}\r\n\t\tfunction resizeHandler() {\r\n\t\t\tif (!canvas.current) return\r\n\t\t\tconst width = canvas.current.clientWidth\r\n\t\t\tconst height = canvas.current.clientHeight\r\n\t\t\tcanvas.current.width = width\r\n\t\t\tcanvas.current.height = height\r\n\t\t\tonResize?.(width, height)\r\n\t\t\tredraw.current()\r\n\t\t}\r\n\r\n\t\tonSetup(canvas.current)\r\n\t\tresizeHandler()\r\n\r\n\t\tcanvas.current.addEventListener('mousedown', onMouseDown)\r\n\t\tcanvas.current.addEventListener('mousemove', onMouseMove)\r\n\t\tdocument.body.addEventListener('mouseup', onMouseUp)\r\n\t\tcanvas.current.addEventListener('wheel', onWheel)\r\n\t\tcanvas.current.addEventListener('contextmenu', onContextMenu)\r\n\t\twindow.addEventListener('resize', resizeHandler)\r\n\r\n\t\treturn () => {\r\n\t\t\tcanvas.current?.removeEventListener('mousedown', onMouseDown)\r\n\t\t\tcanvas.current?.removeEventListener('mousemove', onMouseMove)\r\n\t\t\tdocument.body.removeEventListener('mouseup', onMouseUp)\r\n\t\t\tcanvas.current?.removeEventListener('wheel', onWheel)\r\n\t\t\tcanvas.current?.removeEventListener('contextmenu', onContextMenu)\r\n\t\t\twindow.removeEventListener('resize', resizeHandler)\r\n\t\t}\r\n\t}, [onSetup, onResize])\r\n\r\n\treturn <canvas ref={canvas}></canvas>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { BlockDefinition, Identifier, Structure, StructureRenderer } from 'deepslate/render'\r\nimport type { mat4 } from 'gl-matrix'\r\nimport { useCallback, useRef } from 'preact/hooks'\r\nimport { useVersion } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { AsyncCancel } from '../../hooks/useAsyncFn.js'\r\nimport { getResources, ResourceWrapper } from '../../services/Resources.js'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas3D } from './InteractiveCanvas3D.jsx'\r\n\r\nconst PREVIEW_ID = Identifier.parse('misode:preview')\r\n\r\nexport const BlockStatePreview = ({ data, shown }: PreviewProps) => {\r\n\tconst { version } = useVersion()\r\n\tconst serializedData = JSON.stringify(data)\r\n\r\n\tconst { value: resources } = useAsync(async () => {\r\n\t\tif (!shown) return AsyncCancel\r\n\t\tconst resources = await getResources(version)\r\n\t\tconst definition = BlockDefinition.fromJson(PREVIEW_ID.toString(), DataModel.unwrapLists(data))\r\n\t\tconst wrapper = new ResourceWrapper(resources, {\r\n\t\t\tgetBlockDefinition(id) {\r\n\t\t\t\tif (id.equals(PREVIEW_ID)) return definition\r\n\t\t\t\treturn null\r\n\t\t\t},\r\n\t\t})\r\n\t\treturn wrapper\r\n\t}, [shown, version, serializedData])\r\n\r\n\tconst renderer = useRef<StructureRenderer | undefined>(undefined)\r\n\r\n\tconst onSetup = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tif (!resources || !shown) return\r\n\t\tconst gl = canvas.getContext('webgl')\r\n\t\tif (!gl) return\r\n\t\trenderer.current = new StructureRenderer(gl, new Structure([1, 1, 1]).addBlock([0, 0, 0], PREVIEW_ID), resources)\r\n\t}, [resources, shown])\r\n\tconst onResize = useCallback((width: number, height: number) => {\r\n\t\trenderer.current?.setViewport(0, 0, width, height)\r\n\t}, [resources])\r\n\tconst onDraw = useCallback((transform: mat4) => {\r\n\t\trenderer.current?.drawStructure(transform)\r\n\t}, [])\r\n\r\n\treturn <>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas3D onSetup={onSetup} onDraw={onDraw} onResize={onResize} startDistance={3} startPosition={[0.5, 0, 0.5]} startYRotation={2.5} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport type { BlockPos, ChunkPos, PerlinNoise, Random } from 'deepslate/worldgen'\r\nimport type { Color } from '../../Utils.js'\r\nimport { clamp, isObject, stringToColor } from '../../Utils.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { checkVersion } from '../../services/index.js'\r\n\r\nexport type Placement = [BlockPos, number]\r\n\r\nexport type PlacementContext = {\r\n\tplacements: Placement[],\r\n\tfeatures: string[],\r\n\trandom: Random,\r\n\tbiomeInfoNoise: PerlinNoise,\r\n\tseaLevel: number,\r\n\tversion: VersionId,\r\n\tnextFloat(): number,\r\n\tnextInt(max: number): number,\r\n\tnextGaussian(): number,\r\n}\r\n\r\nexport type PlacedFeature = {\r\n\tpos: BlockPos,\r\n\tfeature: string,\r\n\tcolor: Color,\r\n}\r\n\r\nconst terrain = [50, 50, 51, 51, 52, 52, 53, 54, 56, 57, 57, 58, 58, 59, 60, 60, 60, 59, 59, 59, 60, 61, 61, 62, 63, 63, 64, 64, 64, 65, 65, 66, 66, 65, 65, 66, 66, 67, 67, 67, 68, 69, 71, 73, 74, 76, 79, 80, 81, 81, 82, 83, 83, 82, 82, 81, 81, 80, 80, 80, 81, 81, 82, 82] \r\n\r\nexport const featureColors: Color[] = [\r\n\t[255, 77, 54],  // red\r\n\t[59, 118, 255], // blue\r\n\t[91, 207, 25],  // green\r\n\t[217, 32, 245], // magenta\r\n\t[255, 209, 41], // yellow\r\n\t[52, 204, 209], // cyan\r\n]\r\n\r\nexport function decorateChunk(pos: ChunkPos, state: any, ctx: PlacementContext): PlacedFeature[] {\r\n\tif (checkVersion(ctx.version, undefined, '1.17')) {\r\n\t\tgetPlacements([pos[0] * 16, 0, pos[1] * 16], DataModel.unwrapLists(state), ctx)\r\n\t} else {\r\n\t\tmodifyPlacement([pos[0] * 16, 0, pos[1] * 16], DataModel.unwrapLists(state.placement), ctx)\r\n\t}\r\n\r\n\treturn ctx.placements.map(([pos, i]) => {\r\n\t\tconst feature = ctx.features[i]\r\n\t\tlet color = i < featureColors.length ? featureColors[i] : stringToColor(feature)\r\n\t\tcolor = [clamp(color[0], 50, 205), clamp(color[1], 50, 205), clamp(color[2], 50, 205)]\r\n\t\tif ((Math.floor(pos[0] / 16) + Math.floor(pos[2] / 16)) % 2 === 0) {\r\n\t\t\tcolor = [0.85 * color[0], 0.85 * color[1], 0.85 * color[2]]\r\n\t\t}\r\n\t\treturn { pos, feature, color }\r\n\t})\r\n}\r\n\r\nfunction normalize(id: string) {\r\n\treturn id.startsWith('minecraft:') ? id.slice(10) : id\r\n}\r\n\r\nfunction decorateY(pos: BlockPos, y: number): BlockPos[] {\r\n\treturn [[ pos[0], y, pos[2] ]]\r\n}\r\n\r\nexport function sampleInt(value: any, ctx: PlacementContext): number {\r\n\tif (typeof value === 'number') {\r\n\t\treturn value\r\n\t} else if (value.base) {\r\n\t\treturn value.base ?? 1 + ctx.nextInt(1 + (value.spread ?? 0))\r\n\t} else {\r\n\t\tswitch (normalize(value.type)) {\r\n\t\t\tcase 'constant': return value.value\r\n\t\t\tcase 'uniform': return value.value.min_inclusive + ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1)\r\n\t\t\tcase 'biased_to_bottom': return value.value.min_inclusive + ctx.nextInt(ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1) + 1)\r\n\t\t\tcase 'clamped': return clamp(sampleInt(value.value.source, ctx), value.value.min_inclusive, value.value.max_inclusive)\r\n\t\t\tcase 'clamped_normal':\r\n\t\t\t\tconst normal = value.value.mean + ctx.nextGaussian() * value.value.deviation\r\n\t\t\t\treturn Math.floor(clamp(value.value.min_inclusive, value.value.max_inclusive, normal))\r\n\t\t\tcase 'weighted_list':\r\n\t\t\t\tconst totalWeight = (value.distribution as any[]).reduce<number>((sum, e) => sum + e.weight, 0)\r\n\t\t\t\tlet i = ctx.nextInt(totalWeight)\r\n\t\t\t\tfor (const e of value.distribution) {\r\n\t\t\t\t\ti -= e.weight\r\n\t\t\t\t\tif (i < 0) return sampleInt(e.data, ctx)\r\n\t\t\t\t}\r\n\t\t\t\treturn 0\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n}\r\n\r\nfunction resolveAnchor(anchor: any, _ctx: PlacementContext): number {\r\n\tif (!isObject(anchor)) return 0\r\n\tif (anchor.absolute !== undefined) return anchor.absolute\r\n\tif (anchor.above_bottom !== undefined) return anchor.above_bottom\r\n\tif (anchor.below_top !== undefined) return 256 - anchor.below_top\r\n\treturn 0\r\n}\r\n\r\nfunction sampleHeight(height: any, ctx: PlacementContext): number {\r\n\tif (!isObject(height)) throw new Error('Invalid height provider')\r\n\tif (typeof height.type !== 'string') {\r\n\t\treturn resolveAnchor(height, ctx)\r\n\t}\r\n\tswitch (normalize(height.type)) {\r\n\t\tcase 'constant': return resolveAnchor(height.value, ctx)\r\n\t\tcase 'uniform': {\r\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\r\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\r\n\t\t\treturn min + ctx.nextInt(max - min + 1)\r\n\t\t}\r\n\t\tcase 'biased_to_bottom': {\r\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\r\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\r\n\t\t\tconst n = ctx.nextInt(max - min - (height.inner ?? 1) + 1)\r\n\t\t\treturn min + ctx.nextInt(n + (height.inner ?? 1))\r\n\t\t}\r\n\t\tcase 'very_biased_to_bottom': {\r\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\r\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\r\n\t\t\tconst inner = height.inner ?? 1\r\n\t\t\tconst n1 = min + inner + ctx.nextInt(max - min - inner + 1)\r\n\t\t\tconst n2 = min + ctx.nextInt(n1 - min)\r\n\t\t\treturn min + ctx.nextInt(n2 - min + inner)\r\n\t\t}\r\n\t\tcase 'trapezoid': {\r\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\r\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\r\n\t\t\tconst plateau = height.plateau ?? 0\r\n\t\t\tif (plateau >= max - min) {\r\n\t\t\t\treturn min + ctx.nextInt(max - min + 1)\r\n\t\t\t}\r\n\t\t\tconst n1 = (max - min - plateau) / 2\r\n\t\t\tconst n2 = (max - min) - n1\r\n\t\t\treturn min + ctx.nextInt(n2 + 1) + ctx.nextInt(n1 + 1)\r\n\t\t}\r\n\t\tdefault: throw new Error(`Invalid height provider ${height.type}`)\r\n\t}\r\n}\r\n\r\n// 1.17 and before\r\nfunction useFeature(s: string, ctx: PlacementContext) {\r\n\tconst i = ctx.features.indexOf(s)\r\n\tif (i != -1) return i\r\n\tctx.features.push(s)\r\n\treturn ctx.features.length - 1\r\n}\r\n\r\nfunction getPlacements(pos: BlockPos, feature: any, ctx: PlacementContext): void {\r\n\tif (typeof feature === 'string') {\r\n\t\tctx.placements.push([pos, useFeature(feature, ctx)])\r\n\t\treturn\r\n\t}\r\n\tconst type = normalize(feature?.type ?? 'no_op')\r\n\tconst featureFn = Features[type]\r\n\tif (featureFn) {\r\n\t\tfeatureFn(feature.config, pos, ctx)\r\n\t} else {\r\n\t\tctx.placements.push([pos, useFeature(JSON.stringify(feature), ctx)])\r\n\t}\r\n}\r\n\r\nfunction getPositions(pos: BlockPos, decorator: any, ctx: PlacementContext): BlockPos[] {\r\n\tconst type = normalize(decorator?.type ?? 'nope')\r\n\tconst decoratorFn = Decorators[type]\r\n\tif (!decoratorFn) {\r\n\t\treturn [pos]\r\n\t}\r\n\treturn decoratorFn(decorator?.config, pos, ctx)\r\n}\r\n\r\nconst Features: {\r\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => void,\r\n} = {\r\n\tdecorated: (config, pos, ctx) => {\r\n\t\tconst positions = getPositions(pos, config?.decorator, ctx)\r\n\t\tpositions.forEach(p => getPlacements(p, config?.feature, ctx))\r\n\t},\r\n\trandom_boolean_selector: (config, pos, ctx) => {\r\n\t\tconst feature = ctx.nextFloat() < 0.5 ? config?.feature_true : config?.feature_false\r\n\t\tgetPlacements(pos, feature, ctx)\r\n\t},\r\n\trandom_selector: (config, pos, ctx) => {\r\n\t\tfor (const f of config?.features ?? []) {\r\n\t\t\tif (ctx.nextFloat() < (f?.chance ?? 0)) {\r\n\t\t\t\tgetPlacements(pos, f.feature, ctx)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetPlacements(pos, config?.default, ctx)\r\n\t},\r\n\tsimple_random_selector: (config, pos, ctx) => {\r\n\t\tconst feature = config?.features?.[ctx.nextInt(config?.features?.length ?? 0)]\r\n\t\tgetPlacements(pos, feature, ctx)\r\n\t},\r\n}\r\n\r\nconst Decorators: {\r\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => BlockPos[],\r\n} = {\r\n\tchance: (config, pos, ctx) => {\r\n\t\treturn ctx.nextFloat() < 1 / (config?.chance ?? 1) ? [pos] : []\r\n\t},\r\n\tcount: (config, pos, ctx) => {\r\n\t\treturn new Array(sampleInt(config?.count ?? 1, ctx)).fill(pos)\r\n\t},\r\n\tcount_extra: (config, pos, ctx) => {\r\n\t\tlet count = config?.count ?? 1\r\n\t\tif (ctx.nextFloat() < config.extra_chance ?? 0){\r\n\t\t\tcount += config.extra_count ?? 0\r\n\t\t}\r\n\t\treturn new Array(count).fill(pos)\r\n\t},\r\n\tcount_multilayer: (config, pos, ctx) => {\r\n\t\treturn new Array(sampleInt(config?.count ?? 1, ctx)).fill(pos)\r\n\t\t\t.map(p => [\r\n\t\t\t\tp[0] + ctx.nextInt(16),\r\n\t\t\t\tp[1], \r\n\t\t\t\tp[2] + ctx.nextInt(16),\r\n\t\t\t])\r\n\t},\r\n\tcount_noise: (config, pos, ctx) => {\r\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / 200, 0, pos[2] / 200)\r\n\t\tconst count = noise < config.noise_level ? config.below_noise : config.above_noise\r\n\t\treturn new Array(count).fill(pos)\r\n\t},\r\n\tcount_noise_biased: (config, pos, ctx) => {\r\n\t\tconst factor = Math.max(1, config.noise_factor)\r\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / factor, 0, pos[2] / factor)\r\n\t\tconst count = Math.max(0, Math.ceil((noise + (config.noise_offset ?? 0)) * config.noise_to_count_ratio))\r\n\t\treturn new Array(count).fill(pos)\r\n\t},\r\n\tdark_oak_tree: (_config, pos, ctx) => {\r\n\t\treturn [...new Array(16)].map((_, i) => {\r\n\t\t\tconst x = Math.floor(i / 4) * 4 + 1 + ctx.nextInt(3) + pos[0]\r\n\t\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, x)])\r\n\t\t\tconst z = Math.floor(i % 4) * 4 + 1 + ctx.nextInt(3) + pos[2]\r\n\t\t\treturn [x, y, z]\r\n\t\t})\r\n\t},\r\n\tdecorated: (config, pos, ctx) => {\r\n\t\treturn getPositions(pos, config?.outer, ctx).flatMap(p => {\r\n\t\t\treturn getPositions(p, config?.inner, ctx)\r\n\t\t})\r\n\t},\r\n\tdepth_average: (config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt(config?.spread ?? 0) + ctx.nextInt(config?.spread ?? 0) - (config.spread ?? 0) + (config?.baseline ?? 0)\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\temerald_ore: (_config, pos, ctx) => {\r\n\t\tconst count = 3 + ctx.nextInt(6)\r\n\t\treturn [...new Array(count)].map(() => [\r\n\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\t4 + ctx.nextInt(28),\r\n\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t])\r\n\t},\r\n\tfire: (config, pos, ctx) => {\r\n\t\tconst count = 1 + ctx.nextInt(ctx.nextInt(sampleInt(config?.count, ctx)))\r\n\t\treturn [...new Array(count)].map(() => [\r\n\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\tctx.nextInt(128),\r\n\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t])\r\n\t},\r\n\tglowstone: (config, pos, ctx) => {\r\n\t\tconst count = ctx.nextInt(1 + ctx.nextInt(sampleInt(config?.count, ctx)))\r\n\t\treturn [...new Array(count)].map(() => [\r\n\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\tctx.nextInt(128),\r\n\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t])\r\n\t},\r\n\theightmap: (_config, pos, ctx) => {\r\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\theightmap_spread_double: (_config, pos, ctx) => {\r\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\r\n\t\treturn decorateY(pos, ctx.nextInt(y * 2))\r\n\t},\r\n\theightmap_world_surface: (_config, pos, ctx) => {\r\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\ticeberg: (_config, pos, ctx) => {\r\n\t\treturn [[\r\n\t\t\tpos[0] + 4 + ctx.nextInt(8),\r\n\t\t\tpos[1],\r\n\t\t\tpos[2] + 4 + ctx.nextInt(8),\r\n\t\t]]\r\n\t},\r\n\tlava_lake: (config, pos, ctx) => {\r\n\t\tif (ctx.nextInt((config.chance ?? 1) / 10) === 0) {\r\n\t\t\tconst y = ctx.nextInt(ctx.nextInt(256 - 8) + 8)\r\n\t\t\tif (y < ctx.seaLevel || ctx.nextInt((config?.chance ?? 1) / 8) == 0) {\r\n\t\t\t\tconst x = ctx.nextInt(16) + pos[0]\r\n\t\t\t\tconst z = ctx.nextInt(16) + pos[2]\r\n\t\t\t\treturn [[x, y, z]]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn []\r\n\t},\r\n\tnope: (_config, pos) => {\r\n\t\treturn [pos]\r\n\t},\r\n\trange: (config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\trange_biased: (config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0))\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\trange_very_biased: (config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt(ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)) + (config?.bottom_offset ?? 0))\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\tspread_32_above: (_config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt(pos[1] + 32)\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\ttop_solid_heightmap: (_config, pos) => {\r\n\t\tconst y = terrain[clamp(0, 63, pos[0])]\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\tmagma: (_config, pos, ctx) => {\r\n\t\tconst y = ctx.nextInt(pos[1] + 32)\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\tsquare: (_config, pos, ctx) => {\r\n\t\treturn [[\r\n\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\tpos[1],\r\n\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t]]\r\n\t},\r\n\tsurface_relative_threshold: (config, pos) => {\r\n\t\tconst height = terrain[clamp(0, 63, pos[0])]\r\n\t\tconst min = height + (config?.min_inclusive ?? -Infinity)\r\n\t\tconst max = height + (config?.max_inclusive ?? Infinity)\r\n\t\treturn (pos[1] < min || pos[1] > max) ? [pos] : []\r\n\t},\r\n\twater_lake: (config, pos, ctx) => {\r\n\t\tif (ctx.nextInt(config.chance ?? 1) === 0) {\r\n\t\t\treturn [[\r\n\t\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\t\tctx.nextInt(256),\r\n\t\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t\t]]\r\n\t\t}\r\n\t\treturn []\r\n\t},\r\n}\r\n\r\n// 1.18 and after\r\nfunction modifyPlacement(pos: BlockPos, placement: any[], ctx: PlacementContext) {\r\n\tlet positions = [pos]\r\n\tfor (const modifier of placement) {\r\n\t\tconst modifierFn = PlacementModifiers[normalize(modifier?.type ?? 'nope')]\r\n\t\tif (!modifierFn) continue\r\n\t\tpositions = positions.flatMap(pos =>\r\n\t\t\tPlacementModifiers[normalize(modifier.type)](modifier, pos, ctx)\r\n\t\t)\r\n\t}\r\n\tfor (const pos of positions) {\r\n\t\tctx.placements.push([pos, 0])\r\n\t}\r\n}\r\n\r\nconst PlacementModifiers: {\r\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => BlockPos[],\r\n} = {\r\n\tcount: ({ count }, pos, ctx) => {\r\n\t\treturn new Array(sampleInt(count ?? 1, ctx)).fill(pos)\r\n\t},\r\n\tcount_on_every_layer: ({ count }, pos, ctx) => {\r\n\t\treturn new Array(sampleInt(count ?? 1, ctx)).fill(pos)\r\n\t\t\t.map(p => [\r\n\t\t\t\tp[0] + ctx.nextInt(16),\r\n\t\t\t\tp[1], \r\n\t\t\t\tp[2] + ctx.nextInt(16),\r\n\t\t\t])\r\n\t},\r\n\tenvironment_scan: ({}, pos) => {\r\n\t\treturn [pos]\r\n\t},\r\n\theight_range: ({ height }, pos, ctx) => {\r\n\t\treturn decorateY(pos, sampleHeight(height, ctx))\r\n\t},\r\n\theightmap: ({}, pos, ctx) => {\r\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\r\n\t\treturn decorateY(pos, y)\r\n\t},\r\n\tin_square: ({}, pos, ctx) => {\r\n\t\treturn [[\r\n\t\t\tpos[0] + ctx.nextInt(16),\r\n\t\t\tpos[1],\r\n\t\t\tpos[2] + ctx.nextInt(16),\r\n\t\t]]\r\n\t},\r\n\tnoise_based_count: ({ noise_to_count_ratio, noise_factor, noise_offset }, pos, ctx) => {\r\n\t\tconst factor = Math.max(1, noise_factor)\r\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / factor, 0, pos[2] / factor)\r\n\t\tconst count = Math.max(0, Math.ceil((noise + (noise_offset ?? 0)) * noise_to_count_ratio))\r\n\t\treturn new Array(count).fill(pos)\r\n\t},\r\n\tnoise_threshold_count: ({ noise_level, below_noise, above_noise }, pos, ctx) => {\r\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / 200, 0, pos[2] / 200)\r\n\t\tconst count = noise < noise_level ? below_noise : above_noise\r\n\t\treturn new Array(count).fill(pos)\r\n\t},\r\n\trandom_offset: ({ xz_spread, y_spread }, pos, ctx) => {\r\n\t\treturn [[\r\n\t\t\tpos[0] + sampleInt(xz_spread, ctx),\r\n\t\t\tpos[1] + sampleInt(y_spread, ctx),\r\n\t\t\tpos[2] + sampleInt(xz_spread, ctx),\r\n\t\t]]\r\n\t},\r\n\trarity_filter: ({ chance }, pos, ctx) => {\r\n\t\treturn ctx.nextFloat() < 1 / (chance ?? 1) ? [pos] : []\r\n\t},\r\n}\r\n","import { BlockPos, ChunkPos, LegacyRandom, PerlinNoise } from 'deepslate'\r\nimport type { mat3 } from 'gl-matrix'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { computeIfAbsent, iterateWorld2D, randomSeed } from '../../Utils.js'\r\nimport { Btn } from '../index.js'\r\nimport type { PlacedFeature, PlacementContext } from './Decorator.js'\r\nimport { decorateChunk } from './Decorator.js'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\n\r\nexport const DecoratorPreview = ({ data, version, shown }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst state = JSON.stringify(data)\r\n\r\n\tconst { context, chunkFeatures } = useMemo(() => {\r\n\t\tconst random = new LegacyRandom(seed)\r\n\t\tconst context: PlacementContext = {\r\n\t\t\tplacements: [],\r\n\t\t\tfeatures: [],\r\n\t\t\trandom,\r\n\t\t\tbiomeInfoNoise: new PerlinNoise(random.fork(), 0, [1]),\r\n\t\t\tseaLevel: 63,\r\n\t\t\tversion: version,\r\n\t\t\tnextFloat: () => random.nextFloat(),\r\n\t\t\tnextInt: (max: number) => random.nextInt(max),\r\n\t\t\tnextGaussian: () => Math.sqrt(-2 * Math.log(1 - random.nextFloat())) * Math.cos(2 * Math.PI * random.nextFloat()),\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tcontext,\r\n\t\t\tchunkFeatures: new Map<string, PlacedFeature[]>(),\r\n\t\t}\r\n\t}, [state, version, seed])\r\n\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\r\n\tconst onSetup = useCallback(function onSetup(canvas: HTMLCanvasElement) {\r\n\t\tconst ctx2D = canvas.getContext('2d')\r\n\t\tif (!ctx2D) return\r\n\t\tctx.current = ctx2D\r\n\t}, [])\r\n\tconst onResize = useCallback(function onResize(width: number, height: number) {\r\n\t\tif (!ctx.current) return\r\n\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t}, [])\r\n\tconst onDraw = useCallback(function onDraw(transform: mat3) {\r\n\t\tif (!ctx.current || !imageData.current || !shown) return\r\n\r\n\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\tconst pos = ChunkPos.create(Math.floor(x / 16), Math.floor(-y / 16))\r\n\t\t\tconst features = computeIfAbsent(chunkFeatures, `${pos[0]} ${pos[1]}`, () => decorateChunk(pos, data, context))\r\n\t\t\treturn features.find(f => f.pos[0] === x && f.pos[2] == -y) ?? { pos: BlockPos.create(x, 0, -y) }\r\n\t\t}, (feature) => {\r\n\t\t\tif ('color' in feature) {\r\n\t\t\t\treturn feature.color\r\n\t\t\t}\r\n\t\t\tif ((Math.floor(feature.pos[0] / 16) + Math.floor(feature.pos[2] / 16)) % 2 === 0) {\r\n\t\t\t\treturn [0.85 * 256, 0.85 * 256, 0.85 * 256]\r\n\t\t\t}\r\n\t\t\treturn [256, 256, 256]\r\n\t\t})\r\n\t\tctx.current.putImageData(imageData.current, 0, 0)\r\n\t}, [context, chunkFeatures, shown])\r\n\tconst onHover = useCallback(function onHover(pos: [number, number] | undefined) {\r\n\t\tif (!pos) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst [x, y] = pos\r\n\t\t\tsetFocused([`X=${x} Z=${-y}`])\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn <>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas2D onSetup={onSetup} onResize={onResize} onDraw={onDraw} onHover={onHover} pixelSize={4} startScale={1/8} minScale={1/32} maxScale={1} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport type { Voxel } from 'deepslate/render'\r\nimport { clampedMap, VoxelRenderer } from 'deepslate/render'\r\nimport type { mat3, mat4 } from 'gl-matrix'\r\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\r\nimport { getProjectData, useLocale, useProject, useVersion } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { Store } from '../../Store.js'\r\nimport { iterateWorld2D, randomSeed } from '../../Utils.js'\r\nimport { Btn, BtnMenu, NumberInput } from '../index.js'\r\nimport type { ColormapType } from './Colormap.js'\r\nimport { getColormap } from './Colormap.js'\r\nimport { ColormapSelector } from './ColormapSelector.jsx'\r\nimport { DEEPSLATE } from './Deepslate.js'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\nimport { InteractiveCanvas3D } from './InteractiveCanvas3D.jsx'\r\n\r\nconst MODES = ['side', 'top', '3d'] as const\r\ntype Mode = typeof MODES[number]\r\n\r\nexport const DensityFunctionPreview = ({ data, shown }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst { project } = useProject()\r\n\tconst { version } = useVersion()\r\n\tconst [mode, setMode] = useState<Mode>('side')\r\n\tconst voxelMode = mode === '3d'\r\n\tconst topDown = mode === 'top'\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst [minY] = useState(0)\r\n\tconst [height] = useState(256)\r\n\tconst serializedData = JSON.stringify(data)\r\n\r\n\tconst { value: df } = useAsync(async () => {\r\n\t\tawait DEEPSLATE.loadVersion(version, getProjectData(project))\r\n\t\tconst df = DEEPSLATE.loadDensityFunction(DataModel.unwrapLists(data), minY, height, seed)\r\n\t\treturn df\r\n\t}, [version, project, minY, height, seed, serializedData])\r\n\r\n\t// === 2D ===\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\tconst [offset, setOffset] = useState<number>(0)\r\n\tconst [colormap, setColormap] = useState<ColormapType>(Store.getColormap() ?? 'viridis')\r\n\r\n\tconst onSetup2D = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tconst ctx2D = canvas.getContext('2d')\r\n\t\tif (!ctx2D) return\r\n\t\tctx.current = ctx2D\r\n\t}, [voxelMode])\r\n\tconst onResize2D = useCallback((width: number, height: number) => {\r\n\t\tif (!ctx.current) return\r\n\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t}, [voxelMode])\r\n\tconst onDraw2D = useCallback((transform: mat3) => {\r\n\t\tif (!ctx.current || !imageData.current || !df) return\r\n\r\n\t\tconst colormapFn = getColormap(colormap)\r\n\t\tconst colorPicker = (t: number) => colormapFn(t <= 0.5 ? t - 0.08 : t + 0.08)\r\n\t\tlet limit = 0.01\r\n\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\tconst density = df.compute(topDown ? { x, y: offset, z: y } : { x, y, z: offset })\r\n\t\t\tlimit = Math.max(limit, Math.min(1, Math.abs(density)))\r\n\t\t\treturn density\r\n\t\t}, (density) => {\r\n\t\t\tconst color = colorPicker(clampedMap(density, -limit, limit, 1, 0))\r\n\t\t\treturn [color[0] * 256, color[1] * 256, color[2] * 256]\r\n\t\t})\r\n\t\tctx.current.putImageData(imageData.current, 0, 0)\r\n\t}, [mode, df, offset, colormap])\r\n\tconst onHover2D = useCallback((pos: [number, number] | undefined) => {\r\n\t\tif (!pos || !df) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst [x, y] = pos\r\n\t\t\tconst output = df.compute(topDown ? { x, y: offset, z: -y } : { x: x, y: -y, z: offset })\r\n\t\t\tsetFocused([output.toPrecision(3), `X=${x} ${topDown ? 'Z' : 'Y'}=${-y}`])\r\n\t\t}\r\n\t}, [mode, df, offset])\r\n\r\n\t// === 3D ===\r\n\tconst renderer = useRef<VoxelRenderer | undefined>(undefined)\r\n\tconst [state, setState] = useState(0)\r\n\tconst [cutoff, setCutoff] = useState(0)\r\n\r\n\tconst onSetup3D = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tconst gl = canvas.getContext('webgl')\r\n\t\tif (!gl) return\r\n\t\trenderer.current = new VoxelRenderer(gl)\r\n\t}, [voxelMode])\r\n\tconst onResize3D = useCallback((width: number, height: number) => {\r\n\t\trenderer.current?.setViewport(0, 0, width, height)\r\n\t}, [voxelMode])\r\n\tconst onDraw3D = useCallback((transform: mat4) => {\r\n\t\trenderer.current?.draw(transform)\r\n\t}, [voxelMode])\r\n\tuseEffect(() => {\r\n\t\tif (!renderer.current || !shown || !df || !voxelMode) return\r\n\t\tconst voxels: Voxel[] = []\r\n\t\tconst maxY = minY + height\r\n\t\tfor (let x = 0; x < 16; x += 1) {\r\n\t\t\tfor (let y = minY; y < maxY; y += 1) {\r\n\t\t\t\tfor (let z = 0; z < 16; z += 1) {\r\n\t\t\t\t\tconst density = df.compute({ x, y, z })\r\n\t\t\t\t\tif (density > cutoff) {\r\n\t\t\t\t\t\tvoxels.push({ x, y, z, color: [200, 200, 200] })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\trenderer.current.setVoxels(voxels)\r\n\t\tsetState(state => state + 1)\r\n\t}, [voxelMode, df, cutoff])\r\n\r\n\treturn <>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t{voxelMode ? <>\r\n\t\t\t\t<BtnMenu icon=\"gear\">\r\n\t\t\t\t\t<div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t<span>{locale('cutoff')}</span>\r\n\t\t\t\t\t\t<NumberInput value={cutoff} onChange={setCutoff} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</BtnMenu>\r\n\t\t\t</> : <>\r\n\t\t\t\t<ColormapSelector value={colormap} onChange={setColormap} />\r\n\t\t\t</>}\r\n\t\t\t{!voxelMode && <div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t<span>{locale(topDown ? 'y' : 'z')}</span>\r\n\t\t\t\t<NumberInput value={offset} onChange={setOffset} />\r\n\t\t\t</div>}\r\n\t\t\t<BtnMenu icon=\"package\">\r\n\t\t\t\t{MODES.map(m => <Btn label={locale(`mode.${m}`)} active={mode == m} onClick={() => setMode(m)} />)}\r\n\t\t\t</BtnMenu>\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">{voxelMode\r\n\t\t\t? <InteractiveCanvas3D onSetup={onSetup3D} onDraw={onDraw3D} onResize={onResize3D} state={state} startDistance={100} startPosition={[8, 120, 8]} />\r\n\t\t\t: <InteractiveCanvas2D onSetup={onSetup2D} onDraw={onDraw2D} onHover={onHover2D} onResize={onResize2D} state={state} pixelSize={4} maxScale={128} />\r\n\t\t}</div>\r\n\t</>\r\n}\r\n","import type { ItemStack } from 'deepslate/core'\r\nimport { AttributeModifierOperation, Enchantment, Identifier, MobEffectInstance, Potion } from 'deepslate/core'\r\nimport { NbtList, NbtType } from 'deepslate/nbt'\r\nimport { useLocale } from '../contexts/Locale.jsx'\r\nimport { useVersion } from '../contexts/Version.jsx'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { getLanguage, getTranslation } from '../services/Resources.js'\r\nimport { message } from '../Utils.js'\r\nimport { TextComponent } from './TextComponent.jsx'\r\n\r\ninterface Props {\r\n\titem: ItemStack,\r\n\tadvanced?: boolean,\r\n}\r\nexport function ItemTooltip({ item, advanced }: Props) {\r\n\tconst { version } = useVersion()\r\n\tconst { lang } = useLocale()\r\n\r\n\tconst { value: language } = useAsync(() => getLanguage(version, lang), [version, lang])\r\n\r\n\tconst isPotion = item.is('potion') || item.is('splash_potion') || item.is('lingering_potion')\r\n\tlet displayName = item.tag.getCompound('display').getString('Name')\r\n\tlet name: string | undefined\r\n\tif (displayName) {\r\n\t\ttry {\r\n\t\t\tname = JSON.parse(displayName)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn(`Error parsing display name '${displayName}': ${message(e)}`)\r\n\t\t\tdisplayName = ''\r\n\t\t}\r\n\t}\r\n\tif (name === undefined) {\r\n\t\tif (language) {\r\n\t\t\tlet descriptionId = `${item.id.namespace}.${item.id.path}`\r\n\t\t\tif (isPotion) {\r\n\t\t\t\tdescriptionId = `${descriptionId}.effect.${Potion.fromNbt(item).name}`\r\n\t\t\t}\r\n\t\t\tname = getTranslation(language, `item.${descriptionId}`)\r\n\t\t\tname ??= getTranslation(language, `block.${descriptionId}`)\r\n\t\t}\r\n\t\tname ??= item.id.path\r\n\t\t\t.replace(/[_\\/]/g, ' ')\r\n\t\t\t.split(' ')\r\n\t\t\t.map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n\t\t\t.join(' ')\r\n\t}\r\n\tconst lore: any[] = []\r\n\titem.tag.getCompound('display').getList('Lore', NbtType.String).forEach((line) => {\r\n\t\ttry {\r\n\t\t\tlore.push(JSON.parse(line['value']))\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn(`Error parsing lore line '${line}': ${message(e)}`)\r\n\t\t}\r\n\t})\r\n\r\n\tconst durability = item.getItem().durability\r\n\tconst enchantments = (item.is('enchanted_book') ? item.tag.getList('StoredEnchantments', NbtType.Compound) : item.tag.getList('Enchantments', NbtType.Compound)) ?? NbtList.create()\r\n\r\n\tconst effects = isPotion ? Potion.getAllEffects(item) : []\r\n\tconst attributeModifiers = isPotion ? Potion.getAllAttributeModifiers(item) : []\r\n\r\n\treturn <>\r\n\t\t<TextComponent component={name} base={{ color: 'white', italic: displayName.length > 0 }} />\r\n\t\t{shouldShow(item, 'additional') && <>\r\n\t\t\t{(!advanced && displayName.length === 0 && item.is('filled_map') && item.tag.hasNumber('map')) && <>\r\n\t\t\t\t<TextComponent component={{ text: `#${item.tag.getNumber('map')}`, color: 'gray' }} />\r\n\t\t\t</>}\r\n\t\t\t{(item.is('filled_map') && advanced) && <>\r\n\t\t\t\t<TextComponent component={{ translate: 'filled_map.unknown', color: 'gray' }} />\r\n\t\t\t</>}\r\n\t\t\t{isPotion && effects.length === 0\r\n\t\t\t\t? <TextComponent component={{ translate: 'effect.none', color: 'gray' }} />\r\n\t\t\t\t: effects.map(e => {\r\n\t\t\t\t\tconst color = e.effect.category === 'harmful' ? 'red' : 'blue'\r\n\t\t\t\t\tlet component: any = { translate: `effect.${e.effect.id.namespace}.${e.effect.id.path}` }\r\n\t\t\t\t\tif (e.amplifier > 0) {\r\n\t\t\t\t\t\tcomponent = { translate: 'potion.withAmplifier', with: [component, { translate: `potion.potency.${e.amplifier}` }] }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (e.duration > 20) {\r\n\t\t\t\t\t\tcomponent = { translate: 'potion.withDuration', with: [component, MobEffectInstance.formatDuration(e)] }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn <TextComponent component={{ ...component, color }} />\r\n\t\t\t\t})}\r\n\t\t\t{attributeModifiers.length > 0 && <>\r\n\t\t\t\t<TextComponent component='' />\r\n\t\t\t\t<TextComponent component={{ translate: 'potion.whenDrank', color: 'dark_purple' }} />\r\n\t\t\t\t{attributeModifiers.map(([attr, { amount, operation }]) => {\r\n\t\t\t\t\tconst a = operation === AttributeModifierOperation.addition ? amount * 100 : amount\r\n\t\t\t\t\tif (amount > 0) {\r\n\t\t\t\t\t\treturn <TextComponent component={{ translate: `attribute.modifier.plus.${operation}`, with: [Math.floor(a * 100) / 100, { translate: `attribute.name.${attr.id.path}` }], color: 'blue' }} />\r\n\t\t\t\t\t} else if (amount < 0) {\r\n\t\t\t\t\t\treturn <TextComponent component={{ translate: `attribute.modifier.take.${operation}`, with: [Math.floor(a * -100) / 100, { translate: `attribute.name.${attr.id.path}` }], color: 'red' }} />\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null\r\n\t\t\t\t})}\r\n\t\t\t</>}\r\n\t\t</>}\r\n\t\t{shouldShow(item, 'enchantments') && enchantments.map(enchantment => {\r\n\t\t\tconst id = enchantment.getString('id')\r\n\t\t\tconst lvl = enchantment.getNumber('lvl')\r\n\t\t\tconst ench = Enchantment.REGISTRY.get(Identifier.parse(id))\r\n\t\t\tconst component: any[] = [{ translate: `enchantment.${id.replace(':', '.')}`, color: ench?.isCurse ? 'red' : 'gray' }]\r\n\t\t\tif (lvl !== 1 || ench?.maxLevel !== 1) {\r\n\t\t\t\tcomponent.push(' ', { translate: `enchantment.level.${lvl}`})\r\n\t\t\t}\r\n\t\t\treturn <TextComponent component={component} />\r\n\t\t})}\r\n\t\t{item.tag.hasCompound('display') && <>\r\n\t\t\t{shouldShow(item, 'dye') && item.tag.getCompound('display').hasNumber('color') && (advanced\r\n\t\t\t\t? <TextComponent component={{ translate: 'item.color', with: [`#${item.tag.getCompound('display').getNumber('color').toString(16).padStart(6, '0')}`], color: 'gray' }} />\r\n\t\t\t\t: <TextComponent component={{ translate: 'item.dyed', color: 'gray' }} />)}\r\n\t\t\t{lore.map((component) => <TextComponent component={component} base={{ color: 'dark_purple', italic: true }} />)}\r\n\t\t</>}\r\n\t\t{shouldShow(item, 'unbreakable') && item.tag.getBoolean('Unbreakable') && <TextComponent component={{ translate: 'item.unbreakable', color: 'blue' }} />}\r\n\t\t{(advanced && item.tag.getNumber('Damage') > 0 && durability) && <TextComponent component={{ translate: 'item.durability', with: [`${durability - item.tag.getNumber('Damage')}`, `${durability}`] }} />}\r\n\t\t{advanced && <>\r\n\t\t\t<TextComponent component={{ text: item.id.toString(), color: 'dark_gray'}} />\r\n\t\t\t{item.tag.size > 0 && <TextComponent component={{ translate: 'item.nbt_tags', with: [item.tag.size], color: 'dark_gray' }} />}\r\n\t\t</>}\r\n\t</>\r\n}\r\n\r\nconst TooltipMasks = {\r\n\tenchantments: 1,\r\n\tmodifiers: 2,\r\n\tunbreakable: 4,\r\n\tcan_destroy: 8,\r\n\tcan_place: 16,\r\n\tadditional: 32,\r\n\tdye: 64,\r\n\tupgrades: 128,\r\n}\r\n\r\nfunction shouldShow(item: ItemStack, mask: keyof typeof TooltipMasks) {\r\n\tconst flags = item.tag.getNumber('HideFlags')\r\n\treturn (flags & TooltipMasks[mask]) === 0\r\n}\r\n","import type { Random } from 'deepslate/core'\r\nimport { Enchantment, Identifier, ItemStack, LegacyRandom } from 'deepslate/core'\r\nimport { NbtCompound, NbtInt, NbtList, NbtShort, NbtString, NbtTag, NbtType } from 'deepslate/nbt'\r\nimport { clamp, getWeightedRandom, isObject } from '../../Utils.js'\r\nimport type { VersionId } from '../../services/Schemas.js'\r\n\r\nexport interface SlottedItem {\r\n\tslot: number,\r\n\titem: ItemStack,\r\n}\r\n\r\ntype ItemConsumer = (item: ItemStack) => void\r\n\r\nconst StackMixers = {\r\n\tcontainer: fillContainer,\r\n\tdefault: assignSlots,\r\n}\r\n\r\ntype StackMixer = keyof typeof StackMixers\r\n\r\ninterface LootOptions {\r\n\tversion: VersionId,\r\n\tseed: bigint,\r\n\tluck: number,\r\n\tdaytime: number,\r\n\tweather: string,\r\n\tstackMixer: StackMixer,\r\n}\r\n\r\ninterface LootContext extends LootOptions {\r\n\trandom: Random,\r\n\tluck: number\r\n\tweather: string,\r\n\tdayTime: number,\r\n\tgetItemTag(id: string): string[],\r\n\tgetLootTable(id: string): any,\r\n\tgetPredicate(id: string): any,\r\n}\r\n\r\nexport function generateLootTable(lootTable: any, options: LootOptions) {\r\n\tconst ctx = createLootContext(options)\r\n\tconst result: ItemStack[] = []\r\n\tgenerateTable(lootTable, item => result.push(item), ctx)\r\n\tconst mixer = StackMixers[options.stackMixer]\r\n\treturn mixer(result, ctx)\r\n}\r\n\r\nconst SLOT_COUNT = 27\r\n\r\nfunction fillContainer(items: ItemStack[], ctx: LootContext): SlottedItem[] {\r\n\tconst slots = shuffle([...Array(SLOT_COUNT)].map((_, i) => i), ctx)\r\n\t\r\n\tconst queue = items.filter(i => !i.is('air') && i.count > 1)\r\n\titems = items.filter(i => !i.is('air') && i.count === 1)\r\n\r\n\twhile (SLOT_COUNT - items.length - queue.length > 0 && queue.length > 0) { \r\n\t\tconst [itemA] = queue.splice(ctx.random.nextInt(queue.length), 1)\r\n\t\tconst splitCount = ctx.random.nextInt(Math.floor(itemA.count / 2)) + 1\r\n\t\tconst itemB = splitItem(itemA, splitCount)\r\n\r\n\t\tfor (const item of [itemA, itemB]) {\r\n\t\t\tif (item.count > 1 && ctx.random.nextFloat() < 0.5) {\r\n\t\t\t\tqueue.push(item)\r\n\t\t\t} else {\r\n\t\t\t\titems.push(item)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\titems.push(...queue)\r\n\tshuffle(items, ctx)\r\n\r\n\tconst results: SlottedItem[] = []\r\n\tfor (const item of items) {\r\n\t\tconst slot = slots.pop()\r\n\t\tif (slot === undefined) {\r\n\t\t\tbreak\r\n\t\t}\r\n\t\tif (!item.is('air') && item.count > 0) {\r\n\t\t\tresults.push({ slot, item })\r\n\t\t}\r\n\t}\r\n\treturn results\r\n}\r\n\r\nfunction assignSlots(items: ItemStack[]): SlottedItem[] {\r\n\tconst results: SlottedItem[] = []\r\n\tlet slot = 0\r\n\tfor (const item of items) {\r\n\t\tif (slot >= 27) {\r\n\t\t\tbreak\r\n\t\t}\r\n\t\tif (!item.is('air') && item.count > 0) {\r\n\t\t\tresults.push({ slot, item })\r\n\t\t\tslot += 1\r\n\t\t}\r\n\t}\r\n\treturn results\r\n}\r\n\r\nfunction splitItem(item: ItemStack, count: number): ItemStack {\r\n\tconst splitCount = Math.min(count, item.count)\r\n\tconst other = item.clone()\r\n\tother.count = splitCount\r\n\titem.count = item.count - splitCount\r\n\treturn other\r\n}\r\n\r\nfunction shuffle<T>(array: T[], ctx: LootContext) {\r\n\tlet i = array.length\r\n\twhile (i > 0) {\r\n\t\tconst j = ctx.random.nextInt(i)\r\n\t\ti -= 1;\r\n\t\t[array[i], array[j]] = [array[j], array[i]]\r\n\t}\r\n\treturn array\r\n}\r\n\r\nfunction generateTable(table: any, consumer: ItemConsumer, ctx: LootContext) {\r\n\tconst tableConsumer = decorateFunctions(table.functions ?? [], consumer, ctx)\r\n\tfor (const pool of table.pools ?? []) {\r\n\t\tgeneratePool(pool, tableConsumer, ctx)\r\n\t}\r\n}\r\n\r\nfunction createLootContext(options: LootOptions): LootContext {\r\n\treturn {\r\n\t\t...options,\r\n\t\trandom: new LegacyRandom(options.seed),\r\n\t\tluck: options.luck,\r\n\t\tweather: options.weather,\r\n\t\tdayTime: options.daytime,\r\n\t\tgetItemTag: () => [],\r\n\t\tgetLootTable: () => ({ pools: [] }),\r\n\t\tgetPredicate: () => [],\r\n\t}\r\n}\r\n\r\nfunction generatePool(pool: any, consumer: ItemConsumer, ctx: LootContext) {\r\n\tif (composeConditions(pool.conditions ?? [])(ctx)) {\r\n\t\tconst poolConsumer = decorateFunctions(pool.functions ?? [], consumer, ctx)\r\n\r\n\t\tconst rolls = computeInt(pool.rolls, ctx) + Math.floor(computeFloat(pool.bonus_rolls, ctx) * ctx.luck)\r\n\t\tfor (let i = 0; i < rolls; i += 1) {\r\n\t\t\tlet totalWeight = 0\r\n\t\t\tconst entries: any[] = []\r\n\r\n\t\t\t// Expand entries\r\n\t\t\tfor (const entry of pool.entries ?? []) {\r\n\t\t\t\texpandEntry(entry, ctx, (e) => {\r\n\t\t\t\t\tconst weight = computeWeight(e, ctx.luck)\r\n\t\t\t\t\tif (weight > 0) {\r\n\t\t\t\t\t\tentries.push(e)\r\n\t\t\t\t\t\ttotalWeight += weight\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\t// Select random entry\r\n\t\t\tif (totalWeight === 0 || entries.length === 0) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tif (entries.length === 1) {\r\n\t\t\t\tcreateItem(entries[0], poolConsumer, ctx)\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tlet remainingWeight = ctx.random.nextInt(totalWeight)\r\n\t\t\tfor (const entry of entries) {\r\n\t\t\t\tremainingWeight -= computeWeight(entry, ctx.luck)\r\n\t\t\t\tif (remainingWeight < 0) {\r\n\t\t\t\t\tcreateItem(entry, poolConsumer, ctx)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction expandEntry(entry: any, ctx: LootContext, consumer: (entry: any) => void): boolean {\r\n\tif (!canEntryRun(entry, ctx)) {\r\n\t\treturn false\r\n\t}\r\n\tconst type = entry.type?.replace(/^minecraft:/, '')\r\n\tswitch (type) {\r\n\t\tcase 'group':\r\n\t\t\tfor (const child of entry.children ?? []) {\r\n\t\t\t\texpandEntry(child, ctx, consumer)\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\tcase 'alternatives':\r\n\t\t\tfor (const child of entry.children ?? []) {\r\n\t\t\t\tif (expandEntry(child, ctx, consumer)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\tcase 'sequence':\r\n\t\t\tfor (const child of entry.children ?? []) {\r\n\t\t\t\tif (!expandEntry(child, ctx, consumer)) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\tcase 'tag':\r\n\t\t\tif (entry.expand) {\r\n\t\t\t\tctx.getItemTag(entry.tag ?? '').forEach(tagEntry => {\r\n\t\t\t\t\tconsumer({ type: 'item', name: tagEntry })\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconsumer(entry)\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\tdefault:\r\n\t\t\tconsumer(entry)\r\n\t\t\treturn true\r\n\t}\r\n}\r\n\r\nfunction canEntryRun(entry: any, ctx: LootContext): boolean {\r\n\treturn composeConditions(entry.conditions ?? [])(ctx)\r\n}\r\n\r\nfunction createItem(entry: any, consumer: ItemConsumer, ctx: LootContext) {\r\n\tconst entryConsumer = decorateFunctions(entry.functions ?? [], consumer, ctx)\r\n\r\n\tconst type = entry.type?.replace(/^minecraft:/, '')\r\n\tif (typeof entry.name !== 'string') {\r\n\t\treturn\r\n\t}\r\n\tswitch (type) {\r\n\t\tcase 'item':\r\n\t\t\ttry {\r\n\t\t\t\tentryConsumer(new ItemStack(Identifier.parse(entry.name), 1))\r\n\t\t\t} catch (e) {}\r\n\t\t\tbreak\r\n\t\tcase 'tag':\r\n\t\t\tctx.getItemTag(entry.name).forEach(tagEntry => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tentryConsumer(new ItemStack(Identifier.parse(tagEntry), 1))\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t})\r\n\t\t\tbreak\r\n\t\tcase 'loot_table':\r\n\t\t\tgenerateTable(ctx.getLootTable(entry.name), entryConsumer, ctx)\r\n\t\t\tbreak\r\n\t\tcase 'dynamic':\r\n\t\t\t// not relevant for this simulation\r\n\t\t\tbreak\r\n\t}\r\n}\r\n\r\nfunction computeWeight(entry: any, luck: number) {\r\n\treturn Math.max(Math.floor((entry.weight ?? 1) + (entry.quality ?? 0) * luck), 0)\r\n}\r\n\r\ntype LootFunction = (item: ItemStack, ctx: LootContext) => void\r\n\r\nfunction decorateFunctions(functions: any[], consumer: ItemConsumer, ctx: LootContext): ItemConsumer {\r\n\tconst compositeFunction = composeFunctions(functions)\r\n\treturn (item) => {\r\n\t\tcompositeFunction(item, ctx)\r\n\t\tconsumer(item)\r\n\t}\r\n}\r\n\r\nfunction composeFunctions(functions: any[]): LootFunction {\r\n\treturn (item, ctx) => {\r\n\t\tfor (const fn of functions) {\r\n\t\t\tif (Array.isArray(fn)) {\r\n\t\t\t\tcomposeFunctions(fn)\r\n\t\t\t} else if (composeConditions(fn.conditions ?? [])(ctx)) {\r\n\t\t\t\tconst type = fn.function?.replace(/^minecraft:/, '');\r\n\t\t\t\t(LootFunctions[type]?.(fn) ?? (i => i))(item, ctx)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst LootFunctions: Record<string, (params: any) => LootFunction> = {\r\n\tenchant_randomly: ({ enchantments }) => (item, ctx) => {\r\n\t\tconst isBook = item.is('book')\r\n\t\tif (enchantments === undefined || enchantments.length === 0) {\r\n\t\t\tenchantments = Enchantment.REGISTRY.map((_, ench) => ench)\r\n\t\t\t\t.filter(ench => ench.isDiscoverable && (isBook || Enchantment.canEnchant(item, ench)))\r\n\t\t\t\t.map(e => e.id.toString())\r\n\t\t}\r\n\t\tif (enchantments.length > 0) {\r\n\t\t\tconst id = enchantments[ctx.random.nextInt(enchantments.length)]\r\n\t\t\tlet ench: Enchantment | undefined\r\n\t\t\ttry {\r\n\t\t\t\tench = Enchantment.REGISTRY.get(Identifier.parse(id))\r\n\t\t\t} catch (e) {}\r\n\t\t\tif (ench === undefined) return\r\n\t\t\tconst lvl = ctx.random.nextInt(ench.maxLevel - ench.minLevel + 1) + ench.minLevel\r\n\t\t\tif (isBook) {\r\n\t\t\t\titem.tag = new NbtCompound()\r\n\t\t\t\titem.count = 1\r\n\t\t\t}\r\n\t\t\tenchantItem(item, { id, lvl })\r\n\t\t\tif (isBook) {\r\n\t\t\t\titem.id = Identifier.create('enchanted_book')\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tenchant_with_levels: ({ levels, treasure }) => (item, ctx) => {\r\n\t\tconst enchants = selectEnchantments(ctx.random, item, computeInt(levels, ctx), treasure)\r\n\t\tconst isBook = item.is('book')\r\n\t\tif (isBook) {\r\n\t\t\titem.count = 1\r\n\t\t\titem.tag = new NbtCompound()\r\n\t\t}\r\n\t\tfor (const enchant of enchants) {\r\n\t\t\tenchantItem(item, enchant)\r\n\t\t}\r\n\t\tif (isBook) {\r\n\t\t\titem.id = Identifier.create('enchanted_book')\r\n\t\t}\r\n\t},\r\n\texploration_map: ({ decoration }) => (item) => {\r\n\t\tif (!item.is('map')) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\titem.id = Identifier.create('filled_map')\r\n\t\tconst color = decoration === 'mansion' ? 5393476 : decoration === 'monument' ? 3830373 : -1\r\n\t\tif (color >= 0) {\r\n\t\t\tgetOrCreateTag(item, 'display').set('MapColor', new NbtInt(color))\r\n\t\t}\r\n\t},\r\n\tlimit_count: ({ limit }) => (item, ctx) => {\r\n\t\tconst { min, max } = prepareIntRange(limit, ctx)\r\n\t\titem.count = clamp(item.count, min, max )\r\n\t},\r\n\tsequence: ({ functions }) => (item, ctx) => {\r\n\t\tif (!Array.isArray(functions)) return\r\n\t\tcomposeFunctions(functions)(item, ctx)\r\n\t},\r\n\tset_count: ({ count, add }) => (item, ctx) => {\r\n\t\tconst oldCount = add ? (item.count) : 0\r\n\t\titem.count = clamp(oldCount + computeInt(count, ctx), 0, 64)\r\n\t},\r\n\tset_damage: ({ damage, add }) => (item, ctx) => {\r\n\t\tconst maxDamage = item.getItem().durability\r\n\t\tif (maxDamage) {\r\n\t\t\tconst oldDamage = add ? 1 - item.tag.getNumber('Damage') / maxDamage : 0\r\n\t\t\tconst newDamage = 1 - clamp(computeFloat(damage, ctx) + oldDamage, 0, 1)\r\n\t\t\tconst finalDamage = Math.floor(newDamage * maxDamage)\r\n\t\t\titem.tag.set('Damage', new NbtInt(finalDamage))\r\n\t\t}\r\n\t},\r\n\tset_enchantments: ({ enchantments, add }) => (item, ctx) => {\r\n\t\tObject.entries(enchantments).forEach(([id, level]) => {\r\n\t\t\tconst lvl = computeInt(level, ctx)\r\n\t\t\ttry {\r\n\t\t\t\tenchantItem(item, { id: Identifier.parse(id), lvl }, add)\r\n\t\t\t} catch (e) {}\r\n\t\t})\r\n\t},\r\n\tset_lore: ({ lore, replace }) => (item) => {\r\n\t\tconst lines: string[] = lore.flatMap((line: any) => line !== undefined ? [JSON.stringify(line)] : [])\r\n\t\tconst newLore = replace ? lines : [...item.tag.getCompound('display').getList('Lore', NbtType.String).map(s => s.getAsString()), ...lines]\r\n\t\tgetOrCreateTag(item, 'display').set('Lore', new NbtList(newLore.map(l => new NbtString(l))))\r\n\t},\r\n\tset_name: ({ name }) => (item) => {\r\n\t\tif (name !== undefined) {\r\n\t\t\tconst newName = JSON.stringify(name)\r\n\t\t\tgetOrCreateTag(item, 'display').set('Name', new NbtString(newName))\r\n\t\t}\r\n\t},\r\n\tset_nbt: ({ tag }) => (item) => {\r\n\t\ttry {\r\n\t\t\tconst newTag = NbtTag.fromString(tag)\r\n\t\t\tif (newTag.isCompound()) {\r\n\t\t\t\titem.tag = newTag\r\n\t\t\t}\r\n\t\t} catch (e) {}\r\n\t},\r\n\tset_potion: ({ id }) => (item) => {\r\n\t\tif (typeof id === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\titem.tag.set('Potion', new NbtString(Identifier.parse(id).toString()))\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t},\r\n}\r\n\r\ntype LootCondition = (ctx: LootContext) => boolean\r\n\r\nfunction composeConditions(conditions: any[]): LootCondition {\r\n\treturn (ctx) => {\r\n\t\tfor (const cond of conditions) {\r\n\t\t\tif (!testCondition(cond, ctx)) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n}\r\n\r\nfunction testCondition(condition: any, ctx: LootContext): boolean {\r\n\tif (Array.isArray(condition)) {\r\n\t\treturn composeConditions(condition)(ctx)\r\n\t}\r\n\tconst type = condition.condition?.replace(/^minecraft:/, '')\r\n\treturn (LootConditions[type]?.(condition) ?? (() => true))(ctx)\r\n}\r\n\r\nconst LootConditions: Record<string, (params: any) => LootCondition> = {\r\n\talternative: params => LootConditions['any_of'](params),\r\n\tall_of: ({ terms }) => (ctx) => {\r\n\t\tif (!Array.isArray(terms) || terms.length === 0) return true\r\n\t\tfor (const term of terms) {\r\n\t\t\tif (!testCondition(term, ctx)) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true\r\n\t},\r\n\tany_of: ({ terms }) => (ctx) => {\r\n\t\tif (!Array.isArray(terms) || terms.length === 0) return true\r\n\t\tfor (const term of terms) {\r\n\t\t\tif (testCondition(term, ctx)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\tblock_state_property: () => () => {\r\n\t\treturn false // TODO\r\n\t},\r\n\tdamage_source_properties: ({ predicate }) => (ctx) => {\r\n\t\treturn testDamageSourcePredicate(predicate, ctx)\r\n\t},\r\n\tentity_properties: ({ predicate }) => (ctx) => {\r\n\t\treturn testEntityPredicate(predicate, ctx)\r\n\t},\r\n\tentity_scores: () => () => {\r\n\t\treturn false // TODO,\r\n\t},\r\n\tinverted: ({ term }) => (ctx) => {\r\n\t\treturn !testCondition(term, ctx)\r\n\t},\r\n\tkilled_by_player: ({ inverted }) => () => {\r\n\t\treturn (inverted ?? false) === false // TODO\r\n\t},\r\n\tlocation_check: ({ predicate }) => (ctx) => {\r\n\t\treturn testLocationPredicate(predicate, ctx)\r\n\t},\r\n\tmatch_tool: ({ predicate }) => (ctx) => {\r\n\t\treturn testItemPredicate(predicate, ctx)\r\n\t},\r\n\trandom_chance: ({ chance }) => (ctx) => {\r\n\t\treturn ctx.random.nextFloat() < chance\r\n\t},\r\n\trandom_chance_with_looting: ({ chance, looting_multiplier }) => (ctx) => {\r\n\t\tconst level = 0 // TODO: get looting level from killer\r\n\t\tconst probability = chance + level * looting_multiplier\r\n\t\treturn ctx.random.nextFloat() < probability\r\n\r\n\t},\r\n\treference: ({ name }) => (ctx) => {\r\n\t\tconst predicate = ctx.getPredicate(name) ?? []\r\n\t\tif (Array.isArray(predicate)) {\r\n\t\t\treturn composeConditions(predicate)(ctx)\r\n\t\t}\r\n\t\treturn testCondition(predicate, ctx)\r\n\t},\r\n\tsurvives_explosion: () => () => true,\r\n\ttable_bonus: ({ chances }) => (ctx) => {\r\n\t\tconst level = 0 // TODO: get enchantment level from tool\r\n\t\tconst chance = chances[clamp(level, 0, chances.length - 1)]\r\n\t\treturn ctx.random.nextFloat() < chance\r\n\t},\r\n\ttime_check: ({ value, period }) => (ctx) => {\r\n\t\tlet time = ctx.dayTime\r\n\t\tif (period !== undefined) {\r\n\t\t\ttime = time % period\r\n\t\t}\r\n\t\tconst { min, max } = prepareIntRange(value, ctx)\r\n\t\treturn min <= time && time <= max\r\n\t},\r\n\tvalue_check: () => () => {\r\n\t\treturn false // TODO\r\n\t},\r\n\tweather_check: ({ raining, thundering }) => (ctx) => {\r\n\t\tconst isRaining = ctx.weather === 'rain' || ctx.weather === 'thunder'\r\n\t\tconst isThundering = ctx.weather === 'thunder'\r\n\t\tif (raining !== undefined && raining !== isRaining) return false\r\n\t\tif (thundering !== undefined && thundering !== isThundering) return false\r\n\t\treturn true\r\n\t},\r\n}\r\n\r\nfunction computeInt(provider: any, ctx: LootContext): number {\r\n\tif (typeof provider === 'number') return Math.round(provider)\r\n\tif (!isObject(provider)) return 0\r\n\r\n\tconst type = provider.type?.replace(/^minecraft:/, '') ?? 'uniform'\r\n\tswitch (type) {\r\n\t\tcase 'constant':\r\n\t\t\treturn Math.round(provider.value ?? 0)\r\n\t\tcase 'uniform':\r\n\t\t\tconst min = computeInt(provider.min, ctx)\r\n\t\t\tconst max = computeInt(provider.max, ctx)\r\n\t\t\treturn max < min ? min : ctx.random.nextInt(max - min + 1) + min\r\n\t\tcase 'binomial':\r\n\t\t\tconst n = computeInt(provider.n, ctx)\r\n\t\t\tconst p = computeFloat(provider.p, ctx)\r\n\t\t\tlet result = 0\r\n\t\t\tfor (let i = 0; i < n; i += 1) {\r\n\t\t\t\tif (ctx.random.nextFloat() < p) {\r\n\t\t\t\t\tresult += 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result \r\n\t}\r\n\treturn 0\r\n}\r\n\r\nfunction computeFloat(provider: any, ctx: LootContext): number {\r\n\tif (typeof provider === 'number') return provider\r\n\tif (!isObject(provider)) return 0\r\n\r\n\tconst type = provider.type?.replace(/^minecraft:/, '') ?? 'uniform'\r\n\tswitch (type) {\r\n\t\tcase 'constant':\r\n\t\t\treturn provider.value ?? 0\r\n\t\tcase 'uniform':\r\n\t\t\tconst min = computeFloat(provider.min, ctx)\r\n\t\t\tconst max = computeFloat(provider.max, ctx)\r\n\t\t\treturn max < min ? min : ctx.random.nextFloat() * (max-min) + min\r\n\t\tcase 'binomial':\r\n\t\t\tconst n = computeInt(provider.n, ctx)\r\n\t\t\tconst p = computeFloat(provider.p, ctx)\r\n\t\t\tlet result = 0\r\n\t\t\tfor (let i = 0; i < n; i += 1) {\r\n\t\t\t\tif (ctx.random.nextFloat() < p) {\r\n\t\t\t\t\tresult += 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result \r\n\t}\r\n\treturn 0\r\n}\r\n\r\nfunction prepareIntRange(range: any, ctx: LootContext) {\r\n\tif (typeof range === 'number') {\r\n\t\trange = { min: range, max: range }\r\n\t}\r\n\tconst min = computeInt(range.min, ctx)\r\n\tconst max = computeInt(range.max, ctx)\r\n\treturn { min, max }\r\n}\r\n\r\nfunction testItemPredicate(_predicate: any, _ctx: LootContext) {\r\n\treturn false // TODO\r\n}\r\n\r\nfunction testLocationPredicate(_predicate: any, _ctx: LootContext) {\r\n\treturn false // TODO\r\n}\r\n\r\nfunction testEntityPredicate(_predicate: any, _ctx: LootContext) {\r\n\treturn false // TODO\r\n}\r\n\r\nfunction testDamageSourcePredicate(_predicate: any, _ctx: LootContext) {\r\n\treturn false // TODO\r\n}\r\n\r\nfunction enchantItem(item: ItemStack, enchant: Enchant, additive?: boolean) {\r\n\tconst listKey = item.is('book') ? 'StoredEnchantments' : 'Enchantments'\r\n\tif (!item.tag.hasList(listKey, NbtType.Compound)) {\r\n\t\titem.tag.set(listKey, new NbtList())\r\n\t}\r\n\tconst enchantments = item.tag.getList(listKey, NbtType.Compound).getItems()\r\n\tlet index = enchantments.findIndex((e: any) => e.id === enchant.id)\r\n\tif (index !== -1) {\r\n\t\tconst oldEnch = enchantments[index]\r\n\t\toldEnch.set('lvl', new NbtShort(Math.max(additive ? oldEnch.getNumber('lvl') + enchant.lvl : enchant.lvl, 0)))\r\n\t} else {\r\n\t\tenchantments.push(new NbtCompound().set('id', new NbtString(enchant.id.toString())).set('lvl', new NbtShort(enchant.lvl)))\r\n\t\tindex = enchantments.length - 1\r\n\t}\r\n\tif (enchantments[index].getNumber('lvl') === 0) {\r\n\t\tenchantments.splice(index, 1)\r\n\t}\r\n\titem.tag.set(listKey, new NbtList(enchantments))\r\n}\r\n\r\nfunction selectEnchantments(random: Random, item: ItemStack, levels: number, treasure: boolean): Enchant[] {\r\n\tconst enchantmentValue = item.getItem().enchantmentValue\r\n\tif (enchantmentValue === undefined) {\r\n\t\treturn []\r\n\t}\r\n\tlevels += 1 + random.nextInt(Math.floor(enchantmentValue / 4 + 1)) + random.nextInt(Math.floor(enchantmentValue / 4 + 1))\r\n\tconst f = (random.nextFloat() + random.nextFloat() - 1) * 0.15\r\n\tlevels = clamp(Math.round(levels + levels * f), 1, Number.MAX_SAFE_INTEGER)\r\n\tlet available = getAvailableEnchantments(item, levels, treasure)\r\n\tif (available.length === 0) {\r\n\t\treturn []\r\n\t}\r\n\tconst result: Enchant[] = []\r\n\tconst first = getWeightedRandom(random, available, getEnchantWeight)\r\n\tif (first) result.push(first)\r\n\r\n\twhile (random.nextInt(50) <= levels) {\r\n\t\tif (result.length > 0) {\r\n\t\t\tconst lastAdded = result[result.length - 1]\r\n\t\t\tavailable = available.filter(a => Enchantment.isCompatible(Enchantment.REGISTRY.getOrThrow(a.id), Enchantment.REGISTRY.getOrThrow(lastAdded.id)))\r\n\t\t}\r\n\t\tif (available.length === 0) break\r\n\t\tconst ench = getWeightedRandom(random, available, getEnchantWeight)\r\n\t\tif (ench) result.push(ench)\r\n\t\tlevels = Math.floor(levels / 2)\r\n\t}\r\n\r\n\treturn result\r\n}\r\n\r\nconst EnchantmentsRarityWeights = new Map(Object.entries<number>({\r\n\tcommon: 10,\r\n\tuncommon: 5,\r\n\trare: 2,\r\n\tvery_rare: 1,\r\n}))\r\n\r\nfunction getEnchantWeight(ench: Enchant) {\r\n\treturn EnchantmentsRarityWeights.get(Enchantment.REGISTRY.get(ench.id)?.rarity ?? 'common') ?? 10\r\n}\r\n\r\nfunction getAvailableEnchantments(item: ItemStack, levels: number, treasure: boolean): Enchant[] {\r\n\tconst result: Enchant[] = []\r\n\tconst isBook = item.is('book')\r\n\r\n\tEnchantment.REGISTRY.forEach((id, ench) => {\r\n\t\tif ((!ench.isTreasure || treasure) && ench.isDiscoverable && (Enchantment.canEnchant(item, ench) || isBook)) {\r\n\t\t\tfor (let lvl = ench.maxLevel; lvl > ench.minLevel - 1; lvl -= 1) {\r\n\t\t\t\tif (levels >= ench.minCost(lvl) && levels <= ench.maxCost(lvl)) {\r\n\t\t\t\t\tresult.push({ id, lvl })\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn result\r\n}\r\n\r\ninterface Enchant {\r\n\tid: Identifier,\r\n\tlvl: number,\r\n}\r\n\r\nconst AlwaysHasGlint = new Set([\r\n\t'minecraft:debug_stick',\r\n\t'minecraft:enchanted_golden_apple',\r\n\t'minecraft:enchanted_book',\r\n\t'minecraft:end_crystal',\r\n\t'minecraft:experience_bottle',\r\n\t'minecraft:written_book',\r\n])\r\n\r\nexport function itemHasGlint(item: ItemStack) {\r\n\tif (AlwaysHasGlint.has(item.id.toString())) {\r\n\t\treturn true\r\n\t}\r\n\tif (item.is('compass') && (item.tag.has('LodestoneDimension') || item.tag.has('LodestonePos'))) {\r\n\t\treturn true\r\n\t}\r\n\tif ((item.is('potion') || item.is('splash_potion') || item.is('lingering_potion')) && (item.tag.has('Potion') || item.tag.has('CustomPotionEffects'))) {\r\n\t\treturn true\r\n\t}\r\n\tif (item.tag.getList('Enchantments').length > 0 || item.tag.getList('StoredEnchantments').length > 0) {\r\n\t\treturn true\r\n\t}\r\n\treturn false\r\n}\r\n\r\nfunction getOrCreateTag(item: ItemStack, key: string) {\r\n\tif (item.tag.hasCompound(key)) {\r\n\t\treturn item.tag.getCompound(key)\r\n\t} else {\r\n\t\tconst tag = new NbtCompound()\r\n\t\titem.tag.set(key, tag)\r\n\t\treturn tag\r\n\t}\r\n}\r\n","import type { ItemStack } from 'deepslate/core'\r\nimport { Identifier } from 'deepslate/core'\r\nimport { useEffect, useRef, useState } from 'preact/hooks'\r\nimport { useVersion } from '../contexts/Version.jsx'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { renderItem } from '../services/Resources.js'\r\nimport { getCollections } from '../services/Schemas.js'\r\nimport { ItemTooltip } from './ItemTooltip.jsx'\r\nimport { Octicon } from './Octicon.jsx'\r\nimport { itemHasGlint } from './previews/LootTable.js'\r\n\r\ninterface Props {\r\n\titem: ItemStack,\r\n\tslotDecoration?: boolean,\r\n\ttooltip?: boolean,\r\n\tadvancedTooltip?: boolean,\r\n}\r\nexport function ItemDisplay({ item, slotDecoration, tooltip, advancedTooltip }: Props) {\r\n\tconst el = useRef<HTMLDivElement>(null)\r\n\tconst [tooltipOffset, setTooltipOffset] = useState<[number, number]>([0, 0])\r\n\tconst [tooltipSwap, setTooltipSwap] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst onMove = (e: MouseEvent) => {\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tconst { right, width } = el.current!.getBoundingClientRect()\r\n\t\t\t\tconst swap = right + 200 > document.body.clientWidth\r\n\t\t\t\tsetTooltipSwap(swap)\r\n\t\t\t\tsetTooltipOffset([(swap ? width - e.offsetX : e.offsetX) + 20, e.offsetY - 40])\r\n\t\t\t})\r\n\t\t}\r\n\t\tel.current?.addEventListener('mousemove', onMove)\r\n\t\treturn () => el.current?.removeEventListener('mousemove', onMove)\r\n\t}, [])\r\n\r\n\tconst maxDamage = item.getItem().durability\r\n\r\n\treturn <div class=\"item-display\" ref={el}>\r\n\t\t<ItemItself item={item} />\r\n\t\t{item.count !== 1 && <>\r\n\t\t\t<svg class=\"item-count\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMinYMid meet\">\r\n\t\t\t\t<text x=\"95\" y=\"93\" font-size=\"50\" textAnchor=\"end\" fontFamily=\"MinecraftSeven\" fill=\"#373737\">{item.count}</text>\r\n\t\t\t\t<text x=\"90\" y=\"88\" font-size=\"50\" textAnchor=\"end\" fontFamily=\"MinecraftSeven\" fill=\"#ffffff\">{item.count}</text>\r\n\t\t\t</svg>\r\n\t\t</>}\r\n\t\t{slotDecoration && <>\r\n\t\t\t{(maxDamage && item.tag.getNumber('Damage') > 0) && <svg class=\"item-durability\" width=\"100%\" height=\"100%\" viewBox=\"0 0 18 18\">\r\n\t\t\t\t<rect x=\"3\" y=\"14\" width=\"13\" height=\"2\" fill=\"#000\" />\r\n\t\t\t\t<rect x=\"3\" y=\"14\" width={`${(maxDamage - item.tag.getNumber('Damage')) / maxDamage * 13}`} height=\"1\" fill={`hsl(${(maxDamage - item.tag.getNumber('Damage')) / maxDamage * 120}deg, 100%, 50%)`} />\r\n\t\t\t</svg>}\r\n\t\t\t<div class=\"item-slot-overlay\"></div>\r\n\t\t</>}\r\n\t\t{tooltip !== false && <div class=\"item-tooltip\" style={tooltipOffset && {\r\n\t\t\tleft: (tooltipSwap ? undefined : `${tooltipOffset[0]}px`),\r\n\t\t\tright: (tooltipSwap ? `${tooltipOffset[0]}px` : undefined),\r\n\t\t\ttop: `${tooltipOffset[1]}px`,\r\n\t\t}}>\r\n\t\t\t<ItemTooltip item={item} advanced={advancedTooltip} />\r\n\t\t</div>}\r\n\t</div>\r\n}\r\n\r\nfunction ItemItself({ item }: Props) {\r\n\tconst { version } = useVersion()\r\n\r\n\tconst hasGlint = itemHasGlint(item)\r\n\r\n\tif (item.id.namespace !== Identifier.DEFAULT_NAMESPACE) {\r\n\t\treturn Octicon.package\r\n\t}\r\n\r\n\tconst { value: collections } = useAsync(() => getCollections(version), [])\r\n\r\n\tif (collections === undefined) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst modelPath = `item/${item.id.path}`\r\n\tif (collections.get('model').includes('minecraft:' + modelPath)) {\r\n\t\treturn <RenderedItem item={item} hasGlint={hasGlint} />\r\n\t}\r\n\r\n\treturn Octicon.package\r\n}\r\n\r\nfunction RenderedItem({ item, hasGlint }: Props & { hasGlint: boolean }) {\r\n\tconst { version } = useVersion()\r\n\tconst { value: src } = useAsync(() => renderItem(version, item), [version, item])\r\n\r\n\tif (src) {\r\n\t\treturn <>\r\n\t\t\t<img src={src} alt={item.id.toString()} class=\"model\" draggable={false} />\r\n\t\t\t{hasGlint && <div class=\"item-glint\" style={{'--mask-image': `url(\"${src}\")`}}></div>}\r\n\t\t</>\r\n\t}\r\n\r\n\treturn <div class=\"item-display\">\r\n\t\t{Octicon.package}\r\n\t</div>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { useMemo, useRef, useState } from 'preact/hooks'\r\nimport { useLocale, useVersion } from '../../contexts/index.js'\r\nimport { clamp, randomSeed } from '../../Utils.js'\r\nimport { Btn, BtnMenu, NumberInput } from '../index.js'\r\nimport { ItemDisplay } from '../ItemDisplay.jsx'\r\nimport type { PreviewProps } from './index.js'\r\nimport { generateLootTable } from './LootTable.js'\r\n\r\nexport const LootTablePreview = ({ data }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst { version } = useVersion()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst [luck, setLuck] = useState(0)\r\n\tconst [daytime, setDaytime] = useState(0)\r\n\tconst [weather, setWeather] = useState('clear')\r\n\tconst [mixItems, setMixItems] = useState(true)\r\n\tconst [advancedTooltips, setAdvancedTooltips] = useState(true)\r\n\tconst overlay = useRef<HTMLDivElement>(null)\r\n\r\n\tconst table = DataModel.unwrapLists(data)\r\n\tconst state = JSON.stringify(table)\r\n\tconst items = useMemo(() => {\r\n\t\treturn generateLootTable(table, { version, seed, luck, daytime, weather, stackMixer: mixItems ? 'container' : 'default' })\r\n\t}, [version, seed, luck, daytime, weather, mixItems, state])\r\n\r\n\treturn <>\r\n\t\t<div ref={overlay} class=\"preview-overlay\">\r\n\t\t\t<img src=\"/images/container.png\" alt=\"Container background\" class=\"pixelated\" draggable={false} />\r\n\t\t\t{items.map(({ slot, item }) =>\r\n\t\t\t\t<div key={slot} style={slotStyle(slot)}>\r\n\t\t\t\t\t<ItemDisplay item={item} slotDecoration={true} advancedTooltip={advancedTooltips} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('settings')} >\r\n\t\t\t\t<div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t<span>{locale('preview.luck')}</span>\r\n\t\t\t\t\t<NumberInput value={luck} onChange={setLuck} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t<span>{locale('preview.daytime')}</span>\r\n\t\t\t\t\t<NumberInput value={daytime} onChange={setDaytime} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"btn btn-input\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t<span>{locale('preview.weather')}</span>\r\n\t\t\t\t\t<select value={weather} onChange={e => setWeather((e.target as HTMLSelectElement).value)} >\r\n\t\t\t\t\t\t{['clear', 'rain', 'thunder'].map(v =>\r\n\t\t\t\t\t\t\t<option value={v}>{locale(`preview.weather.${v}`)}</option>)}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Btn icon={mixItems ? 'square_fill' : 'square'} label=\"Fill container randomly\" onClick={e => {setMixItems(!mixItems); e.stopPropagation()}} />\r\n\t\t\t\t<Btn icon={advancedTooltips ? 'square_fill' : 'square'} label=\"Advanced tooltips\" onClick={e => {setAdvancedTooltips(!advancedTooltips); e.stopPropagation()}} />\r\n\t\t\t</BtnMenu>\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')} onClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n\r\nconst GUI_WIDTH = 176\r\nconst GUI_HEIGHT = 81\r\nconst SLOT_SIZE = 18\r\n\r\nfunction slotStyle(slot: number) {\r\n\tslot = clamp(slot, 0, 26)\r\n\tconst x = (slot % 9) * SLOT_SIZE + 7\r\n\tconst y = (Math.floor(slot / 9)) * SLOT_SIZE + 20\r\n\treturn {\r\n\t\tleft: `${x*100/GUI_WIDTH}%`,\r\n\t\ttop: `${y*100/GUI_HEIGHT}%`,\r\n\t\twidth: `${SLOT_SIZE*100/GUI_WIDTH}%`,\r\n\t\theight: `${SLOT_SIZE*100/GUI_HEIGHT}%`,\r\n\t}\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { BlockDefinition, BlockModel, Identifier, Structure, StructureRenderer } from 'deepslate/render'\r\nimport type { mat4 } from 'gl-matrix'\r\nimport { useCallback, useRef } from 'preact/hooks'\r\nimport { useVersion } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { AsyncCancel } from '../../hooks/useAsyncFn.js'\r\nimport { getResources, ResourceWrapper } from '../../services/Resources.js'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas3D } from './InteractiveCanvas3D.jsx'\r\n\r\nconst PREVIEW_ID = Identifier.parse('misode:preview')\r\nconst PREVIEW_DEFINITION = new BlockDefinition(PREVIEW_ID, { '': { model: PREVIEW_ID.toString() }}, undefined)\r\n\r\nexport const ModelPreview = ({ data, shown }: PreviewProps) => {\r\n\tconst { version } = useVersion()\r\n\tconst serializedData = JSON.stringify(data)\r\n\r\n\tconst { value: resources } = useAsync(async () => {\r\n\t\tif (!shown) return AsyncCancel\r\n\t\tconst resources = await getResources(version)\r\n\t\tconst model = BlockModel.fromJson(PREVIEW_ID.toString(), DataModel.unwrapLists(data))\r\n\t\tmodel.flatten(resources)\r\n\t\tconst wrapper = new ResourceWrapper(resources, {\r\n\t\t\tgetBlockDefinition(id) {\r\n\t\t\t\tif (id.equals(PREVIEW_ID)) return PREVIEW_DEFINITION\r\n\t\t\t\treturn null\r\n\t\t\t},\r\n\t\t\tgetBlockModel(id) {\r\n\t\t\t\tif (id.equals(PREVIEW_ID)) return model\r\n\t\t\t\treturn null\r\n\t\t\t},\r\n\t\t})\r\n\t\treturn wrapper\r\n\t}, [shown, version, serializedData])\r\n\r\n\tconst renderer = useRef<StructureRenderer | undefined>(undefined)\r\n\r\n\tconst onSetup = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tif (!resources || !shown) return\r\n\t\tconst gl = canvas.getContext('webgl')\r\n\t\tif (!gl) return\r\n\t\trenderer.current = new StructureRenderer(gl, new Structure([1, 1, 1]).addBlock([0, 0, 0], PREVIEW_ID), resources)\r\n\t}, [resources, shown])\r\n\tconst onResize = useCallback((width: number, height: number) => {\r\n\t\trenderer.current?.setViewport(0, 0, width, height)\r\n\t}, [resources])\r\n\tconst onDraw = useCallback((transform: mat4) => {\r\n\t\trenderer.current?.drawStructure(transform)\r\n\t}, [])\r\n\r\n\treturn <>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas3D onSetup={onSetup} onDraw={onDraw} onResize={onResize} startDistance={3} startPosition={[0.5, 0, 0.5]} startYRotation={2.6} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { clampedMap, NoiseParameters, NormalNoise, XoroshiroRandom } from 'deepslate'\r\nimport type { mat3 } from 'gl-matrix'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { Store } from '../../Store.js'\r\nimport { iterateWorld2D, randomSeed } from '../../Utils.js'\r\nimport { Btn } from '../index.js'\r\nimport type { ColormapType } from './Colormap.js'\r\nimport { getColormap } from './Colormap.js'\r\nimport { ColormapSelector } from './ColormapSelector.jsx'\r\nimport type { PreviewProps } from './index.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\n\r\nexport const NoisePreview = ({ data, shown }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst state = JSON.stringify(data)\r\n\r\n\tconst noise = useMemo(() => {\r\n\t\tconst random = XoroshiroRandom.create(seed)\r\n\t\tconst params = NoiseParameters.fromJson(DataModel.unwrapLists(data))\r\n\t\treturn new NormalNoise(random, params)\r\n\t}, [state, seed])\r\n\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\tconst [colormap, setColormap] = useState<ColormapType>(Store.getColormap() ?? 'viridis')\r\n\r\n\tconst onSetup = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tconst ctx2D = canvas.getContext('2d')\r\n\t\tif (!ctx2D) return\r\n\t\tctx.current = ctx2D\r\n\t}, [])\r\n\tconst onResize = useCallback((width: number, height: number) => {\r\n\t\tif (!ctx.current) return\r\n\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t}, [])\r\n\tconst onDraw = useCallback((transform: mat3) => {\r\n\t\tif (!ctx.current || !imageData.current || !shown) return\r\n\r\n\t\tconst colorPicker = getColormap(colormap)\r\n\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\treturn noise.sample(x, y, 0)\r\n\t\t}, (value) => {\r\n\t\t\tconst color = colorPicker(clampedMap(value, -1, 1, 1, 0))\r\n\t\t\treturn [color[0] * 256, color[1] * 256, color[2] * 256]\r\n\t\t})\r\n\t\tctx.current.putImageData(imageData.current, 0, 0)\r\n\t}, [noise, colormap, shown])\r\n\tconst onHover = useCallback((pos: [number, number] | undefined) => {\r\n\t\tif (!pos) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst [x, y] = pos\r\n\t\t\tconst output = noise.sample(x, -y, 0)\r\n\t\t\tsetFocused([output.toPrecision(3), `X=${x} Y=${-y}`])\r\n\t\t}\r\n\t}, [noise])\r\n\r\n\treturn <>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t<ColormapSelector value={colormap} onChange={setColormap} />\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas2D onSetup={onSetup} onResize={onResize} onDraw={onDraw} onHover={onHover} pixelSize={4} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { clampedMap } from 'deepslate'\r\nimport type { mat3 } from 'gl-matrix'\r\nimport { vec2 } from 'gl-matrix'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { Store } from '../../Store.js'\r\nimport { iterateWorld2D, randomSeed } from '../../Utils.js'\r\nimport { getProjectData, useLocale, useProject } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/index.js'\r\nimport { CachedCollections } from '../../services/index.js'\r\nimport { Btn, BtnInput, BtnMenu, ErrorPanel } from '../index.js'\r\nimport type { ColormapType } from './Colormap.js'\r\nimport { getColormap } from './Colormap.js'\r\nimport { ColormapSelector } from './ColormapSelector.jsx'\r\nimport { DEEPSLATE } from './Deepslate.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\nimport type { PreviewProps } from './index.js'\r\n\r\nexport const NoiseSettingsPreview = ({ data, shown, version }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst { project } = useProject()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst [biome, setBiome] = useState('minecraft:plains')\r\n\tconst [layer, setLayer] = useState('terrain')\r\n\tconst state = JSON.stringify(data)\r\n\r\n\tconst { value, error } = useAsync(async () => {\r\n\t\tconst unwrapped = DataModel.unwrapLists(data)\r\n\t\tawait DEEPSLATE.loadVersion(version, getProjectData(project))\r\n\t\tconst biomeSource = { type: 'fixed', biome }\r\n\t\tawait DEEPSLATE.loadChunkGenerator(unwrapped, biomeSource, seed)\r\n\t\tconst noiseSettings = DEEPSLATE.getNoiseSettings()\r\n\t\tconst finalDensity = DEEPSLATE.loadDensityFunction(unwrapped?.noise_router?.final_density, noiseSettings.minY, noiseSettings.height, seed)\r\n\t\treturn { noiseSettings, finalDensity }\r\n\t}, [state, seed, version, project, biome])\r\n\tconst { noiseSettings, finalDensity } = value ?? {}\r\n\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\tconst [colormap, setColormap] = useState<ColormapType>(Store.getColormap() ?? 'viridis')\r\n\r\n\tconst onSetup = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tconst ctx2D = canvas.getContext('2d')\r\n\t\tif (!ctx2D) return\r\n\t\tctx.current = ctx2D\r\n\t}, [])\r\n\tconst onResize = useCallback((width: number, height: number) => {\r\n\t\tif (!ctx.current) return\r\n\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t}, [])\r\n\tconst onDraw = useCallback((transform: mat3) => {\r\n\t\tif (!ctx.current || !imageData.current || !shown) return\r\n\r\n\t\tif (layer === 'terrain') {\r\n\t\t\tconst pos = vec2.create()\r\n\t\t\tconst minX = vec2.transformMat3(pos, vec2.fromValues(0, 0), transform)[0]\r\n\t\t\tconst maxX = vec2.transformMat3(pos, vec2.fromValues(imageData.current.width-1, 0), transform)[0]\r\n\t\t\tDEEPSLATE.generateChunks(minX, maxX - minX + 1, biome)\r\n\t\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\t\treturn DEEPSLATE.getBlockState(x, y)?.getName().toString()\r\n\t\t\t}, (block) => {\r\n\t\t\t\treturn BlockColors[block ?? 'minecraft:air'] ?? [0, 0, 0]\r\n\t\t\t})\r\n\t\t} else if (layer === 'final_density') {\r\n\t\t\tconst colormapFn = getColormap(colormap)\r\n\t\t\tconst colorPicker = (t: number) => colormapFn(t <= 0.5 ? t - 0.08 : t + 0.08)\r\n\t\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\t\treturn finalDensity?.compute({ x, y, z: 0 }) ?? 0\r\n\t\t\t}, (density) => {\r\n\t\t\t\tconst color = colorPicker(clampedMap(density, -1, 1, 1, 0))\r\n\t\t\t\treturn [color[0] * 256, color[1] * 256, color[2] * 256]\r\n\t\t\t})\r\n\t\t}\r\n\t\tctx.current.putImageData(imageData.current, 0, 0)\r\n\t}, [noiseSettings, finalDensity, layer, colormap, biome, shown])\r\n\tconst onHover = useCallback((pos: [number, number] | undefined) => {\r\n\t\tif (!pos || !noiseSettings || !finalDensity) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst [x, y] = pos\r\n\t\t\tconst inVoid = -y < noiseSettings.minY || -y >= noiseSettings.minY + noiseSettings.height\r\n\t\t\tconst density = finalDensity.compute({ x, y: -y, z: 0})\r\n\t\t\tconst block = inVoid ? 'void' : DEEPSLATE.getBlockState(x, -y)?.getName().path ?? 'unknown'\r\n\t\t\tsetFocused([`${block} D=${density.toPrecision(3)}`, `X=${x} Y=${-y}`])\r\n\t\t}\r\n\t}, [noiseSettings, finalDensity])\r\n\r\n\tconst allBiomes = useMemo(() => CachedCollections?.get('worldgen/biome') ?? [], [version])\r\n\r\n\tif (error) {\r\n\t\treturn <ErrorPanel error={error} prefix=\"Failed to initialize preview: \" />\r\n\t}\r\n\r\n\treturn <>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t{layer === 'final_density' && <ColormapSelector value={colormap} onChange={setColormap} />}\r\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('terrain_settings')}>\r\n\t\t\t\t<BtnInput label={locale('preview.biome')} value={biome} onChange={setBiome} dataList={allBiomes} larger />\r\n\t\t\t\t<Btn icon={layer === 'final_density' ? 'square_fill' : 'square'} label={locale('preview.final_density')} onClick={() => setLayer(layer === 'final_density' ? 'terrain' : 'final_density')} />\r\n\t\t\t</BtnMenu>\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas2D onSetup={onSetup} onResize={onResize} onDraw={onDraw} onHover={onHover} pixelSize={4} startScale={0.5} startPosition={[0, 64]} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n\r\nconst BlockColors: Record<string, [number, number, number]> = {\r\n\t'minecraft:air': [150, 160, 170],\r\n\t'minecraft:water': [20, 80, 170],\r\n\t'minecraft:lava': [200, 100, 0],\r\n\t'minecraft:stone': [55, 55, 55],\r\n\t'minecraft:deepslate': [34, 34, 36],\r\n\t'minecraft:bedrock': [10, 10, 10],\r\n\t'minecraft:grass_block': [47, 120, 23],\r\n\t'minecraft:dirt': [64, 40, 8],\r\n\t'minecraft:gravel': [70, 70, 70],\r\n\t'minecraft:sand': [196, 180, 77],\r\n\t'minecraft:sandstone': [148, 135, 52],\r\n\t'minecraft:netherrack': [100, 40, 40],\r\n\t'minecraft:crimson_nylium': [144, 22, 22],\r\n\t'minecraft:warped_nylium': [28, 115, 113],\r\n\t'minecraft:basalt': [73, 74, 85],\r\n\t'minecraft:end_stone': [200, 200, 140],\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { Identifier, ItemStack } from 'deepslate'\r\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { useLocale, useVersion } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { fetchAllPresets } from '../../services/index.js'\r\nimport { Btn, BtnMenu } from '../index.js'\r\nimport { ItemDisplay } from '../ItemDisplay.jsx'\r\nimport type { PreviewProps } from './index.js'\r\n\r\nconst ANIMATION_TIME = 1000\r\n\r\nexport const RecipePreview = ({ data }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst { version } = useVersion()\r\n\tconst [advancedTooltips, setAdvancedTooltips] = useState(true)\r\n\tconst [animation, setAnimation] = useState(0)\r\n\tconst overlay = useRef<HTMLDivElement>(null)\r\n\r\n\tconst { value: itemTags } = useAsync(() => {\r\n\t\treturn fetchAllPresets(version, 'tag/item')\r\n\t}, [version])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tsetAnimation(n => n + 1)\t\r\n\t\t}, ANIMATION_TIME)\r\n\t\treturn () => clearInterval(interval)\r\n\t}, [])\r\n\r\n\tconst recipe = DataModel.unwrapLists(data)\r\n\tconst state = JSON.stringify(recipe)\r\n\tconst items = useMemo<Map<Slot, ItemStack>>(() => {\r\n\t\treturn placeItems(recipe, animation, itemTags ?? new Map())\r\n\t}, [state, animation, itemTags])\r\n\r\n\tconst gui = useMemo(() => {\r\n\t\tconst type = recipe.type?.replace(/^minecraft:/, '')\r\n\t\tif (type === 'smelting' || type === 'blasting' || type === 'smoking' || type === 'campfire_cooking') {\r\n\t\t\treturn '/images/furnace.png'\r\n\t\t} else if (type === 'stonecutting') {\r\n\t\t\treturn '/images/stonecutter.png'\r\n\t\t} else if (type === 'smithing_transform' || type === 'smithing_trim') {\r\n\t\t\treturn '/images/smithing.png'\r\n\t\t} else {\r\n\t\t\treturn '/images/crafting_table.png'\r\n\t\t}\r\n\t}, [state])\r\n\r\n\treturn <>\r\n\t\t<div ref={overlay} class=\"preview-overlay\">\r\n\t\t\t<img src={gui} alt=\"Crafting GUI\" class=\"pixelated\" draggable={false} />\r\n\t\t\t{[...items.entries()].map(([slot, item]) =>\r\n\t\t\t\t<div key={slot} style={slotStyle(slot)}>\r\n\t\t\t\t\t<ItemDisplay item={item} slotDecoration={true} advancedTooltip={advancedTooltips} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('settings')} >\r\n\t\t\t\t<Btn icon={advancedTooltips ? 'square_fill' : 'square'} label=\"Advanced tooltips\" onClick={e => {setAdvancedTooltips(!advancedTooltips); e.stopPropagation()}} />\r\n\t\t\t</BtnMenu>\r\n\t\t</div>\r\n\t</>\r\n}\r\n\r\nconst GUI_WIDTH = 176\r\nconst GUI_HEIGHT = 81\r\nconst SLOT_SIZE = 18\r\nconst SLOTS = {\r\n\t'crafting.0': [29, 16],\r\n\t'crafting.1': [47, 16],\r\n\t'crafting.2': [65, 16],\r\n\t'crafting.3': [29, 34],\r\n\t'crafting.4': [47, 34],\r\n\t'crafting.5': [65, 34],\r\n\t'crafting.6': [29, 52],\r\n\t'crafting.7': [47, 52],\r\n\t'crafting.8': [65, 52],\r\n\t'crafting.result': [123, 34],\r\n\t'smelting.ingredient': [55, 16],\r\n\t'smelting.fuel': [55, 53],\r\n\t'smelting.result': [115, 34],\r\n\t'stonecutting.ingredient': [19, 32],\r\n\t'stonecutting.result': [142, 32],\r\n\t'smithing.template': [7, 47],\r\n\t'smithing.base': [25, 47],\r\n\t'smithing.addition': [43, 47],\r\n\t'smithing.result': [97, 47],\r\n}\r\ntype Slot = keyof typeof SLOTS\r\n\r\nfunction slotStyle(slot: Slot) {\r\n\tconst [x, y] = SLOTS[slot]\r\n\treturn {\r\n\t\tleft: `${x*100/GUI_WIDTH}%`,\r\n\t\ttop: `${y*100/GUI_HEIGHT}%`,\r\n\t\twidth: `${SLOT_SIZE*100/GUI_WIDTH}%`,\r\n\t\theight: `${SLOT_SIZE*100/GUI_HEIGHT}%`,\r\n\t}\r\n}\r\n\r\nfunction placeItems(recipe: any, animation: number, itemTags: Map<string, any>) {\r\n\tconst items = new Map<Slot, ItemStack>()\r\n\tconst type: string = recipe.type?.replace(/^minecraft:/, '')\r\n\tif (!type || type.startsWith('crafting_special') || type === 'crafting_decorated_pot') {\r\n\t\treturn items\r\n\t}\r\n\r\n\tif (type === 'crafting_shapeless') {\r\n\t\tconst ingredients: any[] = Array.isArray(recipe.ingredients) ? recipe.ingredients : []\r\n\t\tingredients.forEach((ingredient, i) => {\r\n\t\t\tconst choices = allIngredientChoices(ingredient, itemTags)\r\n\t\t\tif (i >= 0 && i < 9 && choices.length > 0) {\r\n\t\t\t\tconst choice = choices[(3 * i + animation) % choices.length]\r\n\t\t\t\titems.set(`crafting.${i}` as Slot, choice)\r\n\t\t\t}\r\n\t\t})\r\n\t} else if (type === 'crafting_shaped') {\r\n\t\tconst keys = new Map<string, ItemStack>()\r\n\t\tfor (const [key, ingredient] of Object.entries(recipe.key ?? {})) {\r\n\t\t\tconst choices = allIngredientChoices(ingredient, itemTags)\r\n\t\t\tif (choices.length > 0) {\r\n\t\t\t\tconst choice = choices[animation % choices.length]\r\n\t\t\t\tkeys.set(key, choice)\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst pattern = Array.isArray(recipe.pattern) ? recipe.pattern : []\r\n\t\tfor (let row = 0; row < Math.min(3, pattern.length); row += 1) {\r\n\t\t\tfor (let col = 0; col < Math.min(3, pattern[row].length); col += 1) {\r\n\t\t\t\tconst key = pattern[row].split('')[col]\r\n\t\t\t\tconst choice = key === ' ' ? undefined : keys.get(key)\r\n\t\t\t\tif (choice) {\r\n\t\t\t\t\titems.set(`crafting.${row * 3 + col}` as Slot, choice)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (type === 'smelting' || type === 'smoking' || type === 'blasting' || type === 'campfire_cooking') {\r\n\t\tconst choices = allIngredientChoices(recipe.ingredient, itemTags)\r\n\t\tif (choices.length > 0) {\r\n\t\t\tconst choice = choices[animation % choices.length]\r\n\t\t\titems.set('smelting.ingredient' as Slot, choice)\r\n\t\t}\r\n\t} else if (type === 'stonecutting') {\r\n\t\tconst choices = allIngredientChoices(recipe.ingredient, itemTags)\r\n\t\tif (choices.length > 0) {\r\n\t\t\tconst choice = choices[animation % choices.length]\r\n\t\t\titems.set('stonecutting.ingredient' as Slot, choice)\r\n\t\t}\r\n\t} else if (type === 'smithing_transform' || type === 'smithing_trim') {\r\n\t\tfor (const ingredient of ['template', 'base', 'addition'] as const) {\r\n\t\t\tconst choices = allIngredientChoices(recipe[ingredient], itemTags)\r\n\t\t\tif (choices.length > 0) {\r\n\t\t\t\tconst choice = choices[animation % choices.length]\r\n\t\t\t\titems.set(`smithing.${ingredient}`, choice)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlet resultSlot: Slot = 'crafting.result'\r\n\tif (type === 'smelting' || type === 'smoking' || type === 'blasting' || type === 'campfire_cooking') {\r\n\t\tresultSlot = 'smelting.result'\r\n\t} else if (type === 'stonecutting') {\r\n\t\tresultSlot = 'stonecutting.result'\r\n\t} else if (type === 'smithing_transform' || type === 'smithing_trim') {\r\n\t\tresultSlot = 'smithing.result'\r\n\t}\r\n\tconst result = recipe.result\r\n\tif (type === 'smithing_trim') {\r\n\t\tconst base = items.get('smithing.base')\r\n\t\tif (base) {\r\n\t\t\titems.set(resultSlot, base)\r\n\t\t}\r\n\t} else if (typeof result === 'string') {\r\n\t\titems.set(resultSlot, new ItemStack(Identifier.parse(result), 1))\r\n\t} else if (typeof result === 'object' && result !== null) {\r\n\t\tconst id = typeof result.id === 'string' ? result.id\r\n\t\t\t: typeof result.item === 'string' ? result.item\r\n\t\t\t\t: 'minecraft:air'\r\n\t\tconst count = typeof result.count === 'number' ? result.count : 1\r\n\t\t// TODO: add components\r\n\t\titems.set(resultSlot, new ItemStack(Identifier.parse(id), count))\r\n\t}\r\n\r\n\treturn items\r\n}\r\n\r\nfunction allIngredientChoices(ingredient: any, itemTags: Map<string, any>): ItemStack[] {\r\n\tif (Array.isArray(ingredient)) {\r\n\t\treturn ingredient.flatMap(i => allIngredientChoices(i, itemTags))\r\n\t}\r\n\tif (typeof ingredient === 'object' && ingredient !== null) {\r\n\t\tif (typeof ingredient.item === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\treturn [new ItemStack(Identifier.parse(ingredient.item), 1)]\r\n\t\t\t} catch (e) {}\r\n\t\t} else if (typeof ingredient.tag === 'string') {\r\n\t\t\tconst tag: any = itemTags.get(ingredient.tag.replace(/^minecraft:/, ''))\r\n\t\t\tif (typeof tag === 'object' && tag !== null && Array.isArray(tag.values)) {\r\n\t\t\t\treturn tag.values.flatMap((value: any) => {\r\n\t\t\t\t\tif (typeof value !== 'string') return []\r\n\t\t\t\t\tif (value.startsWith('#')) return allIngredientChoices({ tag: value.slice(1) }, itemTags)\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn [new ItemStack(Identifier.parse(value), 1)]\r\n\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\treturn []\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn []\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport type { Identifier } from 'deepslate'\r\nimport { ChunkPos } from 'deepslate'\r\nimport type { mat3 } from 'gl-matrix'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport type { Color } from '../../Utils.js'\r\nimport { computeIfAbsent, iterateWorld2D, randomSeed, stringToColor } from '../../Utils.js'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { Btn } from '../index.js'\r\nimport { featureColors } from './Decorator.js'\r\nimport { DEEPSLATE } from './Deepslate.js'\r\nimport { InteractiveCanvas2D } from './InteractiveCanvas2D.jsx'\r\nimport type { PreviewProps } from './index.js'\r\n\r\nexport const StructureSetPreview = ({ data, version, shown }: PreviewProps) => {\r\n\tconst { locale } = useLocale()\r\n\tconst [seed, setSeed] = useState(randomSeed())\r\n\tconst state = JSON.stringify(data)\r\n\r\n\tconst { value: structureSet } = useAsync(async () => {\r\n\t\tawait DEEPSLATE.loadVersion(version)\r\n\t\tconst structureSet = DEEPSLATE.loadStructureSet(DataModel.unwrapLists(data), seed)\r\n\t\treturn structureSet\r\n\t}, [state, version, seed])\r\n\r\n\tconst { chunkStructures, structureColors } = useMemo(() => {\r\n\t\treturn {\r\n\t\t\tchunkStructures: new Map<string, Identifier | undefined>(),\r\n\t\t\tstructureColors: new Map<string, Color>(),\r\n\t\t}\r\n\t}, [structureSet])\r\n\r\n\tconst ctx = useRef<CanvasRenderingContext2D>()\r\n\tconst imageData = useRef<ImageData>()\r\n\tconst [focused, setFocused] = useState<string[]>([])\r\n\r\n\tconst onSetup = useCallback(function onSetup(canvas: HTMLCanvasElement) {\r\n\t\tconst ctx2D = canvas.getContext('2d')\r\n\t\tif (!ctx2D) return\r\n\t\tctx.current = ctx2D\r\n\t}, [])\r\n\tconst onResize = useCallback(function onResize(width: number, height: number) {\r\n\t\tif (!ctx.current) return\r\n\t\timageData.current = ctx.current.getImageData(0, 0, width, height)\r\n\t}, [])\r\n\tconst onDraw = useCallback(function onDraw(transform: mat3) {\r\n\t\tif (!ctx.current || !imageData.current || !shown || !structureSet) return\r\n\t\tconst context = DEEPSLATE.getWorldgenStructureContext()\r\n\t\tif (!context) return\r\n\r\n\t\titerateWorld2D(imageData.current, transform, (x, y) => {\r\n\t\t\tconst pos = ChunkPos.create(x, y)\r\n\t\t\tconst structure = computeIfAbsent(chunkStructures, `${pos[0]} ${pos[1]}`, () => structureSet?.getStructureInChunk(pos[0], pos[1], context))\r\n\t\t\treturn { structure, pos }\r\n\t\t}, ({ structure, pos }) => {\r\n\t\t\tif (structure !== undefined) {\r\n\t\t\t\tconst color = computeIfAbsent(structureColors, structure.toString(), () => {\r\n\t\t\t\t\tconst index = structureColors.size\r\n\t\t\t\t\treturn index < featureColors.length ? featureColors[index] : stringToColor(structure.toString())\r\n\t\t\t\t})\r\n\t\t\t\treturn [0.8 * color[0], 0.8 * color[1], 0.8 * color[2]]\r\n\t\t\t}\r\n\t\t\tif ((Math.floor(pos[0] / 32) + Math.floor(pos[1] / 32)) % 2 === 0) {\r\n\t\t\t\treturn [0.85 * 256, 0.85 * 256, 0.85 * 256]\r\n\t\t\t}\r\n\t\t\treturn [256, 256, 256]\r\n\t\t})\r\n\t\tctx.current.putImageData(imageData.current, 0, 0)\r\n\t}, [structureSet, chunkStructures, structureColors, shown])\r\n\tconst onHover = useCallback(function onHover(pos: [number, number] | undefined) {\r\n\t\tif (!pos) {\r\n\t\t\tsetFocused([])\r\n\t\t} else {\r\n\t\t\tconst [x, y] = pos\r\n\t\t\tconst context = DEEPSLATE.getWorldgenStructureContext()\r\n\t\t\tif (!context) return\r\n\t\t\tconst structure = structureSet?.getStructureInChunk(x, -y, context)\r\n\t\t\tsetFocused([...(structure ? [structure.toString().replace(/^minecraft:/, '')] : []), `X=${x << 4} Z=${(-y) << 4}`])\r\n\t\t}\r\n\t}, [structureSet])\r\n\r\n\treturn <>\r\n\t\t<div class=\"controls preview-controls\">\r\n\t\t\t{focused.map(s => <Btn label={s} class=\"no-pointer\" /> )}\r\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\r\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\r\n\t\t</div>\r\n\t\t<div class=\"full-preview\">\r\n\t\t\t<InteractiveCanvas2D onSetup={onSetup} onResize={onResize} onDraw={onDraw} onHover={onHover} pixelSize={4} startScale={1/8} minScale={1/32} maxScale={1/2} />\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import type { DataModel } from '@mcschema/core'\r\nimport { Path } from '@mcschema/core'\r\nimport { useState } from 'preact/hooks'\r\nimport { useModel } from '../../hooks/index.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { checkVersion } from '../../services/index.js'\r\nimport { BiomeSourcePreview, BlockStatePreview, DecoratorPreview, DensityFunctionPreview, LootTablePreview, ModelPreview, NoisePreview, NoiseSettingsPreview, RecipePreview, StructureSetPreview } from '../previews/index.js'\r\n\r\nexport const HasPreview = ['loot_table', 'recipe', 'dimension', 'worldgen/density_function', 'worldgen/noise', 'worldgen/noise_settings', 'worldgen/configured_feature', 'worldgen/placed_feature', 'worldgen/structure_set', 'block_definition', 'model']\r\n\r\ntype PreviewPanelProps = {\r\n\tmodel: DataModel | undefined,\r\n\tversion: VersionId,\r\n\tid: string,\r\n\tshown: boolean,\r\n\tonError: (message: string) => unknown,\r\n}\r\nexport function PreviewPanel({ model, version, id, shown }: PreviewPanelProps) {\r\n\tconst [, setCount] = useState(0)\r\n\r\n\tuseModel(model, () => {\r\n\t\tsetCount(count => count + 1)\r\n\t})\r\n\r\n\tif (!model) return <></>\r\n\tconst data = model.get(new Path([]))\r\n\tif (!data) return <></>\r\n\r\n\tif (id === 'loot_table') {\r\n\t\treturn <LootTablePreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'recipe') {\r\n\t\treturn <RecipePreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'dimension' && model.get(new Path(['generator', 'type']))?.endsWith('noise')) {\r\n\t\treturn <BiomeSourcePreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'worldgen/density_function') {\r\n\t\treturn <DensityFunctionPreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'worldgen/noise') {\r\n\t\treturn <NoisePreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'worldgen/noise_settings' && checkVersion(version, '1.18')) {\r\n\t\treturn <NoiseSettingsPreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif ((id === 'worldgen/placed_feature' ||  (id === 'worldgen/configured_feature' && checkVersion(version, '1.16', '1.17')))) {\r\n\t\treturn <DecoratorPreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'worldgen/structure_set' && checkVersion(version, '1.19')) {\r\n\t\treturn <StructureSetPreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'block_definition') {\r\n\t\treturn <BlockStatePreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\tif (id === 'model') {\r\n\t\treturn <ModelPreview {...{ model, version, shown, data }} />\r\n\t}\r\n\r\n\treturn <></>\r\n}\r\n","import { useEffect, useMemo, useRef, useState } from 'preact/hooks'\r\nimport config from '../../Config.js'\r\nimport type { Project } from '../../contexts/index.js'\r\nimport { disectFilePath, useLocale, useProject } from '../../contexts/index.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { DEFAULT_VERSION, parseSource } from '../../services/index.js'\r\nimport { message, readZip } from '../../Utils.js'\r\nimport { Btn, BtnMenu, FileUpload, Octicon, TextInput } from '../index.js'\r\nimport { Modal } from '../Modal.js'\r\n\r\ninterface Props {\r\n\tonClose: () => unknown,\r\n}\r\nexport function ProjectCreation({ onClose }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { projects, createProject, changeProject, updateProject } = useProject()\r\n\r\n\tconst [name, setName] = useState('')\r\n\tconst [namespace, setNamespace] = useState('')\r\n\tconst [version, setVersion] = useState(DEFAULT_VERSION)\r\n\tconst [file, setFile] = useState<File | undefined>(undefined)\r\n\tconst [creating, setCreating] = useState(false)\r\n\r\n\tconst onUpload = (file: File) => {\r\n\t\tif (file.type.match(/^application\\/(x-)?zip(-compressed)?$/)) {\r\n\t\t\tif (name.length === 0) {\r\n\t\t\t\tsetName(file.name\r\n\t\t\t\t\t.replace(/\\.zip$/, '')\r\n\t\t\t\t\t.replaceAll(/[ _-]+/g, ' '))\r\n\t\t\t}\r\n\t\t\tsetFile(file)\r\n\t\t}\r\n\t}\r\n\r\n\tconst projectUpdater = useRef(updateProject)\r\n\tuseEffect(() => {\r\n\t\tprojectUpdater.current = updateProject\r\n\t}, [updateProject])\r\n\r\n\tconst onCreate = () => {\r\n\t\tsetCreating(true)\r\n\t\tcreateProject(name, namespace || undefined, version)\r\n\t\tchangeProject(name)\r\n\t\tif (file) {\r\n\t\t\treadZip(file).then(async (entries) => {\r\n\t\t\t\tconst project: Partial<Project> = { files: [] }\r\n\t\t\t\tawait Promise.all(entries.map(async (entry) => {\r\n\t\t\t\t\tconst file = disectFilePath(entry[0], version)\r\n\t\t\t\t\tif (file) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst data = await parseSource(entry[1], 'json')\r\n\t\t\t\t\t\t\tproject.files!.push({ ...file, data })\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.error(`Failed parsing ${file.type} ${file.id}: ${message(e)}`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}))\r\n\t\t\t\tprojectUpdater.current(project)\r\n\t\t\t\tonClose()\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tonClose()\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tonClose()\r\n\t\t}\r\n\t}\r\n\r\n\tconst invalidName = useMemo(() => {\r\n\t\treturn projects.map(p => p.name.trim().toLowerCase()).includes(name.trim().toLowerCase())\r\n\t}, [projects, name])\r\n\r\n\tconst invalidNamespace = useMemo(() => {\r\n\t\treturn !(namespace.length === 0 || namespace.match(/^(?:[a-z0-9._-]+:)?[a-z0-9/._-]+$/))\r\n\t}, [namespace])\r\n\r\n\tconst versions = config.versions.map(v => v.id as VersionId).reverse()\r\n\r\n\treturn <Modal class=\"project-creation\" onDismiss={onClose}>\r\n\t\t<p>{locale('project.create')}</p>\r\n\t\t<div class=\"input-group\">\r\n\t\t\t<TextInput autofocus class={`btn btn-input${!creating && (invalidName || name.length === 0) ? ' invalid': ''}`} placeholder={locale('project.name')} value={name} onChange={setName} />\r\n\t\t\t{!creating && invalidName && <div class=\"status-icon danger tooltipped tip-e\" aria-label={locale('project.name.already_exists')}>{Octicon.issue_opened}</div>}\r\n\t\t</div>\r\n\t\t<div class=\"input-group\">\r\n\t\t\t<TextInput class={`btn btn-input${!creating && invalidNamespace ? ' invalid' : ''}`} placeholder={locale('project.namespace')} value={namespace} onChange={setNamespace} />\r\n\t\t\t{!creating && invalidNamespace && <div class=\"status-icon danger tooltipped tip-e\" aria-label={locale('project.namespace.invalid')}>{Octicon.issue_opened}</div>}\r\n\t\t</div>\r\n\t\t<BtnMenu icon=\"tag\" label={version} tooltip={locale('switch_version')} data-cy=\"version-switcher\">\r\n\t\t\t{versions.map(v =>\r\n\t\t\t\t<Btn label={v} active={v === version} onClick={() => setVersion(v)} />\r\n\t\t\t)}\r\n\t\t</BtnMenu>\r\n\t\t<FileUpload value={file} onChange={onUpload} label={locale('choose_zip_file')} accept=\".zip\"/>\r\n\t\t<Btn icon=\"rocket\" label=\"Create!\" disabled={creating || invalidName || name.length === 0 || invalidNamespace} onClick={onCreate} />\r\n\t</Modal>\r\n}\r\n","import { Analytics } from '../../Analytics.js'\r\nimport { useLocale, useProject } from '../../contexts/index.js'\r\nimport { Btn } from '../Btn.js'\r\nimport { Modal } from '../Modal.js'\r\n\r\ninterface Props {\r\n\tonClose: () => void,\r\n}\r\nexport function ProjectDeletion({ onClose }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { projects, project, deleteProject } = useProject()\r\n\r\n\tconst doSave = () => {\r\n\t\tAnalytics.deleteProject(projects.length, project.files.length, 'menu')\r\n\t\tdeleteProject(project.name)\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn <Modal class=\"file-modal\" onDismiss={onClose}>\r\n\t\t<p>{locale('project.delete_confirm.1', project.name)}</p>\r\n\t\t<p><b>{locale('project.delete_confirm.2')}</b></p>\r\n\t\t<div class=\"button-group\">\r\n\t\t\t<Btn icon=\"trashcan\" label={locale('project.delete')} onClick={doSave} class=\"danger\" />\r\n\t\t\t<Btn label={locale('project.cancel')} onClick={onClose} />\r\n\t\t</div>\r\n\t</Modal>\r\n}\r\n","import type { DataModel } from '@mcschema/core'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { Analytics } from '../../Analytics.js'\r\nimport config from '../../Config.js'\r\nimport { disectFilePath, DRAFT_PROJECT, getFilePath, useLocale, useProject, useVersion } from '../../contexts/index.js'\r\nimport { useFocus } from '../../hooks/useFocus.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { stringifySource } from '../../services/index.js'\r\nimport { Store } from '../../Store.js'\r\nimport { writeZip } from '../../Utils.js'\r\nimport { Btn } from '../Btn.js'\r\nimport { BtnMenu } from '../BtnMenu.js'\r\nimport { Octicon } from '../Octicon.jsx'\r\nimport type { TreeViewGroupRenderer, TreeViewLeafRenderer } from '../TreeView.js'\r\nimport { TreeView } from '../TreeView.js'\r\n\r\ninterface Props {\r\n\tmodel: DataModel | undefined,\r\n\tversion: VersionId,\r\n\tid: string,\r\n\tonError: (message: string) => unknown,\r\n\tonRename: (file: { type: string, id: string }) => unknown,\r\n\tonCreate: () => unknown,\r\n\tonDeleteProject: () => unknown,\r\n}\r\nexport function ProjectPanel({ onRename, onCreate, onDeleteProject }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version } = useVersion()\r\n\tconst { projects, project, changeProject, file, openFile, updateFile } = useProject()\r\n\r\n\tconst [treeViewMode, setTreeViewMode] = useState(Store.getTreeViewMode())\r\n\r\n\tconst changeTreeViewMode = useCallback((mode: string) => {\r\n\t\tStore.setTreeViewMode(mode)\r\n\t\tAnalytics.setTreeViewMode(mode)\r\n\t\tsetTreeViewMode(mode)\r\n\t}, [])\r\n\r\n\tconst disectEntry = useCallback((entry: string) => {\r\n\t\tif (treeViewMode === 'resources' && entry !== 'pack.mcmeta') {\r\n\t\t\tconst [type, id] = entry.split('/')\r\n\t\t\treturn {\r\n\t\t\t\ttype: type.replaceAll('\\u2215', '/'),\r\n\t\t\t\tid: id.replaceAll('\\u2215', '/'),\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn disectFilePath(entry, version)\r\n\t}, [treeViewMode, version])\r\n\r\n\tconst entries = useMemo(() => project.files.flatMap(f => {\r\n\t\tconst path = getFilePath(f, version)\r\n\t\tif (!path) return []\r\n\t\tif (f.type === 'pack_mcmeta') return 'pack.mcmeta'\r\n\t\tif (treeViewMode === 'resources') {\r\n\t\t\treturn [`${f.type.replaceAll('/', '\\u2215')}/${f.id.replaceAll('/', '\\u2215')}`]\r\n\t\t}\r\n\t\treturn [path]\r\n\t}), [treeViewMode, version, ...project.files])\r\n\r\n\tconst selected = useMemo(() => file && getFilePath(file, version), [file, version])\r\n\r\n\tconst selectFile = useCallback((entry: string) => {\r\n\t\tconst file = disectEntry(entry)\r\n\t\tif (file) {\r\n\t\t\topenFile(file.type, file.id)\r\n\t\t}\r\n\t}, [disectEntry])\r\n\r\n\tconst download = useRef<HTMLAnchorElement>(null)\r\n\r\n\tconst onDownload = async () => {\r\n\t\tif (!download.current) return\r\n\t\tlet hasPack = false\r\n\t\tconst entries = project.files.flatMap(file => {\r\n\t\t\tconst path = getFilePath(file, version)\r\n\t\t\tif (path === undefined) return []\r\n\t\t\tif (path === 'pack.mcmeta') hasPack = true\r\n\t\t\treturn [[path, stringifySource(file.data)]] as [string, string][]\r\n\t\t})\r\n\t\tif (!hasPack) {\r\n\t\t\tconst pack_format = config.versions.find(v => v.id === version)!.pack_format\r\n\t\t\tentries.push(['pack.mcmeta', stringifySource({ pack: { pack_format, description: '' } })])\r\n\t\t}\r\n\t\tconst url = await writeZip(entries)\r\n\t\tdownload.current.setAttribute('href', url)\r\n\t\tdownload.current.setAttribute('download', `${project.name.replaceAll(' ', '_')}.zip`)\r\n\t\tdownload.current.click()\r\n\t}\r\n\r\n\tconst actions = useMemo(() => [\r\n\t\t{\r\n\t\t\ticon: 'pencil',\r\n\t\t\tlabel: locale('project.rename_file'),\r\n\t\t\tonAction: (entry: string) => {\r\n\t\t\t\tconst file = disectEntry(entry)\r\n\t\t\t\tif (file) {\r\n\t\t\t\t\tonRename(file)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ticon: 'trashcan',\r\n\t\t\tlabel: locale('project.delete_file'),\r\n\t\t\tonAction: (entry: string) => {\r\n\t\t\t\tconst file = disectEntry(entry)\r\n\t\t\t\tif (file) {\r\n\t\t\t\t\tAnalytics.deleteProjectFile(file.type, projects.length, project.files.length, 'menu')\r\n\t\t\t\t\tupdateFile(file.type, file.id, {})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t], [disectEntry, updateFile, onRename])\r\n\r\n\tconst FolderEntry: TreeViewGroupRenderer = useCallback(({ name, open, onClick }) => {\r\n\t\treturn <div class=\"entry\" onClick={onClick} >\r\n\t\t\t{Octicon[!open ? 'chevron_right' : 'chevron_down']}\r\n\t\t\t<span class=\"overflow-hidden text-ellipsis whitespace-nowrap\">{name}</span>\r\n\t\t</div>\r\n\t}, [])\r\n\r\n\tconst FileEntry: TreeViewLeafRenderer<string> = useCallback(({ entry }) => {\r\n\t\tconst [focused, setFocus] = useFocus()\r\n\t\tconst onContextMenu = (evt: MouseEvent) => {\r\n\t\t\tevt.preventDefault()\r\n\t\t\tsetFocus()\r\n\t\t}\r\n\t\tconst file = disectEntry(entry)\r\n\r\n\t\treturn <div class={`entry ${file && getFilePath(file, version) === selected ? 'active' : ''} ${focused ? 'focused' : ''}`} onClick={() => selectFile(entry)} onContextMenu={onContextMenu} >\r\n\t\t\t{Octicon.file}\r\n\t\t\t<span>{entry.split('/').at(-1)}</span>\r\n\t\t\t{focused && <div class=\"entry-menu\">\r\n\t\t\t\t{actions?.map(a => <div class=\"action [&>svg]:inline\" onClick={e => { a.onAction(entry); e.stopPropagation(); setFocus(false) }}>\r\n\t\t\t\t\t{(Octicon as any)[a.icon]}\r\n\t\t\t\t\t<span>{a.label}</span>\r\n\t\t\t\t</div>)}\r\n\t\t\t</div>}\r\n\t\t</div>\r\n\t}, [actions, disectEntry])\r\n\r\n\treturn <>\r\n\t\t<div class=\"project-controls\">\r\n\t\t\t<BtnMenu icon=\"chevron_down\" label={project.name} tooltip={locale('switch_project')} tooltipLoc=\"se\">\r\n\t\t\t\t{projects.map(p => <Btn label={p.name} active={p.name === project.name} onClick={() => changeProject(p.name)} />)}\r\n\t\t\t</BtnMenu>\r\n\t\t\t<BtnMenu icon=\"kebab_horizontal\" >\r\n\t\t\t\t<Btn icon=\"file_zip\" label={locale('project.download')} onClick={onDownload} />\r\n\t\t\t\t<Btn icon=\"plus_circle\" label={locale('project.new')} onClick={onCreate} />\r\n\t\t\t\t<Btn icon={treeViewMode === 'resources' ? 'three_bars' : 'rows'} label={locale(treeViewMode === 'resources' ? 'project.show_file_paths' : 'project.show_resources')} onClick={() => changeTreeViewMode(treeViewMode === 'resources' ? 'files' : 'resources')} />\r\n\t\t\t\t{project.name !== DRAFT_PROJECT.name && <Btn icon=\"trashcan\" label={locale('project.delete')} onClick={onDeleteProject} />}\r\n\t\t\t</BtnMenu>\r\n\t\t</div>\r\n\t\t<div class=\"file-view\">\r\n\t\t\t{entries.length === 0\r\n\t\t\t\t? <span>{locale('project.no_files')}</span>\r\n\t\t\t\t: <TreeView entries={entries} split={path => path.split('/')} group={FolderEntry} leaf={FileEntry} />}\r\n\t\t</div>\r\n\t\t<a ref={download} style=\"display: none;\"></a>\r\n\t</>\r\n}\r\n","import type { DataModel, Hook } from '@mcschema/core'\r\nimport { ModelPath, relativePath } from '@mcschema/core'\r\nimport type { BlockStateRegistry } from '../services/index.js'\r\n\r\nexport function getOutput(model: DataModel, blockStates: BlockStateRegistry): any {\r\n\treturn model.schema.hook(transformOutput, new ModelPath(model), model.data, { blockStates })\r\n}\r\n\r\nexport type OutputProps = {\r\n\tblockStates: BlockStateRegistry,\r\n}\r\nexport const transformOutput: Hook<[any, OutputProps], any> = {\r\n\tbase({}, _, value) {\r\n\t\treturn value\r\n\t},\r\n\r\n\tchoice({ switchNode }, path, value, props) {\r\n\t\treturn switchNode.hook(this, path, value, props)\r\n\t},\r\n\r\n\tlist({ children }, path, value, props) {\r\n\t\tif (!Array.isArray(value)) return value\r\n\t\tconst res = value.map((obj, index) =>\r\n\t\t\tchildren.hook(this, path.push(index), obj.node, props)\r\n\t\t)\r\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\r\n\t\t\tres[a as any] = value[a as any]\r\n\t\t}\r\n\t\treturn res\r\n\t},\r\n\r\n\tmap({ children, config }, path, value, props) {\r\n\t\tif (value === undefined) return undefined\r\n\t\tconst blockState = config.validation?.validator === 'block_state_map'? props.blockStates?.[relativePath(path, config.validation.params.id).get()] : null\r\n\t\tconst res: any = {}\r\n\t\tObject.keys(value).forEach(f => {\r\n\t\t\tif (blockState) {\r\n\t\t\t\tif (!Object.keys(blockState.properties ?? {}).includes(f)) return\r\n\t\t\t}\r\n\t\t\tres[f] = children.hook(this, path.push(f), value[f], props)\r\n\t\t})\r\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\r\n\t\t\tres[a as any] = value[a]\r\n\t\t}\r\n\t\treturn res\r\n\t},\r\n\r\n\tobject({ getActiveFields }, path, value, props) {\r\n\t\tif (value === undefined || value === null || typeof value !== 'object') {\r\n\t\t\treturn value\r\n\t\t}\r\n\t\tconst res: any = {}\r\n\t\tconst activeFields = getActiveFields(path)\r\n\t\tObject.keys(activeFields)\r\n\t\t\t.filter(k => activeFields[k].enabled(path))\r\n\t\t\t.forEach(f => {\r\n\t\t\t\tconst out = activeFields[f].hook(this, path.push(f), value[f], props)\r\n\t\t\t\tif (out !== undefined && out !== null) {\r\n\t\t\t\t\tres[f] = out\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\r\n\t\t\tres[a as any] = value[a]\r\n\t\t}\r\n\t\treturn res\r\n\t},\r\n}\r\n","import { DataModel } from '@mcschema/core'\r\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useModel } from '../../hooks/index.js'\r\nimport { getOutput } from '../../schema/transformOutput.js'\r\nimport type { BlockStateRegistry } from '../../services/index.js'\r\nimport { getSourceFormats, getSourceIndent, getSourceIndents, parseSource, stringifySource } from '../../services/index.js'\r\nimport { Store } from '../../Store.js'\r\nimport { message } from '../../Utils.js'\r\nimport { Btn, BtnMenu } from '../index.js'\r\n\r\ninterface Editor {\r\n\tgetValue(): string\r\n\tsetValue(value: string): void\r\n\tconfigure(indent: string, format: string): void\r\n\tselect(): void\r\n}\r\n\r\ntype SourcePanelProps = {\r\n\tname: string,\r\n\tmodel: DataModel | undefined,\r\n\tblockStates: BlockStateRegistry | undefined,\r\n\tdoCopy?: number,\r\n\tdoDownload?: number,\r\n\tdoImport?: number,\r\n\tcopySuccess: () => unknown,\r\n\tonError: (message: string | Error) => unknown,\r\n}\r\nexport function SourcePanel({ name, model, blockStates, doCopy, doDownload, doImport, copySuccess, onError }: SourcePanelProps) {\r\n\tconst { locale } = useLocale()\r\n\tconst [indent, setIndent] = useState(Store.getIndent())\r\n\tconst [format, setFormat] = useState(Store.getFormat())\r\n\tconst [highlighting, setHighlighting] = useState(Store.getHighlighting())\r\n\tconst [braceLoaded, setBraceLoaded] = useState(false)\r\n\tconst download = useRef<HTMLAnchorElement>(null)\r\n\tconst retransform = useRef<Function>(() => {})\r\n\tconst onImport = useRef<() => Promise<void>>(async () => {})\r\n\r\n\tconst textarea = useRef<HTMLTextAreaElement>(null)\r\n\tconst editor = useRef<Editor>()\r\n\r\n\tconst getSerializedOutput = useCallback((model: DataModel, blockStates: BlockStateRegistry) => {\r\n\t\tconst data = getOutput(model, blockStates)\r\n\t\treturn stringifySource(data, format, indent)\r\n\t}, [indent, format])\r\n\r\n\tuseEffect(() => {\r\n\t\tretransform.current = () => {\r\n\t\t\tif (!editor.current) return\r\n\t\t\tif (!model || !blockStates) return\r\n\t\t\ttry {\r\n\t\t\t\tconst output = getSerializedOutput(model, blockStates)\r\n\t\t\t\teditor.current.setValue(output)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (e instanceof Error) {\r\n\t\t\t\t\te.message = `Error getting JSON output: ${e.message}`\r\n\t\t\t\t\tonError(e)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonError(`Error getting JSON output: ${message(e)}`)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t\teditor.current.setValue('')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tonImport.current = async () => {\r\n\t\t\tif (!editor.current) return\r\n\t\t\tconst value = editor.current.getValue()\r\n\t\t\tif (value.length === 0) return\r\n\t\t\ttry {\r\n\t\t\t\tconst data = await parseSource(value, format)\r\n\t\t\t\tmodel?.reset(DataModel.wrapLists(data), false)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (e instanceof Error) {\r\n\t\t\t\t\te.message = `Error importing: ${e.message}`\r\n\t\t\t\t\tonError(e)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonError(`Error importing: ${message(e)}`)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [model, blockStates, indent, format, highlighting])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (highlighting) {\r\n\t\t\tsetBraceLoaded(false)\r\n\t\t\teditor.current = {\r\n\t\t\t\tgetValue() { return ''},\r\n\t\t\t\tsetValue() {},\r\n\t\t\t\tconfigure() {},\r\n\t\t\t\tselect() {},\r\n\t\t\t}\r\n\t\t\timport('brace').then(async (brace) => {\r\n\t\t\t\tawait Promise.all([\r\n\t\t\t\t\timport('brace/mode/json'),\r\n\t\t\t\t\timport('brace/mode/yaml'),\r\n\t\t\t\t])\r\n\t\t\t\tconst braceEditor = brace.edit('editor')\r\n\t\t\t\tbraceEditor.setOptions({\r\n\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\tshowFoldWidgets: false,\r\n\t\t\t\t\thighlightSelectedWord: false,\r\n\t\t\t\t\tscrollPastEnd: 0.5,\r\n\t\t\t\t})\r\n\t\t\t\tbraceEditor.$blockScrolling = Infinity\r\n\t\t\t\tbraceEditor.on('blur', () => onImport.current())\r\n\t\t\t\tbraceEditor.getSession().setMode('ace/mode/json')\r\n\r\n\t\t\t\teditor.current = {\r\n\t\t\t\t\tgetValue() {\r\n\t\t\t\t\t\treturn braceEditor.getSession().getValue()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsetValue(value) {\r\n\t\t\t\t\t\tbraceEditor.getSession().setValue(value)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigure(indent, format) {\r\n\t\t\t\t\t\tbraceEditor.setOption('useSoftTabs', indent !== 'tabs')\r\n\t\t\t\t\t\tbraceEditor.setOption('tabSize', indent === 'tabs' ? 4 : getSourceIndent(indent))\r\n\t\t\t\t\t\tbraceEditor.getSession().setMode(`ace/mode/${format}`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselect() {\r\n\t\t\t\t\t\tbraceEditor.selectAll()\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\tsetBraceLoaded(true)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\teditor.current = {\r\n\t\t\t\tgetValue() {\r\n\t\t\t\t\tif (!textarea.current) return ''\r\n\t\t\t\t\treturn textarea.current.value\r\n\t\t\t\t},\r\n\t\t\t\tsetValue(value: string) {\r\n\t\t\t\t\tif (!textarea.current) return\r\n\t\t\t\t\ttextarea.current.value = value\r\n\t\t\t\t},\r\n\t\t\t\tconfigure() {},\r\n\t\t\t\tselect() {},\r\n\t\t\t}\r\n\t\t}\r\n\t}, [highlighting])\r\n\r\n\tuseModel(model, () => {\r\n\t\tif (!retransform.current) return\r\n\t\tretransform.current()\r\n\t})\r\n\tuseEffect(() => {\r\n\t\tif (!retransform.current) return\r\n\t\tif (model) retransform.current()\r\n\t}, [model])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!editor.current || !retransform.current) return\r\n\t\tif (!highlighting || braceLoaded) {\r\n\t\t\teditor.current.configure(indent, format === 'snbt' ? 'yaml' : format)\r\n\t\t\tretransform.current()\r\n\t\t}\r\n\t}, [indent, format, highlighting, braceLoaded])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (doCopy && model && blockStates) {\r\n\t\t\tnavigator.clipboard.writeText(getSerializedOutput(model, blockStates)).then(() => {\r\n\t\t\t\tcopySuccess()\r\n\t\t\t})\r\n\t\t}\r\n\t}, [doCopy])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (doDownload && model && blockStates && download.current) {\r\n\t\t\tconst content = encodeURIComponent(getSerializedOutput(model, blockStates))\r\n\t\t\tdownload.current.setAttribute('href', `data:text/json;charset=utf-8,${content}`)\r\n\t\t\tconst fileName = name === 'pack_mcmeta' ? 'pack.mcmeta' : `${name}.${format}`\r\n\t\t\tdownload.current.setAttribute('download', fileName)\r\n\t\t\tdownload.current.click()\r\n\t\t}\r\n\t}, [doDownload])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (doImport && editor.current) {\r\n\t\t\teditor.current.setValue('')\r\n\t\t\teditor.current.select()\r\n\t\t}\r\n\t}, [doImport])\r\n\r\n\tconst changeIndent = (value: string) => {\r\n\t\tStore.setIndent(value)\r\n\t\tsetIndent(value)\r\n\t}\r\n\r\n\tconst changeFormat = (value: string) => {\r\n\t\tStore.setFormat(value)\r\n\t\tsetFormat(value)\r\n\t}\r\n\r\n\tconst changeHighlighting = (value: boolean) => {\r\n\t\tStore.setHighlighting(value)\r\n\t\tsetHighlighting(value)\r\n\t}\r\n\r\n\treturn <> \r\n\t\t<div class=\"controls source-controls\">\r\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('output_settings')} data-cy=\"source-controls\">\r\n\t\t\t\t{getSourceIndents().map(key =>\r\n\t\t\t\t\t<Btn label={locale(`indentation.${key}`)} active={indent === key}\r\n\t\t\t\t\t\tonClick={() => changeIndent(key)}/>\r\n\t\t\t\t)}\r\n\t\t\t\t<hr />\r\n\t\t\t\t{getSourceFormats().map(key =>\r\n\t\t\t\t\t<Btn label={locale(`format.${key}`)} active={format === key}\r\n\t\t\t\t\t\tonClick={() => changeFormat(key)} />)}\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Btn icon={highlighting ? 'square_fill' : 'square'} label={locale('highlighting')}\r\n\t\t\t\t\tonClick={() => changeHighlighting(!highlighting)} />\r\n\t\t\t</BtnMenu>\r\n\t\t</div>\r\n\t\t{highlighting\r\n\t\t\t? <pre id=\"editor\" class=\"source\"></pre>\r\n\t\t\t: <textarea ref={textarea} class=\"source\" spellcheck={false} autocorrect=\"off\" onBlur={onImport.current}></textarea>}\r\n\t\t<a ref={download} style=\"display: none;\"></a>\r\n\t</>\r\n}\r\n","import{useState as n,useReducer as t,useEffect as e,useLayoutEffect as r,useRef as u,useImperativeHandle as o,useMemo as i,useCallback as l,useContext as f,useDebugValue as c}from\"preact/hooks\";export*from\"preact/hooks\";import{Component as a,createElement as s,options as h,toChildArray as d,Fragment as v,render as p,hydrate as m,cloneElement as y,createRef as b,createContext as _}from\"preact\";export{createElement,createContext,createRef,Fragment,Component}from\"preact\";function C(n,t){for(var e in t)n[e]=t[e];return n}function S(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function E(n){this.props=n}function g(n,t){function e(n){var e=this.props.ref,r=e==n.ref;return!r&&e&&(e.call?e(null):e.current=null),t?!t(this.props,n)||!r:S(this.props,n)}function r(t){return this.shouldComponentUpdate=e,s(n,t)}return r.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",r.prototype.isReactComponent=!0,r.__f=!0,r}(E.prototype=new a).isPureReactComponent=!0,E.prototype.shouldComponentUpdate=function(n,t){return S(this.props,n)||S(this.state,t)};var w=h.__b;h.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),w&&w(n)};var R=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function x(n){function t(t){var e=C({},t);return delete e.ref,n(e,t.ref||null)}return t.$$typeof=R,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var N=function(n,t){return null==n?null:d(d(n).map(t))},k={map:N,forEach:N,count:function(n){return n?d(n).length:0},only:function(n){var t=d(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:d},A=h.__e;h.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);A(n,t,e,r)};var O=h.unmount;function L(){this.__u=0,this.t=null,this.__b=null}function U(n){var t=n.__.__c;return t&&t.__e&&t.__e(n)}function F(n){var t,e,r;function u(u){if(t||(t=n()).then(function(n){e=n.default||n},function(n){r=n}),r)throw r;if(!e)throw t;return s(e,u)}return u.displayName=\"Lazy\",u.__f=!0,u}function M(){this.u=null,this.o=null}h.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&!0===n.__h&&(n.type=null),O&&O(n)},(L.prototype=new a).__c=function(n,t){var e=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var u=U(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__e){var n=r.state.__e;r.__v.__k[0]=function n(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},f=!0===t.__h;r.__u++||f||r.setState({__e:r.__b=r.__v.__k[0]}),n.then(i,i)},L.prototype.componentWillUnmount=function(){this.t=[]},L.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement(\"div\"),r=this.__v.__k[0].__c;this.__v.__k[0]=function n(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),t.__c.__H=null),null!=(t=C({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)})),t}(this.__b,e,r.__O=r.__P)}this.__b=null}var u=t.__e&&s(v,null,n.fallback);return u&&(u.__h=null),[s(v,null,t.__e?null:n.children),u]};var T=function(n,t,e){if(++e[1]===e[0]&&n.o.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function D(n){return this.getChildContext=function(){return n.context},n.children}function I(n){var t=this,e=n.i;t.componentWillUnmount=function(){p(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),n.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,e){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),p(s(D,{context:t.context},n.__v),t.l)):t.l&&t.componentWillUnmount()}function W(n,t){var e=s(I,{__v:n,i:t});return e.containerInfo=t,e}(M.prototype=new a).__e=function(n){var t=this,e=U(t.__v),r=t.o.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),T(t,n,r)):u()};e?e(o):o()}},M.prototype.render=function(n){this.u=null,this.o=new Map;var t=d(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return n.children},M.prototype.componentDidUpdate=M.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(t,e){T(n,e,t)})};var P=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,V=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,j=\"undefined\"!=typeof document,z=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};function B(n,t,e){return null==t.__k&&(t.textContent=\"\"),p(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function $(n,t,e){return m(n,t),\"function\"==typeof e&&e(),n?n.__c:null}a.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(n){Object.defineProperty(a.prototype,n,{configurable:!0,get:function(){return this[\"UNSAFE_\"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var H=h.event;function Z(){}function Y(){return this.cancelBubble}function q(){return this.defaultPrevented}h.event=function(n){return H&&(n=H(n)),n.persist=Z,n.isPropagationStopped=Y,n.isDefaultPrevented=q,n.nativeEvent=n};var G,J={configurable:!0,get:function(){return this.class}},K=h.vnode;h.vnode=function(n){var t=n.type,e=n.props,r=e;if(\"string\"==typeof t){var u=-1===t.indexOf(\"-\");for(var o in r={},e){var i=e[o];j&&\"children\"===o&&\"noscript\"===t||\"value\"===o&&\"defaultValue\"in e&&null==i||(\"defaultValue\"===o&&\"value\"in e&&null==e.value?o=\"value\":\"download\"===o&&!0===i?i=\"\":/ondoubleclick/i.test(o)?o=\"ondblclick\":/^onchange(textarea|input)/i.test(o+t)&&!z(e.type)?o=\"oninput\":/^onfocus$/i.test(o)?o=\"onfocusin\":/^onblur$/i.test(o)?o=\"onfocusout\":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():u&&V.test(o)?o=o.replace(/[A-Z0-9]/,\"-$&\").toLowerCase():null===i&&(i=void 0),/^oninput/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o=\"oninputCapture\")),r[o]=i)}\"select\"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=d(e.children).forEach(function(n){n.props.selected=-1!=r.value.indexOf(n.props.value)})),\"select\"==t&&null!=r.defaultValue&&(r.value=d(e.children).forEach(function(n){n.props.selected=r.multiple?-1!=r.defaultValue.indexOf(n.props.value):r.defaultValue==n.props.value})),n.props=r,e.class!=e.className&&(J.enumerable=\"className\"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,\"className\",J))}n.$$typeof=P,K&&K(n)};var Q=h.__r;h.__r=function(n){Q&&Q(n),G=n.__c};var X={ReactCurrentDispatcher:{current:{readContext:function(n){return G.__n[n.__c].props.value}}}},nn=\"17.0.2\";function tn(n){return s.bind(null,n)}function en(n){return!!n&&n.$$typeof===P}function rn(n){return en(n)?y.apply(null,arguments):n}function un(n){return!!n.__k&&(p(null,n),!0)}function on(n){return n&&(n.base||1===n.nodeType&&n)||null}var ln=function(n,t){return n(t)},fn=function(n,t){return n(t)},cn=v;export default{useState:n,useReducer:t,useEffect:e,useLayoutEffect:r,useRef:u,useImperativeHandle:o,useMemo:i,useCallback:l,useContext:f,useDebugValue:c,version:\"17.0.2\",Children:k,render:B,hydrate:$,unmountComponentAtNode:un,createPortal:W,createElement:s,createContext:_,createFactory:tn,cloneElement:rn,createRef:b,Fragment:v,isValidElement:en,findDOMNode:on,Component:a,PureComponent:E,memo:g,forwardRef:x,flushSync:fn,unstable_batchedUpdates:ln,StrictMode:v,Suspense:L,SuspenseList:M,lazy:F,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:X};export{nn as version,k as Children,B as render,$ as hydrate,un as unmountComponentAtNode,W as createPortal,tn as createFactory,rn as cloneElement,en as isValidElement,on as findDOMNode,E as PureComponent,g as memo,x as forwardRef,fn as flushSync,ln as unstable_batchedUpdates,cn as StrictMode,L as Suspense,M as SuspenseList,F as lazy,X as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED};\n//# sourceMappingURL=compat.module.js.map\n","import type { INode, Path } from '@mcschema/core'\r\nimport { DataModel } from '@mcschema/core'\r\n\r\nexport class ModelWrapper extends DataModel {\r\n\tconstructor(\r\n\t\tschema: INode<any>,\r\n\t\tprivate readonly mapper: (path: Path) => Path,\r\n\t\tprivate readonly getter: (path: Path) => any,\r\n\t\tprivate readonly setter: (path: Path, value: any, silent?: boolean) => any,\r\n\t) {\r\n\t\tsuper(schema)\r\n\t}\r\n\r\n\tmap(path: Path) {\r\n\t\treturn this.mapper(path)\r\n\t}\r\n\r\n\tget(path: Path) {\r\n\t\treturn this.getter(path)\r\n\t}\r\n\r\n\tset(path: Path, value: any, silent?: boolean) {\r\n\t\treturn this.setter(path, value, silent)\r\n\t}\r\n}\r\n","import type { BooleanHookParams, EnumOption, Hook, INode, NodeChildren, NumberHookParams, StringHookParams, ValidationOption } from '@mcschema/core'\r\nimport { DataModel, ListNode, MapNode, ModelPath, ObjectNode, Path, relativePath, StringNode } from '@mcschema/core'\r\nimport { Identifier, ItemStack } from 'deepslate/core'\r\nimport type { ComponentChildren, JSX } from 'preact'\r\nimport { memo } from 'preact/compat'\r\nimport { useState } from 'preact/hooks'\r\nimport { Btn, Octicon } from '../components/index.js'\r\nimport { ItemDisplay } from '../components/ItemDisplay.jsx'\r\nimport { VanillaColors } from '../components/previews/BiomeSourcePreview.jsx'\r\nimport config from '../Config.js'\r\nimport { localize, useLocale, useStore } from '../contexts/index.js'\r\nimport { useFocus } from '../hooks/index.js'\r\nimport type { BlockStateRegistry, VersionId } from '../services/index.js'\r\nimport { CachedDecorator, CachedFeature, checkVersion } from '../services/index.js'\r\nimport { deepClone, deepEqual, generateColor, generateUUID, hexId, hexToRgb, isObject, newSeed, rgbToHex, stringToColor } from '../Utils.js'\r\nimport { ModelWrapper } from './ModelWrapper.js'\r\n\r\nconst selectRegistries = ['loot_table.type', 'loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'recipe.type', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'dimension.generator.biome_source.preset', 'carver.type', 'feature.type', 'decorator.type', 'feature.tree.minimum_size.type', 'block_state_provider.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'int_provider.type', 'float_provider.type', 'height_provider.type', 'structure_feature.type', 'surface_builder.type', 'processor.processor_type', 'rule_test.predicate_type', 'pos_rule_test.predicate_type', 'template_element.element_type', 'block_placer.type', 'block_predicate.type', 'material_rule.type', 'material_condition.type', 'structure_placement.type', 'density_function.type', 'root_placer.type', 'entity.type_specific.cat.variant', 'entity.type_specific.frog.variant', 'rule_block_entity_modifier.type', 'pool_alias_binding.type', 'lithostitched.worldgen_modifier.type', 'lithostitched.modifier_predicate.type', 'ohthetreesyoullgrow.configured_feature.type', 'enchantment_provider.type', 'enchantment_value_effect.type', 'level_based_value.type']\r\nconst datalistEnums = ['item_stack.components', 'function.set_components.components']\r\nconst hiddenFields = ['number_provider.type', 'score_provider.type', 'nbt_provider.type', 'int_provider.type', 'float_provider.type', 'height_provider.type', 'level_based_value.type']\r\nconst flattenedFields = ['feature.config', 'decorator.config', 'int_provider.value', 'float_provider.value', 'block_state_provider.simple_state_provider.state', 'block_state_provider.rotated_block_provider.state', 'block_state_provider.weighted_state_provider.entries.entry.data', 'rule_test.block_state', 'structure_feature.config', 'surface_builder.config', 'template_pool.elements.entry.element', 'decorator.block_survives_filter.state', 'material_rule.block.result_state', 'enchantment.effects.entry.effect']\r\nconst inlineFields = ['loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'feature.type', 'decorator.type', 'block_state_provider.type', 'feature.tree.minimum_size.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'block_placer.type', 'rule_test.predicate_type', 'processor.processor_type', 'template_element.element_type', 'nbt_operation.op', 'number_provider.value', 'score_provider.name', 'score_provider.target', 'nbt_provider.source', 'nbt_provider.target', 'generator_biome.biome', 'block_predicate.type', 'material_rule.type', 'material_condition.type', 'density_function.type', 'root_placer.type', 'entity.type_specific.type', 'glyph_provider.type', 'sprite_source.type', 'rule_block_entity_modifier.type', 'immersive_weathering.area_condition.type', 'immersive_weathering.block_growth.growth_for_face.entry.direction', 'immersive_weathering.position_test.predicate_type', 'pool_alias_binding.type', 'item_stack.id', 'data_component.container.entry.slot', 'map_decoration.type', 'suspicious_stew_effect_instance.id', 'enchantment_value_effect.type', 'enchantment_effect.type', 'particle.type']\r\nconst nbtFields = ['function.set_nbt.tag', 'advancement.display.icon.nbt', 'text_component_object.nbt', 'entity.nbt', 'block.nbt', 'item.nbt']\r\nconst fixedLists = ['generator_biome.parameters.temperature', 'generator_biome.parameters.humidity', 'generator_biome.parameters.continentalness', 'generator_biome.parameters.erosion', 'generator_biome.parameters.depth', 'generator_biome.parameters.weirdness', 'feature.end_spike.crystal_beam_target', 'feature.end_gateway.exit', 'decorator.block_filter.offset', 'block_predicate.has_sturdy_face.offset', 'block_predicate.inside_world_bounds.offset', 'block_predicate.matching_block_tag.offset', 'block_predicate.matching_blocks.offset', 'block_predicate.matching_fluids.offset', 'block_predicate.would_survive.offset', 'model_element.from', 'model_element.to', 'model_element.rotation.origin', 'model_element.faces.uv', 'item_transform.rotation', 'item_transform.translation', 'item_transform.scale', 'generator_structure.random_spread.locate_offset', 'pack_overlay.formats', 'data_component.profile.id', 'data_component.lodestone_tracker.tracker.pos', 'attribute_modifier.uuid']\r\nconst collapsedFields = ['noise_settings.surface_rule', 'noise_settings.noise.terrain_shaper']\r\nconst collapsableFields = ['density_function.argument', 'density_function.argument1', 'density_function.argument2', 'density_function.input', 'density_function.when_in_range', 'density_function.when_out_of_range']\r\nconst itemPreviewFields = ['loot_pool.entries.entry', 'loot_entry.alternatives.children.entry', 'loot_entry.group.children.entry', 'loot_entry.sequence.children.entry', 'function.set_contents.entries.entry']\r\nconst forceEnumContexts: Record<string, string> = { 'loot_table.type': 'loot_table.type', 'condition.condition': 'loot_condition_type', 'function.function': 'loot_function_type' }\r\n\r\nconst findGenerator = (id: string) => {\r\n\treturn config.generators.find(g => g.id === id.replace(/^\\$/, ''))\r\n}\r\n\r\n/**\r\n * Secondary model used to remember the keys of a map\r\n */\r\nconst keysModel = new DataModel(MapNode(\r\n\tStringNode(),\r\n\tStringNode()\r\n), { historyMax: 0 })\r\n\r\ntype JSXTriple = [JSX.Element | null, JSX.Element | null, JSX.Element | null]\r\ntype RenderHook = Hook<[any, string, VersionId, BlockStateRegistry, Record<string, any>], JSXTriple>\r\n\r\ntype NodeProps<T> = T & {\r\n\tnode: INode<any>,\r\n\tpath: ModelPath,\r\n\tvalue: any,\r\n\tlang: string,\r\n\tversion: VersionId,\r\n\tstates: BlockStateRegistry,\r\n\tctx: Record<string, any>,\r\n}\r\n\r\nexport function FullNode({ model, lang, version, blockStates }: { model: DataModel, lang: string, version: VersionId, blockStates: BlockStateRegistry }) {\r\n\tconst path = new ModelPath(model)\r\n\tconst [prefix, suffix, body] = model.schema.hook(renderHtml, path, deepClone(model.data), lang, version, blockStates, {})\r\n\treturn suffix?.props?.children.some((c: any) => c) ? <div class={`node ${model.schema.type(path)}-node`} data-category={model.schema.category(path)}>\r\n\t\t<div class=\"node-header\">{prefix}{suffix}</div>\r\n\t\t<div class=\"node-body\">{body}</div>\r\n\t</div> : body\r\n}\r\n\r\nconst renderHtml: RenderHook = {\r\n\tbase() {\r\n\t\treturn [null, null, null]\r\n\t},\r\n\r\n\tboolean(params, path, value, lang, version, states, ctx) {\r\n\t\treturn [null, <BooleanSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\r\n\t},\r\n\r\n\tchoice({ choices, config, switchNode }, path, value, lang, version, states, ctx) {\r\n\t\tconst choice = switchNode.activeCase(path, true) as typeof choices[number]\r\n\t\tconst contextPath = (config?.context) ? new ModelPath(path.getModel(), new Path(path.getArray(), [config.context])) : path\r\n\t\tconst [prefix, suffix, body] = choice.node.hook(this, contextPath, value, lang, version, states, ctx)\r\n\t\tif (choices.length === 1) {\r\n\t\t\treturn [prefix, suffix, body]\r\n\t\t}\r\n\t\tconst choiceContextPath = config?.choiceContext ? new Path([], [config.choiceContext]) : config?.context ? new Path([], [config.context]) : path\r\n\t\tconst set = (type: string) => {\r\n\t\t\tconst c = choices.find(c => c.type === type) ?? choice\r\n\t\t\tconst def = c.node.default()\r\n\t\t\tconst newValue = c.change\r\n\t\t\t\t? c.change(DataModel.unwrapLists(value))\r\n\t\t\t\t: config.choiceContext === 'feature' && def?.type === 'minecraft:decorated' ? def.config.feature : def\r\n\t\t\tpath.model.set(path, DataModel.wrapLists(newValue))\r\n\t\t}\r\n\t\tconst inject = <select value={choice.type} onChange={(e) => set((e.target as HTMLSelectElement).value)}>\r\n\t\t\t{choices.map(c => <option value={c.type}>\r\n\t\t\t\t{pathLocale(lang, choiceContextPath.contextPush(c.type))}\r\n\t\t\t</option>)}\r\n\t\t</select>\r\n\t\treturn [prefix, <>{inject}{suffix}</>, body]\r\n\t},\r\n\r\n\tlist({ children, config }, path, value, lang, version, states, ctx) {\r\n\t\tconst { expand, collapse, isToggled } = useToggles()\r\n\t\tconst [maxShown, setMaxShown] = useState(50)\r\n\r\n\t\tconst context = path.getContext().join('.')\r\n\t\tif (fixedLists.includes(context)) {\r\n\t\t\tconst prefix = <>\r\n\t\t\t\t{[...Array(config.maxLength!)].map((_, i) =>\r\n\t\t\t\t\t<ErrorPopup lang={lang} path={path.modelPush(i)} />)}\r\n\t\t\t\t<div class=\"fixed-list\"></div>\r\n\t\t\t</>\r\n\t\t\tconst suffix = <>{[...Array(config.maxLength)].map((_, i) => {\r\n\t\t\t\tconst child = children.hook(this, path.modelPush(i), value?.[i]?.node, lang, version, states, ctx)\r\n\t\t\t\treturn child[1]\r\n\t\t\t})}</>\r\n\t\t\treturn [prefix, suffix, null]\r\n\t\t}\r\n\r\n\t\tconst onAdd = () => {\r\n\t\t\tif (!Array.isArray(value)) value = []\r\n\t\t\tconst node = DataModel.wrapLists(children.default())\r\n\t\t\tpath.model.set(path, [{ node, id: hexId() }, ...value])\r\n\t\t}\r\n\t\tconst onAddBottom = () => {\r\n\t\t\tif (!Array.isArray(value)) value = []\r\n\t\t\tconst node = DataModel.wrapLists(children.default())\r\n\t\t\tpath.model.set(path, [...value, { node, id: hexId() }])\r\n\t\t}\r\n\t\tconst suffix = <button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add_top')} onClick={onAdd}>{Octicon.plus_circle}</button>\r\n\t\tconst body = <>\r\n\t\t\t{(value && Array.isArray(value)) && value.map(({ node: cValue, id: cId }, index) => {\r\n\t\t\t\tif (index === maxShown) {\r\n\t\t\t\t\treturn <div class=\"node node-header\">\r\n\t\t\t\t\t\t<label>{localize(lang, 'entries_hidden', `${value.length - maxShown}`)}</label>\r\n\t\t\t\t\t\t<button onClick={() => setMaxShown(Math.min(maxShown + 50, value.length))}>{localize(lang, 'entries_hidden.more', '50')}</button>\r\n\t\t\t\t\t\t<button onClick={() => setMaxShown(value.length)}>{localize(lang, 'entries_hidden.all')}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\tif (index > maxShown) {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t\tconst pathWithContext = (config?.context) ? new ModelPath(path.getModel(), new Path(path.getArray(), [config.context])) : path\r\n\t\t\t\tconst cPath = pathWithContext.push(index).contextPush('entry')\r\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\r\n\t\t\t\tconst toggle = isToggled(cId)\r\n\r\n\t\t\t\tlet label: undefined | string | JSX.Element\r\n\t\t\t\tif (itemPreviewFields.includes(cPath.getContext().join('.'))) {\r\n\t\t\t\t\tif (isObject(cValue) && typeof cValue.type === 'string' && cValue.type.replace(/^minecraft:/, '') === 'item' && typeof cValue.name === 'string') {\r\n\t\t\t\t\t\tlet itemStack: ItemStack | undefined\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\titemStack = new ItemStack(Identifier.parse(cValue.name), 1)\r\n\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\tif (itemStack !== undefined) {\r\n\t\t\t\t\t\t\tlabel = <ItemDisplay item={itemStack} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\r\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\r\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\r\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'expand')}\\n${localize(lang, 'expand_all', 'Ctrl')}`} onClick={expand(cId)}>{Octicon.chevron_right}</button>\r\n\t\t\t\t\t\t<label>{label ?? pathLocale(lang, cPath, `${index}`)}</label>\r\n\t\t\t\t\t\t<Collapsed key={cId} path={cPath} value={cValue} schema={children} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\r\n\t\t\t\tconst onMoveUp = () => {\r\n\t\t\t\t\tconst v = [...path.get()];\r\n\t\t\t\t\t[v[index - 1], v[index]] = [v[index], v[index - 1]]\r\n\t\t\t\t\tpath.model.set(path, v)\r\n\t\t\t\t}\r\n\t\t\t\tconst onMoveDown = () => {\r\n\t\t\t\t\tconst v = [...path.get()];\r\n\t\t\t\t\t[v[index + 1], v[index]] = [v[index], v[index + 1]]\r\n\t\t\t\t\tpath.model.set(path, v)\r\n\t\t\t\t}\r\n\t\t\t\tconst actions: MenuAction[] = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: 'duplicate',\r\n\t\t\t\t\t\tlabel: 'duplicate',\r\n\t\t\t\t\t\tonSelect: () => {\r\n\t\t\t\t\t\t\tconst v = [...path.get()]\r\n\t\t\t\t\t\t\tv.splice(index, 0, { id: hexId(), node: deepClone(cValue) })\r\n\t\t\t\t\t\t\tpath.model.set(path, v)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t\treturn <MemoedTreeNode key={cId} label={label} path={cPath} schema={children} value={cValue} {...{lang, version, states, actions}} ctx={{...ctx, index: (index === 0 ? 1 : 0) + (index === value.length - 1 ? 2 : 0)}}>\r\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'collapse')}\\n${localize(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(cId)}>{Octicon.chevron_down}</button>}\r\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\r\n\t\t\t\t\t{value.length > 1 && <div class=\"node-move\">\r\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={localize(lang, 'move_up')} onClick={onMoveUp} disabled={index === 0}>{Octicon.chevron_up}</button>\r\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={localize(lang, 'move_down')} onClick={onMoveDown} disabled={index === value.length - 1}>{Octicon.chevron_down}</button>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t</MemoedTreeNode>\r\n\t\t\t})}\r\n\t\t\t{(value && value.length > 0 && value.length <= maxShown) && <div class=\"node node-header\">\r\n\t\t\t\t<button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add_bottom')} onClick={onAddBottom}>{Octicon.plus_circle}</button>\r\n\t\t\t</div>}\r\n\t\t</>\r\n\t\treturn [null, suffix, body]\r\n\t},\r\n\r\n\tmap({ children, keys, config }, path, value, lang, version, states, ctx) {\r\n\t\tconst { expand, collapse, isToggled } = useToggles()\r\n\r\n\t\tconst keyPath = new ModelPath(keysModel, new Path([hashString(path.toString())], path.contextArr))\r\n\t\tconst onAdd = () => {\r\n\t\t\tconst key = keyPath.get()\r\n\t\t\tif (path.model.get(path.push(key)) === undefined) {\r\n\t\t\t\tpath.model.set(path.push(key), DataModel.wrapLists(children.default()))\r\n\t\t\t}\r\n\t\t\tkeyPath.set('')\r\n\t\t}\r\n\t\tconst blockState = config.validation?.validator === 'block_state_map' ? states?.[relativePath(path, config.validation.params.id).get()] : null\r\n\t\tconst keysSchema = blockState?.properties\r\n\t\t\t? StringNode(null!, { enum: Object.keys(blockState.properties ?? {}) })\r\n\t\t\t: keys\r\n\t\tif (blockState && path.last() === 'Properties') {\r\n\t\t\tif (typeof value !== 'object') value = {}\r\n\t\t\tconst properties = Object.entries(blockState.properties ?? {})\r\n\t\t\t\t.map(([key, values]) => [key, StringNode(null!, { enum: values })])\r\n\t\t\tObject.entries(blockState.properties ?? {}).forEach(([key, values]) => {\r\n\t\t\t\tif (typeof value[key] !== 'string') {\r\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.expected_string')\r\n\t\t\t\t} else if (!values.includes(value[key])) {\r\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.invalid_enum_option', value[key])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn ObjectNode(Object.fromEntries(properties)).hook(this, path, value, lang, version, states, ctx)\r\n\t\t}\r\n\t\tconst suffix = <>\r\n\t\t\t{keysSchema.hook(this, keyPath, keyPath.get() ?? '', lang, version, states, ctx)[1]}\r\n\t\t\t<button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add')} onClick={onAdd}>{Octicon.plus_circle}</button>\r\n\t\t</>\r\n\t\tconst body = <>\r\n\t\t\t{typeof value === 'object' && Object.entries(value).map(([key, cValue]) => {\r\n\t\t\t\tconst pathWithContext = (config?.context) ? new ModelPath(path.getModel(), new Path(path.getArray(), [config.context])) : path\r\n\t\t\t\tconst cPath = pathWithContext.modelPush(key)\r\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\r\n\t\t\t\tconst toggle = isToggled(key)\r\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\r\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\r\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\r\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'expand')}\\n${localize(lang, 'expand_all', 'Ctrl')}`} onClick={expand(key)}>{Octicon.chevron_right}</button>\r\n\t\t\t\t\t\t<label>{key}</label>\r\n\t\t\t\t\t\t<Collapsed key={key} path={cPath} value={cValue} schema={children} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\tconst cSchema = blockState\r\n\t\t\t\t\t? StringNode(null!, { enum: blockState.properties?.[key] ?? [] })\r\n\t\t\t\t\t: children\r\n\t\t\t\tif (blockState?.properties?.[key] && typeof cValue === 'string'\r\n\t\t\t\t\t&& !blockState.properties?.[key].includes(cValue)) {\r\n\t\t\t\t\tpath.model.errors.add(cPath, 'error.invalid_enum_option', cValue)\r\n\t\t\t\t}\r\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\r\n\t\t\t\treturn <MemoedTreeNode key={key} schema={cSchema} path={cPath} value={cValue} {...{lang, version, states, ctx}} label={key}>\r\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'collapse')}\\n${localize(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(key)}>{Octicon.chevron_down}</button>}\r\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\r\n\t\t\t\t</MemoedTreeNode>\r\n\t\t\t})}\r\n\t\t</>\r\n\t\treturn [null, suffix, body]\r\n\t},\r\n\r\n\tnumber(params, path, value, lang, version, states, ctx) {\r\n\t\treturn [null, <NumberSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\r\n\t},\r\n\r\n\tobject({ node, config, getActiveFields, getChildModelPath }, path, value, lang, version, states, ctx) {\r\n\t\tconst { expand, collapse, isToggled } = useToggles()\r\n\r\n\t\tif (path.getArray().length == 0 && isDecorated(config.context, value)) {\r\n\t\t\tconst { wrapper, fields } = createDecoratorsWrapper(getActiveFields(path), path, value)\r\n\t\t\tvalue = wrapper.data\r\n\t\t\tgetActiveFields = () => fields\r\n\t\t\tgetChildModelPath = (path, key) => new ModelPath(wrapper, new Path(path.getArray(), ['feature'])).push(key)\r\n\t\t}\r\n\r\n\t\tlet prefix: JSX.Element | null = null\r\n\t\tlet suffix: JSX.Element | null = null\r\n\t\tlet body: JSX.Element | null = null\r\n\t\tif (node.optional()) {\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tconst onExpand = () => path.set(DataModel.wrapLists(node.default()))\r\n\t\t\t\tsuffix = <button class=\"node-collapse closed tooltipped tip-se\" aria-label={localize(lang, 'expand')} onClick={onExpand}>{Octicon.plus_circle}</button>\r\n\t\t\t} else if (typeof value === 'object' && value !== null){\r\n\t\t\t\tconst onCollapse = () => path.set(undefined)\r\n\t\t\t\tsuffix = <button class=\"node-collapse open tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onCollapse}>{Octicon.trashcan}</button>\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst context = path.getContext().join('.')\r\n\t\tif (collapsableFields.includes(context) || collapsedFields.includes(context)) {\r\n\t\t\tconst toggled = isToggled('')\r\n\t\t\tconst expanded = collapsedFields.includes(context) ? toggled : !toggled\r\n\t\t\tprefix = <>\r\n\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={localize(lang, expanded ? 'collapse' : 'expand')} onClick={toggled ? collapse('') : expand('')}>{expanded ? Octicon.chevron_down : Octicon.chevron_right}</button>\r\n\t\t\t</>\r\n\t\t\tif (!expanded) {\r\n\t\t\t\treturn [prefix, suffix, null]\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!(node.optional() && value === undefined)) {\r\n\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\tconst newCtx = (typeof value === 'object' && value !== null && node.default()?.pools)\r\n\t\t\t\t\t? { ...ctx, loot: value?.type } : ctx\r\n\t\t\t\tbody = <>{Object.entries(getActiveFields(path))\r\n\t\t\t\t\t.filter(([_, child]) => child.enabled(path))\r\n\t\t\t\t\t.map(([key, child]) => {\r\n\t\t\t\t\t\tconst cPath = getChildModelPath(path, key)\r\n\t\t\t\t\t\tconst context = cPath.getContext().join('.')\r\n\t\t\t\t\t\tif (hiddenFields.includes(context)) return null\r\n\t\t\t\t\t\tconst [cPrefix, cSuffix, cBody] = child.hook(this, cPath, value[key], lang, version, states, newCtx)\r\n\t\t\t\t\t\tconst isFlattened = child.type(cPath) === 'object' && flattenedFields.includes(context)\r\n\t\t\t\t\t\tconst isInlined = inlineFields.includes(context)\r\n\t\t\t\t\t\tif (isFlattened || isInlined) {\r\n\t\t\t\t\t\t\tprefix = <>{prefix}<ErrorPopup lang={lang} path={cPath} /><HelpPopup lang={lang} path={cPath} />{cPrefix}</>\r\n\t\t\t\t\t\t\tsuffix = <>{suffix}{cSuffix}</>\r\n\t\t\t\t\t\t\treturn isFlattened ? cBody : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn <MemoedTreeNode key={key} schema={child} path={cPath} value={value[key]} {...{lang, version, states, ctx: newCtx}} />\r\n\t\t\t\t\t})}</>\r\n\t\t\t} else {\r\n\t\t\t\tconst onReset = () => path.set(DataModel.wrapLists(node.default()))\r\n\t\t\t\tsuffix = <>{suffix}<button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'reset')} onClick={onReset}>{Octicon.history}</button></>\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [prefix, suffix, body]\r\n\t},\r\n\r\n\tstring(params, path, value, lang, version, states, ctx) {\r\n\t\treturn [null, <StringSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\r\n\t},\r\n}\r\n\r\nfunction Collapsed({ path, value }: { path: ModelPath, value: any, schema: INode<any> }) {\r\n\tconst { locale } = useLocale()\r\n\tconst context = path.getContext().join('.')\r\n\tswitch (context) {\r\n\t\tcase 'loot_table.pools.entry':\r\n\t\t\tconst count = value?.entries?.length ?? 0\r\n\t\t\treturn <label>{count} {count == 1 ? 'entry' : 'entries'}</label>\r\n\t\tcase 'function.set_contents.entries.entry':\r\n\t\tcase 'loot_pool.entries.entry':\r\n\t\t\tconst name = value?.name?.replace(/^minecraft:/, '') ?? value?.type?.replace(/^minecraft:/, '')\r\n\t\t\tconst weight = value?.weight || undefined\r\n\t\t\treturn <>\r\n\t\t\t\t<label>{name}</label>\r\n\t\t\t\t{weight !== undefined && <label class=\"tooltipped tip-se\" aria-label={locale('weight')}>{weight}</label>}\r\n\t\t\t</>\r\n\t}\r\n\tfor (const child of Object.values(value ?? {})) {\r\n\t\tif (typeof child === 'string') {\r\n\t\t\treturn <label>{child.replace(/^minecraft:/, '')}</label>\r\n\t\t}\r\n\t}\r\n\treturn null\r\n}\r\n\r\nfunction useToggles() {\r\n\tconst [toggleState, setToggleState] = useState(new Map<string, boolean>())\r\n\tconst [toggleAll, setToggleAll] = useState<boolean | undefined>(undefined)\r\n\r\n\tconst expand = (key: string) => (evt: MouseEvent) => {\r\n\t\tif (evt.ctrlKey) {\r\n\t\t\tsetToggleState(new Map())\r\n\t\t\tsetToggleAll(true)\r\n\t\t} else {\r\n\t\t\tsetToggleState(state => new Map(state.set(key, true)))\r\n\t\t}\r\n\t}\r\n\tconst collapse = (key: string) => (evt: MouseEvent) => {\r\n\t\tif (evt.ctrlKey) {\r\n\t\t\tsetToggleState(new Map())\r\n\t\t\tsetToggleAll(false)\r\n\t\t} else {\r\n\t\t\tsetToggleState(state => new Map(state.set(key, false)))\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst isToggled = (key: string) => {\r\n\t\tif (!(toggleState instanceof Map)) return false\r\n\t\treturn toggleState.get(key) ?? toggleAll\r\n\t}\r\n\r\n\treturn { expand, collapse, isToggled }\r\n}\r\n\r\nfunction BooleanSuffix({ path, node, value, lang }: NodeProps<BooleanHookParams>) {\r\n\tconst set = (target: boolean) => {\r\n\t\tpath.model.set(path, node.optional() && value === target ? undefined : target)\r\n\t}\r\n\treturn <>\r\n\t\t<button class={value === false ? 'selected' : ''} onClick={() => set(false)}>{localize(lang, 'false')}</button>\r\n\t\t<button class={value === true ? 'selected' : ''} onClick={() => set(true)}>{localize(lang, 'true')}</button>\r\n\t</>\r\n}\r\n\r\nfunction NumberSuffix({ path, config, integer, value, lang }: NodeProps<NumberHookParams>) {\r\n\tconst onChange = (evt: Event) => {\r\n\t\tconst value = (evt.target as HTMLInputElement).value\r\n\t\tconst parsed = integer ? parseInt(value) : parseFloat(value)\r\n\t\tpath.model.set(path, parsed)\r\n\t}\r\n\tconst onColor = (evt: Event) => {\r\n\t\tconst value = (evt.target as HTMLInputElement).value\r\n\t\tconst parsed = parseInt(value.slice(1), 16)\r\n\t\tpath.model.set(path, parsed)\r\n\t}\r\n\treturn <>\r\n\t\t<input type=\"text\" value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}} />\r\n\t\t{config?.color && <input type=\"color\" value={'#' + (value?.toString(16).padStart(6, '0') ?? '000000')} onChange={onColor} />}\r\n\t\t{config?.color && <button onClick={() => path.set(generateColor())} class=\"tooltipped tip-se\" aria-label={localize(lang, 'generate_new_color')}>{Octicon.sync}</button>}\r\n\t\t{['dimension.generator.seed', 'dimension.generator.biome_source.seed', 'world_settings.seed', 'structure_placement.salt'].includes(path.getContext().join('.')) && <button onClick={() => newSeed(path.model)} class=\"tooltipped tip-se\" aria-label={localize(lang, 'generate_new_seed')}>{Octicon.sync}</button>}\r\n\t</>\r\n}\r\n\r\nfunction StringSuffix({ path, getValues, config, node, value, lang, version, states }: NodeProps<StringHookParams>) {\r\n\tconst context = path.getContext().join('.')\r\n\tconst onChange = (evt: Event) => {\r\n\t\tevt.stopPropagation()\r\n\t\tconst newValue = (evt.target as HTMLSelectElement).value\r\n\t\tif (newValue === value) return\r\n\t\t// Hackfix to support switching between checkerboard and multi_noise biome sources\r\n\t\tif (context === 'dimension.generator.biome_source.type') {\r\n\t\t\tconst biomeSourceType = newValue.replace(/^minecraft:/, '')\r\n\t\t\tconst biomePath = path.pop().push('biomes')\r\n\t\t\tconst biomes = biomePath.get()\r\n\t\t\tif (biomeSourceType === 'multi_noise') {\r\n\t\t\t\tconst newBiomes = Array.isArray(biomes)\r\n\t\t\t\t\t? biomes.flatMap((b: any) => {\r\n\t\t\t\t\t\tif (typeof b.node !== 'string') return []\r\n\t\t\t\t\t\treturn [{ node: { biome: b.node }}]\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: [{ node: { biome: 'minecraft:plains' } }]\r\n\t\t\t\tpath.model.set(biomePath, newBiomes, true)\r\n\t\t\t} else if (biomeSourceType === 'checkerboard') {\r\n\t\t\t\tconst newBiomes = typeof biomes === 'string'\r\n\t\t\t\t\t? biomes\r\n\t\t\t\t\t: Array.isArray(biomes)\r\n\t\t\t\t\t\t? biomes.flatMap((b: any) => {\r\n\t\t\t\t\t\t\tif (typeof b.node !== 'object' || b.node === null || typeof b.node.biome !== 'string') return []\r\n\t\t\t\t\t\t\treturn [{ node: b.node.biome }]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t: [{ node: 'minecraft:plains' }]\r\n\t\t\t\tpath.model.set(biomePath, newBiomes, true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tpath.model.set(path, newValue.length === 0 ? undefined : newValue)\r\n\t}\r\n\tconst values = getValues()\r\n\tconst id = !isEnum(config) && config?.validator === 'resource' && typeof config.params.pool === 'string' ? config.params.pool : undefined\r\n\r\n\tif (nbtFields.includes(context)) {\r\n\t\treturn <textarea value={value ?? ''} onBlur={onChange}></textarea>\r\n\t} else if ((isEnum(config) && !config.additional && !datalistEnums.includes(context)) || selectRegistries.includes(context)) {\r\n\t\tlet childPath = new Path([])\r\n\t\tif (isEnum(config) && typeof config.enum === 'string') {\r\n\t\t\tchildPath = childPath.contextPush(config.enum)\r\n\t\t} else if (id) {\r\n\t\t\tchildPath = childPath.contextPush(id)\r\n\t\t} else if (isEnum(config)) {\r\n\t\t\tchildPath = path\r\n\t\t} else if (Object.hasOwn(forceEnumContexts, context)) {\r\n\t\t\tchildPath = childPath.contextPush(forceEnumContexts[context])\r\n\t\t}\r\n\t\treturn <select value={value ?? ''} onChange={onChange}>\r\n\t\t\t{node.optional() && <option value=\"\">{localize(lang, 'unset')}</option>}\r\n\t\t\t{values.map(v => <option value={v}>\r\n\t\t\t\t{pathLocale(lang, childPath.contextPush(v.replace(/^minecraft:/, '')))}\r\n\t\t\t</option>)}\r\n\t\t</select>\r\n\t} else if (!isEnum(config) && config?.validator === 'block_state_key') {\r\n\t\tconst blockState = states?.[relativePath(path, config.params.id).get()]\r\n\t\tconst values = Object.keys(blockState?.properties ?? {})\r\n\t\treturn <select value={value ?? ''} onChange={onChange}>\r\n\t\t\t{values.map(v => <option>{v}</option>)}\r\n\t\t</select>\r\n\t} else {\r\n\t\tconst { biomeColors, setBiomeColor } = useStore()\r\n\t\tconst fullId = typeof value === 'string' ? value.includes(':') ? value : 'minecraft:' + value : 'unknown'\r\n\t\tconst datalistId = hexId()\r\n\t\tconst gen = id ? findGenerator(id) : undefined\r\n\t\treturn <>\r\n\t\t\t<input value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}}\r\n\t\t\t\tlist={values.length > 0 ? datalistId : ''} />\r\n\t\t\t{values.length > 0 && <datalist id={datalistId}>\r\n\t\t\t\t{values.map(v => <option value={v} />)}\r\n\t\t\t</datalist>}\r\n\t\t\t{['generator_biome.biome'].includes(context) && <input type=\"color\" value={rgbToHex(biomeColors[fullId] ?? VanillaColors[fullId] ?? stringToColor(fullId))} onChange={v => setBiomeColor(fullId, hexToRgb(v.currentTarget.value))}></input>}\r\n\t\t\t{(['text_component_object.hoverEvent.show_entity.contents.id', 'enchantment.effects.entry.uuid'].includes(context) || ('attribute_modifier.id' === context && !checkVersion(version, '1.21'))) && <button onClick={() => path.set(generateUUID())} class=\"tooltipped tip-se\" aria-label={localize(lang, 'generate_new_uuid')}>{Octicon.sync}</button>}\r\n\t\t\t{gen && values.includes(value) && value.startsWith('minecraft:') &&\r\n\t\t\t\t<a href={`/${gen.url}/?version=${version}&preset=${value.replace(/^minecraft:/, '')}`} class=\"tooltipped tip-se\" aria-label={localize(lang, 'follow_reference')}>{Octicon.link_external}</a>}\r\n\t\t</>\r\n\t}\r\n}\r\n\r\ntype MenuAction = {\r\n\tlabel: string,\r\n\tdescription?: string,\r\n\ticon: keyof typeof Octicon,\r\n\tonSelect: () => unknown,\r\n}\r\n\r\ntype TreeNodeProps = {\r\n\tschema: INode<any>,\r\n\tpath: ModelPath,\r\n\tvalue: any,\r\n\tlang: string,\r\n\tversion: VersionId,\r\n\tstates: BlockStateRegistry,\r\n\tctx: Record<string, any>,\r\n\tcompare?: any,\r\n\tlabel?: string | ComponentChildren,\r\n\tactions?: MenuAction[],\r\n\tchildren?: ComponentChildren,\r\n}\r\nfunction TreeNode({ label, schema, path, value, lang, version, states, ctx, actions, children }: TreeNodeProps) {\r\n\tconst type = schema.type(path)\r\n\tconst category = schema.category(path)\r\n\tconst context = path.getContext().join('.')\r\n\r\n\tconst [active, setActive] = useFocus()\r\n\tconst onContextMenu = (evt: MouseEvent) => {\r\n\t\tevt.preventDefault()\r\n\t\tsetActive()\r\n\t}\r\n\r\n\tconst newCtx: Record<string, any> = { ...ctx, depth: (ctx.depth ?? 0) + 1 }\r\n\tdelete newCtx.index\r\n\tconst [prefix, suffix, body] = schema.hook(renderHtml, path, value, lang, version, states, newCtx)\r\n\treturn <div class={`node ${type}-node`} data-category={category}>\r\n\t\t<div class=\"node-header\" onContextMenu={onContextMenu}>\r\n\t\t\t<ErrorPopup lang={lang} path={path} />\r\n\t\t\t<HelpPopup lang={lang} path={path} />\r\n\t\t\t{children}\r\n\t\t\t{prefix}\r\n\t\t\t<label>\r\n\t\t\t\t{label ?? pathLocale(lang, path, `${path.last()}`)}\r\n\t\t\t\t{active && <div class=\"node-menu\">\r\n\t\t\t\t\t{actions?.map(a => <div key={a.label} class=\"menu-item\">\r\n\t\t\t\t\t\t<Btn icon={a.icon} tooltip={localize(lang, a.label)} tooltipLoc=\"se\" onClick={() => a.onSelect()}/>\r\n\t\t\t\t\t\t<span>{a.description ?? localize(lang, a.label)}</span>\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t\t<div class=\"menu-item\">\r\n\t\t\t\t\t\t<Btn icon=\"clippy\" tooltip={localize(lang, 'copy_context')} tooltipLoc=\"se\" onClick={() => navigator.clipboard.writeText(context)} />\r\n\t\t\t\t\t\t<span>{context}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>}\r\n\t\t\t</label>\r\n\t\t\t{suffix}\r\n\t\t</div>\r\n\t\t{body && <div class=\"node-body\">{body}</div>}\r\n\t</div>\r\n}\r\n\r\nconst MemoedTreeNode = memo(TreeNode, (prev, next) => {\r\n\treturn prev.schema === next.schema\r\n\t\t&& prev.lang === next.lang\r\n\t\t&& prev.path.equals(next.path)\r\n\t\t&& deepEqual(prev.ctx, next.ctx)\r\n\t\t&& deepEqual(prev.value, next.value)\r\n})\r\n\r\nfunction isEnum(value?: ValidationOption | EnumOption): value is EnumOption {\r\n\treturn !!(value as any)?.enum\r\n}\r\n\r\nfunction hashString(str: string) {\r\n\tvar hash = 0, i, chr\r\n\tfor (i = 0; i < str.length; i++) {\r\n\t\tchr = str.charCodeAt(i)\r\n\t\thash = ((hash << 5) - hash) + chr\r\n\t\thash |= 0\r\n\t}\r\n\treturn hash\r\n}\r\n\r\nfunction pathLocale(lang: string, path: Path, ...params: string[]) {\r\n\tconst ctx = path.getContext()\r\n\tfor (let i = 0; i < ctx.length; i += 1) {\r\n\t\tconst key = ctx.slice(i).join('.')\r\n\t\tconst result = localize(lang, key, ...params)\r\n\t\tif (key !== result) {\r\n\t\t\treturn result\r\n\t\t}\r\n\t}\r\n\treturn ctx[ctx.length - 1]\r\n}\r\n\r\nfunction ErrorPopup({ lang, path, nested }: { lang: string, path: ModelPath, nested?: boolean }) {\r\n\tif (path.model instanceof ModelWrapper) {\r\n\t\tpath = path.model.map(path).withModel(path.model)\r\n\t}\r\n\tconst e = nested\r\n\t\t?\tpath.model.errors.getAll().filter(e => e.path.startsWith(path))\r\n\t\t: path.model.errors.get(path, true)\r\n\tif (e.length === 0) return null\r\n\tconst message = localize(lang, e[0].error, ...(e[0].params ?? []))\r\n\treturn popupIcon('node-error', 'issue_opened', message)\r\n}\r\n\r\nfunction HelpPopup({ lang, path }: { lang: string, path: Path }) {\r\n\tconst key = path.contextPush('help').getContext().join('.')\r\n\tconst message = localize(lang, key)\r\n\tif (message === key) return null\r\n\treturn popupIcon('node-help', 'info', message)\r\n}\r\n\r\nconst popupIcon = (type: string, icon: keyof typeof Octicon, popup: string) => {\r\n\tconst [active, setActive] = useFocus()\r\n\r\n\treturn <div class={`node-icon ${type}${active ? ' show' : ''}`} onClick={() => setActive()}>\r\n\t\t{Octicon[icon]}\r\n\t\t<span class=\"icon-popup\">{popup}</span>\r\n\t</div>\r\n}\r\n\r\nfunction isDecorated(context: string | undefined, value: any) {\r\n\treturn context === 'feature'\r\n\t\t&& value?.type?.replace(/^minecraft:/, '') === 'decorated'\r\n\t\t&& isObject(value?.config)\r\n}\r\n\r\nfunction createDecoratorsWrapper(originalFields: NodeChildren, path: ModelPath, value: any) {\r\n\tconst decorators: any[] = []\r\n\tconst feature = iterateNestedDecorators(value, decorators)\r\n\tconst fields = {\r\n\t\ttype: originalFields.type,\r\n\t\tconfig: ObjectNode({\r\n\t\t\tdecorators: ListNode(CachedDecorator),\r\n\t\t\tfeature: CachedFeature,\r\n\t\t}, { context: 'feature.decorated' }),\r\n\t}\r\n\tconst schema = ObjectNode(fields, { context: 'feature' })\r\n\tconst featurePath = new Path(['config', 'feature'])\r\n\tconst decoratorsPath = new Path(['config', 'decorators'])\r\n\tconst model = path.getModel()\r\n\tconst wrapper: ModelWrapper = new ModelWrapper(schema, path => {\r\n\t\tif (path.startsWith(featurePath)) {\r\n\t\t\treturn new Path([...[...Array(decorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\r\n\t\t} else if (path.startsWith(decoratorsPath)) {\r\n\t\t\tif (path.modelArr.length === 2) {\r\n\t\t\t\treturn new Path([])\r\n\t\t\t}\r\n\t\t\tconst index = path.modelArr[2]\r\n\t\t\tif (typeof index === 'number') {\r\n\t\t\t\treturn new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn path\r\n\t}, path => {\r\n\t\tif (path.equals(decoratorsPath)) {\r\n\t\t\tconst newDecorators: any[] = []\r\n\t\t\titerateNestedDecorators(model.data, newDecorators)\r\n\t\t\treturn newDecorators\r\n\t\t}\r\n\t\treturn model.get(wrapper.map(path))\r\n\t}, (path, value, silent) => {\r\n\t\tif (path.startsWith(featurePath)) {\r\n\t\t\tconst newDecorators: any[] = []\r\n\t\t\titerateNestedDecorators(model.data, newDecorators)\r\n\t\t\tconst newPath =new Path([...[...Array(newDecorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\r\n\t\t\treturn model.set(newPath, value, silent)\r\n\t\t} else if (path.startsWith(decoratorsPath)) {\r\n\t\t\tconst index = path.modelArr[2]\r\n\t\t\tif (path.modelArr.length === 2) {\r\n\t\t\t\tconst feature = wrapper.get(featurePath)\r\n\t\t\t\treturn model.set(new Path(), produceNestedDecorators(feature, value), silent)\r\n\t\t\t} else if (typeof index === 'number') {\r\n\t\t\t\tif (path.modelArr.length === 3 && value === undefined) {\r\n\t\t\t\t\tconst feature = wrapper.get(featurePath)\r\n\t\t\t\t\tconst newDecorators: any[] = []\r\n\t\t\t\t\titerateNestedDecorators(model.data, newDecorators)\r\n\t\t\t\t\tnewDecorators.splice(index, 1)\r\n\t\t\t\t\tconst newValue = produceNestedDecorators(feature, newDecorators)\r\n\t\t\t\t\treturn model.set(new Path(), newValue, silent)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst newPath = new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\r\n\t\t\t\t\treturn model.set(newPath, value, silent)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tmodel.set(path, value, silent)\r\n\t})\r\n\twrapper.data = {\r\n\t\ttype: model.data.type,\r\n\t\tconfig: {\r\n\t\t\tdecorators,\r\n\t\t\tfeature,\r\n\t\t},\r\n\t}\r\n\twrapper.errors = model.errors\r\n\treturn { fields, wrapper }\r\n}\r\n\r\nfunction iterateNestedDecorators(value: any, decorators: any[]): any {\r\n\tif (value?.type?.replace(/^minecraft:/, '') !== 'decorated') {\r\n\t\treturn value\r\n\t}\r\n\tif (!isObject(value?.config)) {\r\n\t\treturn value\r\n\t}\r\n\tdecorators.push({ id: decorators.length, node: value.config.decorator })\r\n\treturn iterateNestedDecorators(value.config.feature ?? '', decorators)\r\n}\r\n\r\nfunction produceNestedDecorators(feature: any, decorators: any[]): any {\r\n\tif (decorators.length === 0) return feature\r\n\treturn {\r\n\t\ttype: 'minecraft:decorated',\r\n\t\tconfig: {\r\n\t\t\tdecorator: decorators.shift().node,\r\n\t\t\tfeature: produceNestedDecorators(feature, decorators),\r\n\t\t},\r\n\t}\r\n}\r\n","import type { DataModel } from '@mcschema/core'\r\nimport { useErrorBoundary, useState } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useModel } from '../../hooks/index.js'\r\nimport { FullNode } from '../../schema/renderHtml.js'\r\nimport type { BlockStateRegistry, VersionId } from '../../services/index.js'\r\n\r\ntype TreePanelProps = {\r\n\tversion: VersionId,\r\n\tmodel: DataModel | undefined,\r\n\tblockStates: BlockStateRegistry | undefined,\r\n\tonError: (message: string) => unknown,\r\n}\r\nexport function Tree({ version, model, blockStates, onError }: TreePanelProps) {\r\n\tconst { lang } = useLocale()\r\n\tif (!model || !blockStates || lang === 'none') return <></>\r\n\r\n\tconst [error] = useErrorBoundary(e => {\r\n\t\tonError(`Error rendering the tree: ${e.message}`)\r\n\t\tconsole.error(e)\r\n\t})\r\n\tif (error) return <></>\r\n\r\n\tconst [, setState] = useState(0)\r\n\tuseModel(model, () => {\r\n\t\tsetState(state => state + 1)\r\n\t})\r\n\r\n\treturn <div class=\"tree\" data-cy=\"tree\">\r\n\t\t<FullNode {...{model, lang, version, blockStates}}/>\r\n\t</div>\r\n}\r\n","import type { Howl, HowlOptions } from 'howler'\r\nimport { useEffect, useRef, useState } from 'preact/hooks'\r\nimport { useLocale, useVersion } from '../../contexts/index.js'\r\nimport type { SoundEvents } from '../../services/index.js'\r\nimport { getSoundUrl } from '../../services/index.js'\r\nimport { Btn, NumberInput, RangeInput, TextInput } from '../index.js'\r\n\r\nexport interface SoundConfig {\r\n\tid: string,\r\n\tsound: string,\r\n\tdelay: number,\r\n\tpitch: number,\r\n\tvolume: number,\r\n}\r\ntype SoundConfigProps = SoundConfig & {\r\n\thowler: (options: HowlOptions) => Howl,\r\n\tsounds: SoundEvents,\r\n\tonEdit: (changes: Partial<SoundConfig>) => unknown,\r\n\tonDelete: () => unknown,\r\n\tdelayedPlay?: number,\r\n}\r\nexport function SoundConfig({ howler, sounds, sound, delay, pitch, volume, onEdit, onDelete, delayedPlay }: SoundConfigProps) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version } = useVersion()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [playing, setPlaying] = useState(false)\r\n\tconst [invalid, setInvalid] = useState(false)\r\n\tconst howls = useRef<Howl[]>([])\r\n\tconst command = `playsound minecraft:${sound} master @s ~ ~ ~ ${volume} ${pitch}`\r\n\r\n\tuseEffect(() => {\r\n\t\tconst soundEvent = sounds[sound]\r\n\t\tsetInvalid((soundEvent?.sounds?.length ?? 0) === 0)\r\n\t\thowls.current.forEach(h => h.stop())\r\n\t\thowls.current = (soundEvent?.sounds ?? []).map(entry => {\r\n\t\t\tconst soundPath = typeof entry === 'string' ? entry : entry.name\r\n\t\t\tconst url = getSoundUrl(version, soundPath)\r\n\t\t\tconst howl = howler({\r\n\t\t\t\tsrc: [url],\r\n\t\t\t\tformat: ['ogg'],\r\n\t\t\t\tvolume,\r\n\t\t\t\trate: pitch,\r\n\t\t\t})\r\n\t\t\thowl.on('end', () => {\r\n\t\t\t\tsetPlaying(false)\r\n\t\t\t})\r\n\t\t\tconst completed = () => {\r\n\t\t\t\tif (loading && howls.current.every(h => h.state() === 'loaded')) {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (howl.state() === 'loaded') {\r\n\t\t\t\tsetTimeout(() => completed())\r\n\t\t\t} else {\r\n\t\t\t\thowl.on('load', () => {\r\n\t\t\t\t\tcompleted()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn howl\r\n\t\t})\r\n\t\tsetLoading(true)\r\n\t}, [sound, sounds])\r\n\r\n\tuseEffect(() => {\r\n\t\thowls.current.forEach(h => h.rate(pitch))\r\n\t}, [pitch])\r\n\r\n\tuseEffect(() => {\r\n\t\thowls.current.forEach(h => h.volume(volume))\r\n\t}, [volume])\r\n\r\n\tconst play = () => {\r\n\t\tif (loading || invalid) return\r\n\t\tstop()\r\n\t\tconst howl = Math.floor(Math.random() * howls.current.length)\r\n\t\thowls.current[howl].play()\r\n\t\tsetPlaying(true)\r\n\t}\r\n\tconst stop = () => {\r\n\t\thowls.current.forEach(h => h.stop())\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (delayedPlay) setTimeout(() => play(), delay * 50)\r\n\t}, [delayedPlay])\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => stop()\r\n\t}, [])\r\n\r\n\tconst [copyActive, setCopyActive] = useState(false)\r\n\tconst copyTimeout = useRef<number | undefined>(undefined)\r\n\tconst copy = () => {\r\n\t\tnavigator.clipboard.writeText(command)\r\n\t\tsetCopyActive(true)\r\n\t\tif (copyTimeout.current !== undefined) clearTimeout(copyTimeout.current)\r\n\t\tcopyTimeout.current = setTimeout(() => {\r\n\t\t\tsetCopyActive(false)\r\n\t\t}, 2000) as any\r\n\t}\r\n\r\n\treturn <div class={`sound-config${loading ? ' loading' : playing ? ' playing' : ''}${invalid ? ' invalid' : ''}`}>\r\n\t\t<Btn class=\"play\" icon={invalid ? 'alert' : loading ? 'sync' : 'play'} label={locale('sounds.play')} onClick={play} tooltip={invalid ? locale('sounds.unknown_sound') : loading ? locale('sounds.loading_sound') : locale('sounds.play_sound')} tooltipLoc=\"se\" />\r\n\t\t<TextInput class=\"btn btn-input sound\" list=\"sound-list\" spellcheck={false}\r\n\t\t\tvalue={sound} onChange={sound => onEdit({ sound })} />\r\n\t\t<label class=\"delay-label\">{locale('sounds.delay')}: </label>\r\n\t\t<NumberInput class=\"btn btn-input delay\" min={0}\r\n\t\t\tvalue={delay} onChange={delay => onEdit({ delay })} />\r\n\t\t<label class=\"pitch-label\">{locale('sounds.pitch')}: </label>\r\n\t\t<RangeInput class=\"pitch tooltipped tip-s\" min={0.5} max={2} step={0.01}\r\n\t\t\taria-label={pitch.toFixed(2)} style={`--x: ${(pitch - 0.5) * (100 / 1.5)}%`}\r\n\t\t\tvalue={pitch} onChange={pitch => onEdit({ pitch })} />\r\n\t\t<label class=\"volume-label\">{locale('sounds.volume')}: </label>\r\n\t\t<RangeInput class=\"volume tooltipped tip-s\" min={0} max={1} step={0.01}\r\n\t\t\taria-label={volume.toFixed(2)} style={`--x: ${volume * 100}%`}\r\n\t\t\tvalue={volume} onChange={volume => onEdit({ volume })} />\r\n\t\t<Btn class={`copy${copyActive ? ' active' : ''}`} icon={copyActive ? 'check' : 'terminal'} label={locale('copy')} tooltip={copyActive ? locale('copied') : locale('sounds.copy_command')}\r\n\t\t\tonClick={copy} />\r\n\t\t<Btn class=\"remove\" icon=\"trashcan\" tooltip={locale('sounds.remove_sound')}\r\n\t\t\tonClick={() => {onDelete(); stop()}} />\r\n\t</div>\r\n}\r\n","import { hashString } from '../Utils.js'\r\nimport { useLocale } from '../contexts/Locale.jsx'\r\nimport { Octicon } from './index.js'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\tactive?: boolean,\r\n\tonClick?: (e: MouseEvent) => unknown,\r\n}\r\nexport function Badge({ label, active, onClick }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst color = {\r\n\t\tbreaking: 5,\r\n\t\tobsolete: 340,\r\n\t}[label] ?? (hashString(label) % 360)\r\n\treturn <div class={`badge${active ? ' active' : ''}${onClick ? ' clickable' : ''}${label === 'obsolete' ? ' tooltipped tip-se' : ''}`} style={`--tint: ${color}`} onClick={onClick} aria-label={{ obsolete: locale('change.obsolete') }[label]}>\r\n\t\t{label === 'breaking' && Octicon.alert}\r\n\t\t{label === 'obsolete' && Octicon.circle_slash}\r\n\t\t{label}\r\n\t</div>\r\n}\r\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (!cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text, [])\n    };\n    lexer.state.inLink = false;\n    return token;\n  } else {\n    return {\n      type: 'image',\n      raw,\n      href,\n      title,\n      text: escape(text)\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: text,\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?: [^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0];\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            line = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(line)) {\n              break;\n            }\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\n              itemContents += '\\n' + line.slice(indent);\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\n              itemContents += '\\n' + line;\n            } else { // Otherwise, improper indentation ends this item\n              break;\n            }\n\n            if (!blankLine && !line.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw: raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n        const hasMultipleLineBreaks = spacers.every(t => {\n          const chars = t.raw.split('');\n          let lineBreaks = 0;\n          for (const char of chars) {\n            if (char === '\\n') {\n              lineBreaks += 1;\n            }\n            if (lineBreaks > 1) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        token.type = 'paragraph';\n        token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.tokens = [];\n        this.lexer.inline(token.text, token.tokens);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = [];\n          this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = [];\n            this.lexer.inlineTokens(row[k].text, row[k].tokens);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const token = {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const token = {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = src.slice(1, lLength + match.index + rLength);\n          return {\n            type: 'em',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = src.slice(2, lLength + match.index + rLength - 1);\n        return {\n          type: 'strong',\n          raw: src.slice(0, lLength + match.index + rLength + 1),\n          text,\n          tokens: this.lexer.inlineTokens(text, [])\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2], [])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)( [^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n});\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.gfm.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n  nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //        () Skip orphan delim inside strong    (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\ninline.escapedEmSt = /\\\\\\*|\\\\_/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.nolink = edit(inline.nolink)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * smartypants text replacement\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n')\n      .replace(/\\t/g, '    ');\n\n    this.blockTokens(src, this.tokens);\n\n    let next;\n    while (next = this.inlineQueue.shift()) {\n      this.inlineTokens(next.src, next.tokens);\n    }\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src, tokens = []) {\n    if (this.options.pedantic) {\n      src = src.replace(/^ +$/gm, '');\n    }\n    let token, lastToken, cutSrc, lastParagraphClipped;\n\n    while (src) {\n      if (this.options.extensions\n        && this.options.extensions.block\n        && this.options.extensions.block.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.length === 1 && tokens.length > 0) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unecessary paragraph tags\n          tokens[tokens.length - 1].raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        lastToken = tokens[tokens.length - 1];\n        if (lastParagraphClipped && lastToken.type === 'paragraph') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = (cutSrc.length !== src.length);\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src, tokens) {\n    this.inlineQueue.push({ src, tokens });\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = []) {\n    let token, lastToken, cutSrc;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n    let keepPrevChar, prevChar;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out escaped em & strong delimiters\n    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n    }\n\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      // extensions\n      if (this.options.extensions\n        && this.options.extensions.inline\n        && this.options.extensions.inline.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n\n/**\n * Renderer\n */\nclass Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    code = code.replace(/\\n$/, '') + '\\n';\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang, true)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  }\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  }\n\n  html(html) {\n    return html;\n  }\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  }\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  }\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  }\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  }\n\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n}\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nclass TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n}\n\n/**\n * Slugger generates header id\n */\nclass Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} options\n   * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n}\n\n/**\n * Parsing & Compiling\n */\nclass Parser {\n  constructor(options) {\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer();\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.header[j].tokens),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.rows.length;\n          for (j = 0; j < l2; j++) {\n            row = token.rows[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k].tokens),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n}\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          if (opt.walkTokens) {\n            marked.walkTokens(tokens, opt.walkTokens);\n          }\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  try {\n    const tokens = Lexer.lex(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parse(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args) {\n  const opts = merge({}, ...args);\n  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };\n  let hasExtensions;\n\n  args.forEach((pack) => {\n    // ==-- Parse \"addon\" extensions --== //\n    if (pack.extensions) {\n      hasExtensions = true;\n      pack.extensions.forEach((ext) => {\n        if (!ext.name) {\n          throw new Error('extension name required');\n        }\n        if (ext.renderer) { // Renderer extensions\n          const prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n          if (prevRenderer) {\n            // Replace extension with func to run new extension but fall back if false\n            extensions.renderers[ext.name] = function(...args) {\n              let ret = ext.renderer.apply(this, args);\n              if (ret === false) {\n                ret = prevRenderer.apply(this, args);\n              }\n              return ret;\n            };\n          } else {\n            extensions.renderers[ext.name] = ext.renderer;\n          }\n        }\n        if (ext.tokenizer) { // Tokenizer Extensions\n          if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n            throw new Error(\"extension level must be 'block' or 'inline'\");\n          }\n          if (extensions[ext.level]) {\n            extensions[ext.level].unshift(ext.tokenizer);\n          } else {\n            extensions[ext.level] = [ext.tokenizer];\n          }\n          if (ext.start) { // Function to check for start of token\n            if (ext.level === 'block') {\n              if (extensions.startBlock) {\n                extensions.startBlock.push(ext.start);\n              } else {\n                extensions.startBlock = [ext.start];\n              }\n            } else if (ext.level === 'inline') {\n              if (extensions.startInline) {\n                extensions.startInline.push(ext.start);\n              } else {\n                extensions.startInline = [ext.start];\n              }\n            }\n          }\n        }\n        if (ext.childTokens) { // Child tokens to be visited by walkTokens\n          extensions.childTokens[ext.name] = ext.childTokens;\n        }\n      });\n    }\n\n    // ==-- Parse \"overwrite\" extensions --== //\n    if (pack.renderer) {\n      const renderer = marked.defaults.renderer || new Renderer();\n      for (const prop in pack.renderer) {\n        const prevRenderer = renderer[prop];\n        // Replace renderer with func to run extension, but fall back if false\n        renderer[prop] = (...args) => {\n          let ret = pack.renderer[prop].apply(renderer, args);\n          if (ret === false) {\n            ret = prevRenderer.apply(renderer, args);\n          }\n          return ret;\n        };\n      }\n      opts.renderer = renderer;\n    }\n    if (pack.tokenizer) {\n      const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n      for (const prop in pack.tokenizer) {\n        const prevTokenizer = tokenizer[prop];\n        // Replace tokenizer with func to run extension, but fall back if false\n        tokenizer[prop] = (...args) => {\n          let ret = pack.tokenizer[prop].apply(tokenizer, args);\n          if (ret === false) {\n            ret = prevTokenizer.apply(tokenizer, args);\n          }\n          return ret;\n        };\n      }\n      opts.tokenizer = tokenizer;\n    }\n\n    // ==-- Parse WalkTokens extensions --== //\n    if (pack.walkTokens) {\n      const walkTokens = marked.defaults.walkTokens;\n      opts.walkTokens = function(token) {\n        pack.walkTokens.call(this, token);\n        if (walkTokens) {\n          walkTokens.call(this, token);\n        }\n      };\n    }\n\n    if (hasExtensions) {\n      opts.extensions = extensions;\n    }\n\n    marked.setOptions(opts);\n  });\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  for (const token of tokens) {\n    callback.call(marked, token);\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.header) {\n          marked.walkTokens(cell.tokens, callback);\n        }\n        for (const row of token.rows) {\n          for (const cell of row) {\n            marked.walkTokens(cell.tokens, callback);\n          }\n        }\n        break;\n      }\n      case 'list': {\n        marked.walkTokens(token.items, callback);\n        break;\n      }\n      default: {\n        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) { // Walk any extensions\n          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {\n            marked.walkTokens(token[childTokens], callback);\n          });\n        } else if (token.tokens) {\n          marked.walkTokens(token.tokens, callback);\n        }\n      }\n    }\n  }\n};\n\n/**\n * Parse Inline\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  try {\n    const tokens = Lexer.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\nmarked.Tokenizer = Tokenizer;\nmarked.Slugger = Slugger;\nmarked.parse = marked;\n\nconst options = marked.options;\nconst setOptions = marked.setOptions;\nconst use = marked.use;\nconst walkTokens = marked.walkTokens;\nconst parseInline = marked.parseInline;\nconst parse = marked;\nconst parser = Parser.parse;\nconst lexer = Lexer.lex;\n\nexport { Lexer, Parser, Renderer, Slugger, TextRenderer, Tokenizer, defaults, getDefaults, lexer, marked, options, parse, parseInline, parser, setOptions, use, walkTokens };\n","import { marked } from 'marked'\r\nimport type { Change } from '../../services/index.js'\r\nimport { Card } from '../Card.jsx'\r\nimport { Badge } from './index.js'\r\n\r\ntype Props = {\r\n\tchange: Change,\r\n\tminimal?: boolean,\r\n\tshort?: boolean,\r\n\tactiveTags?: string[],\r\n\ttoggleTag?: (tag: string) => unknown,\r\n}\r\nexport function ChangelogEntry({ change, minimal, short, activeTags, toggleTag }: Props) {\r\n\treturn <Card overlay={!minimal && <>\r\n\t\t<a class=\"changelog-version\" href={`/versions/?id=${change.version}`}>{change.version}</a>\r\n\t\t<a class=\"changelog-version\" href={`/versions/?id=${change.group}`}>{change.group}</a>\r\n\t</>}>\r\n\t\t<div class=\"badges-list\">\r\n\t\t\t{change.tags.map(tag => <Badge label={tag} onClick={toggleTag ? () => toggleTag(tag) : undefined} active={activeTags?.includes(tag)} />)}\r\n\t\t</div>\r\n\t\t<div class=\"changelog-content\" dangerouslySetInnerHTML={{ __html: marked(short ? change.content.split('\\n')[0] : change.content) }} />\r\n\t</Card>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { useMemo, useState } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useSearchParam, useTags } from '../../hooks/index.js'\r\nimport type { Change } from '../../services/index.js'\r\nimport { Badge } from '../Badge.jsx'\r\nimport { Btn, TextInput } from '../index.js'\r\nimport { ChangelogEntry } from './ChangelogEntry.js'\r\n\r\nconst SEARCH_KEY = 'search'\r\n\r\ninterface Props {\r\n\tchanges: Change[] | undefined,\r\n\tdefaultOrder: 'asc' | 'desc',\r\n\tlimit?: number,\r\n\tnavigation?: ComponentChildren,\r\n}\r\nexport function ChangelogList({ changes, defaultOrder, limit, navigation }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst [search, setSearch] = useSearchParam(SEARCH_KEY)\r\n\tconst [tags, toggleTag] = useTags()\r\n\r\n\tconst filteredChangelogs = useMemo(() => {\r\n\t\tconst query = (search ?? '').split(' ').map(q => q.trim().toLowerCase()).filter(q => q.length > 0)\r\n\t\tif (query.length === 0 && tags.length === 0) return changes\r\n\t\treturn changes?.filter(change => {\r\n\t\t\tif (!tags.every(tag => change.tags.includes(tag))) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tconst content = `${change.group} ${change.version} ${change.tags.join(' ')} ${change.content.toLowerCase()}`\r\n\t\t\treturn query.every(q => {\r\n\t\t\t\tif (q.startsWith('!')) {\r\n\t\t\t\t\treturn q.length === 1 || !content.includes(q.slice(1))\r\n\t\t\t\t}\r\n\t\t\t\treturn content.includes(q)\r\n\t\t\t})\r\n\t\t})\r\n\t}, [changes, search, tags])\r\n\r\n\tconst [sort, setSort] = useState(defaultOrder === 'desc')\r\n\r\n\tconst sortedChangelogs = useMemo(() => {\r\n\t\treturn filteredChangelogs?.sort((a, b) => sort ? b.order - a.order : a.order - b.order)\r\n\t}, [filteredChangelogs, sort])\r\n\r\n\tconst [limitActive, setLimitActive] = useState(true)\r\n\r\n\tconst limitedChangelogs = useMemo(() => {\r\n\t\tif (!limitActive || (limit ?? -1) < 0) return sortedChangelogs \r\n\t\treturn sortedChangelogs?.slice(0, limit)\r\n\t}, [sortedChangelogs, limitActive, limit, sort /* why is this necessary??? */])\r\n\r\n\tconst hiddenChanges = (sortedChangelogs?.length ?? 0) - (limitedChangelogs?.length ?? 0)\r\n\r\n\treturn <>\r\n\t\t<div class=\"navigation\">\r\n\t\t\t{navigation}\r\n\t\t\t<TextInput class=\"btn btn-input query-search\" list=\"sound-list\" placeholder={locale('changelog.search')}\r\n\t\t\t\tvalue={search} onChange={v => setSearch(v, true)} />\r\n\t\t\t<Btn icon={sort ? 'sort_desc' : 'sort_asc'} label={sort ? 'Newest first' : 'Oldest first'} onClick={() => setSort(!sort)} />\r\n\t\t</div>\r\n\t\t{tags.length > 0 && <div class=\"badges-list\">\r\n\t\t\t{tags.map(tag => <Badge label={tag} onClick={() => toggleTag(tag)} />)}\r\n\t\t</div>}\r\n\t\t<div class=\"card-column\">\r\n\t\t\t{limitedChangelogs === undefined ? <>\r\n\t\t\t\t<span class=\"note\">{locale('loading')}</span>\r\n\t\t\t</> : limitedChangelogs.length === 0 ? <>\r\n\t\t\t\t<span class=\"note\">{locale('changelog.no_results')}</span>\r\n\t\t\t</> :\t<>\r\n\t\t\t\t{limitedChangelogs.map(change =>\r\n\t\t\t\t\t<ChangelogEntry change={change} activeTags={tags} toggleTag={toggleTag} />)}\r\n\t\t\t</>}\r\n\t\t\t{hiddenChanges > 0 && (\r\n\t\t\t\t<Btn label={locale('changelog.show_more', `${hiddenChanges}`)} onClick={() => setLimitActive(false)}/>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import type { Bugfix } from '../../services/DataFetcher.js'\r\nimport { Badge } from '../Badge.jsx'\r\nimport { Card } from '../Card.jsx'\r\n\r\ninterface Props {\r\n\tfix: Bugfix\r\n}\r\nexport function Issue({ fix }: Props) {\r\n\treturn <Card overlay={fix.id} link={`https://bugs.mojang.com/browse/${fix.id}`}>\r\n\t\t<div class=\"changelog-content\">{fix.summary}</div>\r\n\t\t<div class=\"badges-list\">\r\n\t\t\t{fix.categories.map(c => <Badge label={c} />)}\r\n\t\t</div>\r\n\t</Card>\r\n}\r\n","import { useLocale } from '../../contexts/Locale.jsx'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { fetchBugfixes } from '../../services/DataFetcher.js'\r\nimport { Issue } from './Issue.jsx'\r\n\r\ninterface Props {\r\n\tversion: string\r\n}\r\nexport function IssueList({ version }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { value: issues, loading } = useAsync(() => fetchBugfixes(version), [version])\r\n\r\n\treturn <div class=\"card-column\">\r\n\t\t{issues === undefined || loading ? <>\r\n\t\t\t<span class=\"note\">{locale('loading')}</span>\r\n\t\t</> : issues.length === 0 ? <>\r\n\t\t\t<span class=\"note\">{locale('versions.fixes.no_results')}</span>\r\n\t\t</> : <>\r\n\t\t\t{issues?.map(issue => <Issue key={issue.id} fix={issue} />)}\r\n\t\t</>}\r\n\t</div>\r\n}\r\n","import { Link } from 'preact-router'\r\nimport { useEffect, useMemo } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { useSearchParam } from '../../hooks/useSearchParam.js'\r\nimport type { VersionMeta } from '../../services/index.js'\r\nimport { fetchChangelogs, getArticleLink } from '../../services/index.js'\r\nimport { Octicon } from '../Octicon.js'\r\nimport { ChangelogList, IssueList, VersionDiff, VersionMetaData } from './index.js'\r\n\r\nconst Tabs = ['changelog', 'diff', 'fixes']\r\nconst WIKI_PAGE_PREFIX = 'https://minecraft.wiki/w/Java_Edition_'\r\n\r\ninterface Props {\r\n\tid: string,\r\n\tversion?: VersionMeta,\r\n}\r\nexport function VersionDetail({ id, version }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst [tab, setTab] = useSearchParam('tab')\r\n\tuseEffect(() => {\r\n\t\tif (tab === undefined || !Tabs.includes(tab)) {\r\n\t\t\tsetTab(Tabs[0], true)\r\n\t\t}\r\n\t}, [tab])\r\n\r\n\tconst { value: changes } = useAsync(fetchChangelogs, [])\r\n\r\n\tconst filteredChangelogs = useMemo(() =>\r\n\t\tchanges?.filter(c => c.version === id || (c.group === id && !c.tags.includes('obsolete'))),\r\n\t[id, changes])\r\n\r\n\tconst articleLink = version && getArticleLink(version.id)\r\n\tconst wikiPageLink = version && WIKI_PAGE_PREFIX + version.name\r\n\r\n\treturn <>\r\n\t\t<div class=\"version-detail\">\r\n\t\t\t<h2>{version?.name ?? id}</h2>\r\n\t\t\t<div class=\"version-info\">\r\n\t\t\t\t{version ? <>\r\n\t\t\t\t\t<VersionMetaData label={locale('versions.released')} value={releaseDate(version)} />\r\n\t\t\t\t\t{version.release_target !== null && <VersionMetaData label={locale('versions.release_target')} value={version.release_target} link={version.id !== version.release_target ? `/versions/?id=${version.release_target}` : undefined} />}\r\n\t\t\t\t\t<VersionMetaData label={locale('versions.data_version')} value={version.data_version} />\r\n\t\t\t\t\t<VersionMetaData label={locale('versions.protocol_version')} value={version.protocol_version} />\r\n\t\t\t\t\t<VersionMetaData label={locale('versions.data_pack_format')} value={version.data_pack_version} />\r\n\t\t\t\t\t<VersionMetaData label={locale('versions.resource_pack_format')} value={version.resource_pack_version} />\r\n\t\t\t\t</> : filteredChangelogs?.length ?? 0 > 1 ? <p>\r\n\t\t\t\t\tThis version is not released yet.\r\n\t\t\t\t</p> : <p>\r\n\t\t\t\t\tThis version does not exist. Only versions since 1.14 are tracked, or it may be too recent.\r\n\t\t\t\t</p>}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tabs\">\r\n\t\t\t\t{Tabs.map(t => <Link key={t} class={tab === t ? 'selected' : ''} href={`/versions/?id=${id}&tab=${t}`}>\r\n\t\t\t\t\t{locale(`versions.${t}`)}\r\n\t\t\t\t</Link>)}\r\n\t\t\t\t{articleLink && <a href={articleLink} target=\"_blank\">\r\n\t\t\t\t\t{locale('versions.article')}\r\n\t\t\t\t\t{Octicon.link_external}\r\n\t\t\t\t</a>}\r\n\t\t\t\t{wikiPageLink && <a href={wikiPageLink} target=\"_blank\">\r\n\t\t\t\t\t{locale('versions.wiki')}\r\n\t\t\t\t\t{Octicon.link_external}\r\n\t\t\t\t</a>}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"version-tab\">\r\n\t\t\t\t{tab === 'changelog' && <ChangelogList changes={filteredChangelogs} defaultOrder=\"asc\" />}\r\n\t\t\t\t{tab === 'diff' && <VersionDiff version={id} />}\r\n\t\t\t\t{tab === 'fixes' && <IssueList version={id} />}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</>\r\n}\r\n\r\nexport function releaseDate(version: VersionMeta) {\r\n\treturn new Date(version.release_time).toLocaleDateString(undefined, { day: 'numeric', month: 'short', year: 'numeric' })\r\n}\r\n","import { useCallback, useEffect, useMemo, useRef } from \"preact/hooks\"\r\nimport { parseGitPatch } from \"../../Utils.js\"\r\nimport { useLocale } from \"../../contexts/Locale.jsx\"\r\nimport { useAsync } from \"../../hooks/useAsync.js\"\r\nimport { useLocalStorage } from \"../../hooks/useLocalStorage.js\"\r\nimport { useSearchParam } from \"../../hooks/useSearchParam.js\"\r\nimport { GitHubCommitFile, fetchVersionDiff } from \"../../services/DataFetcher.js\"\r\nimport { ErrorPanel } from \"../ErrorPanel.jsx\"\r\nimport { Octicon } from \"../Octicon.jsx\"\r\nimport { TreeView, TreeViewGroupRenderer, TreeViewLeafRenderer } from \"../TreeView.jsx\"\r\n\r\nconst mcmetaRawUrl = 'https://raw.githubusercontent.com/misode/mcmeta'\r\nconst mcmetaBlobUrl = 'https://github.com/misode/mcmeta/blob'\r\n\r\ninterface Props {\r\n\tversion: string,\r\n}\r\nexport function VersionDiff({ version }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { value: commit } = useAsync(() => fetchVersionDiff(version), [version])\r\n\r\n\tconst diffView = useRef<HTMLDivElement>(null)\r\n\r\n\tconst [filename, setFilename] = useSearchParam('file')\r\n\tconst selectFile = useCallback((filename: string) => {\r\n\t\tsetFilename(filename)\r\n\t\tif (diffView.current) {\r\n\t\t\tconst y = diffView.current.getBoundingClientRect().top + window.scrollY - 56\r\n\t\t\twindow.scrollTo({ top: y, behavior: 'smooth' })\r\n\t\t}\r\n\t}, [diffView, setFilename])\r\n\r\n\tconst { file, diff } = useMemo(() => {\r\n\t\tif (filename === undefined) return { file: undefined, diff: undefined }\r\n\t\tconst file = commit?.files.find(f => f.filename === filename)\r\n\t\tif (file === undefined) return { file, diff: undefined }\r\n\t\tif (file.patch === undefined) {\r\n\t\t\tconst match = filename.match(/\\.(png|ogg)$/)\r\n\t\t\tif (match) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfile,\r\n\t\t\t\t\tdiff: {\r\n\t\t\t\t\t\ttype: match[1],\r\n\t\t\t\t\t\tbefore: file.status === 'added' ? undefined : `${mcmetaRawUrl}/${commit?.parents[0].sha}/${filename}`,\r\n\t\t\t\t\t\tafter: file.status === 'removed' ? undefined : `${mcmetaRawUrl}/${version}-diff/${filename}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t} else if (file.status === 'renamed') {\r\n\t\t\t\treturn { file, diff: [] }\r\n\t\t\t} else {\r\n\t\t\t\treturn { file, diff: new Error('Cannot display diff for this file') }\r\n\t\t\t}\r\n\t\t}\r\n\t\ttry {\r\n\t\t\treturn { file, diff: parseGitPatch(file.patch) }\r\n\t\t} catch (e) {\r\n\t\t\tconst error = e as Error\r\n\t\t\terror.message = `Failed to show diff: ${error.message}`\r\n\t\t\treturn { file, diff: error }\r\n\t\t}\r\n\t}, [filename, commit])\r\n\r\n\tconst DiffFolder: TreeViewGroupRenderer = useCallback(({ name, open, onClick }) => {\r\n\t\treturn <div class=\"diff-entry select-none\" onClick={onClick} >\r\n\t\t\t{Octicon[!open ? 'chevron_right' : 'chevron_down']}\r\n\t\t\t<span class=\"overflow-hidden text-ellipsis whitespace-nowrap\">{name}</span>\r\n\t\t</div>\r\n\t}, [])\r\n\r\n\tconst DiffEntry: TreeViewLeafRenderer<GitHubCommitFile> = useCallback(({ entry }) => {\r\n\t\treturn <div class={`diff-entry py-0.5 flex items-center [&>svg]:shrink-0 select-none ${entry.filename === filename ? 'active' : ''}`} onClick={() => selectFile(entry.filename)} title={entry.filename}>\r\n\t\t\t<span class=\"ml-[15px] mx-2 overflow-hidden text-ellipsis whitespace-nowrap\">{entry.filename.split('/').at(-1)}</span>\r\n\t\t\t<span class={`ml-auto diff-${entry.status}`}>{Octicon[`diff_${entry.status}`]}</span>\r\n\t</div>\r\n\t}, [filename])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (commit === undefined || filename === undefined) return\r\n\t\tconst onKeyDown = (e: KeyboardEvent) => {\r\n\t\t\tif (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\r\n\t\t\t\tconst fileIndex = commit.files.findIndex(f => f.filename === filename)\r\n\t\t\t\tconst newFileIndex = fileIndex + (e.key === 'ArrowDown' ? 1 : -1)\r\n\t\t\t\tif (newFileIndex >= 0 && newFileIndex < commit.files.length) {\r\n\t\t\t\t\tselectFile(commit.files[newFileIndex].filename)\r\n\t\t\t\t}\r\n\t\t\t\te.preventDefault()\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.addEventListener('keydown', onKeyDown)\r\n\t\treturn () => window.removeEventListener('keydown', onKeyDown)\r\n\t}, [commit, filename, selectFile])\r\n\r\n\tconst [wrap, setWrap] = useLocalStorage('misode_diff_word_wrap', true, (s) => s === 'true', (b) => b ? 'true' : 'false')\r\n\r\n\treturn <>\r\n\t\t<div class=\"diff-header flex items-center z-10 py-2 sticky top-[56px] md:static\">\r\n\t\t\t<button class={`diff-toggle mr-2 ${filename ? 'block md:hidden' : 'hidden'}`} onClick={() => setFilename(undefined)}>{Octicon.arrow_left}</button>\r\n\t\t\t<p class=\"note\">Showing <b>{commit?.files.length} changed files</b> with <b>{commit?.stats.additions} additions</b> and <b>{commit?.stats.deletions} deletions</b></p>\r\n\t\t\t<div class=\"flex-1\"></div>\r\n\t\t\t{Array.isArray(diff) && <label class={`ml-2 whitespace-nowrap ${filename ? 'block' : 'hidden md:block'}`}>\r\n\t\t\t\t<input type=\"checkbox\" checked={wrap} onClick={() => setWrap(!wrap)} />\r\n\t\t\t\t<span class=\"ml-2\">{locale('version_diff.word_wrap')}</span>\r\n\t\t\t</label>}\r\n\t\t</div>\r\n\t\t<div ref={diffView} class=\"w-full\">\r\n\t\t\t<div class={`diff-tree w-full md:w-64 md:overflow-y-scroll md:overscroll-contain md:sticky md:top-[56px] ${filename ? 'hidden md:block' : 'block'}`}>\r\n\t\t\t\t<TreeView entries={commit?.files ?? []} group={DiffFolder} leaf={DiffEntry} split={file => file.filename.split('/')} />\r\n\t\t\t</div>\r\n\t\t\t{filename && <div key={filename} class={`diff-view-panel flex-1 min-w-0 md:pl-2 md:ml-64`}>\r\n\t\t\t\t<div class=\"flex justify-center items-center min-w-0 text-center py-2\" title={filename}>\r\n\t\t\t\t\t<span class=\"mr-2 min-w-0 overflow-hidden text-ellipsis font-bold text-xl\">{filename}</span>\r\n\t\t\t\t\t<a class=\"diff-toggle p-1\" href={`${mcmetaBlobUrl}/${version}-diff/${filename}`} target=\"_blank\">{Octicon.link_external}</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t{diff === undefined ? (\r\n\t\t\t\t\t<span class=\"note\">{locale('loading')}</span>\r\n\t\t\t\t)\t: diff instanceof Error ? (\r\n\t\t\t\t\t<ErrorPanel error={diff} />\r\n\t\t\t\t) : !Array.isArray(diff) ? (\r\n\t\t\t\t\t<div class=\"flex justify-center items-start px-8\">\r\n\t\t\t\t\t\t{diff.before ? (\r\n\t\t\t\t\t\t\tdiff.type === 'png'\r\n\t\t\t\t\t\t\t\t? <img class=\"diff-media diff-media-removed w-full min-w-0\" src={diff.before} alt=\"Before image\" />\r\n\t\t\t\t\t\t\t\t: <audio class=\"w-full\" controls src={diff.before} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div class=\"diff-media-removed w-full self-stretch flex justify-center items-center\">{Octicon.circle_slash}</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div class=\"p-2\"></div>\r\n\t\t\t\t\t\t{diff.after ? (\r\n\t\t\t\t\t\t\tdiff.type === 'png'\r\n\t\t\t\t\t\t\t\t? <img class=\"diff-media diff-media-added w-full min-w-0\" src={diff.after} alt=\"After image\" />\r\n\t\t\t\t\t\t\t\t: <audio class=\"w-full\" controls src={diff.after} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div class=\"diff-media-added w-full self-stretch flex justify-center items-center\">{Octicon.circle_slash}</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : <>\r\n\t\t\t\t\t{file.previous_filename !== undefined && <div class=\"flex justify-center font-mono flex-wrap\" title={`${file.previous_filename}  ${filename}`}>\r\n\t\t\t\t\t\t<span class=\"overflow-hidden text-ellipsis mr-2\">{file.previous_filename}</span>\r\n\t\t\t\t\t\t<span class=\"overflow-hidden text-ellipsis whitespace-nowrap\"><span class=\"select-none\"> </span>{filename}</span>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\t<div class={`diff-view text-sm ${wrap ? '' : 'overflow-x-auto'}`}>\r\n\t\t\t\t\t\t<table class=\"max-w-full w-full\">\r\n\t\t\t\t\t\t\t{diff.map(line => <tr class={`w-full font-mono ${wrap ? 'whitespace-pre-wrap' : 'whitespace-pre'} ${line.before ? (line.after ? '' : 'diff-line-removed') : (line.after ? 'diff-line-added' : 'diff-line-separation')}`}>\r\n\t\t\t\t\t\t\t\t<td class={`diff-number ${line.before || line.after ? 'align-top' : ''} select-none px-2`}>{line.before ?? (line.after ? '' : '...')}</td>\r\n\t\t\t\t\t\t\t\t<td class={`diff-number ${line.before || line.after ? 'align-top' : ''} select-none px-2`}>{line.after ?? (line.before ? '' : '...')}</td>\r\n\t\t\t\t\t\t\t\t<td class=\"px-2 align-top w-4 select-none\">{line.line.startsWith('@') ? '' : line.line.charAt(0)}</td>\r\n\t\t\t\t\t\t\t\t<td class={`break-all w-full ${line.before || line.after ? '' : 'py-2'}`}>{line.line.startsWith('@') ? line.line : line.line.slice(1)}</td>\r\n\t\t\t\t\t\t\t</tr>)}\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>}\r\n\t\t\t</div>}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { useLocale } from '../../contexts/index.js'\r\nimport type { VersionMeta } from '../../services/index.js'\r\nimport { releaseDate, VersionMetaData } from './index.js'\r\n\r\ninterface Props {\r\n\tversion: VersionMeta,\r\n\tlink?: string,\r\n}\r\nexport function VersionEntry({ version, link }: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\treturn <a class=\"version-entry\" href={link}>\r\n\t\t<span class=\"version-id\">{version.id}</span>\r\n\t\t<VersionMetaData label={locale('versions.released')} value={releaseDate(version)} compact />\r\n\t\t<VersionMetaData label={locale('versions.data_version')} value={version.data_version} optional />\r\n\t\t<VersionMetaData label={locale('versions.pack_format')} value={version.data_pack_version} optional />\r\n\t</a>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { useMemo } from 'preact/hooks'\r\nimport { useLocale } from '../../contexts/index.js'\r\nimport { useLocalStorage, useSearchParam } from '../../hooks/index.js'\r\nimport type { VersionMeta } from '../../services/index.js'\r\nimport { Checkbox, TextInput } from '../index.js'\r\nimport { VersionEntry } from './VersionEntry.js'\r\n\r\nconst INCLUDE_SNAPSHOTS = 'misode_include_snapshots'\r\nconst SEARCH_KEY = 'search'\r\n\r\ninterface Props {\r\n\tversions?: VersionMeta[],\r\n\tlink?: (id: string) => string,\r\n\tnavigation?: ComponentChildren,\r\n}\r\nexport function VersionList({ versions, link, navigation }: Props) {\r\n\tconst { locale } = useLocale()\r\n\t\r\n\tconst [snapshots, setSnapshots] = useLocalStorage(INCLUDE_SNAPSHOTS, true, v => v === 'true', b => `${b}`)\r\n\tconst [search, setSearch] = useSearchParam(SEARCH_KEY)\r\n\r\n\tconst filteredVersions = useMemo(() => versions?.filter(v => {\r\n\t\tif (v.type === 'snapshot' && !snapshots) return false\r\n\t\treturn v.id.includes(search ?? '')\r\n\t}), [versions, snapshots, search])\r\n\r\n\treturn <>\r\n\t\t<div class=\"navigation\">\r\n\t\t\t{navigation}\r\n\t\t\t<TextInput class=\"btn btn-input query-search\" placeholder={locale('versions.search')}\r\n\t\t\t\tvalue={search} onChange={setSearch} />\r\n\t\t\t<Checkbox label=\"Include snapshots\" value={snapshots} onChange={setSnapshots} />\r\n\t\t</div>\r\n\t\t<div class=\"version-list\">\r\n\t\t\t{filteredVersions === undefined\r\n\t\t\t\t? <span class=\"note\">{locale('loading')}</span>\r\n\t\t\t\t: filteredVersions.length === 0\r\n\t\t\t\t\t? <span class=\"note\">{locale('versions.no_results')}</span>\r\n\t\t\t\t\t:\tfilteredVersions.map(v => <VersionEntry version={v} link={link?.(v.id)} />)}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { Octicon } from '../index.js'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\tvalue: string | number,\r\n\tlink?: string,\r\n\tcompact?: boolean,\r\n\toptional?: boolean,\r\n}\r\nexport function VersionMetaData({ label, value, link, compact, optional }: Props) {\r\n\treturn <div class={`version-metadata${optional ? ' version-metadata-hide' : ''}`}>\r\n\t\t<span class={compact ? 'version-metadata-hide' : undefined}>{label}: </span>\r\n\t\t<span class=\"version-metadata-value\">{value}</span>\r\n\t\t{link && <a href={link} class=\"version-metadata-link\">{Octicon.link_external}</a>}\r\n\t</div>\r\n}\r\n","import { BtnLink, ChangelogList, ErrorPanel, Footer } from '../components/index.js'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\nimport { useAsync } from '../hooks/index.js'\r\nimport { fetchChangelogs } from '../services/index.js'\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Changelog({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.changelog'))\r\n\r\n\tconst { value: changes, error } = useAsync(fetchChangelogs, [])\r\n\r\n\treturn <main>\r\n\t\t{error && <ErrorPanel error={error} />}\r\n\t\t<div class=\"legacy-container changelog\">\r\n\t\t\t<ChangelogList changes={changes} defaultOrder=\"desc\" limit={100} navigation={(\r\n\t\t\t\t<BtnLink link=\"/versions/\" icon=\"three_bars\" label={locale('versions.all')} />\r\n\t\t\t)} />\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { deepClone, deepEqual } from '../../Utils.js'\r\nimport { Octicon } from '../index.js'\r\n\r\ninterface Props<T> {\r\n\tlabel: ComponentChildren,\r\n\thelp?: string,\r\n\tvalue: T,\r\n\tinitial?: T,\r\n\tonChange: (value: T) => void,\r\n\terror?: string,\r\n\tchildren?: ComponentChildren,\r\n\ttrailing?: ComponentChildren,\r\n}\r\nexport function CustomizedInput<T>({ label, help, value, initial, onChange, error, children, trailing }: Props<T>) {\r\n\tconst isModified = initial !== undefined && !deepEqual(value, initial)\r\n\treturn <div class={`customized-input${error !== undefined ? ' customized-errored' : ''}`}>\r\n\t\t<span class=\"customized-label\">\r\n\t\t\t{typeof label === 'string' ? <label>{label}</label> : label}\r\n\t\t\t{isModified && <span class=\"customized-modified\">*</span>}\r\n\t\t\t{help !== undefined && <span class=\"customized-help tooltipped tip-se\" aria-label={help}>{Octicon.question}</span>}\r\n\t\t</span>\r\n\t\t{children}\r\n\t\t{(isModified && initial != undefined) && <button class=\"customized-icon tooltipped tip-se\" aria-label=\"Reset to default\" onClick={() => onChange(deepClone(initial))}>{Octicon.undo}</button>}\r\n\t\t{error !== undefined && <button class=\"customized-icon customized-error tooltipped tip-se\" aria-label={error}>{Octicon.issue_opened}</button>}\r\n\t\t{trailing}\r\n\t</div>\r\n}\r\n","import type { NodeChildren } from '@mcschema/core'\r\nimport { NumberInput, RangeInput } from '../index.js'\r\nimport { CustomizedInput } from './CustomizedInput.jsx'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\thelp?: string,\r\n\tvalue: number,\r\n\tmin: number,\r\n\tmax: number,\r\n\tstep?: number,\r\n\tinitial?: number,\r\n\terror?: string,\r\n\tonChange: (value: number) => void,\r\n\tchildren?: NodeChildren,\r\n}\r\nexport function CustomizedSlider(props: Props) {\r\n\tconst isInteger = (props.step ?? 1) >= 1\r\n\treturn <CustomizedInput {...props}>\r\n\t\t<RangeInput value={props.value} min={props.min} max={props.max} step={props.step ?? 1} onChange={props.onChange} />\r\n\t\t<NumberInput value={isInteger ? props.value : props.value.toFixed(3)} step={Math.max(1, props.step ?? 1)} onChange={props.onChange} />\r\n\t</CustomizedInput>\r\n}\r\n","import type { ComponentChildren } from 'preact'\r\nimport { CustomizedInput } from './CustomizedInput.jsx'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\thelp?: string,\r\n\tvalue: boolean,\r\n\tinitial?: boolean,\r\n\tonChange: (value: boolean) => void,\r\n\tchildren?: ComponentChildren,\r\n}\r\nexport function CustomizedToggle(props: Props) {\r\n\treturn <CustomizedInput {...props} trailing={props.children}>\r\n\t\t<button class={`customized-toggle${!props.value ? ' customized-false' : ''}`} onClick={() => props.onChange(false)}>No</button>\r\n\t\t<span>/</span>\r\n\t\t<button class={`customized-toggle${props.value ? ' customized-true' : ''}`} onClick={() => props.onChange(true)}>Yes</button>\r\n\t</CustomizedInput>\r\n}\r\n","import { Identifier, ItemStack } from 'deepslate'\r\nimport { ItemDisplay } from '../ItemDisplay.jsx'\r\nimport { TextInput } from '../index.js'\r\nimport { CustomizedInput } from './CustomizedInput.jsx'\r\nimport type { CustomizedModel } from './CustomizedModel.js'\r\nimport { CustomizedSlider } from './CustomizedSlider.jsx'\r\nimport { CustomizedToggle } from './CustomizedToggle.jsx'\r\n\r\ninterface Props {\r\n\tmodel: CustomizedModel,\r\n\tinitialModel: CustomizedModel,\r\n\tchangeModel: (model: Partial<CustomizedModel>) => void,\r\n}\r\nexport function BasicSettings({ model, initialModel, changeModel }: Props) {\r\n\treturn <>\r\n\t\t<CustomizedSlider label=\"Min height\" help=\"The lowest Y level of the world\"\r\n\t\t\tvalue={model.minHeight} onChange={v => changeModel({ minHeight: v })}\r\n\t\t\tmin={-128} max={384} step={16} initial={initialModel.minHeight}\r\n\t\t\terror={model.minHeight % 16 !== 0 ? 'Min height needs to be a multiple of 16' : undefined} />\r\n\t\t<CustomizedSlider label=\"Max height\" help=\"The highest Y level of the world\"\r\n\t\t\tvalue={model.maxHeight} onChange={v => changeModel({ maxHeight: v })}\r\n\t\t\tmin={-128} max={384} step={16} initial={initialModel.maxHeight}\r\n\t\t\terror={model.maxHeight <= model.minHeight ? 'Max height needs to be larger than Min height' : model.maxHeight % 16 !== 0 ? 'Max height needs to be a multiple of 16' : undefined} />\r\n\t\t<CustomizedSlider label=\"Sea level\" help=\"The top Y level of the oceans\"\r\n\t\t\tvalue={model.seaLevel} onChange={v => changeModel({ seaLevel: v })}\r\n\t\t\tmin={-128} max={384} initial={initialModel.seaLevel} />\r\n\t\t<CustomizedInput label=\"Oceans\" help=\"The block used to fill the oceans\"\r\n\t\t\tvalue={model.oceans} onChange={v => changeModel({ oceans: v })}\r\n\t\t\tinitial={initialModel.oceans}>\r\n\t\t\t<button class={`customized-toggle${model.oceans === 'water' ? ' customized-water' : ''}`} onClick={() => changeModel({ oceans: 'water' })}>Water</button>\r\n\t\t\t<span>/</span>\r\n\t\t\t<button class={`customized-toggle${model.oceans === 'lava' ? ' customized-lava' : ''}`} onClick={() => changeModel({ oceans: 'lava' })}>Lava</button>\r\n\t\t\t<span>/</span>\r\n\t\t\t<button class={`customized-toggle${model.oceans != 'water' && model.oceans != 'lava' ? ' customized-active' : ''}`} onClick={() => changeModel({ oceans: 'slime_block' })}>Custom</button>\r\n\t\t\t{model.oceans != 'water' && model.oceans != 'lava' && <>\r\n\t\t\t\t<TextInput value={model.oceans} onChange={v => changeModel({ oceans: v })} />\r\n\t\t\t\t<ItemDisplay item={new ItemStack(Identifier.parse(model.oceans), 1)} tooltip={false} />\r\n\t\t\t</>}\r\n\t\t</CustomizedInput>\r\n\t\t<div class=\"customized-group\">\r\n\t\t\t<CustomizedToggle label=\"Caves\" help=\"Whether caves will generate\"\r\n\t\t\t\tvalue={model.caves} onChange={v => changeModel({ caves: v })}\r\n\t\t\t\tinitial={initialModel.caves} />\r\n\t\t\t{model.caves && <div class=\"customized-childs\">\r\n\t\t\t\t<CustomizedToggle label=\"Noise caves\" help=\"The new caves introduced in 1.18\"\r\n\t\t\t\t\tvalue={model.noiseCaves} onChange={v => changeModel({ noiseCaves: v })}\r\n\t\t\t\t\tinitial={initialModel.noiseCaves} />\r\n\t\t\t\t<CustomizedToggle label=\"Old caves\" help=\"The legacy caves\"\r\n\t\t\t\t\tvalue={model.carverCaves} onChange={v => changeModel({ carverCaves: v })}\r\n\t\t\t\t\tinitial={initialModel.carverCaves} />\r\n\t\t\t\t<CustomizedToggle label=\"Ravines\" help=\"The legacy ravines and canyons\"\r\n\t\t\t\t\tvalue={model.ravines} onChange={v => changeModel({ ravines: v })}\r\n\t\t\t\t\tinitial={initialModel.ravines} />\r\n\t\t\t</div>}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { useMemo } from 'preact/hooks'\r\nimport { deepClone } from '../../Utils.js'\r\nimport { useAsync } from '../../hooks/useAsync.js'\r\nimport { fetchRegistries } from '../../services/DataFetcher.js'\r\nimport { Octicon, TextInput } from '../index.js'\r\nimport { CustomizedInput } from './CustomizedInput.jsx'\r\nimport type { CustomizedModel } from './CustomizedModel.js'\r\nimport { CustomizedSlider } from './CustomizedSlider.jsx'\r\n\r\ninterface Props {\r\n\tmodel: CustomizedModel,\r\n\tinitialModel: CustomizedModel,\r\n\tchangeModel: (model: Partial<CustomizedModel>) => void,\r\n}\r\nexport function BiomesSettings({ model, initialModel, changeModel }: Props) {\r\n\tconst { value: registries } = useAsync(() => fetchRegistries('1.20'))\r\n\r\n\tconst biomes = useMemo(() => {\r\n\t\tconst hiddenBiomes = new Set(['end_barrens', 'end_highlands', 'end_midlands', 'small_end_islands', 'the_end', 'basalt_deltas', 'crimson_forest', 'nether_wastes', 'soul_sand_valley', 'warped_forest', 'the_void'])\r\n\t\treturn registries?.get('worldgen/biome')?.filter(b => !hiddenBiomes.has(b.replace(/^minecraft:/, '')))\r\n\t}, [registries])\r\n\r\n\treturn <>\r\n\t\t<CustomizedSlider label=\"Biome size\" help=\"The scale of the biome layout, 6 corresponds to the large biomes preset\"\r\n\t\t\tvalue={model.biomeSize} onChange={v => changeModel({ biomeSize: v })}\r\n\t\t\tmin={1} max={8} initial={initialModel.biomeSize} />\r\n\t\t<p class=\"customized-info\">\r\n\t\t\t{Octicon.info}\r\n\t\t\tChanging the following settings will not affect the terrain, only which biomes are painted on the terrain.\r\n\t\t</p>\r\n\t\t{biomes?.map(key => {\r\n\t\t\tconst biome = key.replace(/^minecraft:/, '')\r\n\t\t\tconst state: string | undefined = model.biomeReplacements[biome]\r\n\t\t\tconst onChange = (v: string | undefined) => {\r\n\t\t\t\tconst biomeReplacements = deepClone(model.biomeReplacements)\r\n\t\t\t\tif (v === undefined || v === biome) {\r\n\t\t\t\t\tdelete biomeReplacements[biome]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbiomeReplacements[biome] = v\r\n\t\t\t\t}\r\n\t\t\t\tchangeModel({ biomeReplacements })\r\n\t\t\t}\r\n\t\t\treturn <CustomizedInput label={biome.replace(/^minecraft:/, '')}\r\n\t\t\t\tvalue={state ?? biome} onChange={onChange}\r\n\t\t\t\tinitial={biome}>\r\n\t\t\t\t<button class={`customized-toggle${state === undefined ? ' customized-true' : ''}`} onClick={() => onChange(undefined)}>Keep</button>\r\n\t\t\t\t<span>/</span>\r\n\t\t\t\t<button class={`customized-toggle${state !== undefined ? ' customized-false' : ''}`} onClick={() => onChange(findReplacement(biome, model.biomeReplacements))}>Replace</button>\r\n\t\t\t\t{state !== undefined && <>\r\n\t\t\t\t\t<TextInput value={state} onChange={v => onChange(v)} />\r\n\t\t\t\t</>}\r\n\t\t\t</CustomizedInput>\r\n\t\t})}\r\n\t</>\r\n}\r\n\r\nfunction findReplacement(biome: string, replacements: Record<string, string>): string {\r\n\tlet replacement = DefaultReplacements[biome]\r\n\tif (replacement === undefined) {\r\n\t\treturn 'plains'\r\n\t}\r\n\tfor (let i = 0; i < 10; i += 1) {\r\n\t\tif (biome === replacement) {\r\n\t\t\treturn DefaultReplacements[biome]\r\n\t\t}\r\n\t\tif (!replacements[replacement]) {\r\n\t\t\treturn replacement\r\n\t\t}\r\n\t\treplacement = replacements[replacement]\r\n\t}\r\n\treturn DefaultReplacements[biome]\r\n}\r\n\r\nconst DefaultReplacements: Record<string, string> = {\r\n\tbadlands: 'desert',\r\n\tbamboo_jungle: 'jungle',\r\n\tbeach: 'plains',\r\n\tbirch_forest: 'forest',\r\n\tcherry_grove: 'meadow',\r\n\tcold_ocean: 'ocean',\r\n\tdark_forest: 'forest',\r\n\tdeep_cold_ocean: 'deep_ocean',\r\n\tdeep_dark: 'plains',\r\n\tdeep_frozen_ocean: 'deep_ocean',\r\n\tdeep_lukewarm_ocean: 'deep_ocean',\r\n\tdeep_ocean: 'ocean',\r\n\tdesert: 'savanna',\r\n\tdripstone_caves: 'plains',\r\n\teroded_badlands: 'badlands',\r\n\tflower_forest: 'forest',\r\n\tforest: 'plains',\r\n\tfrozen_ocean: 'cold_ocean',\r\n\tfrozen_peaks: 'stony_peaks',\r\n\tfrozen_river: 'river',\r\n\tgrove: 'forest',\r\n\tice_spikes: 'snowy_plains',\r\n\tjagged_peaks: 'stony_peaks',\r\n\tjungle: 'savanna',\r\n\tlukewarm_ocean: 'ocean',\r\n\tlush_caves: 'plains',\r\n\tmangrove_swamp: 'swamp',\r\n\tmeadow: 'forest',\r\n\tmushroom_fields: 'plains',\r\n\tocean: 'plains',\r\n\told_growth_birch_forest: 'birch_forest',\r\n\told_growth_pine_taiga: 'taiga',\r\n\told_growth_spruce_taiga: 'taiga',\r\n\tplains: 'the_void',\r\n\triver: 'plains',\r\n\tsavanna: 'plains',\r\n\tsavanna_plateau: 'savanna',\r\n\tsnowy_beach: 'beach',\r\n\tsnowy_plains: 'plains',\r\n\tsnowy_slopes: 'grove',\r\n\tsnowy_taiga: 'taiga',\r\n\tsparse_jungle: 'jungle',\r\n\tstony_peaks: 'plains',\r\n\tstony_shore: 'beach',\r\n\tsunflower_plains: 'plains',\r\n\tswamp: 'river',\r\n\ttaiga: 'forest',\r\n\twarm_ocean: 'ocean',\r\n\twindswept_forest: 'forest',\r\n\twindswept_gravelly_hills: 'windswept_hills',\r\n\twindswept_hills: 'plains',\r\n\twindswept_savanna: 'savanna',\r\n\twooded_badlands: 'badlands',\r\n}\r\n","import type { VersionId } from '../../services/Schemas.js'\r\n\r\nexport interface CustomizedOreModel {\r\n\tsize: number,\r\n\ttries: number,\r\n\tminHeight?: number,\r\n\tminAboveBottom?: number,\r\n\tminBelowTop?: number,\r\n\tmaxHeight?: number,\r\n\tmaxBelowTop?: number,\r\n\tmaxAboveBottom?: number,\r\n\ttrapezoid?: boolean,\r\n}\r\n\r\nexport interface CustomizedModel {\r\n\t// Basic\r\n\tminHeight: number,\r\n\tmaxHeight: number,\r\n\tseaLevel: number,\r\n\toceans: string,\r\n\tcaves: boolean,\r\n\tnoiseCaves: boolean,\r\n\tcarverCaves: boolean,\r\n\travines: boolean,\r\n\t// Biomes\r\n\tbiomeSize: number,\r\n\tbiomeReplacements: Record<string, string>,\r\n\t// Structures\r\n\tancientCities: boolean,\r\n\tburiedTreasures: boolean,\r\n\tdesertPyramids: boolean,\r\n\tigloos: boolean,\r\n\tjungleTemples: boolean,\r\n\tmineshafts: boolean,\r\n\toceanMonuments: boolean,\r\n\toceanRuins: boolean,\r\n\tpillagerOutposts: boolean,\r\n\truinedPortals: boolean,\r\n\tshipwrecks: boolean,\r\n\tstrongholds: boolean,\r\n\tswampHuts: boolean,\r\n\ttrailRuins: boolean,\r\n\tvillages: boolean,\r\n\twoodlandMansions: boolean,\r\n\t// Features\r\n\tdungeons: boolean,\r\n\tdungeonTries: number,\r\n\tlavaLakes: boolean,\r\n\tlavaLakeRarity: number,\r\n\tlavaLakeRarityUnderground: number,\r\n\t// Ores\r\n\tdirt: CustomizedOreModel | undefined,\r\n\tgravel: CustomizedOreModel | undefined,\r\n\tgraniteLower: CustomizedOreModel | undefined,\r\n\tgraniteUpper: CustomizedOreModel | undefined,\r\n\tdioriteLower: CustomizedOreModel | undefined,\r\n\tdioriteUpper: CustomizedOreModel | undefined,\r\n\tandesiteLower: CustomizedOreModel | undefined,\r\n\tandesiteUpper: CustomizedOreModel | undefined,\r\n\tcoalLower: CustomizedOreModel | undefined,\r\n\tcoalUpper: CustomizedOreModel | undefined,\r\n\tironSmall: CustomizedOreModel | undefined,\r\n\tironMiddle: CustomizedOreModel | undefined,\r\n\tironUpper: CustomizedOreModel | undefined,\r\n\tcopper: CustomizedOreModel | undefined,\r\n\tcopperLarge: CustomizedOreModel | undefined,\r\n\tgoldLower: CustomizedOreModel | undefined,\r\n\tgold: CustomizedOreModel | undefined,\r\n\tredstoneLower: CustomizedOreModel | undefined,\r\n\tredstone: CustomizedOreModel | undefined,\r\n\tlapis: CustomizedOreModel | undefined,\r\n\tlapisBuried: CustomizedOreModel | undefined,\r\n\temerald: CustomizedOreModel | undefined,\r\n\tdiamond: CustomizedOreModel | undefined,\r\n\tdiamondBuried: CustomizedOreModel | undefined,\r\n\tdiamondLarge: CustomizedOreModel | undefined,\r\n}\r\n\r\nexport namespace CustomizedModel {\r\n\texport function getDefault(_version: VersionId): CustomizedModel {\r\n\t\tconst model: CustomizedModel = {\r\n\t\t\tminHeight: -64,\r\n\t\t\tmaxHeight: 320,\r\n\t\t\tseaLevel: 63,\r\n\t\t\toceans: 'water',\r\n\t\t\tcaves: true,\r\n\t\t\tnoiseCaves: true,\r\n\t\t\tcarverCaves: true,\r\n\t\t\travines: true,\r\n\r\n\t\t\tbiomeSize: 4,\r\n\t\t\tbiomeReplacements: {},\r\n\r\n\t\t\tancientCities: true,\r\n\t\t\tburiedTreasures: true,\r\n\t\t\tdesertPyramids: true,\r\n\t\t\tigloos: true,\r\n\t\t\tjungleTemples: true,\r\n\t\t\tmineshafts: true,\r\n\t\t\toceanMonuments: true,\r\n\t\t\toceanRuins: true,\r\n\t\t\tpillagerOutposts: true,\r\n\t\t\truinedPortals: true,\r\n\t\t\tshipwrecks: true,\r\n\t\t\tstrongholds: true,\r\n\t\t\tswampHuts: true,\r\n\t\t\ttrailRuins: true,\r\n\t\t\tvillages: true,\r\n\t\t\twoodlandMansions: true,\r\n\r\n\t\t\tdungeons: true,\r\n\t\t\tdungeonTries: 14,\r\n\t\t\tlavaLakes: true,\r\n\t\t\tlavaLakeRarity: 200,\r\n\t\t\tlavaLakeRarityUnderground: 9,\r\n\r\n\t\t\tdirt: { size: 33, tries: 7, minHeight: 0, maxHeight: 160 },\r\n\t\t\tgravel: { size: 33, tries: 14, minAboveBottom: 0, maxBelowTop: 0 },\r\n\t\t\tgraniteLower: { size: 64, tries: 2, minHeight: 0, maxHeight: 60 },\r\n\t\t\tgraniteUpper: { size: 64, tries: 1/6, minHeight: 64, maxHeight: 128 },\r\n\t\t\tdioriteLower: { size: 64, tries: 2, minHeight: 0, maxHeight: 60 },\r\n\t\t\tdioriteUpper: { size: 64, tries: 1/6, minHeight: 64, maxHeight: 128 },\r\n\t\t\tandesiteLower: { size: 64, tries: 2, minHeight: 0, maxHeight: 60 },\r\n\t\t\tandesiteUpper: { size: 64, tries: 1/6, minHeight: 64, maxHeight: 128 },\r\n\t\t\tcoalLower: { size: 17, tries: 20, minHeight: 0, maxHeight: 192, trapezoid: true },\r\n\t\t\tcoalUpper: { size: 17, tries: 30, minHeight: 136, maxBelowTop: 0 },\r\n\t\t\tironSmall: { size: 4, tries: 10, minAboveBottom: 0, maxHeight: 72 },\r\n\t\t\tironMiddle: { size: 9, tries: 10, minHeight: -24, maxHeight: 56, trapezoid: true },\r\n\t\t\tironUpper: { size: 9, tries: 90, minHeight: 80, maxHeight: 384, trapezoid: true },\r\n\t\t\tcopper: { size: 10, tries: 16, minHeight: -16, maxHeight: 112, trapezoid: true },\r\n\t\t\tcopperLarge: { size: 20, tries: 16, minHeight: -16, maxHeight: 112, trapezoid: true },\r\n\t\t\tgoldLower: { size: 9, tries: 1/2, minHeight: -64, maxBelowTop: -48 },\r\n\t\t\tgold: { size: 9, tries: 4, minHeight: -64, maxBelowTop: 32, trapezoid: true },\r\n\t\t\tredstoneLower: { size: 8, tries: 8, minAboveBottom: -32, maxAboveBottom: 32, trapezoid: true },\r\n\t\t\tredstone: { size: 8, tries: 4, minAboveBottom: 0, maxHeight: 15 },\r\n\t\t\tlapis: { size: 7, tries: 2, minAboveBottom: -32, maxAboveBottom: 32, trapezoid: true },\r\n\t\t\tlapisBuried: { size: 7, tries: 4, minAboveBottom: 0, maxHeight: 32 },\r\n\t\t\temerald: { size: 3, tries: 100, minHeight: -16, maxHeight: 480, trapezoid: true },\r\n\t\t\tdiamond: { size: 4, tries: 7, minAboveBottom: -80, maxAboveBottom: 80, trapezoid: true },\r\n\t\t\tdiamondBuried: { size: 8, tries: 4, minAboveBottom: -80, maxAboveBottom: 80, trapezoid: true },\r\n\t\t\tdiamondLarge: { size: 12, tries: 1/9, minAboveBottom: -80, maxAboveBottom: 80, trapezoid: true },\r\n\t\t}\r\n\t\treturn model\r\n\t}\r\n}\r\n","import { Identifier } from 'deepslate'\r\nimport { deepClone, deepEqual } from '../../Utils.js'\r\nimport { fetchAllPresets, fetchBlockStates } from '../../services/DataFetcher.js'\r\nimport type { VersionId } from '../../services/Schemas.js'\r\nimport type { CustomizedOreModel } from './CustomizedModel.js'\r\nimport { CustomizedModel } from './CustomizedModel.js'\r\n\r\n// Random prefix to avoid collisions with other packs that add no-op placed features\r\nconst FeatureCollisionPrefix = 468794\r\n\r\nconst PackTypes = ['dimension', 'dimension_type', 'worldgen/noise_settings', 'worldgen/noise', 'worldgen/structure_set', 'worldgen/placed_feature', 'worldgen/configured_feature', 'worldgen/configured_carver'] as const\r\nexport type CustomizedPackType = typeof PackTypes[number]\r\n\r\nexport type CustomizedPack = Record<CustomizedPackType, Map<string, any>>\r\n\r\ninterface Context {\r\n\tmodel: CustomizedModel,\r\n\tinitial: CustomizedModel,\r\n\tversion: VersionId,\r\n\tblockStates: Map<string, {properties: Record<string, string[]>, default: Record<string, string>}>,\r\n\tvanilla: CustomizedPack,\r\n\tout: CustomizedPack,\r\n\tfeatureCollisionIndex: number,\r\n}\r\n\r\nexport async function generateCustomized(model: CustomizedModel, version: VersionId): Promise<CustomizedPack> {\r\n\tconst [blockStates, ...vanillaFiles] = await Promise.all([\r\n\t\tfetchBlockStates(version),\r\n\t\t...PackTypes.map(t => fetchAllPresets(version, t)),\r\n\t])\r\n\tconst ctx: Context = {\r\n\t\tmodel,\r\n\t\tinitial: CustomizedModel.getDefault(version),\r\n\t\tversion,\r\n\t\tblockStates,\r\n\t\tvanilla: PackTypes.reduce((acc, k, i) => {\r\n\t\t\treturn { ...acc, [k]: vanillaFiles[i] }\r\n\t\t}, Object.create(null)),\r\n\t\tout: PackTypes.reduce((acc, k) => {\r\n\t\t\treturn { ...acc, [k]: new Map()}\r\n\t\t}, Object.create(null)) as CustomizedPack,\r\n\t\tfeatureCollisionIndex: FeatureCollisionPrefix,\r\n\t}\r\n\tgenerateBiomeReplacements(ctx)\r\n\tgenerateDimensionType(ctx)\r\n\tgenerateNoiseSettings(ctx)\r\n\tgenerateCarvers(ctx)\r\n\tgenerateClimateNoises(ctx)\r\n\tgenerateStructures(ctx)\r\n\tgenerateDungeonFeatures(ctx)\r\n\tgenerateLakeFeatures(ctx)\r\n\tgenerateOreFeatures(ctx)\r\n\treturn ctx.out\r\n}\r\n\r\nfunction generateDimensionType(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'minHeight', 'maxHeight')) return\r\n\tctx.out.dimension_type.set('overworld', {\r\n\t\t...ctx.vanilla.dimension_type.get('overworld'),\r\n\t\tmin_y: ctx.model.minHeight,\r\n\t\theight: ctx.model.maxHeight - ctx.model.minHeight,\r\n\t\tlogical_height: ctx.model.maxHeight - ctx.model.minHeight,\r\n\t  })\r\n}\r\n\r\nfunction generateNoiseSettings(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'minHeight', 'maxHeight', 'seaLevel', 'oceans', 'caves', 'noiseCaves')) return\r\n\tconst defaultFluid = formatIdentifier(ctx.model.oceans)\r\n\tconst vanilla = ctx.vanilla['worldgen/noise_settings'].get('overworld')\r\n\tconst finalDensity = deepClone(vanilla.noise_router.final_density)\r\n\tif (!ctx.model.caves || !ctx.model.noiseCaves) {\r\n\t\tfinalDensity.argument2 = 1\r\n\t\tfinalDensity.argument1.argument.argument2.argument.argument.argument2.argument2.argument2.argument2.argument2.argument2 = 'minecraft:overworld/sloped_cheese'\r\n\t}\r\n\tctx.out['worldgen/noise_settings'].set('overworld', {\r\n\t\t...vanilla,\r\n\t\tsea_level: ctx.model.seaLevel,\r\n\t\tdefault_fluid: {\r\n\t\t\tName: defaultFluid,\r\n\t\t\tProperties: ctx.blockStates.get(defaultFluid)?.default,\r\n\t\t},\r\n\t\tnoise: {\r\n\t\t\t...vanilla.noise,\r\n\t\t\tmin_y: ctx.model.minHeight,\r\n\t\t\theight: ctx.model.maxHeight - ctx.model.minHeight,\r\n\t\t},\r\n\t\tnoise_router: {\r\n\t\t\t...vanilla.noise_router,\r\n\t\t\tfinal_density: finalDensity,\r\n\t\t},\r\n\t})\r\n}\r\n\r\nfunction generateCarvers(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'caves', 'carverCaves', 'ravines')) return\r\n\tif (!ctx.model.caves || !ctx.model.carverCaves) {\r\n\t\tconst vanilla = ctx.vanilla['worldgen/configured_carver'].get('cave')\r\n\t\tctx.out['worldgen/configured_carver'].set('cave', {\r\n\t\t\t...vanilla,\r\n\t\t\tconfig: {\r\n\t\t\t\t...vanilla.config,\r\n\t\t\t\tprobability: 0,\r\n\t\t\t},\r\n\t\t})\r\n\t\tconst extraVanilla = ctx.vanilla['worldgen/configured_carver'].get('cave')\r\n\t\tctx.out['worldgen/configured_carver'].set('cave_extra_underground', {\r\n\t\t\t...extraVanilla,\r\n\t\t\tconfig: {\r\n\t\t\t\t...extraVanilla.config,\r\n\t\t\t\tprobability: 0,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\tif (!ctx.model.caves || !ctx.model.ravines) {\r\n\t\tconst vanilla = ctx.vanilla['worldgen/configured_carver'].get('canyon')\r\n\t\tctx.out['worldgen/configured_carver'].set('canyon', {\r\n\t\t\t...vanilla,\r\n\t\t\tconfig: {\r\n\t\t\t\t...vanilla.config,\r\n\t\t\t\tprobability: 0,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction generateClimateNoises(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'biomeSize')) return\r\n\tfor (const name of ['temperature', 'vegetation', 'continentalness', 'erosion']) {\r\n\t\tconst vanilla = ctx.vanilla['worldgen/noise'].get(name)\r\n\t\tctx.out['worldgen/noise'].set(name, {\r\n\t\t\t...vanilla,\r\n\t\t\tfirstOctave: vanilla.firstOctave - ctx.model.biomeSize + 4,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction generateBiomeReplacements(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'biomeReplacements')) return\r\n\tconst vanilla = ctx.vanilla['dimension'].get('overworld')\r\n\tconst biomes = vanilla.generator.biome_source.biomes.slice()\r\n\tconst replacements = new Map(Object.entries(ctx.model.biomeReplacements))\r\n\tctx.out['dimension'].set('overworld', {\r\n\t\ttype: 'minecraft:overworld',\r\n\t\tgenerator: {\r\n\t\t\ttype: 'minecraft:noise',\r\n\t\t\tsettings: 'minecraft:overworld',\r\n\t\t\tbiome_source: {\r\n\t\t\t\ttype: 'minecraft:multi_noise',\r\n\t\t\t\tbiomes: biomes.map((b: any) => ({\r\n\t\t\t\t\tbiome: replacements.get(b.biome.slice(10)) ?? b.biome,\r\n\t\t\t\t\tparameters: b.parameters,\r\n\t\t\t\t})),\r\n\t\t\t},\r\n\t\t},\r\n\t})\r\n}\r\n\r\nconst Structures: Partial<Record<keyof CustomizedModel, string>> = {\r\n\tancientCities: 'ancient_cities',\r\n\tburiedTreasures: 'buried_treasures',\r\n\tdesertPyramids: 'desert_pyramids',\r\n\tigloos: 'igloos',\r\n\tjungleTemples: 'jungle_temples',\r\n\tmineshafts: 'mineshafts',\r\n\toceanMonuments: 'ocean_monuments',\r\n\toceanRuins: 'ocean_ruins',\r\n\tpillagerOutposts: 'pillager_outposts',\r\n\truinedPortals: 'ruined_portals',\r\n\tshipwrecks: 'shipwrecks',\r\n\tstrongholds: 'strongholds',\r\n\tswampHuts: 'swamp_huts',\r\n\ttrailRuins: 'trail_ruins',\r\n\tvillages: 'villages',\r\n\twoodlandMansions: 'woodland_mansions',\r\n}\r\n\r\nfunction generateStructures(ctx: Context) {\r\n\tfor (const [key, name] of Object.entries(Structures) as [keyof CustomizedModel, string][]) {\r\n\t\tif (isUnchanged(ctx, key) || ctx.model[key]) continue\r\n\t\tctx.out['worldgen/structure_set'].set(name, {\r\n\t\t\t...ctx.vanilla['worldgen/structure_set'].get(name),\r\n\t\t\tstructures: [],\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction getDisabledFeature(ctx: Context) {\r\n\tctx.featureCollisionIndex += 1\r\n\treturn {\r\n\t\tfeature: {\r\n\t\t\ttype: 'minecraft:no_op',\r\n\t\t\tconfig: {},\r\n\t\t},\r\n\t\tplacement: [\r\n\t\t\t{\r\n\t\t\t\ttype: 'minecraft:rarity_filter',\r\n\t\t\t\tchance: ctx.featureCollisionIndex,\r\n\t\t\t},\r\n\t\t],\r\n\t}\r\n}\r\n\r\nfunction generateDungeonFeatures(ctx: Context) {\r\n\tif (isUnchanged(ctx, 'dungeons', 'dungeonTries')) return\r\n\tif (!ctx.model.dungeons) {\r\n\t\tctx.out['worldgen/placed_feature'].set('monster_room_deep', getDisabledFeature(ctx))\r\n\t\tctx.out['worldgen/placed_feature'].set('monster_room', getDisabledFeature(ctx))\r\n\t} else {\r\n\t\tconst deepTries = Math.round(ctx.model.dungeonTries * 4 / 14)\r\n\t\tconst deepVanilla = ctx.vanilla['worldgen/placed_feature'].get('monster_room_deep')\r\n\t\tctx.out['worldgen/placed_feature'].set('monster_room_deep', {\r\n\t\t\t...deepVanilla,\r\n\t\t\tplacement: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'minecraft:count',\r\n\t\t\t\t\tcount: deepTries,\r\n\t\t\t\t},\r\n\t\t\t\t...deepVanilla.placement.slice(1),\r\n\t\t\t],\r\n\t\t})\r\n\t\tconst normalVanilla = ctx.vanilla['worldgen/placed_feature'].get('monster_room')\r\n\t\tctx.out['worldgen/placed_feature'].set('monster_room', {\r\n\t\t\t...normalVanilla,\r\n\t\t\tplacement: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'minecraft:count',\r\n\t\t\t\t\tcount: ctx.model.dungeonTries - deepTries,\r\n\t\t\t\t},\r\n\t\t\t\t...normalVanilla.placement.slice(1),\r\n\t\t\t],\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction generateLakeFeatures(ctx: Context) {\r\n\tif (!isUnchanged(ctx, 'lavaLakes', 'lavaLakeRarity', 'lavaLakeRarityUnderground')) {\r\n\t\tif (!ctx.model.lavaLakes) {\r\n\t\t\tctx.out['worldgen/placed_feature'].set('lake_lava_surface', getDisabledFeature(ctx))\r\n\t\t\tctx.out['worldgen/placed_feature'].set('lake_lava_underground', getDisabledFeature(ctx))\r\n\t\t} else {\r\n\t\t\tconst undergroundVanilla = ctx.vanilla['worldgen/placed_feature'].get('lake_lava_underground')\r\n\t\t\tctx.out['worldgen/placed_feature'].set('lake_lava_underground', {\r\n\t\t\t\t...undergroundVanilla,\r\n\t\t\t\tplacement: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'minecraft:rarity_filter',\r\n\t\t\t\t\t\tchance: ctx.model.lavaLakeRarityUnderground,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...undergroundVanilla.placement.slice(1),\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\tconst surfaceVanilla = ctx.vanilla['worldgen/placed_feature'].get('lake_lava_surface')\r\n\t\t\tctx.out['worldgen/placed_feature'].set('lake_lava_surface', {\r\n\t\t\t\t...surfaceVanilla,\r\n\t\t\t\tplacement: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'minecraft:rarity_filter',\r\n\t\t\t\t\t\tchance: ctx.model.lavaLakeRarity,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...surfaceVanilla.placement.slice(1),\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst Ores: Partial<Record<keyof CustomizedModel, string>> = {\r\n\tdirt: 'ore_dirt',\r\n\tgravel: 'ore_gravel',\r\n\tgraniteLower: 'ore_granite_lower',\r\n\tgraniteUpper: 'ore_granite_upper',\r\n\tdioriteLower: 'ore_diorite_lower',\r\n\tdioriteUpper: 'ore_diorite_upper',\r\n\tandesiteLower: 'ore_andesite_lower',\r\n\tandesiteUpper: 'ore_andesite_upper',\r\n\tcoalLower: 'ore_coal_lower',\r\n\tcoalUpper: 'ore_coal_upper',\r\n\tironSmall: 'ore_iron_small',\r\n\tironMiddle: 'ore_iron_middle',\r\n\tironUpper: 'ore_iron_upper',\r\n\tcopper: 'ore_copper',\r\n\tcopperLarge: 'ore_copper_large',\r\n\tgoldLower: 'ore_gold_lower',\r\n\tgold: 'ore_gold',\r\n\tredstoneLower: 'ore_redstone_lower',\r\n\tredstone: 'ore_redstone',\r\n\tlapis: 'ore_lapis',\r\n\tlapisBuried: 'ore_lapis_buried',\r\n\temerald: 'ore_emerald',\r\n\tdiamond: 'ore_diamond',\r\n\tdiamondBuried: 'ore_diamond_buried',\r\n\tdiamondLarge: 'ore_diamond_large',\r\n}\r\n\r\nfunction generateOreFeatures(ctx: Context) {\r\n\tfor (const [key, name] of Object.entries(Ores) as [keyof CustomizedModel, string][]) {\r\n\t\tif (isUnchanged(ctx, key)) continue\r\n\t\tconst value = ctx.model[key] as CustomizedOreModel | undefined\r\n\t\tconst initial = ctx.initial[key] as CustomizedOreModel\r\n\t\tif (value === undefined) {\r\n\t\t\tctx.out['worldgen/placed_feature'].set(name, getDisabledFeature(ctx))\r\n\t\t} else {\r\n\t\t\tconst placed = deepClone(ctx.vanilla['worldgen/placed_feature'].get(name))\r\n\t\t\tif (value.tries !== initial.tries) {\r\n\t\t\t\tconst modifier = placed.placement.find((m: any) => m.type === 'minecraft:count' || m.type === 'minecraft:rarity_filter')\r\n\t\t\t\tif (Number.isInteger(value.tries)) {\r\n\t\t\t\t\tmodifier.type = 'minecraft:count',\r\n\t\t\t\t\tmodifier.count = value.tries\r\n\t\t\t\t\tdelete modifier.chance\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmodifier.type = 'minecraft:rarity_filter',\r\n\t\t\t\t\tmodifier.chance = Math.round(1 / value.tries)\r\n\t\t\t\t\tdelete modifier.count\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (value.minHeight !== initial.minHeight || value.minAboveBottom !== initial.minAboveBottom || value.minBelowTop !== initial.minBelowTop || value.maxHeight !== initial.maxHeight || value.maxAboveBottom !== value.maxBelowTop || value.maxBelowTop !== initial.maxBelowTop) {\r\n\t\t\t\tconst modifier = placed.placement.find((m: any) => m.type === 'minecraft:height_range')\r\n\t\t\t\tmodifier.min_inclusive = value.minAboveBottom !== undefined ? { above_bottom: value.minAboveBottom } : value.minBelowTop !== undefined ? { below_top: value.minBelowTop } : value.minHeight !== undefined ? { absolute: value.minHeight } : modifier.min_inclusive\r\n\t\t\t\tmodifier.max_inclusive = value.maxAboveBottom !== undefined ? { above_bottom: value.maxAboveBottom } : value.maxBelowTop !== undefined ? { below_top: value.maxBelowTop } : value.maxHeight !== undefined ? { absolute: value.maxHeight } : modifier.max_inclusive\r\n\t\t\t}\r\n\t\t\tctx.out['worldgen/placed_feature'].set(name, placed)\r\n\t\t\tif (value.size !== initial.size) {\r\n\t\t\t\tconst reference = placed.feature.replace(/^minecraft:/, '')\r\n\t\t\t\tconst configured = ctx.vanilla['worldgen/configured_feature'].get(reference)\r\n\t\t\t\tconfigured.config.size = value.size\r\n\t\t\t\tctx.out['worldgen/configured_feature'].set(reference, configured)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction isUnchanged(ctx: Context, ...keys: (keyof CustomizedModel)[]) {\r\n\treturn keys.every(k => deepEqual(ctx.model[k], ctx.initial[k]))\r\n}\r\n\r\nfunction formatIdentifier(id: string) {\r\n\ttry {\r\n\t\treturn Identifier.parse(id).toString()\r\n\t} catch (e) {\r\n\t\treturn id\r\n\t}\r\n}\r\n","import { useCallback } from 'preact/hooks'\r\nimport type { CustomizedModel, CustomizedOreModel } from './CustomizedModel.js'\r\nimport { CustomizedSlider } from './CustomizedSlider.jsx'\r\n\r\ninterface Props {\r\n\tmodel: CustomizedModel,\r\n\tvalue: CustomizedOreModel,\r\n\tinitial: CustomizedOreModel,\r\n\tonChange: (value: CustomizedOreModel) => void,\r\n}\r\nexport function CustomizedOre({ model, value, initial, onChange }: Props) {\r\n\tconst changeOre = useCallback((change: Partial<CustomizedOreModel>) => {\r\n\t\tonChange({ ...value, ...change })\r\n\t}, [value])\r\n\r\n\treturn <>\r\n\t\t<CustomizedSlider label=\"Size\" help=\"The size of the ore vein, does not directly correspond with number of blocks\" value={value.size} onChange={v => changeOre({ size: v })} min={1} max={64} initial={initial.size} />\r\n\t\t{Number.isInteger(value.tries)\r\n\t\t\t? <CustomizedSlider label=\"Tries\" help=\"The number of attempts to generate an ore vein per chunk\"\r\n\t\t\t\tvalue={value.tries} onChange={v => changeOre({ tries: v })}\r\n\t\t\t\tmin={1} max={100} initial={initial.tries}/>\r\n\t\t\t: <CustomizedSlider label=\"Rarity\" help=\"The chance to generate an ore vein per chunk, larger values make them rarer\"\r\n\t\t\t\tvalue={Math.round(1 / value.tries)} onChange={v => changeOre({ tries: 1 / v })}\r\n\t\t\t\tmin={1} max={100} initial={Math.round(1 / initial.tries)} />}\r\n\t\t<CustomizedSlider label={value.trapezoid ? 'Min triangle' : 'Min height'} help=\"The lowest Y level the ore vein can generate at\"\r\n\t\t\tvalue={calcHeight(model, value.minAboveBottom, value.minBelowTop, value.minHeight) ?? 0}\r\n\t\t\tonChange={v => changeOre(value.minAboveBottom !== undefined ? { minAboveBottom: v - model.minHeight } : value.minBelowTop != undefined ? { minBelowTop: model.maxHeight - v } : { minHeight: v })}\r\n\t\t\tmin={-64} max={320} initial={calcHeight(model, initial.minAboveBottom, initial.minBelowTop, initial.minHeight) ?? 0} />\r\n\t\t<CustomizedSlider label={value.trapezoid ? 'Max triangle' : 'Max height'} help=\"The heighest Y level the ore vein can generate at\"\r\n\t\t\tvalue={calcHeight(model, value.maxAboveBottom, value.maxBelowTop, value.maxHeight) ?? 0}\r\n\t\t\tonChange={v => changeOre(value.maxAboveBottom !== undefined ? { maxAboveBottom: v - model.minHeight } : value.maxBelowTop != undefined ? { maxBelowTop: model.maxHeight - v } : { maxHeight: v })}\r\n\t\t\tmin={-64} max={320} initial={calcHeight(model, initial.maxAboveBottom, initial.maxBelowTop, initial.maxHeight) ?? 0} />\r\n\t</>\r\n}\r\n\r\nfunction calcHeight(model: CustomizedModel, aboveBottom: number | undefined, belowTop: number | undefined, absolute: number | undefined) {\r\n\treturn aboveBottom !== undefined\r\n\t\t? (model.minHeight + aboveBottom)\r\n\t\t: belowTop !== undefined\r\n\t\t\t? (model.maxHeight - belowTop)\r\n\t\t\t: absolute\r\n}\r\n","import { Identifier, ItemStack } from 'deepslate'\r\nimport { deepClone } from '../../Utils.js'\r\nimport { ItemDisplay } from '../ItemDisplay.jsx'\r\nimport { CustomizedInput } from './CustomizedInput.jsx'\r\nimport type { CustomizedModel, CustomizedOreModel } from './CustomizedModel.js'\r\nimport { CustomizedOre } from './CustomizedOre.jsx'\r\n\r\ninterface Props {\r\n\tlabel: string,\r\n\titem?: string,\r\n\tores: (keyof CustomizedModel)[],\r\n\tmodel: CustomizedModel,\r\n\tinitialModel: CustomizedModel,\r\n\tchangeModel: (model: Partial<CustomizedModel>) => void,\r\n}\r\nexport function CustomizedOreGroup({ label, item, ores, model, initialModel, changeModel }: Props) {\r\n\tconst isEnabled = ores.every(k => model[k] != undefined)\r\n\r\n\treturn <div class=\"customized-group\">\r\n\t\t<CustomizedInput label={<>\r\n\t\t\t{item != undefined && <ItemDisplay item={new ItemStack(Identifier.parse(item), 1)} tooltip={false} />}\r\n\t\t\t<label>{label}</label>\r\n\t\t</>} value={ores.map(k => model[k])} initial={ores.map(k => initialModel[k])} onChange={() => changeModel(ores.reduce((acc, k) => ({ ...acc, [k]: deepClone(initialModel[k])}), {}))}>\r\n\t\t\t<button class={`customized-toggle${!isEnabled ? ' customized-false' : ''}`} onClick={() => changeModel(ores.reduce((acc, k) => ({ ...acc, [k]: undefined}), {}))}>No</button>\r\n\t\t\t<span>/</span>\r\n\t\t\t<button class={`customized-toggle${isEnabled ? ' customized-true' : ''}`} onClick={() => isEnabled || changeModel(ores.reduce((acc, k) => ({ ...acc, [k]: deepClone(initialModel[k])}), {}))}>Yes</button>\r\n\t\t</CustomizedInput>\r\n\t\t{isEnabled && ores.map(k => <div key={k} class=\"customized-childs\">\r\n\t\t\t<CustomizedOre model={model} value={model[k] as CustomizedOreModel} onChange={v => changeModel({ [k]: v })} initial={initialModel[k] as CustomizedOreModel} />\r\n\t\t</div>)}\r\n\t</div>\r\n}\r\n","import type { CustomizedModel } from './CustomizedModel.js'\r\nimport { CustomizedOreGroup } from './CustomizedOreGroup.jsx'\r\n\r\ninterface Props {\r\n\tmodel: CustomizedModel,\r\n\tinitialModel: CustomizedModel,\r\n\tchangeModel: (model: Partial<CustomizedModel>) => void,\r\n}\r\nexport function OresSettings(props: Props) {\r\n\treturn <>\r\n\t\t<CustomizedOreGroup label=\"Dirt\" item=\"dirt\" ores={['dirt']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Gravel\" item=\"gravel\" ores={['gravel']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Granite\" item=\"granite\" ores={['graniteLower', 'graniteUpper']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Diorite\" item=\"diorite\" ores={['dioriteLower', 'dioriteUpper']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Andesite\" item=\"andesite\" ores={['andesiteLower', 'andesiteUpper']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Coal\" item=\"coal_ore\" ores={['coalLower', 'coalUpper']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Iron\" item=\"iron_ore\" ores={['ironSmall', 'ironMiddle', 'ironUpper']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Copper\" item=\"copper_ore\" ores={['copper', 'copperLarge']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Gold\" item=\"gold_ore\" ores={['goldLower', 'gold']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Redstone\" item=\"redstone_ore\" ores={['redstoneLower', 'redstone']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Lapis Lazuli\" item=\"lapis_ore\" ores={['lapis', 'lapisBuried']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Emerald\" item=\"emerald_ore\" ores={['emerald']} {...props} />\r\n\t\t<CustomizedOreGroup label=\"Diamond\" item=\"diamond_ore\" ores={['diamond', 'diamondBuried', 'diamondLarge']} {...props} />\r\n\t</>\r\n}\r\n","import type { CustomizedModel } from './CustomizedModel.js'\r\nimport { CustomizedSlider } from './CustomizedSlider.jsx'\r\nimport { CustomizedToggle } from './CustomizedToggle.jsx'\r\n\r\ninterface Props {\r\n\tmodel: CustomizedModel,\r\n\tinitialModel: CustomizedModel,\r\n\tchangeModel: (model: Partial<CustomizedModel>) => void,\r\n}\r\nexport function StructuresSettings({ model, initialModel, changeModel }: Props) {\r\n\treturn <>\r\n\t\t<CustomizedToggle label=\"Ancient cities\"\r\n\t\t\tvalue={model.ancientCities} onChange={v => changeModel({ ancientCities: v })}\r\n\t\t\tinitial={initialModel.ancientCities} />\r\n\t\t<CustomizedToggle label=\"Buried treasures\"\r\n\t\t\tvalue={model.buriedTreasures} onChange={v => changeModel({ buriedTreasures: v })}\r\n\t\t\tinitial={initialModel.buriedTreasures} />\r\n\t\t<CustomizedToggle label=\"Desert pyramids\"\r\n\t\t\tvalue={model.desertPyramids} onChange={v => changeModel({ desertPyramids: v })}\r\n\t\t\tinitial={initialModel.desertPyramids} />\r\n\t\t<CustomizedToggle label=\"Igloos\"\r\n\t\t\tvalue={model.igloos} onChange={v => changeModel({ igloos: v })}\r\n\t\t\tinitial={initialModel.igloos} />\r\n\t\t<CustomizedToggle label=\"Jungle temples\"\r\n\t\t\tvalue={model.jungleTemples} onChange={v => changeModel({ jungleTemples: v })}\r\n\t\t\tinitial={initialModel.jungleTemples} />\r\n\t\t<CustomizedToggle label=\"Mineshafts\"\r\n\t\t\tvalue={model.mineshafts} onChange={v => changeModel({ mineshafts: v })}\r\n\t\t\tinitial={initialModel.mineshafts} />\r\n\t\t<CustomizedToggle label=\"Ocean monuments\"\r\n\t\t\tvalue={model.oceanMonuments} onChange={v => changeModel({ oceanMonuments: v })}\r\n\t\t\tinitial={initialModel.oceanMonuments} />\r\n\t\t<CustomizedToggle label=\"Ocean ruins\"\r\n\t\t\tvalue={model.oceanRuins} onChange={v => changeModel({ oceanRuins: v })}\r\n\t\t\tinitial={initialModel.oceanRuins} />\r\n\t\t<CustomizedToggle label=\"Pillager outposts\"\r\n\t\t\tvalue={model.pillagerOutposts} onChange={v => changeModel({ pillagerOutposts: v })}\r\n\t\t\tinitial={initialModel.pillagerOutposts} />\r\n\t\t<CustomizedToggle label=\"Ruined portals\"\r\n\t\t\tvalue={model.ruinedPortals} onChange={v => changeModel({ ruinedPortals: v })}\r\n\t\t\tinitial={initialModel.ruinedPortals} />\r\n\t\t<CustomizedToggle label=\"Shipwrecks\"\r\n\t\t\tvalue={model.shipwrecks} onChange={v => changeModel({ shipwrecks: v })}\r\n\t\t\tinitial={initialModel.shipwrecks} />\r\n\t\t<CustomizedToggle label=\"Strongholds\"\r\n\t\t\tvalue={model.strongholds} onChange={v => changeModel({ strongholds: v })}\r\n\t\t\tinitial={initialModel.strongholds} />\r\n\t\t<CustomizedToggle label=\"Swamp huts\"\r\n\t\t\tvalue={model.swampHuts} onChange={v => changeModel({ swampHuts: v })}\r\n\t\t\tinitial={initialModel.swampHuts} />\r\n\t\t<CustomizedToggle label=\"Trail ruins\"\r\n\t\t\tvalue={model.trailRuins} onChange={v => changeModel({ trailRuins: v })}\r\n\t\t\tinitial={initialModel.trailRuins} />\r\n\t\t<CustomizedToggle label=\"Villages\"\r\n\t\t\tvalue={model.villages} onChange={v => changeModel({ villages: v })}\r\n\t\t\tinitial={initialModel.villages} />\r\n\t\t<CustomizedToggle label=\"Woodland mansions\"\r\n\t\t\tvalue={model.woodlandMansions} onChange={v => changeModel({ woodlandMansions: v })}\r\n\t\t\tinitial={initialModel.woodlandMansions} />\r\n\t\t<CustomizedToggle label=\"Dungeons\" help=\"The smaller monster rooms with a spawner and chest\"\r\n\t\t\tvalue={model.dungeons} onChange={v => changeModel({ dungeons: v })}\r\n\t\t\tinitial={initialModel.dungeons}>\r\n\t\t\t{model.dungeons && <CustomizedSlider label=\"Tries\" help=\"The number of attempts to generate per chunk\"\r\n\t\t\t\tvalue={model.dungeonTries} onChange={v => changeModel({ dungeonTries: v })}\r\n\t\t\t\tmin={1} max={256} initial={initialModel.dungeonTries} />}\r\n\t\t</CustomizedToggle>\r\n\t\t<div class=\"customized-group\">\r\n\t\t\t<CustomizedToggle label=\"Lava lakes\"\r\n\t\t\t\tvalue={model.lavaLakes} onChange={v => changeModel({ lavaLakes: v })}\r\n\t\t\t\tinitial={initialModel.lavaLakes} />\r\n\t\t\t{model.lavaLakes && <div class=\"customized-childs\">\r\n\t\t\t\t<CustomizedSlider label=\"Surface rarity\" help=\"The chance that a lava lake attempts to generate on the surface, larger numbers make them rarer\"\r\n\t\t\t\t\tvalue={model.lavaLakeRarity} onChange={v => changeModel({ lavaLakeRarity: v })}\r\n\t\t\t\t\tmin={1} max={400} initial={initialModel.lavaLakeRarity} />\r\n\t\t\t\t<CustomizedSlider label=\"Underground rarity\" help=\"The chance that a lava lake attempts to generate underground, larger numbers make them rarer\"\r\n\t\t\t\t\tvalue={model.lavaLakeRarityUnderground} onChange={v => changeModel({ lavaLakeRarityUnderground: v })}\r\n\t\t\t\t\tmin={1} max={400} initial={initialModel.lavaLakeRarityUnderground} />\r\n\t\t\t</div>}\r\n\t\t</div>\r\n\t</>\r\n}\r\n","import { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport config from '../../Config.js'\r\nimport { deepClone, deepEqual, writeZip } from '../../Utils.js'\r\nimport { useVersion } from '../../contexts/Version.jsx'\r\nimport { stringifySource } from '../../services/Source.js'\r\nimport { Btn } from '../Btn.jsx'\r\nimport { ErrorPanel } from '../ErrorPanel.jsx'\r\nimport { Octicon } from '../Octicon.jsx'\r\nimport { BasicSettings } from './BasicSettings.jsx'\r\nimport { BiomesSettings } from './BiomesSettings.jsx'\r\nimport { generateCustomized } from './CustomizedGenerator.js'\r\nimport { CustomizedModel } from './CustomizedModel.js'\r\nimport { OresSettings } from './OresSettings.jsx'\r\nimport { StructuresSettings } from './StructuresSettings.jsx'\r\n\r\ninterface Props {\r\n\ttab: string | undefined\r\n}\r\nexport function CustomizedPanel({ tab }: Props) {\r\n\tconst { version } = useVersion()\r\n\r\n\tconst [model, setModel] = useState(CustomizedModel.getDefault(version))\r\n\tconst changeModel = useCallback((change: Partial<CustomizedModel>) => {\r\n\t\tsetModel(m => ({ ...m, ...change }))\r\n\t}, [])\r\n\tconst initialModel = useMemo(() => {\r\n\t\treturn CustomizedModel.getDefault(version)\r\n\t}, [version])\r\n\tconst isModified = useMemo(() => {\r\n\t\treturn !deepEqual(model, initialModel)\r\n\t}, [model, initialModel])\r\n\r\n\tconst reset = useCallback(() => {\r\n\t\tsetModel(deepClone(initialModel))\r\n\t}, [initialModel])\r\n\r\n\tconst download = useRef<HTMLAnchorElement>(null)\r\n\tconst [error, setError] = useState<Error | string | null>(null)\r\n\tconst [hasDownloaded, setHasDownloaded] = useState(false)\r\n\tconst generate = useCallback(async () => {\r\n\t\tif (!download.current) return\r\n\t\ttry {\r\n\t\t\tconst pack = await generateCustomized(model, version)\r\n\t\t\tconst entries = Object.entries(pack).flatMap(([type, files]) => {\r\n\t\t\t\tconst prefix = `data/minecraft/${type}/`\r\n\t\t\t\treturn [...files.entries()].map(([name, data]) => {\r\n\t\t\t\t\treturn [prefix + name + '.json', stringifySource(data, 'json')] as [string, string]\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tconst pack_format = config.versions.find(v => v.id === version)!.pack_format\r\n\t\t\tentries.push(['pack.mcmeta', stringifySource({ pack: { pack_format, description: 'Customized world from misode.github.io' } }, 'json')])\r\n\t\t\tconst url = await writeZip(entries)\r\n\t\t\tdownload.current.setAttribute('href', url)\r\n\t\t\tdownload.current.setAttribute('download', 'customized.zip')\r\n\t\t\tdownload.current.click()\r\n\t\t\tsetHasDownloaded(true)\r\n\t\t\tsetError(null)\r\n\t\t} catch (e) {\r\n\t\t\tif (e instanceof Error) {\r\n\t\t\t\te.message = `Something went wrong creating the customized pack: ${e.message}`\r\n\t\t\t\tsetError(e)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [model, version])\r\n\r\n\treturn <>\r\n\t\t<div class=\"customized-tab\">\r\n\t\t\t{tab === 'basic' && <BasicSettings {...{model, initialModel, changeModel}} />}\r\n\t\t\t{tab === 'biomes' && <BiomesSettings {...{model, initialModel, changeModel}} />}\r\n\t\t\t{tab === 'structures' && <StructuresSettings {...{model, initialModel, changeModel}} />}\r\n\t\t\t{tab === 'ores' && <OresSettings {...{model, initialModel, changeModel}} />}\r\n\t\t</div>\r\n\t\t<div class=\"customized-actions\">\r\n\t\t\t<Btn icon=\"download\" label=\"Create\" class=\"customized-create\" tooltip=\"Create and download data pack\" tooltipLoc=\"se\" onClick={isModified ? generate : undefined} disabled={!isModified} />\r\n\t\t\t<a ref={download} style=\"display: none;\"></a>\r\n\t\t\t{isModified && <Btn icon=\"undo\" label=\"Reset\" tooltip=\"Reset to default\" tooltipLoc=\"se\" onClick={reset} />}\r\n\t\t</div>\r\n\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} body={`\\n### Customized settings\\n<details>\\n<pre>\\n${JSON.stringify(getDiffModel(model, initialModel), null, 2)}\\n</pre>\\n</details>\\n`} />}\r\n\t\t{hasDownloaded && <div class=\"customized-instructions\">\r\n\t\t\t<h4>\r\n\t\t\t\t{Octicon.mortar_board}\r\n\t\t\t\tWhat now?\r\n\t\t\t</h4>\r\n\t\t\t<ol>\r\n\t\t\t\t<li>After launching Minecraft, create a new singleplayer world.</li>\r\n\t\t\t\t<li>Select the \"More\" tab at the top.</li>\r\n\t\t\t\t<li>Click on \"Data Packs\" and drag the downloaded zip file onto the game window. </li>\r\n\t\t\t\t<li>Move the imported data pack to the right panel and click on \"Done\".</li>\r\n\t\t\t\t<li>A message will warn about the use of experimental world settings. Click on \"Proceed\".</li>\r\n\t\t\t</ol>\r\n\t\t</div>}\r\n\t</>\r\n}\r\n\r\nfunction getDiffModel(model: any, initial: any) {\r\n\tconst result = deepClone(model)\r\n\tif (typeof result !== 'object' || result === null) return\r\n\tObject.keys(result).forEach(key => {\r\n\t\tif (deepEqual(result[key], initial[key])) {\r\n\t\t\tdelete result[key]\r\n\t\t} else if (typeof result[key] === 'object' && result[key] !== null) {\r\n\t\t\tresult[key] = getDiffModel(result[key], initial[key])\r\n\t\t}\r\n\t})\r\n\treturn result\r\n}\r\n","import { useEffect, useErrorBoundary, useMemo } from 'preact/hooks'\r\nimport config from '../Config.js'\r\nimport { CustomizedPanel } from '../components/customized/CustomizedPanel.jsx'\r\nimport { ErrorPanel, Footer, Octicon, VersionSwitcher } from '../components/index.js'\r\nimport { useLocale, useTitle, useVersion } from '../contexts/index.js'\r\nimport { useSearchParam } from '../hooks/index.js'\r\nimport type { VersionId } from '../services/Schemas.js'\r\nimport { checkVersion } from '../services/Schemas.js'\r\n\r\nconst MIN_VERSION = '1.20'\r\nconst Tabs = ['basic', 'biomes', 'structures', 'ores']\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Customized({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version, changeVersion } = useVersion()\r\n\tuseTitle(locale('title.customized'))\r\n\r\n\tconst [errorBoundary, errorRetry] = useErrorBoundary()\r\n\tif (errorBoundary) {\r\n\t\terrorBoundary.message = `Something went wrong with the customized world tool: ${errorBoundary.message}`\r\n\t\treturn <main><ErrorPanel error={errorBoundary} onDismiss={errorRetry} /></main>\r\n\t}\r\n\r\n\tconst allowedVersions = useMemo(() => {\r\n\t\treturn config.versions\r\n\t\t\t.filter(v => checkVersion(v.id, MIN_VERSION))\r\n\t\t\t.map(v => v.id as VersionId)\r\n\t\t\t.reverse()\r\n\t}, [])\r\n\r\n\tconst [tab, setTab] = useSearchParam('tab')\r\n\tuseEffect(() => {\r\n\t\tif (tab === undefined || !Tabs.includes(tab)) {\r\n\t\t\tsetTab(Tabs[0], true)\r\n\t\t}\r\n\t}, [tab])\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container customized\">\r\n\t\t\t<div class=\"tabs tabs-sticky\">\r\n\t\t\t\t{Tabs.map(t =>\r\n\t\t\t\t\t<span class={tab === t ? 'selected' : ''} onClick={() => setTab(t)}>{locale(`customized.${t}`)}</span>\r\n\t\t\t\t)}\r\n\t\t\t\t<VersionSwitcher value={version} onChange={changeVersion} allowed={allowedVersions} />\r\n\t\t\t</div>\r\n\t\t\t{checkVersion(version, '1.20') ? <>\r\n\t\t\t\t<CustomizedPanel tab={tab} />\r\n\t\t\t</> : <>\r\n\t\t\t\t<ErrorPanel error={locale('customized.error_min_version', MIN_VERSION)} reportable={false}>\r\n\t\t\t\t\t<div class=\"error-actions\">\r\n\t\t\t\t\t\t<div class=\"error-action\" onClick={() => changeVersion(MIN_VERSION)}>\r\n\t\t\t\t\t\t\t{locale('generator.switch_version', MIN_VERSION)} {Octicon.arrow_right}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ErrorPanel>\r\n\t\t\t</>}\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import { DataModel, Path } from '@mcschema/core'\r\nimport { route } from 'preact-router'\r\nimport { useCallback, useEffect, useErrorBoundary, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { Analytics } from '../../Analytics.js'\r\nimport type { ConfigGenerator } from '../../Config.js'\r\nimport config from '../../Config.js'\r\nimport { DRAFT_PROJECT, useLocale, useProject, useVersion } from '../../contexts/index.js'\r\nimport { AsyncCancel, useActiveTimeout, useAsync, useModel, useSearchParam } from '../../hooks/index.js'\r\nimport { getOutput } from '../../schema/transformOutput.js'\r\nimport type { VersionId } from '../../services/index.js'\r\nimport { checkVersion, fetchPreset, getBlockStates, getCollections, getModel, getSnippet, shareSnippet } from '../../services/index.js'\r\nimport { Store } from '../../Store.js'\r\nimport { cleanUrl, deepEqual, genPath } from '../../Utils.js'\r\nimport { Ad, Btn, BtnMenu, ErrorPanel, FileCreation, FileRenaming, Footer, HasPreview, Octicon, PreviewPanel, ProjectCreation, ProjectDeletion, ProjectPanel, SearchList, SourcePanel, TextInput, Tree, VersionSwitcher } from '../index.js'\r\n\r\nexport const SHARE_KEY = 'share'\r\n\r\ninterface Props {\r\n\tgen: ConfigGenerator\r\n\tallowedVersions: VersionId[],\r\n}\r\nexport function SchemaGenerator({ gen, allowedVersions }: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version, changeVersion, changeTargetVersion } = useVersion()\r\n\tconst { projects, project, file, updateProject, updateFile, closeFile } = useProject()\r\n\tconst [error, setError] = useState<Error | string | null>(null)\r\n\tconst [errorBoundary, errorRetry] = useErrorBoundary()\r\n\tif (errorBoundary) {\r\n\t\terrorBoundary.message = `Something went wrong rendering the generator: ${errorBoundary.message}`\r\n\t\treturn <main><ErrorPanel error={errorBoundary} onDismiss={errorRetry} /></main>\r\n\t}\r\n\r\n\tuseEffect(() => Store.visitGenerator(gen.id), [gen.id])\r\n\r\n\tconst [currentPreset, setCurrentPreset] = useSearchParam('preset')\r\n\tconst [sharedSnippetId, setSharedSnippetId] = useSearchParam(SHARE_KEY)\r\n\tconst ignoreChange = useRef(false)\r\n\tconst backup = useMemo(() => Store.getBackup(gen.id), [gen.id])\r\n\r\n\tconst loadBackup = () => {\r\n\t\tif (backup !== undefined) {\r\n\t\t\tmodel?.reset(DataModel.wrapLists(backup), false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst { value } = useAsync(async () => {\r\n\t\tlet data: unknown = undefined\r\n\t\tif (currentPreset && sharedSnippetId) {\r\n\t\t\tsetSharedSnippetId(undefined)\r\n\t\t\treturn AsyncCancel\r\n\t\t}\r\n\t\tif (currentPreset) {\r\n\t\t\tdata = await loadPreset(currentPreset)\r\n\t\t} else if (sharedSnippetId) {\r\n\t\t\tconst snippet = await getSnippet(sharedSnippetId)\r\n\t\t\tlet cancel = false\r\n\t\t\tif (snippet.version && snippet.version !== version) {\r\n\t\t\t\tchangeVersion(snippet.version, false)\r\n\t\t\t\tcancel = true\r\n\t\t\t}\r\n\t\t\tif (snippet.type && snippet.type !== gen.id) {\r\n\t\t\t\tconst snippetGen = config.generators.find(g => g.id === snippet.type)\r\n\t\t\t\tif (snippetGen) {\r\n\t\t\t\t\troute(`${cleanUrl(snippetGen.url)}?${SHARE_KEY}=${snippet.id}`)\r\n\t\t\t\t\tcancel = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (cancel) {\r\n\t\t\t\treturn AsyncCancel\r\n\t\t\t}\r\n\t\t\tif (snippet.show_preview && !previewShown) {\r\n\t\t\t\tsetPreviewShown(true)\r\n\t\t\t\tsetSourceShown(false)\r\n\t\t\t}\r\n\t\t\tAnalytics.openSnippet(gen.id, sharedSnippetId, version)\r\n\t\t\tdata = snippet.data\r\n\t\t} else if (file) {\r\n\t\t\tif (project.version && project.version !== version) {\r\n\t\t\t\tchangeVersion(project.version, false)\r\n\t\t\t\treturn AsyncCancel\r\n\t\t\t}\r\n\t\t\tdata = file.data\r\n\t\t}\r\n\t\tconst [model, blockStates] = await Promise.all([\r\n\t\t\tgetModel(version, gen.id),\r\n\t\t\tgetBlockStates(version),\r\n\t\t])\r\n\t\tif (data) {\r\n\t\t\tignoreChange.current = true\r\n\t\t\tmodel.reset(DataModel.wrapLists(data), false)\r\n\t\t}\r\n\t\tAnalytics.setGenerator(gen.id)\r\n\t\treturn { model, blockStates }\r\n\t}, [gen.id, version, sharedSnippetId, currentPreset, project.name, file?.id])\r\n\r\n\tconst model = value?.model\r\n\tconst blockStates = value?.blockStates\r\n\r\n\tuseModel(model, model => {\r\n\t\tif (!ignoreChange.current) {\r\n\t\t\tsetCurrentPreset(undefined, true)\r\n\t\t\tsetSharedSnippetId(undefined, true)\r\n\t\t}\r\n\t\tif (file && model && blockStates) {\r\n\t\t\tconst data = getOutput(model, blockStates)\r\n\t\t\tupdateFile(gen.id, file.id, { id: file.id, data })\r\n\t\t}\r\n\t\tignoreChange.current = false\r\n\t\tStore.setBackup(gen.id, DataModel.unwrapLists(model.data))\r\n\t\tsetError(null)\r\n\t}, [gen.id, setCurrentPreset, setSharedSnippetId, blockStates, file?.id])\r\n\r\n\tconst reset = () => {\r\n\t\tAnalytics.resetGenerator(gen.id, model?.historyIndex ?? 1, 'menu')\r\n\t\tmodel?.reset(DataModel.wrapLists(model.schema.default()), true)\r\n\t}\r\n\tconst undo = (e: MouseEvent) => {\r\n\t\te.stopPropagation()\r\n\t\tAnalytics.undoGenerator(gen.id, model?.historyIndex ?? 1, 'menu')\r\n\t\tmodel?.undo()\r\n\t}\r\n\tconst redo = (e: MouseEvent) => {\r\n\t\te.stopPropagation()\r\n\t\tAnalytics.redoGenerator(gen.id, model?.historyIndex ?? 1, 'menu')\r\n\t\tmodel?.redo()\r\n\t}\r\n\r\n\tconst onKeyUp = (e: KeyboardEvent) => {\r\n\t\tif (e.ctrlKey && e.key === 'z') {\r\n\t\t\tAnalytics.undoGenerator(gen.id, model?.historyIndex ?? 1, 'hotkey')\r\n\t\t\tmodel?.undo()\r\n\t\t} else if (e.ctrlKey && e.key === 'y') {\r\n\t\t\tAnalytics.redoGenerator(gen.id, model?.historyIndex ?? 1, 'hotkey')\r\n\t\t\tmodel?.redo()\r\n\t\t}\r\n\t}\r\n\tconst onKeyDown = (e: KeyboardEvent) => {\r\n\t\tif (e.ctrlKey && e.key === 's') {\r\n\t\t\tsetFileSaving('hotkey')\r\n\t\t\te.preventDefault()\r\n\t\t\te.stopPropagation()\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keyup', onKeyUp)\r\n\t\tdocument.addEventListener('keydown', onKeyDown)\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('keyup', onKeyUp)\r\n\t\t\tdocument.removeEventListener('keydown', onKeyDown)\r\n\t\t}\r\n\t}, [model, blockStates, file])\r\n\r\n\tconst [presets, setPresets] = useState<string[]>([])\r\n\tuseEffect(() => {\r\n\t\tgetCollections(version).then(collections => {\r\n\t\t\tsetPresets(collections.get(gen.id).map(p => p.startsWith('minecraft:') ? p.slice(10) : p))\r\n\t\t})\r\n\t\t\t.catch(e => { console.error(e); setError(e) })\r\n\t}, [version, gen.id])\r\n\r\n\tconst selectPreset = (id: string) => {\r\n\t\tAnalytics.loadPreset(gen.id, id)\r\n\t\tsetSharedSnippetId(undefined, true)\r\n\t\tchangeTargetVersion(version, true)\r\n\t\tsetCurrentPreset(id)\r\n\t}\r\n\r\n\tconst loadPreset = async (id: string) => {\r\n\t\ttry {\r\n\t\t\tconst preset = await fetchPreset(version, genPath(gen, version), id)\r\n\t\t\tconst seed = model?.get(new Path(['generator', 'seed']))\r\n\t\t\tif (preset?.generator?.seed !== undefined && seed !== undefined) {\r\n\t\t\t\tpreset.generator.seed = seed\r\n\t\t\t\tif (preset.generator.biome_source?.seed !== undefined) {\r\n\t\t\t\t\tpreset.generator.biome_source.seed = seed\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn preset\r\n\t\t} catch (e) {\r\n\t\t\tsetError(`Cannot load preset ${id} in ${version}`)\r\n\t\t\tsetCurrentPreset(undefined, true)\r\n\t\t}\r\n\t}\r\n\r\n\tconst selectVersion = (version: VersionId) => {\r\n\t\tsetSharedSnippetId(undefined, true)\r\n\t\tchangeVersion(version)\r\n\t\tif (project.name !== DRAFT_PROJECT.name && project.version !== version) {\r\n\t\t\tupdateProject({ version })\r\n\t\t}\r\n\t}\r\n\r\n\tconst [shareUrl, setShareUrl] = useState<string | undefined>(undefined)\r\n\tconst [shareLoading, setShareLoading] = useState(false)\r\n\tconst [shareShown, setShareShown] = useState(false)\r\n\tconst [shareCopyActive, shareCopySuccess] = useActiveTimeout({ cooldown: 3000 })\r\n\tconst share = () => {\r\n\t\tif (shareShown) {\r\n\t\t\tsetShareShown(false)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (currentPreset) {\r\n\t\t\tsetShareUrl(`${location.origin}/${gen.url}/?version=${version}&preset=${currentPreset}`)\r\n\t\t\tsetShareShown(true)\r\n\t\t\tcopySharedId()\r\n\t\t} else if (model && blockStates) {\r\n\t\t\tconst output = getOutput(model, blockStates)\r\n\t\t\tif (deepEqual(output, model.schema.default())) {\r\n\t\t\t\tsetShareUrl(`${location.origin}/${gen.url}/?version=${version}`)\r\n\t\t\t\tsetShareShown(true)\r\n\t\t\t} else {\r\n\t\t\t\tsetShareLoading(true)\r\n\t\t\t\tshareSnippet(gen.id, version, output, previewShown)\r\n\t\t\t\t\t.then(({ id, length, compressed, rate }) => {\r\n\t\t\t\t\t\tAnalytics.createSnippet(gen.id, id, version, length, compressed, rate)\r\n\t\t\t\t\t\tconst url = `${location.origin}/${gen.url}/?${SHARE_KEY}=${id}`\r\n\t\t\t\t\t\tsetShareUrl(url)\r\n\t\t\t\t\t\tsetShareShown(true)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tif (e instanceof Error) {\r\n\t\t\t\t\t\t\tsetError(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.finally(() => setShareLoading(false))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst copySharedId = () => {\r\n\t\tnavigator.clipboard.writeText(shareUrl ?? '')\r\n\t\tshareCopySuccess()\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (!shareCopyActive) {\r\n\t\t\tsetShareUrl(undefined)\r\n\t\t\tsetShareShown(false)\r\n\t\t}\r\n\t}, [shareCopyActive])\r\n\r\n\tconst [sourceShown, setSourceShown] = useState(window.innerWidth > 820)\r\n\tconst [doCopy, setCopy] = useState(0)\r\n\tconst [doDownload, setDownload] = useState(0)\r\n\tconst [doImport, setImport] = useState(0)\r\n\r\n\tconst copySource = () => {\r\n\t\tAnalytics.copyOutput(gen.id, 'menu')\r\n\t\tsetCopy(doCopy + 1)\r\n\t}\r\n\tconst downloadSource = () => {\r\n\t\tAnalytics.downloadOutput(gen.id, 'menu')\r\n\t\tsetDownload(doDownload + 1)\r\n\t}\r\n\tconst toggleSource = () => {\r\n\t\tif (sourceShown) {\r\n\t\t\tAnalytics.hideOutput(gen.id, 'menu')\r\n\t\t} else {\r\n\t\t\tAnalytics.showOutput(gen.id, 'menu')\r\n\t\t}\r\n\t\tsetSourceShown(!sourceShown)\r\n\t\tsetCopy(0)\r\n\t\tsetDownload(0)\r\n\t\tsetImport(0)\r\n\t}\r\n\r\n\tconst [copyActive, copySuccess] = useActiveTimeout()\r\n\r\n\tconst [previewShown, setPreviewShown] = useState(Store.getPreviewPanelOpen() ?? window.innerWidth > 800)\r\n\tconst hasPreview = HasPreview.includes(gen.id) && !(gen.id === 'worldgen/configured_feature' && checkVersion(version, '1.18'))\r\n\tif (previewShown && !hasPreview) setPreviewShown(false)\r\n\tlet actionsShown = 2\r\n\tif (hasPreview) actionsShown += 1\r\n\tif (sourceShown) actionsShown += 2\r\n\r\n\tconst togglePreview = () => {\r\n\t\tif (sourceShown) {\r\n\t\t\tAnalytics.hidePreview(gen.id, 'menu')\r\n\t\t} else {\r\n\t\t\tAnalytics.showPreview(gen.id, 'menu')\r\n\t\t}\r\n\t\tsetPreviewShown(!previewShown)\r\n\t\tif (!previewShown && sourceShown) {\r\n\t\t\tsetSourceShown(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst [projectShown, setProjectShown] = useState(Store.getProjectPanelOpen() ?? window.innerWidth > 1000)\r\n\tconst toggleProjectShown = useCallback(() => {\r\n\t\tif (projectShown) {\r\n\t\t\tAnalytics.hideProject(gen.id, projects.length, project.files.length, 'menu')\r\n\t\t} else {\r\n\t\t\tAnalytics.showProject(gen.id, projects.length, project.files.length, 'menu')\r\n\t\t}\r\n\t\tStore.setProjectPanelOpen(!projectShown)\r\n\t\tsetProjectShown(!projectShown)\r\n\t}, [projectShown])\r\n\r\n\tconst [projectCreating, setProjectCreating] = useState(false)\r\n\tconst [projectDeleting, setprojectDeleting] = useState(false)\r\n\tconst [fileSaving, setFileSaving] = useState<string | undefined>(undefined)\r\n\tconst [fileRenaming, setFileRenaming] = useState<{ type: string, id: string } | undefined>(undefined)\r\n\tconst [newFileQueued, setNewFileQueued] = useState(false)\r\n\r\n\tconst onNewFile = useCallback(() => {\r\n\t\tcloseFile()\r\n\t\t// Need to queue reset because otherwise the useModel hook will update the old file\r\n\t\tsetNewFileQueued(true)\r\n\t}, [closeFile])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (file === undefined && newFileQueued) {\r\n\t\t\tmodel?.reset(DataModel.wrapLists(model.schema.default()), true)\r\n\t\t\tsetNewFileQueued(false)\r\n\t\t}\r\n\t}, [model, newFileQueued, file])\r\n\r\n\treturn <>\r\n\t\t<main class={`generator${previewShown ? ' has-preview' : ''}${projectShown ? ' has-project' : ''}`}>\r\n\t\t\t{!gen.tags?.includes('partners') && <Ad id=\"data-pack-generator\" type=\"text\" />}\r\n\t\t\t<div class=\"controls generator-controls\">\r\n\t\t\t\t{gen.wiki && <a class=\"btn btn-link tooltipped tip-se\" aria-label={locale('learn_on_the_wiki')} href={gen.wiki} target=\"_blank\">\r\n\t\t\t\t\t{Octicon.mortar_board}\r\n\t\t\t\t\t<span>{locale('wiki')}</span>\r\n\t\t\t\t</a>}\r\n\t\t\t\t<BtnMenu icon=\"archive\" label={locale('presets')} relative={false}>\r\n\t\t\t\t\t<SearchList searchPlaceholder={locale('search')} noResults={locale('no_presets')} values={presets} onSelect={selectPreset}/>\r\n\t\t\t\t</BtnMenu>\r\n\t\t\t\t<VersionSwitcher value={version} onChange={selectVersion} allowed={allowedVersions} />\r\n\t\t\t\t<BtnMenu icon=\"kebab_horizontal\" tooltip={locale('more')}>\r\n\t\t\t\t\t<Btn icon=\"history\" label={locale('reset_default')} onClick={reset} />\r\n\t\t\t\t\t{backup !== undefined && <Btn icon=\"history\" label={locale('restore_backup')} onClick={loadBackup} />}\r\n\t\t\t\t\t<Btn icon=\"arrow_left\" label={locale('undo')} onClick={undo} />\r\n\t\t\t\t\t<Btn icon=\"arrow_right\" label={locale('redo')} onClick={redo} />\r\n\t\t\t\t\t<Btn icon=\"plus_circle\" label={locale('project.new_file')} onClick={onNewFile} />\r\n\t\t\t\t\t<Btn icon=\"file\" label={locale('project.save')} onClick={() => setFileSaving('menu')} />\r\n\t\t\t\t</BtnMenu>\r\n\t\t\t</div>\r\n\t\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\r\n\t\t\t<Tree {...{model, version, blockStates}} onError={setError} />\r\n\t\t\t<Footer donate={!gen.tags?.includes('partners')} />\r\n\t\t</main>\r\n\t\t<div class=\"popup-actions right-actions\" style={`--offset: -${8 + actionsShown * 50}px;`}>\r\n\t\t\t<div class={`popup-action action-preview${hasPreview ? ' shown' : ''} tooltipped tip-nw`} aria-label={locale(previewShown ? 'hide_preview' : 'show_preview')} onClick={togglePreview}>\r\n\t\t\t\t{previewShown ? Octicon.x_circle : Octicon.play}\r\n\t\t\t</div>\r\n\t\t\t<div class={`popup-action action-share shown tooltipped tip-nw${shareLoading ? ' loading' : ''}`} aria-label={locale(shareLoading ? 'share.loading' : 'share')} onClick={share}>\r\n\t\t\t\t{shareLoading ? Octicon.sync : Octicon.link}\r\n\t\t\t</div>\r\n\t\t\t<div class={`popup-action action-download${sourceShown ? ' shown' : ''} tooltipped tip-nw`} aria-label={locale('download')} onClick={downloadSource}>\r\n\t\t\t\t{Octicon.download}\r\n\t\t\t</div>\r\n\t\t\t<div class={`popup-action action-copy${sourceShown ? ' shown' : ''}${copyActive ? ' active' : ''} tooltipped tip-nw`} aria-label={locale(copyActive ? 'copied' : 'copy')} onClick={copySource}>\r\n\t\t\t\t{copyActive ? Octicon.check : Octicon.clippy}\r\n\t\t\t</div>\r\n\t\t\t<div class={'popup-action action-code shown tooltipped tip-nw'} aria-label={locale(sourceShown ? 'hide_output' : 'show_output')} onClick={toggleSource}>\r\n\t\t\t\t{sourceShown ? Octicon.chevron_right : Octicon.code}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class={`popup-preview${previewShown ? ' shown' : ''}`}>\r\n\t\t\t<PreviewPanel {...{model, version, id: gen.id}} shown={previewShown} onError={setError} />\r\n\t\t</div>\r\n\t\t<div class={`popup-source${sourceShown ? ' shown' : ''}`}>\r\n\t\t\t<SourcePanel {...{model, blockStates, doCopy, doDownload, doImport}} name={gen.schema ?? 'data'} copySuccess={copySuccess} onError={setError} />\r\n\t\t</div>\r\n\t\t<div class={`popup-share${shareShown ? ' shown' : ''}`}>\r\n\t\t\t<TextInput value={shareUrl} readonly />\r\n\t\t\t<Btn icon={shareCopyActive ? 'check' : 'clippy'} onClick={copySharedId} tooltip={locale(shareCopyActive ? 'copied' : 'copy_share')} tooltipLoc=\"nw\" active={shareCopyActive} />\r\n\t\t</div>\r\n\t\t<div class=\"popup-actions left-actions\" style=\"--offset: 50px;\">\r\n\t\t\t<div class={'popup-action action-project shown tooltipped tip-ne'} aria-label={locale(projectShown ? 'hide_project' : 'show_project')} onClick={toggleProjectShown}>\r\n\t\t\t\t{projectShown ? Octicon.chevron_left : Octicon.repo}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class={`popup-project${projectShown ? ' shown' : ''}`}>\r\n\t\t\t<ProjectPanel {...{model, version, id: gen.id}} onError={setError} onDeleteProject={() => setprojectDeleting(true)} onRename={setFileRenaming} onCreate={() => setProjectCreating(true)} />\r\n\t\t</div>\r\n\t\t{projectCreating && <ProjectCreation onClose={() => setProjectCreating(false)} />}\r\n\t\t{projectDeleting && <ProjectDeletion onClose={() => setprojectDeleting(false)} />}\r\n\t\t{model && fileSaving && <FileCreation id={gen.id} model={model} method={fileSaving} onClose={() => setFileSaving(undefined)} />}\r\n\t\t{fileRenaming && <FileRenaming id={fileRenaming.type } name={fileRenaming.id} onClose={() => setFileRenaming(undefined)} />}\r\n\t</>\r\n}\r\n","import { getCurrentUrl, route } from 'preact-router'\r\nimport { useMemo } from 'preact/hooks'\r\nimport config from '../Config.js'\r\nimport { getGenerator } from '../Utils.js'\r\nimport { SchemaGenerator } from '../components/generator/SchemaGenerator.jsx'\r\nimport { ErrorPanel, Octicon } from '../components/index.js'\r\nimport { useLocale, useTitle, useVersion } from '../contexts/index.js'\r\nimport type { VersionId } from '../services/index.js'\r\nimport { checkVersion } from '../services/index.js'\r\n\r\nexport const SHARE_KEY = 'share'\r\n\r\ninterface Props {\r\n\tdefault?: true,\r\n}\r\nexport function Generator({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version, changeVersion } = useVersion()\r\n\r\n\tconst gen = getGenerator(getCurrentUrl())\r\n\tif (!gen) {\r\n\t\treturn <main><ErrorPanel error={locale('generator.not_found', getCurrentUrl())} /></main>\r\n\t}\r\n\r\n\tconst allowedVersions = useMemo(() => {\r\n\t\treturn config.versions\r\n\t\t\t.filter(v => checkVersion(v.id, gen.minVersion, gen.maxVersion))\r\n\t\t\t.map(v => v.id as VersionId)\r\n\t\t\t.reverse()\r\n\t}, [gen.minVersion, gen.maxVersion])\r\n\r\n\tuseTitle(locale('title.generator', locale(`generator.${gen.id}`)), allowedVersions)\r\n\r\n\tif (!checkVersion(version, gen.minVersion, gen.maxVersion)) {\r\n\t\tconst lower = !checkVersion(version, gen.minVersion)\r\n\t\tconst proposedVersion = (lower ? gen.minVersion : gen.maxVersion) as VersionId\r\n\t\treturn <main>\r\n\t\t\t<ErrorPanel error={locale(`generator.error_${lower ? 'min' : 'max'}_version`, proposedVersion)} reportable={false}>\r\n\t\t\t\t<div class=\"error-actions\">\r\n\t\t\t\t\t<div class=\"error-action\" onClick={() => changeVersion(proposedVersion)}>\r\n\t\t\t\t\t\t{locale('generator.switch_version', proposedVersion)} {Octicon.arrow_right}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"error-action\" onClick={() => route('/generators')}>\r\n\t\t\t\t\t\t{locale('generator.browse_available', version)} {Octicon.arrow_right}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorPanel>\r\n\t\t</main>\r\n\t}\r\n\treturn <SchemaGenerator gen={gen} allowedVersions={allowedVersions} />\r\n}\r\n","import { Footer, GeneratorList } from '../components/index.js'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\n\r\ninterface Props {\r\n\tpath?: string\r\n}\r\nexport function Generators({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.generators'))\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container\">\r\n\t\t\t<GeneratorList predicate={gen => !gen.tags?.includes('partners')} />\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import config from '../Config.js'\r\nimport { Footer } from '../components/Footer.jsx'\r\nimport { Octicon } from '../components/Octicon.jsx'\r\nimport { useTitle } from '../contexts/Title.jsx'\r\n\r\ninterface Props {\r\n\tpath?: string\r\n\tid?: string\r\n}\r\nexport function Guide({ id }: Props) {\r\n\tconst guide = config.legacyGuides.find(g => g.id === id)\r\n\tuseTitle(guide?.title)\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container\">\r\n\t\t\t<a class=\"tool-card minecraft-wiki\" href={`https://minecraft.wiki/w/${guide?.link}`} target=\"_blank\">\r\n\t\t\t\t<img src=\"https://minecraft.wiki/images/Wiki@2x.png\" alt=\"Minecraft Wiki Logo\" />\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h3><span>This guide has moved to the <em>Minecraft Wiki</em></span> {Octicon.link_external}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import { Footer, Octicon } from '../components/index.js'\r\nimport config from '../Config.js'\r\nimport { useLocale } from '../contexts/Locale.jsx'\r\nimport { useTitle } from '../contexts/Title.jsx'\r\n\r\ninterface Props {\r\n\tpath?: string\r\n}\r\nexport function Guides({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.guides'))\r\n\r\n\tconst guides = config.legacyGuides\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container guides\">\r\n\t\t\t<div class=\"tool-card minecraft-wiki\">\r\n\t\t\t\t<img src=\"https://minecraft.wiki/images/Wiki@2x.png\" alt=\"Minecraft Wiki Logo\" />\r\n\t\t\t\t<div>\r\n\t\t\t\t\tThe guides have moved to the <em>Minecraft Wiki</em>!\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"card-column pt-4\">\r\n\t\t\t\t{guides.map(g => <a class=\"tool-card\" href={`https://minecraft.wiki/w/${g?.link}`} target=\"_blank\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3>{g.title} {Octicon.link_external}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a>)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import { useLocale } from '../../contexts/Locale.jsx'\r\nimport type { WhatsNewItem } from '../../services/DataFetcher.js'\r\n\r\ninterface Props {\r\n\titem: WhatsNewItem,\r\n\tshort?: boolean,\r\n}\r\nexport function WhatsNewTime({ item, short }: Props) {\r\n\tconst { locale } = useLocale()\r\n\treturn <time dateTime={item.createdAt} title={Intl.DateTimeFormat(undefined, { dateStyle: 'full', timeStyle: 'long' }).format(new Date(item.createdAt))}>\r\n\t\t{(!short || item.seenAt !== undefined) && Intl.DateTimeFormat(undefined, { day: 'numeric',month: 'long', year: 'numeric' }).format(new Date(item.createdAt))}\r\n\t\t{item.seenAt === undefined && <span class=\"new-badge\">{locale('whats_new.new')}</span>}\r\n\t</time>\r\n}\r\n","import { useMemo } from 'preact/hooks'\r\nimport contributors from '../../contributors.json'\r\nimport { Card, ChangelogEntry, Footer, GeneratorCard, Giscus, Octicon, ToolCard, ToolGroup } from '../components/index.js'\r\nimport { WhatsNewTime } from '../components/whatsnew/WhatsNewTime.jsx'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { useMediaQuery } from '../hooks/useMediaQuery.js'\r\nimport { fetchChangelogs, fetchVersions, fetchWhatsNew } from '../services/DataFetcher.js'\r\nimport { Store } from '../Store.js'\r\nimport { shuffle } from '../Utils.js'\r\n\r\nconst MIN_FAVORITES = 2\r\nconst MAX_FAVORITES = 5\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Home({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.home'))\r\n\r\n\tconst smallScreen = useMediaQuery('(max-width: 580px)')\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container\">\r\n\t\t\t<div class=\"card-group\">\r\n\t\t\t\t{smallScreen ? /* mobile */ <>\r\n\t\t\t\t\t<PopularGenerators />\r\n\t\t\t\t\t<FavoriteGenerators />\r\n\t\t\t\t\t<Spyglass />\r\n\t\t\t\t\t<WhatsNew />\r\n\t\t\t\t\t<Changelog />\r\n\t\t\t\t\t<Versions />\r\n\t\t\t\t\t<Tools />\r\n\t\t\t\t</> : /* desktop */ <>\r\n\t\t\t\t\t<div class=\"card-column\">\r\n\t\t\t\t\t\t<PopularGenerators />\r\n\t\t\t\t\t\t<Changelog />\r\n\t\t\t\t\t\t<Versions />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!smallScreen && <div class=\"card-column\">\r\n\t\t\t\t\t\t<FavoriteGenerators />\r\n\t\t\t\t\t\t<Spyglass />\r\n\t\t\t\t\t\t<WhatsNew />\r\n\t\t\t\t\t\t<Tools />\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t</>}\r\n\t\t\t</div>\r\n\t\t\t<Contributors />\r\n\t\t\t<Giscus />\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t</main>\r\n}\r\n\r\nfunction PopularGenerators() {\r\n\tconst { locale } = useLocale()\r\n\treturn <ToolGroup title={locale('generators.popular')} link=\"/generators/\">\r\n\t\t<GeneratorCard minimal id=\"minejago.power\" />\r\n\t\t<GeneratorCard minimal id=\"minejago.mod_recipe\" />\r\n\t\t<GeneratorCard minimal id=\"minejago.focus_modifier_blockstate\" />\r\n\t\t<GeneratorCard minimal id=\"sherdsapi.sherd\" />\r\n\t\t<ToolCard title={locale('generators.partners')} link=\"/partners/\" titleIcon=\"arrow_right\" />\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction FavoriteGenerators() {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst favorites = useMemo(() => {\r\n\t\tconst history: string[] = []\r\n\t\tfor (const id of Store.getGeneratorHistory().reverse()) {\r\n\t\t\tif (!history.includes(id)) {\r\n\t\t\t\thistory.push(id)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn history.slice(0, MAX_FAVORITES)\r\n\t}, [])\r\n\r\n\tif (favorites.length < MIN_FAVORITES) return <></>\r\n\r\n\treturn <ToolGroup title={locale('generators.recent')}>\r\n\t\t{favorites.map(f => <GeneratorCard minimal id={f} />)}\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction Spyglass() {\r\n\treturn <a class=\"tool-group tool-card p-[10px] no-underline\" href=\"https://marketplace.visualstudio.com/items?itemName=SPGoding.datapack-language-server\" target=\"_blank\">\r\n\t\t<div class=\"flex items-center\">\r\n\t\t\t<img src=\"/images/spyglass.png\" alt=\"Spyglass Logo\" width=\"42\" height=\"42\" />\r\n\t\t\t<h3 class=\"ml-2 text-[1.17em]\">\r\n\t\t\t\tDatapack Helper Plus\r\n\t\t\t\t{Octicon.arrow_right}\r\n\t\t\t</h3>\r\n\t\t</div>\r\n\t\t<p class=\"mt-2\">VSCode extension with heavy language features, updated to Minecraft 1.21</p>\r\n\t</a>\r\n}\r\n\r\nfunction Tools() {\r\n\tconst { locale } = useLocale()\r\n\r\n\treturn <ToolGroup title={locale('tools')}>\r\n\t\t<ToolCard title=\"Customized Worlds\" icon=\"customized\"\r\n\t\t\tlink=\"/customized/\"\r\n\t\t\tdesc=\"Create data packs to customize your world\" />\r\n\t\t<ToolCard title=\"Report Inspector\" icon=\"report\"\r\n\t\t\tlink=\"https://misode.github.io/report/\"\r\n\t\t\tdesc=\"Analyse your performance reports\" />\r\n\t\t<ToolCard title=\"Minecraft Sounds\" icon=\"sounds\"\r\n\t\t\tlink=\"/sounds/\"\r\n\t\t\tdesc=\"Browse through and mix all the vanilla sounds\" />\r\n\t\t<ToolCard title=\"Transformation preview\"\r\n\t\t\tlink=\"/transformation/\"\r\n\t\t\tdesc=\"Visualize transformations for display entities\" />\r\n\t\t<ToolCard title=\"Data Pack Upgrader\"\r\n\t\t\tlink=\"https://misode.github.io/upgrader/\"\r\n\t\t\tdesc=\"Convert your data packs from 1.16 to 1.20\" />\r\n\t\t<ToolCard title=\"Template Placer\"\r\n\t\t\tlink=\"https://misode.github.io/template-placer/\"\r\n\t\t\tdesc=\"Automatically place all the structure pieces in your world\" />\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction Versions() {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst { value: versions } = useAsync(fetchVersions, [])\r\n\tconst release = useMemo(() => versions?.find(v => v.type === 'release'), [versions])\r\n\r\n\treturn <ToolGroup title={locale('versions.minecraft_versions')} link=\"/versions/\" titleIcon=\"arrow_right\">\r\n\t\t{(versions?.[0] && release) && <>\r\n\t\t\t{versions[0].id !== release.id && (\r\n\t\t\t\t<ToolCard title={versions[0].name} link={`/versions/?id=${versions[0].id}`} desc={locale('versions.latest_snapshot')} />\r\n\t\t\t)}\r\n\t\t\t<ToolCard title={release.name} link={`/versions/?id=${release.id}`} desc={locale('versions.latest_release')} />\r\n\t\t</>}\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction Changelog() {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst hugeScreen = useMediaQuery('(min-width: 960px)')\r\n\r\n\tconst { value: changes } = useAsync(fetchChangelogs, [])\r\n\tconst latestChanges = useMemo(() => changes?.sort((a, b) => b.order - a.order).slice(0, 2), [changes])\r\n\r\n\treturn <ToolGroup title={locale('changelog')} link=\"/changelog/\" titleIcon=\"git_commit\">\r\n\t\t{latestChanges?.map(change => <ChangelogEntry minimal={!hugeScreen} short={true} change={change} />)}\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction WhatsNew() {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst { value: items } = useAsync(fetchWhatsNew)\r\n\r\n\treturn <ToolGroup title={locale('whats_new')} link=\"/whats-new/\" titleIcon=\"megaphone\">\r\n\t\t{items?.slice(0, 3).map(item => <Card link=\"/whats-new/\" overlay={<WhatsNewTime item={item} short={true} />}>{item.title}</Card>)}\r\n\t</ToolGroup>\r\n}\r\n\r\nfunction Contributors() {\r\n\tconst supporters = useMemo(() => {\r\n\t\treturn contributors.filter(c => c.types.includes('support') || c.types.includes('infrastructure'))\r\n\t}, [])\r\n\r\n\tconst otherContributors = useMemo(() => {\r\n\t\treturn shuffle(contributors.filter(c => !supporters.includes(c)))\r\n\t}, [])\r\n\r\n\treturn <div class=\"contributors\">\r\n\t\t<h3>Supporters</h3>\r\n\t\t<ContributorsList list={supporters} large />\r\n\t\t<h3>Contributors</h3>\r\n\t\t<ContributorsList list={otherContributors} />\r\n\t</div>\r\n}\r\n\r\ninterface ContributorsListProps {\r\n\tlist: typeof contributors\r\n\tlarge?: boolean\r\n}\r\nfunction ContributorsList({ list, large }: ContributorsListProps) {\r\n\tconst { locale } = useLocale()\r\n\r\n\treturn <div class={`contributors-list ${large ? 'contributors-large' : ''}`}>\r\n\t\t{list.map((c) =>\r\n\t\t\t<a class=\"tooltipped tip-se\" href={c.url} target=\"_blank\" aria-label={`${c.name}\\n${c.types.map(t => ` ${locale('contributor.' + t)}`).join('\\n')}`}>\r\n\t\t\t\t<img width={large ? 48 : 32} height={large ? 48 : 32} src={c.avatar} alt={c.name} loading=\"lazy\" />\r\n\t\t\t</a>\r\n\t\t)}\r\n\t</div>\r\n}\r\n","import { route } from 'preact-router'\r\n\r\ninterface Props {\r\n\tpath: string\r\n}\r\nexport function LegacyPartners({ path }: Props) {\r\n\troute(path.replace('/partners/', '/'))\r\n\r\n\treturn null\r\n}\r\n","import { Footer, GeneratorList } from '../components/index.js'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\n\r\ninterface Props {\r\n\tpath?: string\r\n}\r\nexport function Partners({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.partners'))\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container\">\r\n\t\t\t<GeneratorList predicate={gen => gen.tags?.includes('partners')} />\r\n\t\t</div>\r\n\t\t<Footer donate={false} />\r\n\t</main>\r\n}\r\n","import type { Howl, HowlOptions } from 'howler'\r\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { Btn, ErrorPanel, Footer, SoundConfig, TextInput, VersionSwitcher } from '../components/index.js'\r\nimport { useLocale, useTitle, useVersion } from '../contexts/index.js'\r\nimport { useAsync } from '../hooks/index.js'\r\nimport { fetchSounds } from '../services/index.js'\r\nimport { hexId } from '../Utils.js'\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Sounds({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tconst { version, changeVersion } = useVersion()\r\n\tuseTitle(locale('title.sounds'))\r\n\r\n\tconst [howler, setHowler] = useState<undefined | ((options: HowlOptions) => Howl)>(undefined)\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst howler = await import('howler')\r\n\t\t\tsetHowler(() => (options: HowlOptions) => new howler.Howl(options))\r\n\t\t})()\r\n\t}, [])\r\n\r\n\tconst { value: sounds, error } = useAsync(async () => {\r\n\t\treturn await fetchSounds(version)\r\n\t}, [version])\r\n\tconst soundKeys = useMemo(() => Object.keys(sounds ?? {}), [sounds])\r\n\r\n\tconst [search, setSearch] = useState('')\r\n\tconst [configs, setConfigs] = useState<SoundConfig[]>([])\r\n\tconst addConfig = () => {\r\n\t\tsetConfigs([{ id: hexId(), sound: search, delay: 0, pitch: 1, volume: 1 }, ...configs])\r\n\t}\r\n\tconst editConfig = (id: string) => (changes: Partial<SoundConfig>) => {\r\n\t\tsetConfigs(configs.map(c => c.id === id ? { ...c, ...changes } : c))\r\n\t}\r\n\tconst deleteConfig = (id: string) => () => {\r\n\t\tsetConfigs(configs.filter(c => c.id !== id))\r\n\t}\r\n\r\n\tconst [delayedPlay, setDelayedPlay] = useState(0)\r\n\tconst playAll = () => {\r\n\t\tsetDelayedPlay(delayedPlay + 1)\r\n\t}\r\n\r\n\tconst download = useRef<HTMLAnchorElement>(null)\r\n\tconst downloadFunction = () => {\r\n\t\tif (!download.current) return\r\n\t\tconst hasDelay = configs.some(c => c.delay > 0)\r\n\t\tconst content = configs\r\n\t\t\t.sort((a, b) => a.delay - b.delay)\r\n\t\t\t.map(c => `${hasDelay ? `execute if score @s delay matches ${c.delay} run ` : ''}playsound minecraft:${c.sound} master @s ~ ~ ~ ${c.volume} ${c.pitch}`)\r\n\t\t\t.join('\\n')\r\n\t\tdownload.current.setAttribute('href', 'data:text/plain;charset=utf-8,' + content + '%0A')\r\n\t\tdownload.current.setAttribute('download', 'sounds.mcfunction')\r\n\t\tdownload.current.click()\r\n\t}\r\n\r\n\treturn <main>\r\n\t\t{error && <ErrorPanel error={error} />}\r\n\t\t{soundKeys.length > 0 && <>\r\n\t\t\t<div class=\"sounds-controls\">\r\n\t\t\t\t<div class=\"sound-search-group\">\r\n\t\t\t\t\t<TextInput class=\"btn btn-input sound-search\" list=\"sound-list\" placeholder={locale('sounds.search')}\r\n\t\t\t\t\t\tvalue={search} onChange={setSearch} onEnter={addConfig} />\r\n\t\t\t\t\t<Btn icon=\"plus\" tooltip={locale('sounds.add_sound')} class=\"add-sound\" onClick={addConfig} />\r\n\t\t\t\t</div>\r\n\t\t\t\t{configs.length > 1 && <Btn icon=\"play\" label={ locale('sounds.play_all')} class=\"play-all-sounds\" onClick={playAll} />}\r\n\t\t\t\t<div class=\"spacer\"></div>\r\n\t\t\t\t<Btn icon=\"download\" label={locale('download')} tooltip={locale('sounds.download_function')} tooltipLoc=\"se\" class=\"download-sounds\" onClick={downloadFunction} />\r\n\t\t\t\t<VersionSwitcher value={version} onChange={changeVersion} />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"sounds\">\r\n\t\t\t\t{sounds && howler && configs.map(c =>\r\n\t\t\t\t\t<SoundConfig key={c.id} {...c} {...{ howler, sounds, delayedPlay }} onEdit={editConfig(c.id)} onDelete={deleteConfig(c.id)} />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<a ref={download} style=\"display: none;\"></a>\r\n\t\t\t<datalist id=\"sound-list\">\r\n\t\t\t\t{soundKeys.map(s => <option key={s} value={s} />)}\r\n\t\t\t</datalist>\r\n\t\t</>}\r\n\t\t<Footer donate={false} />\r\n\t</main>\r\n}\r\n","import { Matrix3, Matrix4, Mesh, Quad, Renderer, ShaderProgram, Vector, Vertex } from 'deepslate'\r\nimport { mat4, quat, vec3 } from 'gl-matrix'\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks'\r\nimport { composeMatrix, svdDecompose } from '../Utils.js'\r\nimport { Footer, NumberInput, Octicon, RangeInput } from '../components/index.js'\r\nimport { InteractiveCanvas3D } from '../components/previews/InteractiveCanvas3D.jsx'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\nimport { useActiveTimeout } from '../hooks/useActiveTimout.js'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { loadImage } from '../services/DataFetcher.js'\r\n\r\nconst XYZ = ['x', 'y', 'z'] as const\r\ntype XYZ = typeof XYZ[number]\r\n\r\nconst XYZW = ['x', 'y', 'z', 'w'] as const\r\n\r\nconst RotationModes = ['quaternion', 'axis_angle'] as const\r\ntype RotationMode = typeof RotationModes[number]\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Transformation({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.transformation'))\r\n\r\n\tconst { value: cubeTexture } = useAsync(async () => {\r\n\t\tconst img = await loadImage('/images/cube.png')\r\n\t\tconst canvas = document.createElement('canvas')\r\n\t\tcanvas.width = 64\r\n\t\tcanvas.height = 64\r\n\t\tconst ctx = canvas.getContext('2d')!\r\n\t\tctx.drawImage(img, 0, 0)\r\n\t\tconst data = ctx.getImageData(0, 0, 64, 64)\r\n\t\treturn data\r\n\t})\r\n\r\n\tconst [matrix, setMatrix] = useState(new Matrix4())\r\n\tconst [translation, setTranslation] = useState(new Vector(0, 0, 0))\r\n\tconst [leftRotation, setLeftRotation] = useState(quat.create())\r\n\tconst [scale, setScale] = useState(new Vector(1, 1, 1))\r\n\tconst [rightRotation, setRightRotation] = useState(quat.create())\r\n\r\n\tconst [normalizeLeft, setNormalizeLeft] = useState(true)\r\n\tconst [normalizeRight, setNormalizeRight] = useState(true)\r\n\r\n\tconst usedMatrix = useMemo(() => {\r\n\t\treturn composeMatrix(translation, leftRotation, scale, rightRotation)\r\n\t}, [translation, leftRotation, scale, rightRotation])\r\n\r\n\tconst updateMatrix = useCallback((m: Matrix4) => {\r\n\t\tconst affine = m.clone().affine()\r\n\t\tconst newTranslation = affine.getTranslation()\r\n\t\tconst [newLeftRotation, newScale, newRightRotation] = svdDecompose(Matrix3.fromMatrix4(affine))\r\n\t\tsetTranslation(newTranslation)\r\n\t\tsetLeftRotation(newLeftRotation)\r\n\t\tsetScale(newScale)\r\n\t\tsetRightRotation(newRightRotation)\r\n\t\tsetMatrix(m)\r\n\t}, [])\r\n\r\n\tconst changeMatrix = useCallback((i: number, value: number) => {\r\n\t\tconst m = matrix.clone()\r\n\t\tm.data[i] = value\r\n\t\tupdateMatrix(m)\r\n\t}, [matrix])\r\n\r\n\tconst updateTranslation = useCallback((value: Vector) => {\r\n\t\tsetTranslation(value)\r\n\t\tsetMatrix(composeMatrix(value, leftRotation, scale, rightRotation))\r\n\t}, [leftRotation, scale, rightRotation])\r\n\r\n\tconst changeTranslation = useCallback((c: XYZ, v: number) => {\r\n\t\tupdateTranslation(new Vector(c === 'x' ? v : translation.x, c === 'y' ? v : translation.y, c === 'z' ? v : translation.z))\r\n\t}, [translation, updateTranslation])\r\n\r\n\tconst updateLeftRotation = useCallback((value: quat) => {\r\n\t\tsetLeftRotation(value)\r\n\t\tsetMatrix(composeMatrix(translation, value, scale, rightRotation))\r\n\t}, [translation, scale, rightRotation])\r\n\r\n\tconst changeLeftRotation = useCallback((i: number, value: number) => {\r\n\t\tconst copy = quat.clone(leftRotation)\r\n\t\tcopy[i] = value\r\n\t\tif (normalizeLeft) quat.normalize(copy, copy)\r\n\t\tupdateLeftRotation(copy)\r\n\t}, [leftRotation, normalizeLeft, updateLeftRotation])\r\n\r\n\tconst updateScale = useCallback((value: Vector) => {\r\n\t\tsetScale(value)\r\n\t\tsetMatrix(composeMatrix(translation, leftRotation, value, rightRotation))\r\n\t}, [translation, leftRotation, rightRotation])\r\n\r\n\tconst changeScale = useCallback((c: XYZ, v: number) => {\r\n\t\tupdateScale(new Vector(c === 'x' ? v : scale.x, c === 'y' ? v : scale.y, c === 'z' ? v : scale.z))\r\n\t}, [scale, updateScale])\r\n\r\n\tconst updateRightRotation = useCallback((value: quat) => {\r\n\t\tsetRightRotation(value)\r\n\t\tsetMatrix(composeMatrix(translation, leftRotation, scale, value))\r\n\t}, [translation, leftRotation, scale])\r\n\r\n\tconst changeRightRotation = useCallback((i: number, value: number) => {\r\n\t\tconst copy = quat.clone(rightRotation)\r\n\t\tcopy[i] = value\r\n\t\tif (normalizeRight) quat.normalize(copy, copy)\r\n\t\tupdateRightRotation(copy)\r\n\t}, [rightRotation, normalizeRight, updateRightRotation])\r\n\r\n\tconst [rotationMode, setRotationMode] = useState<RotationMode>('quaternion')\r\n\r\n\tconst leftRotationAxisAngle = useMemo(() => {\r\n\t\tconst axis = vec3.create()\r\n\t\tconst angle = quat.getAxisAngle(axis, leftRotation)\r\n\t\treturn { axis, angle }\r\n\t}, [leftRotation])\r\n\r\n\tconst changeLeftRotationAxisAngle = useCallback((i: number, value: number) => {\r\n\t\tconst axisCopy = vec3.clone(leftRotationAxisAngle.axis)\r\n\t\tif (i < 3) axisCopy[i] = value\r\n\t\telse leftRotationAxisAngle.angle = value\r\n\t\tif (normalizeLeft) vec3.normalize(axisCopy, axisCopy)\r\n\t\tconst copy = quat.setAxisAngle(quat.create(), axisCopy, leftRotationAxisAngle.angle)\r\n\t\tif (normalizeLeft) quat.normalize(copy, copy)\r\n\t\tupdateLeftRotation(copy)\r\n\t}, [leftRotation, normalizeLeft, updateLeftRotation])\r\n\r\n\tconst rightRotationAxisAngle = useMemo(() => {\r\n\t\tconst axis = vec3.create()\r\n\t\tconst angle = quat.getAxisAngle(axis, rightRotation)\r\n\t\treturn { axis, angle }\r\n\t}, [rightRotation])\r\n\r\n\tconst changeRightRotationAxisAngle = useCallback((i: number, value: number) => {\r\n\t\tconst axisCopy = vec3.clone(rightRotationAxisAngle.axis)\r\n\t\tif (i < 3) axisCopy[i] = value\r\n\t\telse rightRotationAxisAngle.angle = value\r\n\t\tif (normalizeRight) vec3.normalize(axisCopy, axisCopy)\r\n\t\tconst copy = quat.setAxisAngle(quat.create(), axisCopy, rightRotationAxisAngle.angle)\r\n\t\tif (normalizeRight) quat.normalize(copy, copy)\r\n\t\tupdateRightRotation(copy)\r\n\t}, [rightRotation, normalizeRight, updateRightRotation])\r\n\r\n\tconst renderer = useRef<MeshRenderer>()\r\n\tconst onSetup = useCallback((canvas: HTMLCanvasElement) => {\r\n\t\tif (!cubeTexture) return\r\n\t\tconst gl = canvas.getContext('webgl')\r\n\t\tif (!gl) return\r\n\t\trenderer.current = new MeshRenderer(gl, cubeTexture)\r\n\t}, [cubeTexture])\r\n\tconst onResize = useCallback((width: number, height: number) => {\r\n\t\trenderer.current?.setViewport(0, 0, width, height)\r\n\t}, [cubeTexture])\r\n\tconst onDraw = useCallback((view: mat4) => {\r\n\t\trenderer.current?.draw(view, usedMatrix.data)\r\n\t}, [usedMatrix])\r\n\r\n\tconst [copiedDecomposed, setCopiedDecomposed] = useActiveTimeout()\r\n\tconst onCopyDecomposed = useCallback(() => {\r\n\t\tnavigator.clipboard.writeText(`{translation:[${translation.components().map(formatFloat).join(',')}],left_rotation:[${[...leftRotation].map(formatFloat).join(',')}],scale:[${scale.components().map(formatFloat).join(',')}],right_rotation:[${[...rightRotation].map(formatFloat).join(',')}]}`)\r\n\t\t\t.then(() => setCopiedDecomposed())\r\n\t}, [translation, leftRotation, scale, rightRotation, setCopiedDecomposed])\r\n\r\n\tconst [copiedComposed, setCopiedComposed] = useActiveTimeout()\r\n\tconst onCopyComposed = useCallback(() => {\r\n\t\tconst matrixData = matrix.clone().transpose().data\r\n\t\tnavigator.clipboard.writeText(`[${[...matrixData].map(formatFloat).join(',')}]`)\r\n\t\t\t.then(() => setCopiedComposed())\r\n\t}, [matrix, setCopiedComposed])\r\n\r\n\treturn <main class=\"has-preview\">\r\n\t\t<div class=\"transformation-editor\">\r\n\t\t\t<div class=\"transformation-decomposition\">\r\n\t\t\t\t<div class=\"transformation-section\">\r\n\t\t\t\t\t<div class=\"transformation-title\">\r\n\t\t\t\t\t\t<span>{locale('transformation.translation')}</span>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('reset')} onClick={() => updateTranslation(new Vector(0, 0, 0))}>{Octicon['history']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('transformation.copy_decomposed')} onClick={onCopyDecomposed}>{Octicon[copiedDecomposed ? 'check' : 'clippy']}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{XYZ.map((c) =>\r\n\t\t\t\t\t\t<Slider label={c} value={translation[c]} onChange={v => changeTranslation(c, v)} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"transformation-section\">\r\n\t\t\t\t\t<div class=\"transformation-title\">\r\n\t\t\t\t\t\t<span>{locale('transformation.left_rotation')}</span>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('reset')} onClick={() => updateLeftRotation(quat.create())}>{Octicon['history']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('normalize')} onClick={() => setNormalizeLeft(!normalizeLeft)}>{Octicon[normalizeLeft ? 'lock' : 'unlock']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('transformation.rotation_mode', locale(`transformation.rotation_mode.${rotationMode}`))} onClick={() => setRotationMode(rotationMode === 'quaternion' ? 'axis_angle' : 'quaternion')}>{Octicon['arrow_switch']}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{rotationMode === 'quaternion'\r\n\t\t\t\t\t\t? XYZW.map((c, i) =>\r\n\t\t\t\t\t\t\t<Slider label={c} value={leftRotation[i]} onChange={v => changeLeftRotation(i, v)} />)\r\n\t\t\t\t\t\t: <>\r\n\t\t\t\t\t\t\t{XYZ.map((c, i) =>\r\n\t\t\t\t\t\t\t\t<Slider label={c} value={leftRotationAxisAngle.axis[i]} onChange={v => changeLeftRotationAxisAngle(i, v)} />)}\r\n\t\t\t\t\t\t\t<Slider label=\"\" value={leftRotationAxisAngle.angle} min={0} max={Math.PI*2} onChange={v => changeLeftRotationAxisAngle(3, v)} />\r\n\t\t\t\t\t\t</>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"transformation-section\">\r\n\t\t\t\t\t<div class=\"transformation-title\">\r\n\t\t\t\t\t\t<span>{locale('transformation.scale')}</span>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('reset')} onClick={() => updateScale(new Vector(1, 1, 1))}>{Octicon['history']}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{XYZ.map((c) =>\r\n\t\t\t\t\t\t<Slider label={c} value={scale[c]} onChange={v => changeScale(c, v)} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"transformation-section\">\r\n\t\t\t\t\t<div class=\"transformation-title\">\r\n\t\t\t\t\t\t<span>{locale('transformation.right_rotation')}</span>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('reset')} onClick={() => updateRightRotation(quat.create())}>{Octicon['history']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('normalize')} onClick={() => setNormalizeRight(!normalizeRight)}>{Octicon[normalizeRight ? 'lock' : 'unlock']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('transformation.rotation_mode', locale(`transformation.rotation_mode.${rotationMode}`))} onClick={() => setRotationMode(rotationMode === 'quaternion' ? 'axis_angle' : 'quaternion')}>{Octicon['arrow_switch']}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{rotationMode === 'quaternion'\r\n\t\t\t\t\t\t? XYZW.map((c, i) =>\r\n\t\t\t\t\t\t\t<Slider label={c} value={rightRotation[i]} onChange={v => changeRightRotation(i, v)} />)\r\n\t\t\t\t\t\t: <>\r\n\t\t\t\t\t\t\t{XYZ.map((c, i) =>\r\n\t\t\t\t\t\t\t\t<Slider label={c} value={rightRotationAxisAngle.axis[i]} onChange={v => changeRightRotationAxisAngle(i, v)}/>)}\r\n\t\t\t\t\t\t\t<Slider label=\"\" value={rightRotationAxisAngle.angle} min={0} max={Math.PI*2} onChange={v => changeRightRotationAxisAngle(3, v)} />\r\n\t\t\t\t\t\t</>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"transformation-matrix\">\r\n\t\t\t\t<div class=\"transformation-section\">\r\n\t\t\t\t\t<div class=\"transformation-title\">\r\n\t\t\t\t\t\t<span>{locale('transformation.matrix')}</span>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('reset')} onClick={() => updateMatrix(new Matrix4())}>{Octicon['history']}</button>\r\n\t\t\t\t\t\t<button class=\"tooltipped tip-se\" aria-label={locale('transformation.copy_composed')} onClick={onCopyComposed}>{Octicon[copiedComposed ? 'check' : 'clippy']}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{Array(16).fill(0).map((_, i) =>\r\n\t\t\t\t\t\t<Slider value={matrix.data[i]} onChange={v => changeMatrix(i, v)} disabled={i % 4 === 3} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"popup-preview shown\">\r\n\t\t\t<div class=\"transformation-preview full-preview\">\r\n\t\t\t\t<InteractiveCanvas3D onSetup={onSetup} onResize={onResize} onDraw={onDraw} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n\r\ninterface SliderProps {\r\n\tlabel?: string\r\n\tvalue: number\r\n\tonChange?: (value: number) => void\r\n\tmin?: number\r\n\tmax?: number\r\n\tdisabled?: boolean\r\n}\r\nfunction Slider({ label, value, onChange, min, max, disabled }: SliderProps) {\r\n\treturn <div class=\"transformation-input\">\r\n\t\t{label && <label>{label}</label>}\r\n\t\t<NumberInput value={value.toFixed(3)} onChange={onChange} disabled={disabled} readonly={disabled} />\r\n\t\t<RangeInput min={min ?? -1} max={max ?? 1} step={0.01} value={value} onChange={onChange} disabled={disabled} readonly={disabled} />\r\n\t</div>\r\n}\r\n\r\nfunction formatFloat(x: number) {\r\n\treturn x.toFixed(3).replace(/\\.?0+$/, '') + 'f'\r\n}\r\n\r\nconst vsMesh = `\r\n  attribute vec4 vertPos;\r\n  attribute vec2 texCoord;\r\n  attribute vec3 normal;\r\n\r\n  uniform mat4 mView;\r\n  uniform mat4 mProj;\r\n\r\n  varying highp vec2 vTexCoord;\r\n  varying highp float vLighting;\r\n\r\n  void main(void) {\r\n    gl_Position = mProj * mView * vertPos;\r\n    vTexCoord = texCoord;\r\n    vLighting = normal.y * 0.2 + abs(normal.z) * 0.1 + 0.8;\r\n  }\r\n`\r\n\r\nconst fsMesh = `\r\n  precision highp float;\r\n  varying highp vec2 vTexCoord;\r\n  varying highp float vLighting;\r\n\r\n  uniform sampler2D sampler;\r\n\r\n  void main(void) {\r\n\t\tvec4 texColor = texture2D(sampler, vTexCoord);\r\n\t\tgl_FragColor = vec4(texColor.xyz * vLighting, 1.0);\r\n  }\r\n`\r\n\r\nconst vsGrid = `\r\n  attribute vec4 vertPos;\r\n  attribute vec3 vertColor;\r\n\r\n  uniform mat4 mView;\r\n  uniform mat4 mProj;\r\n\r\n  varying highp vec3 vColor;\r\n\r\n  void main(void) {\r\n    gl_Position = mProj * mView * vertPos;\r\n    vColor = vertColor;\r\n  }\r\n`\r\n\r\nconst fsGrid = `\r\n  precision highp float;\r\n  varying highp vec3 vColor;\r\n\r\n  void main(void) {\r\n    gl_FragColor = vec4(vColor, 1.0);\r\n  }\r\n`\r\n\r\nclass MeshRenderer extends Renderer {\r\n\tprivate readonly meshShaderProgram: WebGLProgram\r\n\tprivate readonly gridShaderProgram: WebGLProgram\r\n\tprivate readonly cubeTexture: WebGLTexture\r\n\tprivate readonly mesh: Mesh\r\n\tprivate readonly grid: Mesh\r\n\r\n\tconstructor(gl: WebGLRenderingContext, cubeTexture: ImageData) {\r\n\t\tsuper(gl)\r\n\t\tthis.meshShaderProgram = new ShaderProgram(gl, vsMesh, fsMesh).getProgram()\r\n\t\tthis.gridShaderProgram = new ShaderProgram(gl, vsGrid, fsGrid).getProgram()\r\n\r\n\t\tthis.cubeTexture = this.createAtlasTexture(cubeTexture)\r\n\r\n\t\tthis.mesh = new Mesh([\r\n\t\t\tnew Quad( // E\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 0), [0, 0, 0], [0.25, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 0), [0, 0, 0], [0.25, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 1), [0, 0, 0], [0.00, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 1), [0, 0, 0], [0.00, 0.50], undefined, undefined)),\r\n\t\t\tnew Quad( // W\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 1), [0, 0, 0], [0.75, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 1), [0, 0, 0], [0.75, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 0), [0, 0, 0], [0.50, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 0), [0, 0, 0], [0.50, 0.50], undefined, undefined)),\r\n\t\t\tnew Quad( // U\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 1), [0, 0, 0], [0.25, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 1), [0, 0, 0], [0.50, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 0), [0, 0, 0], [0.50, 0.00], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 0), [0, 0, 0], [0.25, 0.00], undefined, undefined)),\r\n\t\t\tnew Quad( // D\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 0), [0, 0, 0], [0.50, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 0), [0, 0, 0], [0.75, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 1), [0, 0, 0], [0.75, 0.00], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 1), [0, 0, 0], [0.50, 0.00], undefined, undefined)),\r\n\t\t\tnew Quad( // S\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 1), [0, 0, 0], [0.25, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 1), [0, 0, 0], [0.50, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 1), [0, 0, 0], [0.50, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 1), [0, 0, 0], [0.25, 0.25], undefined, undefined)),\r\n\t\t\tnew Quad( // N\r\n\t\t\t\tnew Vertex(new Vector(0, 1, 0), [0, 0, 0], [0.75, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 1, 0), [0, 0, 0], [1.00, 0.50], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(1, 0, 0), [0, 0, 0], [1.00, 0.25], undefined, undefined),\r\n\t\t\t\tnew Vertex(new Vector(0, 0, 0), [0, 0, 0], [0.75, 0.25], undefined, undefined)),\r\n\t\t])\r\n\t\tfor (const q of this.mesh.quads) {\r\n\t\t\tconst normal = q.normal()\r\n\t\t\tq.forEach(v => v.normal = normal)\r\n\t\t}\r\n\t\tthis.mesh.rebuild(this.gl, { pos: true, texture: true, normal: true })\r\n\r\n\t\tthis.grid = new Mesh()\r\n\t\tthis.grid.addLine(0, 0, 0, 1, 0, 0, [1, 0, 0])\r\n\t\tthis.grid.addLine(0, 0, 0, 0, 1, 0, [0, 1, 0])\r\n\t\tthis.grid.addLine(0, 0, 0, 0, 0, 1, [0, 0, 1])\r\n\t\tthis.grid.rebuild(this.gl, { pos: true, color: true })\r\n\t}\r\n\r\n\tpublic draw(view: mat4, transform: mat4) {\r\n\t\tthis.setShader(this.gridShaderProgram)\r\n\t\tthis.prepareDraw(view)\r\n\t\tthis.drawMesh(this.grid, { pos: true, color: true })\r\n\r\n\t\tconst copy = mat4.clone(view)\r\n\t\tmat4.multiply(copy, copy, transform)\r\n\t\tthis.setShader(this.meshShaderProgram)\r\n\t\tthis.setTexture(this.cubeTexture)\r\n\t\tthis.prepareDraw(copy)\r\n\t\tthis.drawMesh(this.mesh, { pos: true, texture: true, normal: true })\r\n\t}\r\n}\r\n","import { BtnLink, ErrorPanel, Footer, VersionDetail, VersionList } from '../components/index.js'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\nimport { useAsync, useSearchParam } from '../hooks/index.js'\r\nimport type { VersionMeta } from '../services/index.js'\r\nimport { fetchVersions } from '../services/index.js'\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function Versions({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\r\n\tconst { value: versions, error } = useAsync(fetchVersions, [])\r\n\r\n\tconst [selectedId] = useSearchParam('id')\r\n\tconst selected = (versions ?? []).find(v => v.id === selectedId)\r\n\t\r\n\tconst [tab] = useSearchParam('tab')\r\n\r\n\tuseTitle(\r\n\t\tselected ? `Minecraft ${selected.name}` : 'Versions Explorer',\r\n\t\tselected ? [] : undefined,\r\n\t\tselected ? 'Changes and metadata' : undefined)\r\n\r\n\tconst nextVersion = selected && getOffsetVersion(versions ?? [], selected, -1)\r\n\tconst previousVersion = selected && getOffsetVersion(versions ?? [], selected, 1)\r\n\r\n\treturn <main>\r\n\t\t{error && <ErrorPanel error={error} />}\r\n\t\t{selectedId ? <div class=\"p-4\">\r\n\t\t\t<div class=\"navigation\">\r\n\t\t\t\t<BtnLink link=\"/versions/\" icon=\"three_bars\" label={locale('versions.all')} />\r\n\t\t\t\t<BtnLink link={previousVersion ? `/versions/?id=${previousVersion.id}${tab ? `&tab=${tab}` : ''}` : undefined}\r\n\t\t\t\t\ticon=\"arrow_left\" label={locale('versions.previous')} />\r\n\t\t\t\t<BtnLink link={nextVersion ? `/versions/?id=${nextVersion.id}${tab ? `&tab=${tab}` : ''}` : undefined} \r\n\t\t\t\t\ticon=\"arrow_right\" label={locale('versions.next')} swapped />\r\n\t\t\t</div>\r\n\t\t\t<VersionDetail id={selectedId} version={selected} />\r\n\t\t</div> : <div class=\"legacy-container\">\r\n\t\t\t<VersionList versions={versions} link={id => `/versions/?id=${id}`} navigation={(\r\n\t\t\t\t<BtnLink link=\"/changelog\" icon=\"git_commit\" label={locale('versions.changelog')} />\r\n\t\t\t)} />\r\n\t\t</div>}\r\n\t\t<Footer donate={false} />\r\n\t</main>\r\n}\r\n\r\nfunction getOffsetVersion(versions: VersionMeta[], current: VersionMeta, offset: number) {\r\n\tconst currentIndex = versions.findIndex(v => v.id === current.id)\r\n\tconst offsetIndex = currentIndex + offset\r\n\tif (offsetIndex < 0 || offsetIndex >= versions.length) {\r\n\t\treturn undefined\r\n\t}\r\n\treturn versions[offsetIndex]\r\n}\r\n","import { marked } from 'marked'\r\nimport type { WhatsNewItem } from '../../services/DataFetcher.js'\r\nimport { WhatsNewTime } from './WhatsNewTime.jsx'\r\n\r\ninterface EntryProps {\r\n\titem: WhatsNewItem,\r\n}\r\nexport function WhatsNewEntry({ item }: EntryProps) {\r\n\treturn <article class=\"whats-new-entry\">\r\n\t\t<a href={item.url} target=\"_blank\">\r\n\t\t\t<WhatsNewTime item={item} />\r\n\t\t\t<h2 class=\"font-bold text-[27px]\">{item.title}</h2>\r\n\t\t</a>\r\n\t\t<div class=\"markdown-content\" dangerouslySetInnerHTML={{ __html: marked(item.body) }} />\r\n\t</article>\r\n}\r\n","import { useEffect } from 'preact/hooks'\r\nimport { Store } from '../Store.js'\r\nimport { ErrorPanel, Footer } from '../components/index.js'\r\nimport { WhatsNewEntry } from '../components/whatsnew/WhatsNewEntry.jsx'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\nimport { useActiveTimeout } from '../hooks/useActiveTimout.js'\r\nimport { useAsync } from '../hooks/useAsync.js'\r\nimport { fetchWhatsNew } from '../services/DataFetcher.js'\r\n\r\ninterface Props {\r\n\tpath?: string,\r\n}\r\nexport function WhatsNew({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.whats_new'))\r\n\r\n\tconst { value: items, error } = useAsync(fetchWhatsNew)\r\n\r\n\tconst [storeTime, startStoreTime] = useActiveTimeout()\r\n\tuseEffect(() => {\r\n\t\tif (items !== undefined) {\r\n\t\t\tstartStoreTime()\r\n\t\t}\r\n\t}, [items])\r\n\tuseEffect(() => {\r\n\t\tif (items !== undefined && storeTime) {\r\n\t\t\tStore.seeWhatsNew(items.map(i => i.id))\r\n\t\t}\r\n\t}, [items, storeTime])\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container whats-new\">\r\n\t\t\t<p>{locale('whats_new.description')}</p>\r\n\t\t\t{error && <ErrorPanel error={error} />}\r\n\t\t\t{items?.map(item => <WhatsNewEntry item={item} />)}\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import { Footer, GeneratorCard, GeneratorList, ToolGroup } from '../components/index.js'\r\nimport { useLocale, useTitle } from '../contexts/index.js'\r\n\r\ninterface Props {\r\n\tpath?: string\r\n}\r\nexport function Worldgen({}: Props) {\r\n\tconst { locale } = useLocale()\r\n\tuseTitle(locale('title.worldgen'))\r\n\r\n\treturn <main>\r\n\t\t<div class=\"legacy-container worldgen\">\r\n\t\t\t<div class=\"card-group\">\r\n\t\t\t\t<ToolGroup title={locale('generators.popular')}>\r\n\t\t\t\t\t<GeneratorCard minimal id=\"dimension\" />\r\n\t\t\t\t\t<GeneratorCard minimal id=\"worldgen/biome\" />\r\n\t\t\t\t\t<GeneratorCard minimal id=\"worldgen/noise_settings\" />\r\n\t\t\t\t\t<GeneratorCard minimal id=\"worldgen/configured_feature\" />\r\n\t\t\t\t\t<GeneratorCard minimal id=\"worldgen/placed_feature\" />\r\n\t\t\t\t</ToolGroup>\r\n\t\t\t\t<ToolGroup title={locale('guides')} link=\"/guides/\" titleIcon=\"arrow_right\">\r\n\t\t\t\t\t<a class=\"tool-card minecraft-wiki\" href=\"/guides/\">\r\n\t\t\t\t\t\t<img src=\"https://minecraft.wiki/images/Wiki@2x.png\" alt=\"Minecraft Wiki Logo\" />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tThe guides have moved to the <em>Minecraft Wiki</em>!\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</ToolGroup>\r\n\t\t\t</div>\r\n\t\t\t<GeneratorList predicate={gen => gen.tags?.includes('worldgen')} />\r\n\t\t</div>\r\n\t\t<Footer />\r\n\t</main>\r\n}\r\n","import type { RouterOnChangeArgs } from 'preact-router'\r\nimport { Router } from 'preact-router'\r\nimport '../styles/global.css'\r\nimport '../styles/nodes.css'\r\nimport { Analytics } from './Analytics.js'\r\nimport { cleanUrl } from './Utils.js'\r\nimport { Header } from './components/index.js'\r\nimport { Changelog, Customized, Generator, Generators, Guide, Guides, Home, LegacyPartners, Partners, Sounds, Transformation, Versions, WhatsNew, Worldgen } from './pages/index.js'\r\n\r\nexport function App() {\r\n\tconst changeRoute = (e: RouterOnChangeArgs) => {\r\n\t\twindow.dispatchEvent(new CustomEvent('replacestate'))\r\n\t\t// Needs a timeout to ensure the title is set correctly\r\n\t\tsetTimeout(() => Analytics.pageview(cleanUrl(e.url)))\r\n\t}\r\n\r\n\treturn <>\r\n\t\t<Header />\r\n\t\t<Router onChange={changeRoute}>\r\n\t\t\t<Home path=\"/\" />\r\n\t\t\t<Generators path=\"/generators\" />\r\n\t\t\t<Worldgen path=\"/worldgen\" />\r\n\t\t\t<Partners path=\"/partners\" />\r\n\t\t\t<LegacyPartners path=\"/partners/:id\" />\r\n\t\t\t<Sounds path=\"/sounds\" />\r\n\t\t\t<Changelog path=\"/changelog\" />\r\n\t\t\t<Versions path=\"/versions\" />\r\n\t\t\t<Transformation path=\"/transformation\" />\r\n\t\t\t<Customized path=\"/customized\" />\r\n\t\t\t<WhatsNew path=\"/whats-new\" />\r\n\t\t\t<Guides path=\"/guides\" />\r\n\t\t\t<Guide path=\"/guides/:id\" />\r\n\t\t\t<Generator default />\r\n\t\t</Router>\r\n\t</>\r\n}\r\n","import { render } from 'preact'\r\nimport '../styles/global.css'\r\nimport '../styles/main.css'\r\nimport '../styles/nodes.css'\r\nimport { App } from './App.js'\r\nimport { LocaleProvider, ProjectProvider, StoreProvider, ThemeProvider, TitleProvider, VersionProvider } from './contexts/index.js'\r\n\r\nfunction Main() {\r\n\treturn (\r\n\t\t<StoreProvider>\r\n\t\t\t<LocaleProvider>\r\n\t\t\t\t<ThemeProvider>\r\n\t\t\t\t\t<VersionProvider>\r\n\t\t\t\t\t\t<TitleProvider>\r\n\t\t\t\t\t\t\t<ProjectProvider>\r\n\t\t\t\t\t\t\t\t<App />\r\n\t\t\t\t\t\t\t</ProjectProvider>\r\n\t\t\t\t\t\t</TitleProvider>\r\n\t\t\t\t\t</VersionProvider>\r\n\t\t\t\t</ThemeProvider>\r\n\t\t\t</LocaleProvider>\r\n\t\t</StoreProvider>\r\n\t)\r\n}\r\n\r\nrender(<Main />, document.body)\r\n"],"file":"assets/index.a6ea7667.js"}